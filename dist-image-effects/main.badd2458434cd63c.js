(self.webpackChunkimage_manipulation=self.webpackChunkimage_manipulation||[]).push([[179],{435:(cs,ht,$i)=>{"use strict";function S(i){return"function"==typeof i}function oo(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const so=oo(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Ki(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class mt{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const o of e)o.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(S(n))try{n()}catch(o){t=o instanceof so?o.errors:[o]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const o of r)try{m(o)}catch(s){t=null!=t?t:[],s instanceof so?t=[...t,...s.errors]:t.push(s)}}if(t)throw new so(t)}}add(t){var e;if(t&&t!==this)if(this.closed)m(t);else{if(t instanceof mt){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Ki(e,t)}remove(t){const{_finalizers:e}=this;e&&Ki(e,t),t instanceof mt&&t._removeParent(this)}}mt.EMPTY=(()=>{const i=new mt;return i.closed=!0,i})();const pr=mt.EMPTY;function C(i){return i instanceof mt||i&&"closed"in i&&S(i.remove)&&S(i.add)&&S(i.unsubscribe)}function m(i){S(i)?i():i.unsubscribe()}const v={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},g={setTimeout(i,t,...e){const{delegate:n}=g;return(null==n?void 0:n.setTimeout)?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=g;return((null==t?void 0:t.clearTimeout)||clearTimeout)(i)},delegate:void 0};function d(i){g.setTimeout(()=>{const{onUnhandledError:t}=v;if(!t)throw i;t(i)})}function h(){}const c=u("C",void 0,void 0);function u(i,t,e){return{kind:i,value:t,error:e}}let y=null;function x(i){if(v.useDeprecatedSynchronousErrorHandling){const t=!y;if(t&&(y={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=y;if(y=null,e)throw n}}else i()}class E extends mt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,C(t)&&t.add(this)):this.destination=Le}static create(t,e,n){return new Q(t,e,n)}next(t){this.isStopped?Ee(function _(i){return u("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Ee(function f(i){return u("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ee(c,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const L=Function.prototype.bind;function H(i,t){return L.call(i,t)}class U{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){de(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){de(n)}else de(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){de(e)}}}class Q extends E{constructor(t,e,n){let r;if(super(),S(t)||!t)r={next:null!=t?t:void 0,error:null!=e?e:void 0,complete:null!=n?n:void 0};else{let o;this&&v.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&H(t.next,o),error:t.error&&H(t.error,o),complete:t.complete&&H(t.complete,o)}):r=t}this.destination=new U(r)}}function de(i){v.useDeprecatedSynchronousErrorHandling?function T(i){v.useDeprecatedSynchronousErrorHandling&&y&&(y.errorThrown=!0,y.error=i)}(i):d(i)}function Ee(i,t){const{onStoppedNotification:e}=v;e&&g.setTimeout(()=>e(i,t))}const Le={closed:!0,next:h,error:function we(i){throw i},complete:h},He="function"==typeof Symbol&&Symbol.observable||"@@observable";function ke(i){return i}let Me=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const o=function X(i){return i&&i instanceof E||function z(i){return i&&S(i.next)&&S(i.error)&&S(i.complete)}(i)&&C(i)}(e)?e:new Q(e,n,r);return x(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=qe(n))((r,o)=>{const s=new Q({next:a=>{try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[He](){return this}pipe(...e){return function Ge(i){return 0===i.length?ke:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}(e)(this)}toPromise(e){return new(e=qe(e))((n,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>n(o))})}}return i.create=t=>new i(t),i})();function qe(i){var t;return null!==(t=null!=i?i:v.Promise)&&void 0!==t?t:Promise}const $=oo(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let W=(()=>{class i extends Me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new le(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new $}next(e){x(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){x(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){x(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:o}=this;return n||r?pr:(this.currentObservers=null,o.push(e),new mt(()=>{this.currentObservers=null,Ki(o,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:o}=this;n?e.error(r):o&&e.complete()}asObservable(){const e=new Me;return e.source=this,e}}return i.create=(t,e)=>new le(t,e),i})();class le extends W{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:pr}}function j(i){return t=>{if(function Y(i){return S(null==i?void 0:i.lift)}(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function K(i,t,e,n,r){return new ie(i,t,e,n,r)}class ie extends E{constructor(t,e,n,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function ae(i,t){return j((e,n)=>{let r=0;e.subscribe(K(n,o=>{n.next(i.call(t,o,r++))}))})}function pe(i,t,e,n){return new(e||(e=Promise))(function(o,s){function a(b){try{p(n.next(b))}catch(w){s(w)}}function l(b){try{p(n.throw(b))}catch(w){s(w)}}function p(b){b.done?o(b.value):function r(o){return o instanceof e?o:new e(function(s){s(o)})}(b.value).then(a,l)}p((n=n.apply(i,t||[])).next())})}function Dt(i){return this instanceof Dt?(this.v=i,this):new Dt(i)}function rn(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(A){n[A]&&(r[A]=function(P){return new Promise(function(V,q){o.push([A,P,V,q])>1||a(A,P)})})}function a(A,P){try{!function l(A){A.value instanceof Dt?Promise.resolve(A.value.v).then(p,b):w(o[0][2],A)}(n[A](P))}catch(V){w(o[0][3],V)}}function p(A){a("next",A)}function b(A){a("throw",A)}function w(A,P){A(P),o.shift(),o.length&&a(o[0][0],o[0][1])}}function ti(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function pt(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=i[o]&&function(s){return new Promise(function(a,l){!function r(o,s,a,l){Promise.resolve(l).then(function(p){o({value:p,done:a})},s)}(a,l,(s=i[o](s)).done,s.value)})}}}const kl=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function Eb(i){return S(null==i?void 0:i.then)}function kb(i){return S(i[He])}function Ab(i){return Symbol.asyncIterator&&S(null==i?void 0:i[Symbol.asyncIterator])}function Ib(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Pb=function Xk(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Rb(i){return S(null==i?void 0:i[Pb])}function Ob(i){return rn(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield Dt(e.read());if(r)return yield Dt(void 0);yield yield Dt(n)}}finally{e.releaseLock()}})}function Fb(i){return S(null==i?void 0:i.getReader)}function ki(i){if(i instanceof Me)return i;if(null!=i){if(kb(i))return function $k(i){return new Me(t=>{const e=i[He]();if(S(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(kl(i))return function Kk(i){return new Me(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(Eb(i))return function Qk(i){return new Me(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,d)})}(i);if(Ab(i))return Lb(i);if(Rb(i))return function Zk(i){return new Me(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(Fb(i))return function Jk(i){return Lb(Ob(i))}(i)}throw Ib(i)}function Lb(i){return new Me(t=>{(function eA(i,t){var e,n,r,o;return pe(this,void 0,void 0,function*(){try{for(e=ti(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function lo(i,t,e,n=0,r=!1){const o=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(o),!r)return o}function ea(i,t,e=1/0){return S(t)?ea((n,r)=>ae((o,s)=>t(n,o,r,s))(ki(i(n,r))),e):("number"==typeof t&&(e=t),j((n,r)=>function tA(i,t,e,n,r,o,s,a){const l=[];let p=0,b=0,w=!1;const A=()=>{w&&!l.length&&!p&&t.complete()},P=q=>p<n?V(q):l.push(q),V=q=>{o&&t.next(q),p++;let Z=!1;ki(e(q,b++)).subscribe(K(t,re=>{null==r||r(re),o?P(re):t.next(re)},()=>{Z=!0},void 0,()=>{if(Z)try{for(p--;l.length&&p<n;){const re=l.shift();s?lo(t,s,()=>V(re)):V(re)}A()}catch(re){t.error(re)}}))};return i.subscribe(K(t,P,()=>{w=!0,A()})),()=>{null==a||a()}}(n,r,i,e)))}function Nb(i=1/0){return ea(ke,i)}const Al=new Me(i=>i.complete());function Bb(i){return i&&S(i.schedule)}function Nf(i){return i[i.length-1]}function Vb(i){return S(Nf(i))?i.pop():void 0}function Il(i){return Bb(Nf(i))?i.pop():void 0}function Hb(i,t=0){return j((e,n)=>{e.subscribe(K(n,r=>lo(n,i,()=>n.next(r),t),()=>lo(n,i,()=>n.complete(),t),r=>lo(n,i,()=>n.error(r),t)))})}function jb(i,t=0){return j((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function zb(i,t){if(!i)throw new Error("Iterable cannot be null");return new Me(e=>{lo(e,t,()=>{const n=i[Symbol.asyncIterator]();lo(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function ds(i,t){return t?function cA(i,t){if(null!=i){if(kb(i))return function rA(i,t){return ki(i).pipe(jb(t),Hb(t))}(i,t);if(kl(i))return function sA(i,t){return new Me(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(Eb(i))return function oA(i,t){return ki(i).pipe(jb(t),Hb(t))}(i,t);if(Ab(i))return zb(i,t);if(Rb(i))return function aA(i,t){return new Me(e=>{let n;return lo(e,t,()=>{n=i[Pb](),lo(e,t,()=>{let r,o;try{({value:r,done:o}=n.next())}catch(s){return void e.error(s)}o?e.complete():e.next(r)},0,!0)}),()=>S(null==n?void 0:n.return)&&n.return()})}(i,t);if(Fb(i))return function lA(i,t){return zb(Ob(i),t)}(i,t)}throw Ib(i)}(i,t):ki(i)}function Yn(...i){const t=Il(i),e=function iA(i,t){return"number"==typeof Nf(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?ki(n[0]):Nb(e)(ds(n,t)):Al}function Wb(i={}){const{connector:t=(()=>new W),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return o=>{let s,a,l,p=0,b=!1,w=!1;const A=()=>{null==a||a.unsubscribe(),a=void 0},P=()=>{A(),s=l=void 0,b=w=!1},V=()=>{const q=s;P(),null==q||q.unsubscribe()};return j((q,Z)=>{p++,!w&&!b&&A();const re=l=null!=l?l:t();Z.add(()=>{p--,0===p&&!w&&!b&&(a=Bf(V,r))}),re.subscribe(Z),!s&&p>0&&(s=new Q({next:J=>re.next(J),error:J=>{w=!0,A(),a=Bf(P,e,J),re.error(J)},complete:()=>{b=!0,A(),a=Bf(P,n),re.complete()}}),ki(q).subscribe(s))})(o)}}function Bf(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new Q({next:()=>{n.unsubscribe(),i()}});return t(...e).subscribe(n)}function en(i){for(let t in i)if(i[t]===en)return t;throw Error("Could not find renamed property on target object.")}function Vf(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function Qt(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Qt).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Hf(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const dA=en({__forward_ref__:en});function Gt(i){return i.__forward_ref__=Gt,i.toString=function(){return Qt(this())},i}function Tt(i){return Gb(i)?i():i}function Gb(i){return"function"==typeof i&&i.hasOwnProperty(dA)&&i.__forward_ref__===Gt}class Ue extends Error{constructor(t,e){super(function jf(i,t){return`NG0${Math.abs(i)}${t?": "+t:""}`}(t,e)),this.code=t}}function vt(i){return"string"==typeof i?i:null==i?"":String(i)}function mi(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():vt(i)}function wd(i,t){const e=t?` in ${t}`:"";throw new Ue(-201,`No provider for ${mi(i)} found${e}`)}function Ni(i,t){null==i&&function dn(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function Ae(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Ye(i){return{providers:i.providers||[],imports:i.imports||[]}}function zf(i){return Ub(i,Dd)||Ub(i,qb)}function Ub(i,t){return i.hasOwnProperty(t)?i[t]:null}function Yb(i){return i&&(i.hasOwnProperty(Wf)||i.hasOwnProperty(_A))?i[Wf]:null}const Dd=en({\u0275prov:en}),Wf=en({\u0275inj:en}),qb=en({ngInjectableDef:en}),_A=en({ngInjectorDef:en});var bt=(()=>((bt=bt||{})[bt.Default=0]="Default",bt[bt.Host=1]="Host",bt[bt.Self=2]="Self",bt[bt.SkipSelf=4]="SkipSelf",bt[bt.Optional=8]="Optional",bt))();let Gf;function Eo(i){const t=Gf;return Gf=i,t}function Xb(i,t,e){const n=zf(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&bt.Optional?null:void 0!==t?t:void wd(Qt(i),"Injector")}function ko(i){return{toString:i}.toString()}var gr=(()=>((gr=gr||{})[gr.OnPush=0]="OnPush",gr[gr.Default=1]="Default",gr))(),_r=(()=>{return(i=_r||(_r={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",_r;var i})();const bA="undefined"!=typeof globalThis&&globalThis,yA="undefined"!=typeof window&&window,CA="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Jt=bA||"undefined"!=typeof global&&global||yA||CA,ta={},tn=[],Sd=en({\u0275cmp:en}),Uf=en({\u0275dir:en}),Yf=en({\u0275pipe:en}),$b=en({\u0275mod:en}),uo=en({\u0275fac:en}),Pl=en({__NG_ELEMENT_ID__:en});let xA=0;function st(i){return ko(()=>{const e={},n={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===gr.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||tn,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||_r.Emulated,id:"c",styles:i.styles||tn,_:null,setInput:null,schemas:i.schemas||null,tView:null},r=i.directives,o=i.features,s=i.pipes;return n.id+=xA++,n.inputs=ey(i.inputs,e),n.outputs=ey(i.outputs),o&&o.forEach(a=>a(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Qb):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(Zb):null,n})}function Qb(i){return si(i)||function Ao(i){return i[Uf]||null}(i)}function Zb(i){return function us(i){return i[Yf]||null}(i)}const Jb={};function Xe(i){return ko(()=>{const t={type:i.type,bootstrap:i.bootstrap||tn,declarations:i.declarations||tn,imports:i.imports||tn,exports:i.exports||tn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(Jb[i.id]=i.type),t})}function ey(i,t){if(null==i)return ta;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],o=r;Array.isArray(r)&&(o=r[1],r=r[0]),e[r]=n,t&&(t[r]=o)}return e}const fe=st;function qn(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function si(i){return i[Sd]||null}function Qi(i,t){const e=i[$b]||null;if(!e&&!0===t)throw new Error(`Type ${Qt(i)} does not have '\u0275mod' property.`);return e}function Vr(i){return Array.isArray(i)&&"object"==typeof i[1]}function br(i){return Array.isArray(i)&&!0===i[1]}function $f(i){return 0!=(8&i.flags)}function kd(i){return 2==(2&i.flags)}function Ad(i){return 1==(1&i.flags)}function yr(i){return null!==i.template}function TA(i){return 0!=(512&i[2])}function ms(i,t){return i.hasOwnProperty(uo)?i[uo]:null}class AA{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function fn(){return ny}function ny(i){return i.type.prototype.ngOnChanges&&(i.setInput=PA),IA}function IA(){const i=ry(this),t=null==i?void 0:i.current;if(t){const e=i.previous;if(e===ta)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function PA(i,t,e,n){const r=ry(i)||function RA(i,t){return i[iy]=t}(i,{previous:ta,current:null}),o=r.current||(r.current={}),s=r.previous,a=this.declaredInputs[e],l=s[a];o[a]=new AA(l&&l.currentValue,t,s===ta),i[n]=t}fn.ngInherit=!0;const iy="__ngSimpleChanges__";function ry(i){return i[iy]||null}let ep;function tp(){return void 0!==ep?ep:"undefined"!=typeof document?document:void 0}function Dn(i){return!!i.listen}const oy={createRenderer:(i,t)=>tp()};function Hn(i){for(;Array.isArray(i);)i=i[0];return i}function Id(i,t){return Hn(t[i])}function er(i,t){return Hn(t[i.index])}function np(i,t){return i.data[t]}function sa(i,t){return i[t]}function Vi(i,t){const e=t[i];return Vr(e)?e:e[0]}function sy(i){return 4==(4&i[2])}function ip(i){return 128==(128&i[2])}function Io(i,t){return null==t?null:i[t]}function ay(i){i[18]=0}function rp(i,t){i[5]+=t;let e=i,n=i[3];for(;null!==n&&(1===t&&1===e[5]||-1===t&&0===e[5]);)n[5]+=t,e=n,n=n[3]}const gt={lFrame:my(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ly(){return gt.bindingsEnabled}function De(){return gt.lFrame.lView}function Yt(){return gt.lFrame.tView}function I(i){return gt.lFrame.contextLView=i,i[8]}function Xn(){let i=cy();for(;null!==i&&64===i.type;)i=i.parent;return i}function cy(){return gt.lFrame.currentTNode}function Hr(i,t){const e=gt.lFrame;e.currentTNode=i,e.isParent=t}function op(){return gt.lFrame.isParent}function sp(){gt.lFrame.isParent=!1}function Pd(){return gt.isInCheckNoChangesMode}function Rd(i){gt.isInCheckNoChangesMode=i}function gi(){const i=gt.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function aa(){return gt.lFrame.bindingIndex++}function fo(i){const t=gt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function KA(i,t){const e=gt.lFrame;e.bindingIndex=e.bindingRootIndex=i,ap(t)}function ap(i){gt.lFrame.currentDirectiveIndex=i}function lp(i){const t=gt.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}function hy(){return gt.lFrame.currentQueryIndex}function cp(i){gt.lFrame.currentQueryIndex=i}function ZA(i){const t=i[1];return 2===t.type?t.declTNode:1===t.type?i[6]:null}function fy(i,t,e){if(e&bt.SkipSelf){let r=t,o=i;for(;!(r=r.parent,null!==r||e&bt.Host||(r=ZA(o),null===r||(o=o[15],10&r.type))););if(null===r)return!1;t=r,i=o}const n=gt.lFrame=py();return n.currentTNode=t,n.lView=i,!0}function Od(i){const t=py(),e=i[1];gt.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function py(){const i=gt.lFrame,t=null===i?null:i.child;return null===t?my(i):t}function my(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function gy(){const i=gt.lFrame;return gt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const _y=gy;function Fd(){const i=gy();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function _i(){return gt.lFrame.selectedIndex}function Po(i){gt.lFrame.selectedIndex=i}function Sn(){const i=gt.lFrame;return np(i.tView,i.selectedIndex)}function Ro(){gt.lFrame.currentNamespace="svg"}function dp(){!function nI(){gt.lFrame.currentNamespace=null}()}function Ld(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const o=i.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:p,ngOnDestroy:b}=o;s&&(i.contentHooks||(i.contentHooks=[])).push(-e,s),a&&((i.contentHooks||(i.contentHooks=[])).push(e,a),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(e,a)),l&&(i.viewHooks||(i.viewHooks=[])).push(-e,l),p&&((i.viewHooks||(i.viewHooks=[])).push(e,p),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(e,p)),null!=b&&(i.destroyHooks||(i.destroyHooks=[])).push(e,b)}}function Nd(i,t,e){vy(i,t,3,e)}function Bd(i,t,e,n){(3&i[2])===e&&vy(i,t,e,n)}function up(i,t){let e=i[2];(3&e)===t&&(e&=2047,e+=1,i[2]=e)}function vy(i,t,e,n){const o=null!=n?n:-1,s=t.length-1;let a=0;for(let l=void 0!==n?65535&i[18]:0;l<s;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=n&&a>=n)break}else t[l]<0&&(i[18]+=65536),(a<o||-1==o)&&(oI(i,e,t,l),i[18]=(4294901760&i[18])+l+2),l++}function oI(i,t,e,n){const r=e[n]<0,o=e[n+1],a=i[r?-e[n]:e[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===t){i[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}class Nl{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Vd(i,t,e){const n=Dn(i);let r=0;for(;r<e.length;){const o=e[r];if("number"==typeof o){if(0!==o)break;r++;const s=e[r++],a=e[r++],l=e[r++];n?i.setAttribute(t,a,l,s):t.setAttributeNS(s,a,l)}else{const s=o,a=e[++r];fp(s)?n&&i.setProperty(t,s,a):n?i.setAttribute(t,s,a):t.setAttribute(s,a),r++}}return r}function by(i){return 3===i||4===i||6===i}function fp(i){return 64===i.charCodeAt(0)}function Hd(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||yy(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function yy(i,t,e,n,r){let o=0,s=i.length;if(-1===t)s=-1;else for(;o<i.length;){const a=i[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<i.length;){const a=i[o];if("number"==typeof a)break;if(a===e){if(null===n)return void(null!==r&&(i[o+1]=r));if(n===i[o+1])return void(i[o+2]=r)}o++,null!==n&&o++,null!==r&&o++}-1!==s&&(i.splice(s,0,t),o=s+1),i.splice(o++,0,e),null!==n&&i.splice(o++,0,n),null!==r&&i.splice(o++,0,r)}function Cy(i){return-1!==i}function la(i){return 32767&i}function ca(i,t){let e=function dI(i){return i>>16}(i),n=t;for(;e>0;)n=n[15],e--;return n}let pp=!0;function jd(i){const t=pp;return pp=i,t}let uI=0;function Vl(i,t){const e=gp(i,t);if(-1!==e)return e;const n=t[1];n.firstCreatePass&&(i.injectorIndex=t.length,mp(n.data,i),mp(t,null),mp(n.blueprint,null));const r=zd(i,t),o=i.injectorIndex;if(Cy(r)){const s=la(r),a=ca(r,t),l=a[1].data;for(let p=0;p<8;p++)t[o+p]=a[s+p]|l[s+p]}return t[o+8]=r,o}function mp(i,t){i.push(0,0,0,0,0,0,0,0,t)}function gp(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function zd(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){const o=r[1],s=o.type;if(n=2===s?o.declTNode:1===s?r[6]:null,null===n)return-1;if(e++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return-1}function Wd(i,t,e){!function hI(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(Pl)&&(n=e[Pl]),null==n&&(n=e[Pl]=uI++);const r=255&n;t.data[i+(r>>5)]|=1<<r}(i,t,e)}function Dy(i,t,e){if(e&bt.Optional)return i;wd(t,"NodeInjector")}function Sy(i,t,e,n){if(e&bt.Optional&&void 0===n&&(n=null),0==(e&(bt.Self|bt.Host))){const r=i[9],o=Eo(void 0);try{return r?r.get(t,n,e&bt.Optional):Xb(t,n,e&bt.Optional)}finally{Eo(o)}}return Dy(n,t,e)}function My(i,t,e,n=bt.Default,r){if(null!==i){const o=function gI(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(Pl)?i[Pl]:void 0;return"number"==typeof t?t>=0?255&t:pI:t}(e);if("function"==typeof o){if(!fy(t,i,n))return n&bt.Host?Dy(r,e,n):Sy(t,e,n,r);try{const s=o(n);if(null!=s||n&bt.Optional)return s;wd(e)}finally{_y()}}else if("number"==typeof o){let s=null,a=gp(i,t),l=-1,p=n&bt.Host?t[16][6]:null;for((-1===a||n&bt.SkipSelf)&&(l=-1===a?zd(i,t):t[a+8],-1!==l&&ky(n,!1)?(s=t[1],a=la(l),t=ca(l,t)):a=-1);-1!==a;){const b=t[1];if(Ey(o,a,b.data)){const w=mI(a,t,e,s,n,p);if(w!==Ty)return w}l=t[a+8],-1!==l&&ky(n,t[1].data[a+8]===p)&&Ey(o,a,t)?(s=b,a=la(l),t=ca(l,t)):a=-1}}}return Sy(t,e,n,r)}const Ty={};function pI(){return new da(Xn(),De())}function mI(i,t,e,n,r,o){const s=t[1],a=s.data[i+8],b=Gd(a,s,e,null==n?kd(a)&&pp:n!=s&&0!=(3&a.type),r&bt.Host&&o===a);return null!==b?Hl(t,s,b,a):Ty}function Gd(i,t,e,n,r){const o=i.providerIndexes,s=t.data,a=1048575&o,l=i.directiveStart,b=o>>20,A=r?a+b:i.directiveEnd;for(let P=n?a:a+b;P<A;P++){const V=s[P];if(P<l&&e===V||P>=l&&V.type===e)return P}if(r){const P=s[l];if(P&&yr(P)&&P.type===e)return l}return null}function Hl(i,t,e,n){let r=i[e];const o=t.data;if(function sI(i){return i instanceof Nl}(r)){const s=r;s.resolving&&function uA(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new Ue(-200,`Circular dependency in DI detected for ${i}${e}`)}(mi(o[e]));const a=jd(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Eo(s.injectImpl):null;fy(i,n,bt.Default);try{r=i[e]=s.factory(void 0,o,i,n),t.firstCreatePass&&e>=n.directiveStart&&function rI(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(n){const s=ny(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(i,s),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,s)}r&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-i,r),o&&((e.preOrderHooks||(e.preOrderHooks=[])).push(i,o),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(i,o))}(e,o[e],t)}finally{null!==l&&Eo(l),jd(a),s.resolving=!1,_y()}}return r}function Ey(i,t,e){return!!(e[t+(i>>5)]&1<<i)}function ky(i,t){return!(i&bt.Self||i&bt.Host&&t)}class da{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return My(this._tNode,this._lView,t,n,e)}}function It(i){return ko(()=>{const t=i.prototype.constructor,e=t[uo]||_p(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const o=r[uo]||_p(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function _p(i){return Gb(i)?()=>{const t=_p(Tt(i));return t&&t()}:ms(i)}function tr(i){return function fI(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const o=e[r];if(by(o))break;if(0===o)r+=2;else if("number"==typeof o)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(o===t)return e[r+1];r+=2}}}return null}(Xn(),i)}const ua="__annotations__",ha="__parameters__",fa="__prop__metadata__";function pa(i,t,e){return ko(()=>{const n=function vp(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...o){if(this instanceof r)return n.apply(this,o),this;const s=new r(...o);return a.annotation=s,a;function a(l,p,b){const w=l.hasOwnProperty(ha)?l[ha]:Object.defineProperty(l,ha,{value:[]})[ha];for(;w.length<=b;)w.push(null);return(w[b]=w[b]||[]).push(s),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class _e{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Ae({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const bp=Function;function zl(i){return"function"==typeof i}function nr(i,t){void 0===t&&(t=i);for(let e=0;e<i.length;e++){let n=i[e];Array.isArray(n)?(t===i&&(t=i.slice(0,e)),nr(n,t)):t!==i&&t.push(n)}return t}function jr(i,t){i.forEach(e=>Array.isArray(e)?jr(e,t):t(e))}function Iy(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function Ud(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function Wl(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function Hi(i,t,e){let n=ma(i,t);return n>=0?i[1|n]=e:(n=~n,function yI(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function yp(i,t){const e=ma(i,t);if(e>=0)return i[1|e]}function ma(i,t){return function Oy(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const o=n+(r-n>>1),s=i[o<<e];if(t===s)return o<<e;s>t?r=o:n=o+1}return~(r<<e)}(i,t,1)}const CI=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*(arguments|(?:[^()]+\(\[\],)?[^()]+\(arguments\).*)\)/,xI=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,wI=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,DI=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{[^}]*super\(\.\.\.arguments\)/;class Fy{constructor(t){this._reflect=t||Jt.Reflect}isReflectionEnabled(){return!0}factory(t){return(...e)=>new t(...e)}_zipTypesAndAnnotations(t,e){let n;n=Wl(void 0===t?e.length:t.length);for(let r=0;r<n.length;r++)n[r]=void 0===t?[]:t[r]&&t[r]!=Object?[t[r]]:[],e&&null!=e[r]&&(n[r]=n[r].concat(e[r]));return n}_ownParameters(t,e){if(function SI(i){return CI.test(i)||DI.test(i)||xI.test(i)&&!wI.test(i)}(t.toString()))return null;if(t.parameters&&t.parameters!==e.parameters)return t.parameters;const r=t.ctorParameters;if(r&&r!==e.ctorParameters){const a="function"==typeof r?r():r,l=a.map(b=>b&&b.type),p=a.map(b=>b&&Cp(b.decorators));return this._zipTypesAndAnnotations(l,p)}const o=t.hasOwnProperty(ha)&&t[ha],s=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",t);return s||o?this._zipTypesAndAnnotations(s,o):Wl(t.length)}parameters(t){if(!zl(t))return[];const e=Yd(t);let n=this._ownParameters(t,e);return!n&&e!==Object&&(n=this.parameters(e)),n||[]}_ownAnnotations(t,e){if(t.annotations&&t.annotations!==e.annotations){let n=t.annotations;return"function"==typeof n&&n.annotations&&(n=n.annotations),n}return t.decorators&&t.decorators!==e.decorators?Cp(t.decorators):t.hasOwnProperty(ua)?t[ua]:null}annotations(t){if(!zl(t))return[];const e=Yd(t),n=this._ownAnnotations(t,e)||[];return(e!==Object?this.annotations(e):[]).concat(n)}_ownPropMetadata(t,e){if(t.propMetadata&&t.propMetadata!==e.propMetadata){let n=t.propMetadata;return"function"==typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(t.propDecorators&&t.propDecorators!==e.propDecorators){const n=t.propDecorators,r={};return Object.keys(n).forEach(o=>{r[o]=Cp(n[o])}),r}return t.hasOwnProperty(fa)?t[fa]:null}propMetadata(t){if(!zl(t))return{};const e=Yd(t),n={};if(e!==Object){const o=this.propMetadata(e);Object.keys(o).forEach(s=>{n[s]=o[s]})}const r=this._ownPropMetadata(t,e);return r&&Object.keys(r).forEach(o=>{const s=[];n.hasOwnProperty(o)&&s.push(...n[o]),s.push(...r[o]),n[o]=s}),n}ownPropMetadata(t){return zl(t)&&this._ownPropMetadata(t,Yd(t))||{}}hasLifecycleHook(t,e){return t instanceof bp&&e in t.prototype}guards(t){return{}}getter(t){return new Function("o","return o."+t+";")}setter(t){return new Function("o","v","return o."+t+" = v;")}method(t){return new Function("o","args",`if (!o.${t}) throw new Error('"${t}" is undefined');\n        return o.${t}.apply(o, args);`)}importUri(t){return"object"==typeof t&&t.filePath?t.filePath:`./${Qt(t)}`}resourceUri(t){return`./${Qt(t)}`}resolveIdentifier(t,e,n,r){return r}resolveEnum(t,e){return t[e]}}function Cp(i){return i?i.map(t=>new(0,t.type.annotationCls)(...t.args?t.args:[])):[]}function Yd(i){const t=i.prototype?Object.getPrototypeOf(i.prototype):null;return(t?t.constructor:null)||Object}const Fo={},xp="__NG_DI_FLAG__",qd="ngTempTokenPath",TI=/\n/gm,Ly="__source",kI=en({provide:String,useValue:en});let Gl;function Ny(i){const t=Gl;return Gl=i,t}function AI(i,t=bt.Default){if(void 0===Gl)throw new Ue(203,"");return null===Gl?Xb(i,void 0,t):Gl.get(i,t&bt.Optional?null:void 0,t)}function ee(i,t=bt.Default){return(function vA(){return Gf}()||AI)(Tt(i),t)}const Ul=ee;function wp(i){const t=[];for(let e=0;e<i.length;e++){const n=Tt(i[e]);if(Array.isArray(n)){if(0===n.length)throw new Ue(900,"");let r,o=bt.Default;for(let s=0;s<n.length;s++){const a=n[s],l=II(a);"number"==typeof l?-1===l?r=a.token:o|=l:r=a}t.push(ee(r,o))}else t.push(ee(n))}return t}function Yl(i,t){return i[xp]=t,i.prototype[xp]=t,i}function II(i){return i[xp]}const Dp=Yl(pa("Inject",i=>({token:i})),-1),ir=Yl(pa("Optional"),8),Sp=Yl(pa("Self"),2),Cr=Yl(pa("SkipSelf"),4);let $d,Kd;function _a(i){var t;return(null===(t=function Tp(){if(void 0===$d&&($d=null,Jt.trustedTypes))try{$d=Jt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return $d}())||void 0===t?void 0:t.createHTML(i))||i}function zy(i){var t;return(null===(t=function Ep(){if(void 0===Kd&&(Kd=null,Jt.trustedTypes))try{Kd=Jt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Kd}())||void 0===t?void 0:t.createHTML(i))||i}class gs{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class GI extends gs{getTypeName(){return"HTML"}}class UI extends gs{getTypeName(){return"Style"}}class YI extends gs{getTypeName(){return"Script"}}class qI extends gs{getTypeName(){return"URL"}}class XI extends gs{getTypeName(){return"ResourceURL"}}function ji(i){return i instanceof gs?i.changingThisBreaksApplicationSecurity:i}function zr(i,t){const e=Uy(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}function Uy(i){return i instanceof gs&&i.getTypeName()||null}class e2{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(_a(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class t2{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const n=this.inertDocument.createElement("body");e.appendChild(n)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=_a(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=_a(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const s=e.item(r).name;("xmlns:ns1"===s||0===s.indexOf("ns1:"))&&t.removeAttribute(s)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const r2=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,o2=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Xl(i){return(i=String(i)).match(r2)||i.match(o2)?i:"unsafe:"+i}function Wr(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function $l(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const Xy=Wr("area,br,col,hr,img,wbr"),$y=Wr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ky=Wr("rp,rt"),kp=$l(Xy,$l($y,Wr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),$l(Ky,Wr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),$l(Ky,$y)),Ap=Wr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ip=Wr("srcset"),Qy=$l(Ap,Ip,Wr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Wr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),s2=Wr("script,style,template");class a2{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!kp.hasOwnProperty(e))return this.sanitizedSomething=!0,!s2.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const o=n.item(r),s=o.name,a=s.toLowerCase();if(!Qy.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;Ap[a]&&(l=Xl(l)),Ip[a]&&(i=l,l=(i=String(i)).split(",").map(t=>Xl(t.trim())).join(", ")),this.buf.push(" ",s,'="',Zy(l),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();kp.hasOwnProperty(e)&&!Xy.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Zy(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const l2=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c2=/([^\#-~ |!])/g;function Zy(i){return i.replace(/&/g,"&amp;").replace(l2,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(c2,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Qd;function Jy(i,t){let e=null;try{Qd=Qd||function Yy(i){const t=new t2(i);return function n2(){try{return!!(new window.DOMParser).parseFromString(_a(""),"text/html")}catch(i){return!1}}()?new e2(t):t}(i);let n=t?String(t):"";e=Qd.getInertBodyElement(n);let r=5,o=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=o,o=e.innerHTML,e=Qd.getInertBodyElement(n)}while(n!==o);return _a((new a2).sanitizeChildren(Pp(e)||e))}finally{if(e){const n=Pp(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function Pp(i){return"content"in i&&function d2(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var $t=(()=>(($t=$t||{})[$t.NONE=0]="NONE",$t[$t.HTML=1]="HTML",$t[$t.STYLE=2]="STYLE",$t[$t.SCRIPT=3]="SCRIPT",$t[$t.URL=4]="URL",$t[$t.RESOURCE_URL=5]="RESOURCE_URL",$t))();function Kl(i){const t=Ql();return t?zy(t.sanitize($t.HTML,i)||""):zr(i,"HTML")?zy(ji(i)):Jy(tp(),vt(i))}function Zd(i){const t=Ql();return t?t.sanitize($t.URL,i)||"":zr(i,"URL")?ji(i):Xl(vt(i))}function Ql(){const i=De();return i&&i[12]}const n0="__ngContext__";function li(i,t){i[n0]=t}function Op(i){const t=function Zl(i){return i[n0]||null}(i);return t?Array.isArray(t)?t:t.lView:null}const Fp="ngOriginalError";function Lp(i){return i[Fp]}function M2(i,...t){i.error(...t)}class Lo{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=function S2(i){return i&&i.ngErrorLogger||M2}(t);n(this._console,"ERROR",t),e&&n(this._console,"ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Lp(t);for(;e&&Lp(e);)e=Lp(e);return e||null}}const L2=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Jt))();function Np(i){return i.ownerDocument}function Gr(i){return i instanceof Function?i():i}var zi=(()=>((zi=zi||{})[zi.Important=1]="Important",zi[zi.DashCase=2]="DashCase",zi))();function Vp(i,t){return undefined(i,t)}function Jl(i){const t=i[3];return br(t)?t[3]:t}function Hp(i){return h0(i[13])}function jp(i){return h0(i[4])}function h0(i){for(;null!==i&&!br(i);)i=i[4];return i}function ba(i,t,e,n,r){if(null!=n){let o,s=!1;br(n)?o=n:Vr(n)&&(s=!0,n=n[0]);const a=Hn(n);0===i&&null!==e?null==r?v0(t,e,a):_s(t,e,a,r||null,!0):1===i&&null!==e?_s(t,e,a,r||null,!0):2===i?function S0(i,t,e){const n=Jd(i,t);n&&function $2(i,t,e,n){Dn(i)?i.removeChild(t,e,n):t.removeChild(e)}(i,n,t,e)}(t,a,s):3===i&&t.destroyNode(a),null!=o&&function Z2(i,t,e,n,r){const o=e[7];o!==Hn(e)&&ba(t,i,n,o,r);for(let a=10;a<e.length;a++){const l=e[a];ec(l[1],l,i,t,n,o)}}(t,i,o,e,r)}}function Wp(i,t,e){if(Dn(i))return i.createElement(t,e);{const n=null!==e?function NA(i){const t=i.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(e):null;return null===n?i.createElement(t):i.createElementNS(n,t)}}function p0(i,t){const e=i[9],n=e.indexOf(t),r=t[3];1024&t[2]&&(t[2]&=-1025,rp(r,-1)),e.splice(n,1)}function Gp(i,t){if(i.length<=10)return;const e=10+t,n=i[e];if(n){const r=n[17];null!==r&&r!==i&&p0(r,n),t>0&&(i[e-1][4]=n[4]);const o=Ud(i,10+t);!function j2(i,t){ec(i,t,t[11],2,null,null),t[0]=null,t[6]=null}(n[1],n);const s=o[19];null!==s&&s.detachView(o[1]),n[3]=null,n[4]=null,n[2]&=-129}return n}function m0(i,t){if(!(256&t[2])){const e=t[11];Dn(e)&&e.destroyNode&&ec(i,t,e,3,null,null),function G2(i){let t=i[13];if(!t)return Up(i[1],i);for(;t;){let e=null;if(Vr(t))e=t[13];else{const n=t[10];n&&(e=n)}if(!e){for(;t&&!t[4]&&t!==i;)Vr(t)&&Up(t[1],t),t=t[3];null===t&&(t=i),Vr(t)&&Up(t[1],t),e=t&&t[4]}t=e}}(t)}}function Up(i,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function X2(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof Nl)){const o=e[n+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=r[o[s]],l=o[s+1];try{l.call(a)}finally{}}else try{o.call(r)}finally{}}}}(i,t),function q2(i,t){const e=i.cleanup,n=t[7];let r=-1;if(null!==e)for(let o=0;o<e.length-1;o+=2)if("string"==typeof e[o]){const s=e[o+1],a="function"==typeof s?s(t):Hn(t[s]),l=n[r=e[o+2]],p=e[o+3];"boolean"==typeof p?a.removeEventListener(e[o],l,p):p>=0?n[r=p]():n[r=-p].unsubscribe(),o+=2}else{const s=n[r=e[o+1]];e[o].call(s)}if(null!==n){for(let o=r+1;o<n.length;o++)n[o]();t[7]=null}}(i,t),1===t[1].type&&Dn(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&br(t[3])){e!==t[3]&&p0(e,t);const n=t[19];null!==n&&n.detachView(i)}}}function g0(i,t,e){return function _0(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===_r.None||r===_r.Emulated)return null}return er(n,e)}(i,t.parent,e)}function _s(i,t,e,n,r){Dn(i)?i.insertBefore(t,e,n,r):t.insertBefore(e,n,r)}function v0(i,t,e){Dn(i)?i.appendChild(t,e):t.appendChild(e)}function b0(i,t,e,n,r){null!==n?_s(i,t,e,n,r):v0(i,t,e)}function Jd(i,t){return Dn(i)?i.parentNode(t):t.parentNode}function y0(i,t,e){return x0(i,t,e)}let x0=function C0(i,t,e){return 40&i.type?er(i,e):null};function eu(i,t,e,n){const r=g0(i,n,t),o=t[11],a=y0(n.parent||t[6],n,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)b0(o,r,e[l],a,!1);else b0(o,r,e,a,!1)}function tu(i,t){if(null!==t){const e=t.type;if(3&e)return er(t,i);if(4&e)return qp(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return tu(i,n);{const r=i[t.index];return br(r)?qp(-1,r):Hn(r)}}if(32&e)return Vp(t,i)()||Hn(i[t.index]);{const n=D0(i,t);return null!==n?Array.isArray(n)?n[0]:tu(Jl(i[16]),n):tu(i,t.next)}}return null}function D0(i,t){return null!==t?i[16][6].projection[t.projection]:null}function qp(i,t){const e=10+i+1;if(e<t.length){const n=t[e],r=n[1].firstChild;if(null!==r)return tu(n,r)}return t[7]}function Xp(i,t,e,n,r,o,s){for(;null!=e;){const a=n[e.index],l=e.type;if(s&&0===t&&(a&&li(Hn(a),n),e.flags|=4),64!=(64&e.flags))if(8&l)Xp(i,t,e.child,n,r,o,!1),ba(t,i,r,a,o);else if(32&l){const p=Vp(e,n);let b;for(;b=p();)ba(t,i,r,b,o);ba(t,i,r,a,o)}else 16&l?M0(i,t,n,e,r,o):ba(t,i,r,a,o);e=s?e.projectionNext:e.next}}function ec(i,t,e,n,r,o){Xp(e,n,i.firstChild,t,r,o,!1)}function M0(i,t,e,n,r,o){const s=e[16],l=s[6].projection[n.projection];if(Array.isArray(l))for(let p=0;p<l.length;p++)ba(t,i,r,l[p],o);else Xp(i,t,l,s[3],r,o,!0)}function T0(i,t,e){Dn(i)?i.setAttribute(t,"style",e):t.style.cssText=e}function $p(i,t,e){Dn(i)?""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e):t.className=e}function E0(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const o=t.length;if(r+o===n||i.charCodeAt(r+o)<=32)return r}e=r+1}}const k0="ng-template";function eP(i,t,e){let n=0;for(;n<i.length;){let r=i[n++];if(e&&"class"===r){if(r=i[n],-1!==E0(r.toLowerCase(),t,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===t)return!0;return!1}}return!1}function A0(i){return 4===i.type&&i.value!==k0}function tP(i,t,e){return t===(4!==i.type||e?i.value:k0)}function nP(i,t,e){let n=4;const r=i.attrs||[],o=function oP(i){for(let t=0;t<i.length;t++)if(by(i[t]))return t;return i.length}(r);let s=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!s)if(4&n){if(n=2|1&n,""!==l&&!tP(i,l,e)||""===l&&1===t.length){if(xr(n))return!1;s=!0}}else{const p=8&n?l:t[++a];if(8&n&&null!==i.attrs){if(!eP(i.attrs,p,e)){if(xr(n))return!1;s=!0}continue}const w=iP(8&n?"class":l,r,A0(i),e);if(-1===w){if(xr(n))return!1;s=!0;continue}if(""!==p){let A;A=w>o?"":r[w+1].toLowerCase();const P=8&n?A:null;if(P&&-1!==E0(P,p,0)||2&n&&p!==A){if(xr(n))return!1;s=!0}}}}else{if(!s&&!xr(n)&&!xr(l))return!1;if(s&&xr(l))continue;s=!1,n=l|1&n}}return xr(n)||s}function xr(i){return 0==(1&i)}function iP(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let o=!1;for(;r<t.length;){const s=t[r];if(s===i)return r;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===s)break;if(0===s){r+=4;continue}}r+=o?1:2}return-1}return function sP(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function I0(i,t,e=!1){for(let n=0;n<t.length;n++)if(nP(i,t[n],e))return!0;return!1}function aP(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function P0(i,t){return i?":not("+t.trim()+")":t}function lP(i){let t=i[0],e=1,n=2,r="",o=!1;for(;e<i.length;){let s=i[e];if("string"==typeof s)if(2&n){const a=i[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+s:4&n&&(r+=" "+s);else""!==r&&!xr(s)&&(t+=P0(o,r),r=""),n=s,o=o||!xr(n);e++}return""!==r&&(t+=P0(o,r)),t}const yt={};function O(i){R0(Yt(),De(),_i()+i,Pd())}function R0(i,t,e,n){if(!n)if(3==(3&t[2])){const o=i.preOrderCheckHooks;null!==o&&Nd(t,o,e)}else{const o=i.preOrderHooks;null!==o&&Bd(t,o,0,e)}Po(e)}function nu(i,t){return i<<17|t<<2}function wr(i){return i>>17&32767}function Kp(i){return 2|i}function po(i){return(131068&i)>>2}function Qp(i,t){return-131069&i|t<<2}function Zp(i){return 1|i}function G0(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const r=e[n],o=e[n+1];if(-1!==o){const s=i.data[o];cp(r),s.contentQueries(2,t[o],o)}}}function tc(i,t,e,n,r,o,s,a,l,p){const b=t.blueprint.slice();return b[0]=r,b[2]=140|n,ay(b),b[3]=b[15]=i,b[8]=e,b[10]=s||i&&i[10],b[11]=a||i&&i[11],b[12]=l||i&&i[12]||null,b[9]=p||i&&i[9]||null,b[6]=o,b[16]=2==t.type?i[16]:b,b}function ya(i,t,e,n,r){let o=i.data[t];if(null===o)o=function am(i,t,e,n,r){const o=cy(),s=op(),l=i.data[t]=function MP(i,t,e,n,r,o){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=l),null!==o&&(s?null==o.child&&null!==l.parent&&(o.child=l):null===o.next&&(o.next=l)),l}(i,t,e,n,r),function $A(){return gt.lFrame.inI18n}()&&(o.flags|=64);else if(64&o.type){o.type=e,o.value=n,o.attrs=r;const s=function Ll(){const i=gt.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return Hr(o,!0),o}function Ca(i,t,e,n){if(0===e)return-1;const r=t.length;for(let o=0;o<e;o++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function nc(i,t,e){Od(t);try{const n=i.viewQuery;null!==n&&gm(1,n,e);const r=i.template;null!==r&&U0(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&G0(i,t),i.staticViewQueries&&gm(2,i.viewQuery,e);const o=i.components;null!==o&&function wP(i,t){for(let e=0;e<t.length;e++)GP(i,t[e])}(t,o)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[2]&=-5,Fd()}}function xa(i,t,e,n){const r=t[2];if(256==(256&r))return;Od(t);const o=Pd();try{ay(t),function dy(i){return gt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&U0(i,t,e,2,n);const s=3==(3&r);if(!o)if(s){const p=i.preOrderCheckHooks;null!==p&&Nd(t,p,null)}else{const p=i.preOrderHooks;null!==p&&Bd(t,p,0,null),up(t,0)}if(function zP(i){for(let t=Hp(i);null!==t;t=jp(t)){if(!t[2])continue;const e=t[9];for(let n=0;n<e.length;n++){const r=e[n],o=r[3];0==(1024&r[2])&&rp(o,1),r[2]|=1024}}}(t),function jP(i){for(let t=Hp(i);null!==t;t=jp(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];ip(n)&&xa(r,n,r.template,n[8])}}(t),null!==i.contentQueries&&G0(i,t),!o)if(s){const p=i.contentCheckHooks;null!==p&&Nd(t,p)}else{const p=i.contentHooks;null!==p&&Bd(t,p,1),up(t,1)}!function CP(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)Po(~r);else{const o=r,s=e[++n],a=e[++n];KA(s,o),a(2,t[o])}}}finally{Po(-1)}}(i,t);const a=i.components;null!==a&&function xP(i,t){for(let e=0;e<t.length;e++)WP(i,t[e])}(t,a);const l=i.viewQuery;if(null!==l&&gm(2,l,n),!o)if(s){const p=i.viewCheckHooks;null!==p&&Nd(t,p)}else{const p=i.viewHooks;null!==p&&Bd(t,p,2),up(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,rp(t[3],-1))}finally{Fd()}}function DP(i,t,e,n){const r=t[10],o=!Pd(),s=sy(t);try{o&&!s&&r.begin&&r.begin(),s&&nc(i,t,n),xa(i,t,e,n)}finally{o&&!s&&r.end&&r.end()}}function U0(i,t,e,n,r){const o=_i(),s=2&n;try{Po(-1),s&&t.length>20&&R0(i,t,20,Pd()),e(n,r)}finally{Po(o)}}function Y0(i,t,e){if($f(t)){const r=t.directiveEnd;for(let o=t.directiveStart;o<r;o++){const s=i.data[o];s.contentQueries&&s.contentQueries(1,e[o],o)}}}function lm(i,t,e){!ly()||(function RP(i,t,e,n){const r=e.directiveStart,o=e.directiveEnd;i.firstCreatePass||Vl(e,t),li(n,t);const s=e.initialInputs;for(let a=r;a<o;a++){const l=i.data[a],p=yr(l);p&&BP(t,e,l);const b=Hl(t,i,a,e);li(b,t),null!==s&&VP(0,a-r,b,l,0,s),p&&(Vi(e.index,t)[8]=b)}}(i,t,e,er(e,t)),128==(128&e.flags)&&function OP(i,t,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,a=function QA(){return gt.lFrame.currentDirectiveIndex}();try{Po(s);for(let l=n;l<r;l++){const p=i.data[l],b=t[l];ap(l),(null!==p.hostBindings||0!==p.hostVars||null!==p.hostAttrs)&&eC(p,b)}}finally{Po(-1),ap(a)}}(i,t,e))}function cm(i,t,e=er){const n=t.localNames;if(null!==n){let r=t.index+1;for(let o=0;o<n.length;o+=2){const s=n[o+1],a=-1===s?e(t,i):i[s];i[r++]=a}}}function q0(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=ou(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function ou(i,t,e,n,r,o,s,a,l,p){const b=20+n,w=b+r,A=function SP(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:yt);return e}(b,w),P="function"==typeof p?p():p;return A[1]={type:i,blueprint:A,template:e,queries:null,viewQuery:a,declTNode:t,data:A.slice().fill(null,b),bindingStartIndex:b,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:l,consts:P,incompleteFirstPass:!1}}function K0(i,t,e,n){const r=sC(t);null===e?r.push(n):(r.push(e),i.firstCreatePass&&aC(i).push(n,r.length-1))}function Q0(i,t,e){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(e=null===e?{}:e).hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}return e}function Wi(i,t,e,n,r,o,s,a){const l=er(t,e);let b,p=t.inputs;!a&&null!=p&&(b=p[n])?(dC(i,e,b,n,r),kd(t)&&function kP(i,t){const e=Vi(t,i);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(n=function EP(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=s?s(r,t.value||"",n):r,Dn(o)?o.setProperty(l,n,r):fp(n)||(l.setProperty?l.setProperty(n,r):l[n]=r))}function dm(i,t,e,n){let r=!1;if(ly()){const o=function FP(i,t,e){const n=i.directiveRegistry;let r=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];I0(e,s.selectors,!1)&&(r||(r=[]),Wd(Vl(e,t),i,s.type),yr(s)?(tC(i,e),r.unshift(s)):r.push(s))}return r}(i,t,e),s=null===n?null:{"":-1};if(null!==o){r=!0,nC(e,i.data.length,o.length);for(let b=0;b<o.length;b++){const w=o[b];w.providersResolver&&w.providersResolver(w)}let a=!1,l=!1,p=Ca(i,t,o.length,null);for(let b=0;b<o.length;b++){const w=o[b];e.mergedAttrs=Hd(e.mergedAttrs,w.hostAttrs),iC(i,e,t,p,w),NP(p,w,s),null!==w.contentQueries&&(e.flags|=8),(null!==w.hostBindings||null!==w.hostAttrs||0!==w.hostVars)&&(e.flags|=128);const A=w.type.prototype;!a&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(e.index),a=!0),!l&&(A.ngOnChanges||A.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(e.index),l=!0),p++}!function TP(i,t){const n=t.directiveEnd,r=i.data,o=t.attrs,s=[];let a=null,l=null;for(let p=t.directiveStart;p<n;p++){const b=r[p],w=b.inputs,A=null===o||A0(t)?null:HP(w,o);s.push(A),a=Q0(w,p,a),l=Q0(b.outputs,p,l)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=a,t.outputs=l}(i,e)}s&&function LP(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const o=e[t[r+1]];if(null==o)throw new Ue(-301,!1);n.push(t[r],o)}}}(e,n,s)}return e.mergedAttrs=Hd(e.mergedAttrs,e.attrs),r}function J0(i,t,e,n,r,o){const s=o.hostBindings;if(s){let a=i.hostBindingOpCodes;null===a&&(a=i.hostBindingOpCodes=[]);const l=~t.index;(function PP(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(a)!=l&&a.push(l),a.push(n,r,s)}}function eC(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function tC(i,t){t.flags|=2,(i.components||(i.components=[])).push(t.index)}function NP(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;yr(t)&&(e[""]=i)}}function nC(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}function iC(i,t,e,n,r){i.data[n]=r;const o=r.factory||(r.factory=ms(r.type)),s=new Nl(o,yr(r),null);i.blueprint[n]=s,e[n]=s,J0(i,t,0,n,Ca(i,e,r.hostVars,yt),r)}function BP(i,t,e){const n=er(t,i),r=q0(e),o=i[10],s=su(i,tc(i,r,null,e.onPush?64:16,n,t,o,o.createRenderer(n,e),null,null));i[t.index]=s}function Ur(i,t,e,n,r,o){const s=er(i,t);!function um(i,t,e,n,r,o,s){if(null==o)Dn(i)?i.removeAttribute(t,r,e):t.removeAttribute(r);else{const a=null==s?vt(o):s(o,n||"",r);Dn(i)?i.setAttribute(t,r,a,e):e?t.setAttributeNS(e,r,a):t.setAttribute(r,a)}}(t[11],s,o,i.value,e,n,r)}function VP(i,t,e,n,r,o){const s=o[t];if(null!==s){const a=n.setInput;for(let l=0;l<s.length;){const p=s[l++],b=s[l++],w=s[l++];null!==a?n.setInput(e,w,p,b):e[b]=w}}}function HP(i,t){let e=null,n=0;for(;n<t.length;){const r=t[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===e&&(e=[]),e.push(r,i[r],t[n+1])),n+=2}else n+=2;else n+=4}return e}function rC(i,t,e,n){return new Array(i,!0,!1,t,null,0,n,e,null,null)}function WP(i,t){const e=Vi(t,i);if(ip(e)){const n=e[1];80&e[2]?xa(n,e,n.template,e[8]):e[5]>0&&hm(e)}}function hm(i){for(let n=Hp(i);null!==n;n=jp(n))for(let r=10;r<n.length;r++){const o=n[r];if(1024&o[2]){const s=o[1];xa(s,o,s.template,o[8])}else o[5]>0&&hm(o)}const e=i[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Vi(e[n],i);ip(r)&&r[5]>0&&hm(r)}}function GP(i,t){const e=Vi(t,i),n=e[1];(function UP(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])})(n,e),nc(n,e,e[8])}function su(i,t){return i[13]?i[14][4]=t:i[13]=t,i[14]=t,t}function fm(i){for(;i;){i[2]|=64;const t=Jl(i);if(TA(i)&&!t)return i;i=t}return null}function mm(i,t,e){const n=t[10];n.begin&&n.begin();try{xa(i,t,i.template,e)}catch(r){throw cC(t,r),r}finally{n.end&&n.end()}}function oC(i){!function pm(i){for(let t=0;t<i.components.length;t++){const e=i.components[t],n=Op(e),r=n[1];DP(r,n,r.template,e)}}(i[8])}function gm(i,t,e){cp(0),t(i,e)}const $P=(()=>Promise.resolve(null))();function sC(i){return i[7]||(i[7]=[])}function aC(i){return i.cleanup||(i.cleanup=[])}function lC(i,t,e){return(null===i||yr(i))&&(e=function HA(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(e[t.index])),e[11]}function cC(i,t){const e=i[9],n=e?e.get(Lo,null):null;n&&n.handleError(t)}function dC(i,t,e,n,r){for(let o=0;o<e.length;){const s=e[o++],a=e[o++],l=t[s],p=i.data[s];null!==p.setInput?p.setInput(l,r,n,a):l[a]=r}}function mo(i,t,e){const n=Id(t,i);!function f0(i,t,e){Dn(i)?i.setValue(t,e):t.textContent=e}(i[11],n,e)}function au(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?r=Hf(r,a):2==o&&(n=Hf(n,a+": "+t[++s]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}const _m=new _e("INJECTOR",-1);class uC{get(t,e=Fo){if(e===Fo){const n=new Error(`NullInjectorError: No provider for ${Qt(t)}!`);throw n.name="NullInjectorError",n}return e}}const vm=new _e("Set Injector scope."),ic={},ZP={};let bm;function hC(){return void 0===bm&&(bm=new uC),bm}function fC(i,t=null,e=null,n){const r=pC(i,t,e,n);return r._resolveInjectorDefTypes(),r}function pC(i,t=null,e=null,n){return new JP(i,e,t||hC(),n)}class JP{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const o=[];e&&jr(e,a=>this.processProvider(a,t,e)),jr([t],a=>this.processInjectorType(a,[],o)),this.records.set(_m,wa(void 0,this));const s=this.records.get(vm);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof t?null:Qt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Fo,n=bt.Default){this.assertNotDestroyed();const r=Ny(this),o=Eo(void 0);try{if(!(n&bt.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function aR(i){return"function"==typeof i||"object"==typeof i&&i instanceof _e}(t)&&zf(t);a=l&&this.injectableDefInScope(l)?wa(ym(t),ic):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(n&bt.Self?hC():this.parent).get(t,e=n&bt.Optional&&e===Fo?null:e)}catch(s){if("NullInjectorError"===s.name){if((s[qd]=s[qd]||[]).unshift(Qt(t)),r)throw s;return function PI(i,t,e,n){const r=i[qd];throw t[Ly]&&r.unshift(t[Ly]),i.message=function RI(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let r=Qt(t);if(Array.isArray(t))r=t.map(Qt).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Qt(a)))}r=`{${o.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(TI,"\n  ")}`}("\n"+i.message,r,e,n),i.ngTokenPath=r,i[qd]=null,i}(s,t,"R3InjectorError",this.source)}throw s}finally{Eo(o),Ny(r)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((n,r)=>t.push(Qt(r))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ue(205,!1)}processInjectorType(t,e,n){if(!(t=Tt(t)))return!1;let r=Yb(t);const o=null==r&&t.ngModule||void 0,s=void 0===o?t:o,a=-1!==n.indexOf(s);if(void 0!==o&&(r=Yb(o)),null==r)return!1;if(null!=r.imports&&!a){let b;n.push(s);try{jr(r.imports,w=>{this.processInjectorType(w,e,n)&&(void 0===b&&(b=[]),b.push(w))})}finally{}if(void 0!==b)for(let w=0;w<b.length;w++){const{ngModule:A,providers:P}=b[w];jr(P,V=>this.processProvider(V,A,P||tn))}}this.injectorDefTypes.add(s);const l=ms(s)||(()=>new s);this.records.set(s,wa(l,ic));const p=r.providers;if(null!=p&&!a){const b=t;jr(p,w=>this.processProvider(w,b,p))}return void 0!==o&&void 0!==t.providers}processProvider(t,e,n){let r=Da(t=Tt(t))?t:Tt(t&&t.provide);const o=function tR(i,t,e){return gC(i)?wa(void 0,i.useValue):wa(mC(i),ic)}(t);if(Da(t)||!0!==t.multi)this.records.get(r);else{let s=this.records.get(r);s||(s=wa(void 0,ic,!0),s.factory=()=>wp(s.multi),this.records.set(r,s)),r=t,s.multi.push(t)}this.records.set(r,o)}hydrate(t,e){return e.value===ic&&(e.value=ZP,e.value=e.factory()),"object"==typeof e.value&&e.value&&function sR(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Tt(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function ym(i){const t=zf(i),e=null!==t?t.factory:ms(i);if(null!==e)return e;if(i instanceof _e)throw new Ue(204,!1);if(i instanceof Function)return function eR(i){const t=i.length;if(t>0)throw Wl(t,"?"),new Ue(204,!1);const e=function mA(i){const t=i&&(i[Dd]||i[qb]);if(t){const e=function gA(i){if(i.hasOwnProperty("name"))return i.name;const t=(""+i).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new Ue(204,!1)}function mC(i,t,e){let n;if(Da(i)){const r=Tt(i);return ms(r)||ym(r)}if(gC(i))n=()=>Tt(i.useValue);else if(function iR(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...wp(i.deps||[]));else if(function nR(i){return!(!i||!i.useExisting)}(i))n=()=>ee(Tt(i.useExisting));else{const r=Tt(i&&(i.useClass||i.provide));if(!function oR(i){return!!i.deps}(i))return ms(r)||ym(r);n=()=>new r(...wp(i.deps))}return n}function wa(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function gC(i){return null!==i&&"object"==typeof i&&kI in i}function Da(i){return"function"==typeof i}let nn=(()=>{class i{static create(e,n){var r;if(Array.isArray(e))return fC({name:""},n,e,"");{const o=null!==(r=e.name)&&void 0!==r?r:"";return fC({name:o},e.parent,e.providers,o)}}}return i.THROW_IF_NOT_FOUND=Fo,i.NULL=new uC,i.\u0275prov=Ae({token:i,providedIn:"any",factory:()=>ee(_m)}),i.__NG_ELEMENT_ID__=-1,i})();function mR(i,t){Ld(Op(i)[1],Xn())}function Pe(i){let t=function EC(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(yr(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Ue(903,"");r=t.\u0275dir}if(r){if(e){n.push(r);const s=i;s.inputs=wm(i.inputs),s.declaredInputs=wm(i.declaredInputs),s.outputs=wm(i.outputs);const a=r.hostBindings;a&&bR(i,a);const l=r.viewQuery,p=r.contentQueries;if(l&&_R(i,l),p&&vR(i,p),Vf(i.inputs,r.inputs),Vf(i.declaredInputs,r.declaredInputs),Vf(i.outputs,r.outputs),yr(r)&&r.data.animation){const b=i.data;b.animation=(b.animation||[]).concat(r.data.animation)}}const o=r.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(i),a===Pe&&(e=!1)}}t=Object.getPrototypeOf(t)}!function gR(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=Hd(r.hostAttrs,e=Hd(e,r.hostAttrs))}}(n)}function wm(i){return i===ta?{}:i===tn?[]:i}function _R(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function vR(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,o)=>{t(n,r,o),e(n,r,o)}:t}function bR(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}let lu=null;function Sa(){if(!lu){const i=Jt.Symbol;if(i&&i.iterator)lu=i.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(lu=n)}}}return lu}function rc(i){return!!Dm(i)&&(Array.isArray(i)||!(i instanceof Map)&&Sa()in i)}function Dm(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Yr(i,t,e){return i[t]=e}function ci(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function lt(i,t,e,n){const r=De();return ci(r,aa(),t)&&(Yt(),Ur(Sn(),r,i,t,e,n)),lt}function Ta(i,t,e,n){return ci(i,aa(),e)?t+vt(e)+n:yt}function G(i,t,e,n,r,o,s,a){const l=De(),p=Yt(),b=i+20,w=p.firstCreatePass?function MR(i,t,e,n,r,o,s,a,l){const p=t.consts,b=ya(t,i,4,s||null,Io(p,a));dm(t,e,b,Io(p,l)),Ld(t,b);const w=b.tViews=ou(2,b,n,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,p);return null!==t.queries&&(t.queries.template(t,b),w.queries=t.queries.embeddedTView(b)),b}(b,p,l,t,e,n,r,o,s):p.data[b];Hr(w,!1);const A=l[11].createComment("");eu(p,l,A,w),li(A,l),su(l,l[b]=rC(A,l,A,w)),Ad(w)&&lm(p,l,w),null!=s&&cm(l,w,a)}function Vt(i){return sa(function XA(){return gt.lFrame.contextLView}(),20+i)}function Sm(i){return i.length>1?" ("+function RR(i){const t=[];for(let e=0;e<i.length;++e){if(t.indexOf(i[e])>-1)return t.push(i[e]),t;t.push(i[e])}return t}(i.slice().reverse()).map(n=>Qt(n.token)).join(" -> ")+")":""}function Mm(i,t,e,n){const r=[t],o=e(r),s=n?function D2(i,t){const e=`${i} caused by: ${t instanceof Error?t.message:t}`,n=Error(e);return n[Fp]=t,n}(o,n):Error(o);return s.addKey=OR,s.keys=r,s.injectors=[i],s.constructResolvingMessage=e,s[Fp]=n,s}function OR(i,t){this.injectors.push(i),this.keys.push(t),this.message=this.constructResolvingMessage(this.keys)}function jC(i,t){const e=[];for(let n=0,r=t.length;n<r;n++){const o=t[n];e.push(o&&0!=o.length?o.map(Qt).join(" "):"?")}return Error("Cannot resolve all parameters for '"+Qt(i)+"'("+e.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+Qt(i)+"' is decorated with Injectable.")}function HR(i,t){return Error(`Cannot mix multi providers and regular providers, got: ${i} ${t}`)}class Vo{constructor(t,e){if(this.token=t,this.id=e,!t)throw new Error("Token must be defined!");this.displayName=Qt(this.token)}static get(t){return zC.get(Tt(t))}static get numberOfKeys(){return zC.numberOfKeys}}class jR{constructor(){this._allKeys=new Map}get(t){if(t instanceof Vo)return t;if(this._allKeys.has(t))return this._allKeys.get(t);const e=new Vo(t,Vo.numberOfKeys);return this._allKeys.set(t,e),e}get numberOfKeys(){return this._allKeys.size}}const zC=new jR;class zR{constructor(t){this.reflectionCapabilities=t}updateCapabilities(t){this.reflectionCapabilities=t}factory(t){return this.reflectionCapabilities.factory(t)}parameters(t){return this.reflectionCapabilities.parameters(t)}annotations(t){return this.reflectionCapabilities.annotations(t)}propMetadata(t){return this.reflectionCapabilities.propMetadata(t)}hasLifecycleHook(t,e){return this.reflectionCapabilities.hasLifecycleHook(t,e)}getter(t){return this.reflectionCapabilities.getter(t)}setter(t){return this.reflectionCapabilities.setter(t)}method(t){return this.reflectionCapabilities.method(t)}importUri(t){return this.reflectionCapabilities.importUri(t)}resourceUri(t){return this.reflectionCapabilities.resourceUri(t)}resolveIdentifier(t,e,n,r){return this.reflectionCapabilities.resolveIdentifier(t,e,n,r)}resolveEnum(t,e){return this.reflectionCapabilities.resolveEnum(t,e)}}const WC=new zR(new Fy);class du{constructor(t,e,n){this.key=t,this.optional=e,this.visibility=n}static fromKey(t){return new du(t,!1,null)}}const WR=[];class GC{constructor(t,e,n){this.key=t,this.resolvedFactories=e,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]}}class GR{constructor(t,e){this.factory=t,this.dependencies=e}}function UR(i){let t,e;if(i.useClass){const n=Tt(i.useClass);t=WC.factory(n),e=YC(n)}else i.useExisting?(t=n=>n,e=[du.fromKey(Vo.get(i.useExisting))]):i.useFactory?(t=i.useFactory,e=function $R(i,t){if(t){const e=t.map(n=>[n]);return t.map(n=>qC(i,n,e))}return YC(i)}(i.useFactory,i.deps)):(t=()=>i.useValue,e=WR);return new GR(t,e)}function YR(i){return new GC(Vo.get(i.provide),[UR(i)],i.multi||!1)}function qR(i){const n=function XR(i,t){for(let e=0;e<i.length;e++){const n=i[e],r=t.get(n.key.id);if(r){if(n.multiProvider!==r.multiProvider)throw HR(r,n);if(n.multiProvider)for(let o=0;o<n.resolvedFactories.length;o++)r.resolvedFactories.push(n.resolvedFactories[o]);else t.set(n.key.id,n)}else{let o;o=n.multiProvider?new GC(n.key,n.resolvedFactories.slice(),n.multiProvider):n,t.set(n.key.id,o)}}return t}(UC(i,[]).map(YR),new Map);return Array.from(n.values())}function UC(i,t){return i.forEach(e=>{if(e instanceof bp)t.push({provide:e,useClass:e});else if(e&&"object"==typeof e&&void 0!==e.provide)t.push(e);else{if(!Array.isArray(e))throw function BR(i){return Error(`Invalid provider - only instances of Provider and Type are allowed, got: ${i}`)}(e);UC(e,t)}}),t}function YC(i){const t=WC.parameters(i);if(!t)return[];if(t.some(e=>null==e))throw jC(i,t);return t.map(e=>qC(i,e,t))}function qC(i,t,e){let n=null,r=!1;if(!Array.isArray(t))return Tm(t instanceof Dp?t.token:t,r,null);let o=null;for(let s=0;s<t.length;++s){const a=t[s];a instanceof bp?n=a:a instanceof Dp?n=a.token:a instanceof ir?r=!0:a instanceof Sp||a instanceof Cr?o=a:a instanceof _e&&(n=a)}if(n=Tt(n),null!=n)return Tm(n,r,o);throw jC(i,e)}function Tm(i,t,e){return new du(Vo.get(i),t,e)}const sc={};class Fa{static resolve(t){return qR(t)}static resolveAndCreate(t,e){const n=Fa.resolve(t);return Fa.fromResolvedProviders(n,e)}static fromResolvedProviders(t,e){return new KR(t,e)}}let KR=(()=>{class i{constructor(e,n){this._constructionCounter=0,this._providers=e,this.parent=n||null;const r=e.length;this.keyIds=[],this.objs=[];for(let o=0;o<r;o++)this.keyIds[o]=e[o].key.id,this.objs[o]=sc}get(e,n=Fo){return this._getByKey(Vo.get(e),null,n)}resolveAndCreateChild(e){const n=Fa.resolve(e);return this.createChildFromResolved(n)}createChildFromResolved(e){const n=new i(e);return n.parent=this,n}resolveAndInstantiate(e){return this.instantiateResolved(Fa.resolve([e])[0])}instantiateResolved(e){return this._instantiateProvider(e)}getProviderAtIndex(e){if(e<0||e>=this._providers.length)throw function VR(i){return Error(`Index ${i} is out-of-bounds.`)}(e);return this._providers[e]}_new(e){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw function LR(i,t){return Mm(i,t,function(e){return`Cannot instantiate cyclic dependency!${Sm(e)}`})}(this,e.key);return this._instantiateProvider(e)}_getMaxNumberOfObjects(){return this.objs.length}_instantiateProvider(e){if(e.multiProvider){const n=[];for(let r=0;r<e.resolvedFactories.length;++r)n[r]=this._instantiate(e,e.resolvedFactories[r]);return n}return this._instantiate(e,e.resolvedFactories[0])}_instantiate(e,n){const r=n.factory;let o,s;try{o=n.dependencies.map(a=>this._getByReflectiveDependency(a))}catch(a){throw a.addKey&&a.addKey(this,e.key),a}try{s=r(...o)}catch(a){throw function NR(i,t,e,n){return Mm(i,n,function(r){const o=Qt(r[0].token);return`${t.message}: Error during instantiation of ${o}!${Sm(r)}.`},t)}(this,a,0,e.key)}return s}_getByReflectiveDependency(e){return this._getByKey(e.key,e.visibility,e.optional?null:Fo)}_getByKey(e,n,r){return e===i.INJECTOR_KEY?this:n instanceof Sp?this._getByKeySelf(e,r):this._getByKeyDefault(e,r,n)}_getObjByKeyId(e){for(let n=0;n<this.keyIds.length;n++)if(this.keyIds[n]===e)return this.objs[n]===sc&&(this.objs[n]=this._new(this._providers[n])),this.objs[n];return sc}_throwOrNull(e,n){if(n!==Fo)return n;throw function FR(i,t){return Mm(i,t,function(e){return`No provider for ${Qt(e[0].token)}!${Sm(e)}`})}(this,e)}_getByKeySelf(e,n){const r=this._getObjByKeyId(e.id);return r!==sc?r:this._throwOrNull(e,n)}_getByKeyDefault(e,n,r){let o;for(o=r instanceof Cr?this.parent:this;o instanceof i;){const s=o,a=s._getObjByKeyId(e.id);if(a!==sc)return a;o=s.parent}return null!==o?o.get(e.token,n):this._throwOrNull(e,n)}get displayName(){return`ReflectiveInjector(providers: [${function QR(i,t){const e=[];for(let n=0;n<i._providers.length;++n)e[n]=t(i.getProviderAtIndex(n));return e}(this,n=>' "'+n.key.displayName+'" ').join(", ")}])`}toString(){return this.displayName}}return i.INJECTOR_KEY=Vo.get(nn),i})();function N(i,t=bt.Default){const e=De();return null===e?ee(i,t):My(Xn(),e,Tt(i),t)}function La(){throw new Error("invalid")}function R(i,t,e){const n=De();return ci(n,aa(),t)&&Wi(Yt(),Sn(),n,i,t,n[11],e,!1),R}function Em(i,t,e,n,r){const s=r?"class":"style";dC(i,e,t.inputs[s],s,n)}function D(i,t,e,n){const r=De(),o=Yt(),s=20+i,a=r[11],l=r[s]=Wp(a,t,function iI(){return gt.lFrame.currentNamespace}()),p=o.firstCreatePass?function ZR(i,t,e,n,r,o,s){const a=t.consts,p=ya(t,i,2,r,Io(a,o));return dm(t,e,p,Io(a,s)),null!==p.attrs&&au(p,p.attrs,!1),null!==p.mergedAttrs&&au(p,p.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,p),p}(s,o,r,0,t,e,n):o.data[s];Hr(p,!0);const b=p.mergedAttrs;null!==b&&Vd(a,l,b);const w=p.classes;null!==w&&$p(a,l,w);const A=p.styles;return null!==A&&T0(a,l,A),64!=(64&p.flags)&&eu(o,r,l,p),0===function WA(){return gt.lFrame.elementDepthCount}()&&li(l,r),function GA(){gt.lFrame.elementDepthCount++}(),Ad(p)&&(lm(o,r,p),Y0(o,p,r)),null!==n&&cm(r,p),D}function k(){let i=Xn();op()?sp():(i=i.parent,Hr(i,!1));const t=i;!function UA(){gt.lFrame.elementDepthCount--}();const e=Yt();return e.firstCreatePass&&(Ld(e,i),$f(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function lI(i){return 0!=(16&i.flags)}(t)&&Em(e,t,De(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function cI(i){return 0!=(32&i.flags)}(t)&&Em(e,t,De(),t.stylesWithoutHost,!1),k}function Be(i,t,e,n){return D(i,t,e,n),k(),Be}function Ho(i,t,e){const n=De(),r=Yt(),o=i+20,s=r.firstCreatePass?function JR(i,t,e,n,r){const o=t.consts,s=Io(o,n),a=ya(t,i,8,"ng-container",s);return null!==s&&au(a,s,!0),dm(t,e,a,Io(o,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(o,r,n,t,e):r.data[o];Hr(s,!0);const a=n[o]=n[11].createComment("");return eu(r,n,a,s),li(a,n),Ad(s)&&(lm(r,n,s),Y0(r,s,n)),null!=e&&cm(n,s),Ho}function jo(){let i=Xn();const t=Yt();return op()?sp():(i=i.parent,Hr(i,!1)),t.firstCreatePass&&(Ld(t,i),$f(i)&&t.queries.elementEnd(i)),jo}function Gi(i,t,e){return Ho(i,t,e),jo(),Gi}function te(){return De()}function uu(i){return!!i&&"function"==typeof i.then}function XC(i){return!!i&&"function"==typeof i.subscribe}const $C=XC;function F(i,t,e,n){const r=De(),o=Yt(),s=Xn();return KC(o,r,r[11],s,i,t,!!e,n),F}function hu(i,t){const e=Xn(),n=De(),r=Yt();return KC(r,n,lC(lp(r.data),e,n),e,i,t,!1),hu}function KC(i,t,e,n,r,o,s,a){const l=Ad(n),b=i.firstCreatePass&&aC(i),w=t[8],A=sC(t);let P=!0;if(3&n.type||a){const Z=er(n,t),re=a?a(Z):Z,J=A.length,ve=a?be=>a(Hn(be[n.index])):n.index;if(Dn(e)){let be=null;if(!a&&l&&(be=function eO(i,t,e,n){const r=i.cleanup;if(null!=r)for(let o=0;o<r.length-1;o+=2){const s=r[o];if(s===e&&r[o+1]===n){const a=t[7],l=r[o+2];return a.length>l?a[l]:null}"string"==typeof s&&(o+=2)}return null}(i,t,r,n.index)),null!==be)(be.__ngLastListenerFn__||be).__ngNextListenerFn__=o,be.__ngLastListenerFn__=o,P=!1;else{o=km(n,t,w,o,!1);const Qe=e.listen(re,r,o);A.push(o,Qe),b&&b.push(r,ve,J,J+1)}}else o=km(n,t,w,o,!0),re.addEventListener(r,o,s),A.push(o),b&&b.push(r,ve,J,s)}else o=km(n,t,w,o,!1);const V=n.outputs;let q;if(P&&null!==V&&(q=V[r])){const Z=q.length;if(Z)for(let re=0;re<Z;re+=2){const _t=t[q[re]][q[re+1]].subscribe(o),Lt=A.length;A.push(o,_t),b&&b.push(r,n.index,Lt,-(Lt+1))}}}function QC(i,t,e,n){try{return!1!==e(n)}catch(r){return cC(i,r),!1}}function km(i,t,e,n,r){return function o(s){if(s===Function)return n;const a=2&i.flags?Vi(i.index,t):t;0==(32&t[2])&&fm(a);let l=QC(t,0,n,s),p=o.__ngNextListenerFn__;for(;p;)l=QC(t,0,p,s)&&l,p=p.__ngNextListenerFn__;return r&&!1===l&&(s.preventDefault(),s.returnValue=!1),l}}function M(i=1){return function JA(i){return(gt.lFrame.contextLView=function eI(i,t){for(;i>0;)t=t[15],i--;return t}(i,gt.lFrame.contextLView))[8]}(i)}function tO(i,t){let e=null;const n=function rP(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const o=t[r];if("*"!==o){if(null===n?I0(i,o,!0):aP(n,o))return r}else e=r}return e}function un(i){const t=De()[16][6];if(!t.projection){const n=t.projection=Wl(i?i.length:1,null),r=n.slice();let o=t.child;for(;null!==o;){const s=i?tO(o,i):0;null!==s&&(r[s]?r[s].projectionNext=o:n[s]=o,r[s]=o),o=o.next}}}function St(i,t=0,e){const n=De(),r=Yt(),o=ya(r,20+i,16,null,e||null);null===o.projection&&(o.projection=t),sp(),64!=(64&o.flags)&&function Q2(i,t,e){M0(t[11],0,t,e,g0(i,e,t),y0(e.parent||t[6],e,t))}(r,n,o)}function Na(i,t,e){return Am(i,"",t,"",e),Na}function Am(i,t,e,n,r){const o=De(),s=Ta(o,t,e,n);return s!==yt&&Wi(Yt(),Sn(),o,i,s,o[11],r,!1),Am}function sx(i,t,e,n,r){const o=i[e+1],s=null===t;let a=n?wr(o):po(o),l=!1;for(;0!==a&&(!1===l||s);){const b=i[a+1];rO(i[a],t)&&(l=!0,i[a+1]=n?Zp(b):Kp(b)),a=n?wr(b):po(b)}l&&(i[e+1]=n?Kp(o):Zp(o))}function rO(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&ma(i,t)>=0}const Kn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ax(i){return i.substring(Kn.key,Kn.keyEnd)}function oO(i){return i.substring(Kn.value,Kn.valueEnd)}function lx(i,t){const e=Kn.textEnd;return e===t?-1:(t=Kn.keyEnd=function lO(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,Kn.key=t,e),Ba(i,t,e))}function cx(i,t){const e=Kn.textEnd;let n=Kn.key=Ba(i,t,e);return e===n?-1:(n=Kn.keyEnd=function cO(i,t,e){let n;for(;t<e&&(45===(n=i.charCodeAt(t))||95===n||(-33&n)>=65&&(-33&n)<=90||n>=48&&n<=57);)t++;return t}(i,n,e),n=ux(i,n,e),n=Kn.value=Ba(i,n,e),n=Kn.valueEnd=function dO(i,t,e){let n=-1,r=-1,o=-1,s=t,a=s;for(;s<e;){const l=i.charCodeAt(s++);if(59===l)return a;34===l||39===l?a=s=hx(i,l,s,e):t===s-4&&85===o&&82===r&&76===n&&40===l?a=s=hx(i,41,s,e):l>32&&(a=s),o=r,r=n,n=-33&l}return a}(i,n,e),ux(i,n,e))}function dx(i){Kn.key=0,Kn.keyEnd=0,Kn.value=0,Kn.valueEnd=0,Kn.textEnd=i.length}function Ba(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function ux(i,t,e,n){return(t=Ba(i,t,e))<e&&t++,t}function hx(i,t,e,n){let r=-1,o=e;for(;o<n;){const s=i.charCodeAt(o++);if(s==t&&92!==r)return o;r=92==s&&92===r?0:s}throw new Error}function rt(i,t,e){return Mr(i,t,e,!1),rt}function Ot(i,t){return Mr(i,t,null,!0),Ot}function uO(i,t){for(let e=function aO(i){return dx(i),cx(i,Ba(i,0,Kn.textEnd))}(t);e>=0;e=cx(t,e))mx(i,ax(t),oO(t))}function bs(i){Tr(Hi,qr,i,!0)}function qr(i,t){for(let e=function sO(i){return dx(i),lx(i,Ba(i,0,Kn.textEnd))}(t);e>=0;e=lx(t,e))Hi(i,ax(t),!0)}function Mr(i,t,e,n){const r=De(),o=Yt(),s=fo(2);o.firstUpdatePass&&px(o,i,s,n),t!==yt&&ci(r,s,t)&&gx(o,o.data[_i()],r,r[11],i,r[s+1]=function vO(i,t){return null==i||("string"==typeof t?i+=t:"object"==typeof i&&(i=Qt(ji(i)))),i}(t,e),n,s)}function Tr(i,t,e,n){const r=Yt(),o=fo(2);r.firstUpdatePass&&px(r,null,o,n);const s=De();if(e!==yt&&ci(s,o,e)){const a=r.data[_i()];if(vx(a,n)&&!fx(r,o)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=Hf(l,e||"")),Em(r,a,s,e,n)}else!function _O(i,t,e,n,r,o,s,a){r===yt&&(r=tn);let l=0,p=0,b=0<r.length?r[0]:null,w=0<o.length?o[0]:null;for(;null!==b||null!==w;){const A=l<r.length?r[l+1]:void 0,P=p<o.length?o[p+1]:void 0;let q,V=null;b===w?(l+=2,p+=2,A!==P&&(V=w,q=P)):null===w||null!==b&&b<w?(l+=2,V=b):(p+=2,V=w,q=P),null!==V&&gx(i,t,e,n,V,q,s,a),b=l<r.length?r[l]:null,w=p<o.length?o[p]:null}}(r,a,s,s[11],s[o+1],s[o+1]=function gO(i,t,e){if(null==e||""===e)return tn;const n=[],r=ji(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)i(n,r[o],!0);else if("object"==typeof r)for(const o in r)r.hasOwnProperty(o)&&i(n,o,r[o]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,o)}}function fx(i,t){return t>=i.expandoStartIndex}function px(i,t,e,n){const r=i.data;if(null===r[e+1]){const o=r[_i()],s=fx(i,e);vx(o,n)&&null===t&&!s&&(t=!1),t=function hO(i,t,e,n){const r=lp(i);let o=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=ac(e=Im(null,i,t,e,n),t.attrs,n),o=null);else{const s=t.directiveStylingLast;if(-1===s||i[s]!==r)if(e=Im(r,i,t,e,n),null===o){let l=function fO(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==po(n))return i[wr(n)]}(i,t,n);void 0!==l&&Array.isArray(l)&&(l=Im(null,i,t,l[1],n),l=ac(l,t.attrs,n),function pO(i,t,e,n){i[wr(e?t.classBindings:t.styleBindings)]=n}(i,t,n,l))}else o=function mO(i,t,e){let n;const r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++)n=ac(n,i[o].hostAttrs,e);return ac(n,t.attrs,e)}(i,t,n)}return void 0!==o&&(n?t.residualClasses=o:t.residualStyles=o),e}(r,o,t,n),function nO(i,t,e,n,r,o){let s=o?t.classBindings:t.styleBindings,a=wr(s),l=po(s);i[n]=e;let b,p=!1;if(Array.isArray(e)){const w=e;b=w[1],(null===b||ma(w,b)>0)&&(p=!0)}else b=e;if(r)if(0!==l){const A=wr(i[a+1]);i[n+1]=nu(A,a),0!==A&&(i[A+1]=Qp(i[A+1],n)),i[a+1]=function uP(i,t){return 131071&i|t<<17}(i[a+1],n)}else i[n+1]=nu(a,0),0!==a&&(i[a+1]=Qp(i[a+1],n)),a=n;else i[n+1]=nu(l,0),0===a?a=n:i[l+1]=Qp(i[l+1],n),l=n;p&&(i[n+1]=Kp(i[n+1])),sx(i,b,n,!0),sx(i,b,n,!1),function iO(i,t,e,n,r){const o=r?i.residualClasses:i.residualStyles;null!=o&&"string"==typeof t&&ma(o,t)>=0&&(e[n+1]=Zp(e[n+1]))}(t,b,i,n,o),s=nu(a,l),o?t.classBindings=s:t.styleBindings=s}(r,o,t,e,s,n)}}function Im(i,t,e,n,r){let o=null;const s=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<s&&(o=t[a],n=ac(n,o.hostAttrs,r),o!==i);)a++;return null!==i&&(e.directiveStylingLast=a),n}function ac(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?r=s:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Hi(i,s,!!e||t[++o]))}return void 0===i?null:i}function mx(i,t,e){Hi(i,t,ji(e))}function gx(i,t,e,n,r,o,s,a){if(!(3&t.type))return;const l=i.data,p=l[a+1];fu(function L0(i){return 1==(1&i)}(p)?_x(l,t,e,r,po(p),s):void 0)||(fu(o)||function F0(i){return 2==(2&i)}(p)&&(o=_x(l,null,e,r,a,s)),function J2(i,t,e,n,r){const o=Dn(i);if(t)r?o?i.addClass(e,n):e.classList.add(n):o?i.removeClass(e,n):e.classList.remove(n);else{let s=-1===n.indexOf("-")?void 0:zi.DashCase;if(null==r)o?i.removeStyle(e,n,s):e.style.removeProperty(n);else{const a="string"==typeof r&&r.endsWith("!important");a&&(r=r.slice(0,-10),s|=zi.Important),o?i.setStyle(e,n,r,s):e.style.setProperty(n,r,a?"important":"")}}}(n,s,Id(_i(),e),r,o))}function _x(i,t,e,n,r,o){const s=null===t;let a;for(;r>0;){const l=i[r],p=Array.isArray(l),b=p?l[1]:l,w=null===b;let A=e[r+1];A===yt&&(A=w?tn:void 0);let P=w?yp(A,n):b===n?A:void 0;if(p&&!fu(P)&&(P=yp(l,n)),fu(P)&&(a=P,s))return a;const V=i[r+1];r=s?wr(V):po(V)}if(null!==t){let l=o?t.residualClasses:t.residualStyles;null!=l&&(a=yp(l,n))}return a}function fu(i){return void 0!==i}function vx(i,t){return 0!=(i.flags&(t?16:32))}function B(i,t=""){const e=De(),n=Yt(),r=i+20,o=n.firstCreatePass?ya(n,r,1,t,null):n.data[r],s=e[r]=function zp(i,t){return Dn(i)?i.createText(t):i.createTextNode(t)}(e[11],t);eu(n,e,s,o),Hr(o,!1)}function Qn(i){return Ct("",i,""),Qn}function Ct(i,t,e){const n=De(),r=Ta(n,i,t,e);return r!==yt&&mo(n,_i(),r),Ct}function Pm(i,t,e){Tr(Hi,qr,Ta(De(),i,t,e),!0)}function Er(i,t,e){const n=De();return ci(n,aa(),t)&&Wi(Yt(),Sn(),n,i,t,n[11],e,!0),Er}function pu(i,t,e){const n=De();if(ci(n,aa(),t)){const o=Yt(),s=Sn();Wi(o,s,n,i,t,lC(lp(o.data),s,n),e,!0)}return pu}const mu="en-US";let Bx=mu;function Fm(i,t,e,n,r){if(i=Tt(i),Array.isArray(i))for(let o=0;o<i.length;o++)Fm(i[o],t,e,n,r);else{const o=Yt(),s=De();let a=Da(i)?i:Tt(i.provide),l=mC(i);const p=Xn(),b=1048575&p.providerIndexes,w=p.directiveStart,A=p.providerIndexes>>20;if(Da(i)||!i.multi){const P=new Nl(l,r,N),V=Nm(a,t,r?b:b+A,w);-1===V?(Wd(Vl(p,s),o,a),Lm(o,i,t.length),t.push(a),p.directiveStart++,p.directiveEnd++,r&&(p.providerIndexes+=1048576),e.push(P),s.push(P)):(e[V]=P,s[V]=P)}else{const P=Nm(a,t,b+A,w),V=Nm(a,t,b,b+A),q=P>=0&&e[P],Z=V>=0&&e[V];if(r&&!Z||!r&&!q){Wd(Vl(p,s),o,a);const re=function LF(i,t,e,n,r){const o=new Nl(i,e,N);return o.multi=[],o.index=t,o.componentProviders=0,lw(o,r,n&&!e),o}(r?FF:OF,e.length,r,n,l);!r&&Z&&(e[V].providerFactory=re),Lm(o,i,t.length,0),t.push(a),p.directiveStart++,p.directiveEnd++,r&&(p.providerIndexes+=1048576),e.push(re),s.push(re)}else Lm(o,i,P>-1?P:V,lw(e[r?V:P],l,!r&&n));!r&&n&&Z&&e[V].componentProviders++}}}function Lm(i,t,e,n){const r=Da(t),o=function rR(i){return!!i.useClass}(t);if(r||o){const l=(o?Tt(t.useClass):t).prototype.ngOnDestroy;if(l){const p=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const b=p.indexOf(e);-1===b?p.push(e,[n,l]):p[b+1].push(n,l)}else p.push(e,l)}}}function lw(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function Nm(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function OF(i,t,e,n){return Bm(this.multi,[])}function FF(i,t,e,n){const r=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Hl(e,e[1],this.providerFactory.index,n);o=a.slice(0,s),Bm(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],Bm(r,o);return o}function Bm(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function $e(i,t=[]){return e=>{e.providersResolver=(n,r)=>function RF(i,t,e){const n=Yt();if(n.firstCreatePass){const r=yr(i);Fm(e,n.data,n.blueprint,r,!0),Fm(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class cw{}class VF{resolveComponentFactory(t){throw function BF(i){const t=Error(`No component factory found for ${Qt(i)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=i,t}(t)}}let Cs=(()=>{class i{}return i.NULL=new VF,i})();function HF(){return ja(Xn(),De())}function ja(i,t){return new Ze(er(i,t))}let Ze=(()=>{class i{constructor(e){this.nativeElement=e}}return i.__NG_ELEMENT_ID__=HF,i})();function jF(i){return i instanceof Ze?i.nativeElement:i}class hc{}let zo=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function WF(){const i=De(),e=Vi(Xn().index,i);return function zF(i){return i[11]}(Vr(e)?e:i)}(),i})(),GF=(()=>{class i{}return i.\u0275prov=Ae({token:i,providedIn:"root",factory:()=>null}),i})();class za{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const UF=new za("13.2.7"),Vm={};function yu(i,t,e,n,r=!1){for(;null!==e;){const o=t[e.index];if(null!==o&&n.push(Hn(o)),br(o))for(let a=10;a<o.length;a++){const l=o[a],p=l[1].firstChild;null!==p&&yu(l[1],l,p,n)}const s=e.type;if(8&s)yu(i,t,e.child,n);else if(32&s){const a=Vp(e,t);let l;for(;l=a();)n.push(l)}else if(16&s){const a=D0(t,e);if(Array.isArray(a))n.push(...a);else{const l=Jl(t[16]);yu(l[1],l,a,n,!0)}}e=r?e.projectionNext:e.next}return n}class fc{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return yu(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(br(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Gp(t,n),Ud(e,n))}this._attachedToViewContainer=!1}m0(this._lView[1],this._lView)}onDestroy(t){K0(this._lView[1],this._lView,null,t)}markForCheck(){fm(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){mm(this._lView[1],this._lView,this.context)}checkNoChanges(){!function qP(i,t,e){Rd(!0);try{mm(i,t,e)}finally{Rd(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ue(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function W2(i,t){ec(i,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Ue(902,"");this._appRef=t}}class YF extends fc{constructor(t){super(t),this._view=t}detectChanges(){oC(this._view)}checkNoChanges(){!function XP(i){Rd(!0);try{oC(i)}finally{Rd(!1)}}(this._view)}get context(){return null}}class uw extends Cs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=si(t);return new Hm(e,this.ngModule)}}function hw(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}class Hm extends cw{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function cP(i){return i.map(lP).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return hw(this.componentDef.inputs)}get outputs(){return hw(this.componentDef.outputs)}create(t,e,n,r){const o=(r=r||this.ngModule)?function XF(i,t){return{get:(e,n,r)=>{const o=i.get(e,Vm,r);return o!==Vm||n===Vm?o:t.get(e,n,r)}}}(t,r.injector):t,s=o.get(hc,oy),a=o.get(GF,null),l=s.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",b=n?function $0(i,t,e){if(Dn(i))return i.selectRootElement(t,e===_r.ShadowDom);let n="string"==typeof t?i.querySelector(t):t;return n.textContent="",n}(l,n,this.componentDef.encapsulation):Wp(s.createRenderer(null,this.componentDef),p,function qF(i){const t=i.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(p)),w=this.componentDef.onPush?576:528,A=function TC(i,t){return{components:[],scheduler:i||L2,clean:$P,playerHandler:t||null,flags:0}}(),P=ou(0,null,null,1,0,null,null,null,null,null),V=tc(null,P,A,w,null,null,s,l,a,o);let q,Z;Od(V);try{const re=function SC(i,t,e,n,r,o){const s=e[1];e[20]=i;const l=ya(s,20,2,"#host",null),p=l.mergedAttrs=t.hostAttrs;null!==p&&(au(l,p,!0),null!==i&&(Vd(r,i,p),null!==l.classes&&$p(r,i,l.classes),null!==l.styles&&T0(r,i,l.styles)));const b=n.createRenderer(i,t),w=tc(e,q0(t),null,t.onPush?64:16,e[20],l,n,b,o||null,null);return s.firstCreatePass&&(Wd(Vl(l,e),s,t.type),tC(s,l),nC(l,e.length,1)),su(e,w),e[20]=w}(b,this.componentDef,V,s,l);if(b)if(n)Vd(l,b,["ng-version",UF.full]);else{const{attrs:J,classes:ve}=function dP(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let o=i[n];if("string"==typeof o)2===r?""!==o&&t.push(o,i[++n]):8===r&&e.push(o);else{if(!xr(r))break;r=o}n++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);J&&Vd(l,b,J),ve&&ve.length>0&&$p(l,b,ve.join(" "))}if(Z=np(P,20),void 0!==e){const J=Z.projection=[];for(let ve=0;ve<this.ngContentSelectors.length;ve++){const be=e[ve];J.push(null!=be?Array.from(be):null)}}q=function MC(i,t,e,n,r){const o=e[1],s=function IP(i,t,e){const n=Xn();i.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),iC(i,n,t,Ca(i,t,1,null),e));const r=Hl(t,i,n.directiveStart,n);li(r,t);const o=er(n,t);return o&&li(o,t),r}(o,e,t);if(n.components.push(s),i[8]=s,r&&r.forEach(l=>l(s,t)),t.contentQueries){const l=Xn();t.contentQueries(1,s,l.directiveStart)}const a=Xn();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Po(a.index),J0(e[1],a,0,a.directiveStart,a.directiveEnd,t),eC(t,s)),s}(re,this.componentDef,V,A,[mR]),nc(P,V,null)}finally{Fd()}return new KF(this.componentType,q,ja(Z,V),V,Z)}}class KF extends class NF{}{constructor(t,e,n,r,o){super(),this.location=n,this._rootLView=r,this._tNode=o,this.instance=e,this.hostView=this.changeDetectorRef=new YF(r),this.componentType=t}get injector(){return new da(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class Wa{}const Ga=new Map;class mw extends Wa{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new uw(this);const n=Qi(t);this._bootstrapComponents=Gr(n.bootstrap),this._r3Injector=pC(t,e,[{provide:Wa,useValue:this},{provide:Cs,useValue:this.componentFactoryResolver}],Qt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=nn.THROW_IF_NOT_FOUND,n=bt.Default){return t===nn||t===Wa||t===_m?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class jm extends class ZF{}{constructor(t){super(),this.moduleType=t,null!==Qi(t)&&function JF(i){const t=new Set;!function e(n){const r=Qi(n,!0),o=r.id;null!==o&&(function fw(i,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${i} - ${Qt(t)} vs ${Qt(t.name)}`)}(o,Ga.get(o),n),Ga.set(o,n));const s=Gr(r.imports);for(const a of s)t.has(a)||(t.add(a),e(a))}(i)}(t)}create(t){return new mw(this.moduleType,t)}}function Cu(i,t,e){const n=gi()+i,r=De();return r[n]===yt?Yr(r,n,e?t.call(e):t()):function oc(i,t){return i[t]}(r,n)}function pc(i,t,e,n){return gw(De(),gi(),i,t,e,n)}function zm(i,t,e,n,r){return function _w(i,t,e,n,r,o,s){const a=t+e;return function vs(i,t,e,n){const r=ci(i,t,e);return ci(i,t+1,n)||r}(i,a,r,o)?Yr(i,a+2,s?n.call(s,r,o):n(r,o)):mc(i,a+2)}(De(),gi(),i,t,e,n,r)}function mc(i,t){const e=i[t];return e===yt?void 0:e}function gw(i,t,e,n,r,o){const s=t+e;return ci(i,s,r)?Yr(i,s+1,o?n.call(o,r):n(r)):mc(i,s+1)}function Xr(i,t){const e=Yt();let n;const r=i+20;e.firstCreatePass?(n=function aL(i,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(i===n.name)return n}}(t,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const o=n.factory||(n.factory=ms(n.type)),s=Eo(N);try{const a=jd(!1),l=o();return jd(a),function TR(i,t,e,n){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),t[e]=n}(e,De(),r,l),l}finally{Eo(s)}}function $r(i,t,e){const n=i+20,r=De(),o=sa(r,n);return function gc(i,t){return i[1].data[t].pure}(r,n)?gw(r,gi(),t,o.transform,e,o):o.transform(e)}function Wm(i){return t=>{setTimeout(i,void 0,t)}}const Te=class hL extends W{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,l=e||(()=>null),p=n;if(t&&"object"==typeof t){const w=t;a=null===(r=w.next)||void 0===r?void 0:r.bind(w),l=null===(o=w.error)||void 0===o?void 0:o.bind(w),p=null===(s=w.complete)||void 0===s?void 0:s.bind(w)}this.__isAsync&&(l=Wm(l),a&&(a=Wm(a)),p&&(p=Wm(p)));const b=super.subscribe({next:a,error:l,complete:p});return t instanceof mt&&t.add(b),b}};function fL(){return this._results[Sa()]()}class xs{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Sa(),n=xs.prototype;n[e]||(n[e]=fL)}get changes(){return this._changes||(this._changes=new Te)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=nr(t);(this._changesDetected=!function vI(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],o=t[n];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let _n=(()=>{class i{}return i.__NG_ELEMENT_ID__=gL,i})();const pL=_n,mL=class extends pL{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=tc(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(n[19]=o.createEmbeddedView(e)),nc(e,n,t),new fc(n)}};function gL(){return xu(Xn(),De())}function xu(i,t){return 4&i.type?new mL(t,i,ja(i,t)):null}let Tn=(()=>{class i{}return i.__NG_ELEMENT_ID__=_L,i})();function _L(){return ww(Xn(),De())}const vL=Tn,Cw=class extends vL{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return ja(this._hostTNode,this._hostLView)}get injector(){return new da(this._hostTNode,this._hostLView)}get parentInjector(){const t=zd(this._hostTNode,this._hostLView);if(Cy(t)){const e=ca(t,this._hostLView),n=la(t);return new da(e[1].data[n+8],e)}return new da(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=xw(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,o){const s=t&&!zl(t);let a;if(s)a=e;else{const w=e||{};a=w.index,n=w.injector,r=w.projectableNodes,o=w.ngModuleRef}const l=s?t:new Hm(si(t)),p=n||this.parentInjector;if(!o&&null==l.ngModule){const A=(s?p:this.parentInjector).get(Wa,null);A&&(o=A)}const b=l.create(p,r,void 0,o);return this.insert(b.hostView,a),b}insert(t,e){const n=t._lView,r=n[1];if(function zA(i){return br(i[3])}(n)){const b=this.indexOf(t);if(-1!==b)this.detach(b);else{const w=n[3],A=new Cw(w,w[6],w[3]);A.detach(A.indexOf(t))}}const o=this._adjustIndex(e),s=this._lContainer;!function U2(i,t,e,n){const r=10+n,o=e.length;n>0&&(e[r-1][4]=t),n<o-10?(t[4]=e[r],Iy(e,10+n,t)):(e.push(t),t[4]=null),t[3]=e;const s=t[17];null!==s&&e!==s&&function Y2(i,t){const e=i[9];t[16]!==t[3][3][16]&&(i[2]=!0),null===e?i[9]=[t]:e.push(t)}(s,t);const a=t[19];null!==a&&a.insertView(i),t[2]|=128}(r,n,s,o);const a=qp(o,s),l=n[11],p=Jd(l,s[7]);return null!==p&&function z2(i,t,e,n,r,o){n[0]=r,n[6]=t,ec(i,n,e,1,r,o)}(r,s[6],l,n,p,a),t.attachToViewContainerRef(),Iy(Gm(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=xw(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Gp(this._lContainer,e);n&&(Ud(Gm(this._lContainer),e),m0(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Gp(this._lContainer,e);return n&&null!=Ud(Gm(this._lContainer),e)?new fc(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function xw(i){return i[8]}function Gm(i){return i[8]||(i[8]=[])}function ww(i,t){let e;const n=t[i.index];if(br(n))e=n;else{let r;if(8&i.type)r=Hn(n);else{const o=t[11];r=o.createComment("");const s=er(i,t);_s(o,Jd(o,s),r,function K2(i,t){return Dn(i)?i.nextSibling(t):t.nextSibling}(o,s),!1)}t[i.index]=e=rC(n,t,r,i),su(t,e)}return new Cw(e,i,t)}class Um{constructor(t){this.queryList=t,this.matches=null}clone(){return new Um(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ym{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let o=0;o<n;o++){const s=e.getByIndex(o);r.push(this.queries[s.indexInDeclarationView].clone())}return new Ym(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Ew(t,e).matches&&this.queries[e].setDirty()}}class Dw{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class qm{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,o=this.getByIndex(n).embeddedTView(t,r);o&&(o.indexInDeclarationView=n,null!==e?e.push(o):e=[o])}return null!==e?new qm(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Xm{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Xm(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const o=n[r];this.matchTNodeWithReadOption(t,e,CL(e,o)),this.matchTNodeWithReadOption(t,e,Gd(e,t,o,!1,!1))}else n===_n?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Gd(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Ze||r===Tn||r===_n&&4&e.type)this.addMatch(e.index,-2);else{const o=Gd(e,t,r,!1,!1);null!==o&&this.addMatch(e.index,o)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function CL(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function wL(i,t,e,n){return-1===e?function xL(i,t){return 11&i.type?ja(i,t):4&i.type?xu(i,t):null}(t,i):-2===e?function DL(i,t,e){return e===Ze?ja(t,i):e===_n?xu(t,i):e===Tn?ww(t,i):void 0}(i,t,n):Hl(i,i[1],e,t)}function Sw(i,t,e,n){const r=t[19].queries[n];if(null===r.matches){const o=i.data,s=e.matches,a=[];for(let l=0;l<s.length;l+=2){const p=s[l];a.push(p<0?null:wL(t,o[p],s[l+1],e.metadata.read))}r.matches=a}return r.matches}function $m(i,t,e,n){const r=i.queries.getByIndex(e),o=r.matches;if(null!==o){const s=Sw(i,t,r,e);for(let a=0;a<o.length;a+=2){const l=o[a];if(l>0)n.push(s[a/2]);else{const p=o[a+1],b=t[-l];for(let w=10;w<b.length;w++){const A=b[w];A[17]===A[3]&&$m(A[1],A,p,n)}if(null!==b[9]){const w=b[9];for(let A=0;A<w.length;A++){const P=w[A];$m(P[1],P,p,n)}}}}}return n}function oe(i){const t=De(),e=Yt(),n=hy();cp(n+1);const r=Ew(e,n);if(i.dirty&&sy(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const o=r.crossesNgTemplate?$m(e,t,n,[]):Sw(e,t,r,n);i.reset(o,jF),i.notifyOnChanges()}return!0}return!1}function xe(i,t,e){const n=Yt();n.firstCreatePass&&(Tw(n,new Dw(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),Mw(n,De(),t)}function Ht(i,t,e,n){const r=Yt();if(r.firstCreatePass){const o=Xn();Tw(r,new Dw(t,e,n),o.index),function ML(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}Mw(r,De(),e)}function se(){return function SL(i,t){return i[19].queries[t].queryList}(De(),hy())}function Mw(i,t,e){const n=new xs(4==(4&e));K0(i,t,n,n.destroy),null===t[19]&&(t[19]=new Ym),t[19].queries.push(new Um(n))}function Tw(i,t,e){null===i.queries&&(i.queries=new qm),i.queries.track(new Xm(t,e))}function Ew(i,t){return i.queries.getByIndex(t)}function Ie(i,t){return xu(i,t)}function Su(...i){}const Uw=new _e("Application Initializer");let tg=(()=>{class i{constructor(e){this.appInits=e,this.resolve=Su,this.reject=Su,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const o=this.appInits[r]();if(uu(o))e.push(o);else if($C(o)){const s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});e.push(s)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return i.\u0275fac=function(e){return new(e||i)(ee(Uw,8))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const vc=new _e("AppId",{providedIn:"root",factory:function Yw(){return`${ng()}${ng()}${ng()}`}});function ng(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qw=new _e("Platform Initializer"),ws=new _e("Platform ID"),WL=new _e("appBootstrapListener");let GL=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();const go=new _e("LocaleId",{providedIn:"root",factory:()=>Ul(go,bt.Optional|bt.SkipSelf)||function UL(){return"undefined"!=typeof $localize&&$localize.locale||mu}()}),$L=(()=>Promise.resolve(0))();function ig(i){"undefined"==typeof Zone?$L.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class at{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Te(!1),this.onMicrotaskEmpty=new Te(!1),this.onStable=new Te(!1),this.onError=new Te(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function KL(){let i=Jt.requestAnimationFrame,t=Jt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&t){const e=i[Zone.__symbol__("OriginalDelegate")];e&&(i=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function JL(i){const t=()=>{!function ZL(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Jt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,og(i),i.isCheckStableRunning=!0,rg(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),og(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,o,s,a)=>{try{return Xw(i),e.invokeTask(r,o,s,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||i.shouldCoalesceRunChangeDetection)&&t(),$w(i)}},onInvoke:(e,n,r,o,s,a,l)=>{try{return Xw(i),e.invoke(r,o,s,a,l)}finally{i.shouldCoalesceRunChangeDetection&&t(),$w(i)}},onHasTask:(e,n,r,o)=>{e.hasTask(r,o),n===r&&("microTask"==o.change?(i._hasPendingMicrotasks=o.microTask,og(i),rg(i)):"macroTask"==o.change&&(i.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,n,r,o)=>(e.handleError(r,o),i.runOutsideAngular(()=>i.onError.emit(o)),!1)})}(r)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!at.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(at.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,QL,Su,Su);try{return o.runTask(s,e,n)}finally{o.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const QL={};function rg(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function og(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Xw(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function $w(i){i._nesting--,rg(i)}class eN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Te,this.onMicrotaskEmpty=new Te,this.onStable=new Te,this.onError=new Te}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let sg=(()=>{class i{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{at.assertNotInAngularZone(),ig(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ig(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let o=-1;n&&n>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,n,r){return[]}}return i.\u0275fac=function(e){return new(e||i)(ee(at))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})(),Kw=(()=>{class i{constructor(){this._applications=new Map,ag.addToWindow(this)}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return ag.findTestabilityInTree(this,e,n)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();class tN{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let kr,ag=new tN;const Qw=new _e("AllowMultipleToken");function Zw(i,t,e=[]){const n=`Platform: ${t}`,r=new _e(n);return(o=[])=>{let s=Jw();if(!s||s.injector.get(Qw,!1))if(i)i(e.concat(o).concat({provide:r,useValue:!0}));else{const a=e.concat(o).concat({provide:r,useValue:!0},{provide:vm,useValue:"platform"});!function oN(i){if(kr&&!kr.destroyed&&!kr.injector.get(Qw,!1))throw new Ue(400,"");kr=i.get(eD);const t=i.get(qw,null);t&&t.forEach(e=>e())}(nn.create({providers:a,name:n}))}return function sN(i){const t=Jw();if(!t)throw new Ue(401,"");return t}()}}function Jw(){return kr&&!kr.destroyed?kr:null}let eD=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const a=function aN(i,t){let e;return e="noop"===i?new eN:("zone.js"===i?void 0:i)||new at({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(n?n.ngZone:void 0,{ngZoneEventCoalescing:n&&n.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:n&&n.ngZoneRunCoalescing||!1}),l=[{provide:at,useValue:a}];return a.run(()=>{const p=nn.create({providers:l,parent:this.injector,name:e.moduleType.name}),b=e.create(p),w=b.injector.get(Lo,null);if(!w)throw new Ue(402,"");return a.runOutsideAngular(()=>{const A=a.onError.subscribe({next:P=>{w.handleError(P)}});b.onDestroy(()=>{lg(this._modules,b),A.unsubscribe()})}),function lN(i,t,e){try{const n=e();return uu(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(w,a,()=>{const A=b.injector.get(tg);return A.runInitializers(),A.donePromise.then(()=>(function zO(i){Ni(i,"Expected localeId to be defined"),"string"==typeof i&&(Bx=i.toLowerCase().replace(/_/g,"-"))}(b.injector.get(go,mu)||mu),this._moduleDoBootstrap(b),b))})})}bootstrapModule(e,n=[]){const r=tD({},n);return function iN(i,t,e){const n=new jm(e);return Promise.resolve(n)}(0,0,e).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(e){const n=e.injector.get(Mu);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new Ue(403,"");e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue(404,"");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(e){return new(e||i)(ee(nn))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();function tD(i,t){return Array.isArray(t)?t.reduce(tD,i):Object.assign(Object.assign({},i),t)}let Mu=(()=>{class i{constructor(e,n,r,o,s){this._zone=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=o,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new Me(p=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{p.next(this._stable),p.complete()})}),l=new Me(p=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{at.assertNotInAngularZone(),ig(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,p.next(!0))})})});const w=this._zone.onUnstable.subscribe(()=>{at.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{p.next(!1)}))});return()=>{b.unsubscribe(),w.unsubscribe()}});this.isStable=Yn(a,l.pipe(Wb()))}bootstrap(e,n){if(!this._initStatus.done)throw new Ue(405,"");let r;r=e instanceof cw?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(r.componentType);const o=function rN(i){return i.isBoundToModule}(r)?void 0:this._injector.get(Wa),a=r.create(nn.NULL,[],n||r.selector,o),l=a.location.nativeElement,p=a.injector.get(sg,null),b=p&&a.injector.get(Kw);return p&&b&&b.registerApplication(l,p),a.onDestroy(()=>{this.detachView(a.hostView),lg(this.components,a),b&&b.unregisterApplication(l)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Ue(101,"");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;lg(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(WL,[]).concat(this._bootstrapListeners).forEach(r=>r(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(e){return new(e||i)(ee(at),ee(nn),ee(Lo),ee(Cs),ee(tg))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function lg(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}let iD=!0,Zt=(()=>{class i{}return i.__NG_ELEMENT_ID__=uN,i})();function uN(i){return function hN(i,t,e){if(kd(i)&&!e){const n=Vi(i.index,t);return new fc(n,n)}return 47&i.type?new fc(t[16],t):null}(Xn(),De(),16==(16&i))}class lD{constructor(){}supports(t){return rc(t)}create(t){return new vN(t)}}const _N=(i,t)=>t;class vN{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||_N}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,o=null;for(;e||n;){const s=!n||e&&e.currentIndex<dD(n,r,o)?e:n,a=dD(s,r,o),l=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)r++;else{o||(o=[]);const p=a-r,b=l-r;if(p!=b){for(let A=0;A<p;A++){const P=A<o.length?o[A]:o[A]=0,V=P+A;b<=V&&V<p&&(o[A]=P+1)}o[s.previousIndex]=b-p}}a!==l&&t(s,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!rc(t))throw new Ue(900,"");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,o,s,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==e&&Object.is(e.trackById,s)?(n&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)):(e=this._mismatch(e,o,s,a),n=!0),e=e._next}else r=0,function SR(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[Sa()]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,a=>{s=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,s)?(n&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,s,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new bN(e,n),o,r),t}_verifyReinsertion(t,e,n,r){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==o?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,o=t._nextRemoved;return null===r?this._removalsHead=o:r._nextRemoved=o,null===o?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new cD),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cD),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class bN{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yN{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class cD{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new yN,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dD(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}class uD{constructor(){}supports(t){return t instanceof Map||Dm(t)}create(){return new CN}}class CN{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Dm(t)))throw new Ue(900,"")}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const o=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,o)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const o=r._prev,s=r._next;return o&&(o._next=s),s&&(s._prev=o),r._next=null,r._prev=null,r}const n=new xN(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class xN{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function hD(){return new _o([new lD])}let _o=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||hD()),deps:[[i,new Cr,new ir]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new Ue(901,"")}}return i.\u0275prov=Ae({token:i,providedIn:"root",factory:hD}),i})();function fD(){return new bc([new uD])}let bc=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||fD()),deps:[[i,new Cr,new ir]]}}find(e){const n=this.factories.find(o=>o.supports(e));if(n)return n;throw new Ue(901,"")}}return i.\u0275prov=Ae({token:i,providedIn:"root",factory:fD}),i})();const SN=Zw(null,"core",[{provide:ws,useValue:"unknown"},{provide:eD,deps:[nn]},{provide:Kw,deps:[]},{provide:GL,deps:[]}]);let MN=(()=>{class i{constructor(e){}}return i.\u0275fac=function(e){return new(e||i)(ee(Mu))},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({}),i})(),ku=null;function Kr(){return ku}const ct=new _e("DocumentToken");let yc=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:function(){return function AN(){return ee(pD)}()},providedIn:"platform"}),i})(),pD=(()=>{class i extends yc{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kr().getBaseHref(this._doc)}onPopState(e){const n=Kr().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Kr().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,n,r){mD()?this._history.pushState(e,n,r):this.location.hash=r}replaceState(e,n,r){mD()?this._history.replaceState(e,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(ee(ct))},i.\u0275prov=Ae({token:i,factory:function(){return function IN(){return new pD(ee(ct))}()},providedIn:"platform"}),i})();function mD(){return!!window.history.pushState}function gD(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function _D(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function Ss(i){return i&&"?"!==i[0]?"?"+i:i}let fg=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:function(){return function PN(i){const t=ee(ct).location;return new ON(ee(yc),t&&t.origin||"")}()},providedIn:"root"}),i})();const RN=new _e("appBaseHref");let ON=(()=>{class i extends fg{constructor(e,n){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==n&&(n=this._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=n}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return gD(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+Ss(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,o){const s=this.prepareExternalUrl(r+Ss(o));this._platformLocation.pushState(e,n,s)}replaceState(e,n,r,o){const s=this.prepareExternalUrl(r+Ss(o));this._platformLocation.replaceState(e,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformLocation).historyGo)||void 0===r||r.call(n,e)}}return i.\u0275fac=function(e){return new(e||i)(ee(yc),ee(RN,8))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})(),pg=(()=>{class i{constructor(e,n){this._subject=new Te,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=_D(vD(r)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Ss(n))}normalize(e){return i.stripTrailingSlash(function LN(i,t){return i&&t.startsWith(i)?t.substring(i.length):t}(this._baseHref,vD(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._platformStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ss(n)),r)}replaceState(e,n="",r=null){this._platformStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Ss(n)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var n,r;null===(r=(n=this._platformStrategy).historyGo)||void 0===r||r.call(n,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}))}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return i.normalizeQueryParams=Ss,i.joinWithSlash=gD,i.stripTrailingSlash=_D,i.\u0275fac=function(e){return new(e||i)(ee(fg),ee(yc))},i.\u0275prov=Ae({token:i,factory:function(){return function FN(){return new pg(ee(fg),ee(yc))}()},providedIn:"root"}),i})();function vD(i){return i.replace(/\/index.html$/,"")}function TD(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,o]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}let Ms=(()=>{class i{constructor(e,n,r,o){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=o,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(rc(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),e.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Qt(n.item)}`);this._toggleClass(n.item,!0)}),e.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!0)):Object.keys(e).forEach(n=>this._toggleClass(n,!!e[n])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(n=>this._toggleClass(n,!1)):Object.keys(e).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(e,n){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(e){return new(e||i)(N(_o),N(bc),N(Ze),N(zo))},i.\u0275dir=fe({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),i})();class C3{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qr=(()=>{class i{constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,o,s)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new C3(r.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)n.remove(null===o?void 0:o);else if(null!==o){const a=n.get(o);n.move(a,s),ED(a,r)}});for(let r=0,o=n.length;r<o;r++){const a=n.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{ED(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(N(Tn),N(_n),N(_o))},i.\u0275dir=fe({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();function ED(i,t){i.context.$implicit=t.item}let ni=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new x3,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){kD("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){kD("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(N(Tn),N(_n))},i.\u0275dir=fe({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class x3{constructor(){this.$implicit=null,this.ngIf=null}}function kD(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${Qt(t)}'.`)}class Dg{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Ya=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(e)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=fe({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),i})(),Vu=(()=>{class i{constructor(e,n,r){this.ngSwitch=r,r._addCase(),this._view=new Dg(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(e){return new(e||i)(N(Tn),N(_n),N(Ya,9))},i.\u0275dir=fe({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),i})(),AD=(()=>{class i{constructor(e,n,r){r._addDefault(new Dg(e,n))}}return i.\u0275fac=function(e){return new(e||i)(N(Tn),N(_n),N(Ya,9))},i.\u0275dir=fe({type:i,selectors:[["","ngSwitchDefault",""]]}),i})(),Sg=(()=>{class i{constructor(e,n,r){this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){const[r,o]=e.split(".");null!=(n=null!=n&&o?`${n}${o}`:n)?this._renderer.setStyle(this._ngEl.nativeElement,r,n):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(bc),N(zo))},i.\u0275dir=fe({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),i})(),wc=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const n=this._viewContainerRef;this._viewRef&&n.remove(n.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?n.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(N(Tn))},i.\u0275dir=fe({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[fn]}),i})();class D3{createSubscription(t,e){return t.subscribe({next:e,error:n=>{throw n}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class S3{createSubscription(t,e){return t.then(e,n=>{throw n})}dispose(t){}onDestroy(t){}}const M3=new S3,T3=new D3;let Mg=(()=>{class i{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,n=>this._updateLatestValue(e,n))}_selectStrategy(e){if(uu(e))return M3;if(XC(e))return T3;throw function Ir(i,t){return new Ue(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,n){e===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(N(Zt,16))},i.\u0275pipe=qn({name:"async",type:i,pure:!1}),i})(),PD=(()=>{class i{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=RD}transform(e,n=RD){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const r=this.differ.diff(e),o=n!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(s=>{this.keyValues.push(function B3(i,t){return{key:i,value:t}}(s.key,s.currentValue))})),(r||o)&&(this.keyValues.sort(n),this.compareFn=n),this.keyValues}}return i.\u0275fac=function(e){return new(e||i)(N(bc,16))},i.\u0275pipe=qn({name:"keyvalue",type:i,pure:!1}),i})();function RD(i,t){const e=i.key,n=t.key;if(e===n)return 0;if(void 0===e)return 1;if(void 0===n)return-1;if(null===e)return 1;if(null===n)return-1;if("string"==typeof e&&"string"==typeof n)return e<n?-1:1;if("number"==typeof e&&"number"==typeof n)return e-n;if("boolean"==typeof e&&"boolean"==typeof n)return e<n?-1:1;const r=String(e),o=String(n);return r==o?0:r<o?-1:1}let Nn=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({}),i})();const OD="browser";function kg(i){return i===OD}class LD{}class Ag extends class X3 extends class kN{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function EN(i){ku||(ku=i)}(new Ag)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function $3(){return Dc=Dc||document.querySelector("base"),Dc?Dc.getAttribute("href"):null}();return null==e?null:function K3(i){Hu=Hu||document.createElement("a"),Hu.setAttribute("href",i);const t=Hu.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Dc=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return TD(document.cookie,t)}}let Hu,Dc=null;const ND=new _e("TRANSITION_ID"),Z3=[{provide:Uw,useFactory:function Q3(i,t,e){return()=>{e.get(tg).donePromise.then(()=>{const n=Kr(),r=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let o=0;o<r.length;o++)n.remove(r[o])})}},deps:[ND,ct,nn],multi:!0}];class Ig{static init(){!function nN(i){ag=i}(new Ig)}addToWindow(t){Jt.getAngularTestability=(n,r=!0)=>{const o=t.findTestabilityInTree(n,r);if(null==o)throw new Error("Could not find testability for element.");return o},Jt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Jt.getAllAngularRootElements=()=>t.getAllRootElements(),Jt.frameworkStabilizers||(Jt.frameworkStabilizers=[]),Jt.frameworkStabilizers.push(n=>{const r=Jt.getAllAngularTestabilities();let o=r.length,s=!1;const a=function(l){s=s||l,o--,0==o&&n(s)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Kr().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let J3=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();const ju=new _e("EventManagerPlugins");let zu=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let o=0;o<r.length;o++){const s=r[o];if(s.supports(e))return this._eventNameToPlugin.set(e,s),s}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(ee(ju),ee(at))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();class BD{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Kr().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let VD=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(e){const n=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})(),Sc=(()=>{class i extends VD{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,n,r){e.forEach(o=>{const s=this._doc.createElement("style");s.textContent=o,r.push(n.appendChild(s))})}addHost(e){const n=[];this._addStylesToHost(this._stylesSet,e,n),this._hostNodes.set(e,n)}removeHost(e){const n=this._hostNodes.get(e);n&&n.forEach(HD),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(e,r,n)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(HD))}}return i.\u0275fac=function(e){return new(e||i)(ee(ct))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();function HD(i){Kr().remove(i)}const Pg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Rg=/%COMP%/g;function Wu(i,t,e){for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?Wu(i,r,e):(r=r.replace(Rg,i),e.push(r))}return e}function WD(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let Gu=(()=>{class i{constructor(e,n,r){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Og(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;switch(n.encapsulation){case _r.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new oB(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(e),r}case 1:case _r.ShadowDom:return new sB(this.eventManager,this.sharedStylesHost,e,n);default:if(!this.rendererByCompId.has(n.id)){const r=Wu(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(ee(zu),ee(Sc),ee(vc))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();class Og{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Pg[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const o=Pg[r];o?t.setAttributeNS(o,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=Pg[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(zi.DashCase|zi.Important)?t.style.setProperty(e,n,r&zi.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&zi.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,WD(n)):this.eventManager.addEventListener(t,e,WD(n))}}class oB extends Og{constructor(t,e,n,r){super(t),this.component=n;const o=Wu(r+"-"+n.id,n.styles,[]);e.addStyles(o),this.contentAttr=function nB(i){return"_ngcontent-%COMP%".replace(Rg,i)}(r+"-"+n.id),this.hostAttr=function iB(i){return"_nghost-%COMP%".replace(Rg,i)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class sB extends Og{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Wu(r.id,r.styles,[]);for(let s=0;s<o.length;s++){const a=document.createElement("style");a.textContent=o[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let aB=(()=>{class i extends BD{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return i.\u0275fac=function(e){return new(e||i)(ee(ct))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();const UD=["alt","control","meta","shift"],cB={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},YD={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},dB={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let uB=(()=>{class i extends BD{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const o=i.parseEventName(n),s=i.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kr().onAndCancel(e,o.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const o=i._normalizeKey(n.pop());let s="";if(UD.forEach(l=>{const p=n.indexOf(l);p>-1&&(n.splice(p,1),s+=l+".")}),s+=o,0!=n.length||0===o.length)return null;const a={};return a.domEventName=r,a.fullKey=s,a}static getEventFullKey(e){let n="",r=function hB(i){let t=i.key;if(null==t){if(t=i.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===i.location&&YD.hasOwnProperty(t)&&(t=YD[t]))}return cB[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),UD.forEach(o=>{o!=r&&dB[o](e)&&(n+=o+".")}),n+=r,n}static eventCallback(e,n,r){return o=>{i.getEventFullKey(o)===e&&r.runGuarded(()=>n(o))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(ee(ct))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();const gB=Zw(SN,"browser",[{provide:ws,useValue:OD},{provide:qw,useValue:function fB(){Ag.makeCurrent(),Ig.init()},multi:!0},{provide:ct,useFactory:function mB(){return function BA(i){ep=i}(document),document},deps:[]}]),_B=[{provide:vm,useValue:"root"},{provide:Lo,useFactory:function pB(){return new Lo},deps:[]},{provide:ju,useClass:aB,multi:!0,deps:[ct,at,ws]},{provide:ju,useClass:uB,multi:!0,deps:[ct]},{provide:Gu,useClass:Gu,deps:[zu,Sc,vc]},{provide:hc,useExisting:Gu},{provide:VD,useExisting:Sc},{provide:Sc,useClass:Sc,deps:[ct]},{provide:sg,useClass:sg,deps:[at]},{provide:zu,useClass:zu,deps:[ju,at]},{provide:LD,useClass:J3,deps:[]}];let qD=(()=>{class i{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:i,providers:[{provide:vc,useValue:e.appId},{provide:ND,useExisting:vc},Z3]}}}return i.\u0275fac=function(e){return new(e||i)(ee(i,12))},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:_B,imports:[Nn,MN]}),i})();"undefined"!=typeof window&&window;let Go=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:function(e){let n=null;return n=e?new(e||i):ee(KD),n},providedIn:"root"}),i})(),KD=(()=>{class i extends Go{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case $t.NONE:return n;case $t.HTML:return zr(n,"HTML")?ji(n):Jy(this._doc,String(n)).toString();case $t.STYLE:return zr(n,"Style")?ji(n):n;case $t.SCRIPT:if(zr(n,"Script"))return ji(n);throw new Error("unsafe value used in a script context");case $t.URL:return Uy(n),zr(n,"URL")?ji(n):Xl(String(n));case $t.RESOURCE_URL:if(zr(n,"ResourceURL"))return ji(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function $I(i){return new GI(i)}(e)}bypassSecurityTrustStyle(e){return function KI(i){return new UI(i)}(e)}bypassSecurityTrustScript(e){return function QI(i){return new YI(i)}(e)}bypassSecurityTrustUrl(e){return function ZI(i){return new qI(i)}(e)}bypassSecurityTrustResourceUrl(e){return function JI(i){return new XI(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)(ee(ct))},i.\u0275prov=Ae({token:i,factory:function(e){let n=null;return n=e?new e:function TB(i){return new KD(i.get(ct))}(ee(nn)),n},providedIn:"root"}),i})();function Ke(i){return null!=i&&"false"!=`${i}`}function Ci(i,t=0){return function EB(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):t}function Uu(i){return Array.isArray(i)?i:[i]}function Wn(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Bn(i){return i instanceof Ze?i.nativeElement:i}function Pi(...i){return ds(i,Il(i))}const{isArray:AB}=Array;function Lg(i){return ae(t=>function IB(i,t){return AB(t)?i(...t):i(t)}(i,t))}const PB=["addListener","removeListener"],RB=["addEventListener","removeEventListener"],OB=["on","off"];function Uo(i,t,e,n){if(S(e)&&(n=e,e=void 0),n)return Uo(i,t,e).pipe(Lg(n));const[r,o]=function NB(i){return S(i.addEventListener)&&S(i.removeEventListener)}(i)?RB.map(s=>a=>i[s](t,a,e)):function FB(i){return S(i.addListener)&&S(i.removeListener)}(i)?PB.map(QD(i,t)):function LB(i){return S(i.on)&&S(i.off)}(i)?OB.map(QD(i,t)):[];if(!r&&kl(i))return ea(s=>Uo(s,t,e))(ki(i));if(!r)throw new TypeError("Invalid event target");return new Me(s=>{const a=(...l)=>s.next(1<l.length?l:l[0]);return r(a),()=>o(a)})}function QD(i,t){return e=>n=>i[e](t,n)}class BB extends mt{constructor(t,e){super()}schedule(t,e=0){return this}}const Yu={setInterval(i,t,...e){const{delegate:n}=Yu;return(null==n?void 0:n.setInterval)?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=Yu;return((null==t?void 0:t.clearInterval)||clearInterval)(i)},delegate:void 0};class Ng extends BB{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var n;if(this.closed)return this;this.state=t;const r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,n=0){return Yu.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&Yu.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(o){n=!0,r=o||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Ki(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const Mc={schedule(i){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:n}=Mc;n&&(t=n.requestAnimationFrame,e=n.cancelAnimationFrame);const r=t(o=>{e=void 0,i(o)});return new mt(()=>null==e?void 0:e(r))},requestAnimationFrame(...i){const{delegate:t}=Mc;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:t}=Mc;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...i)},delegate:void 0},ZD={now:()=>(ZD.delegate||Date).now(),delegate:void 0};class Tc{constructor(t,e=Tc.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}Tc.now=ZD.now;class Bg extends Tc{constructor(t,e=Tc.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const JD=new class HB extends Bg{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class VB extends Ng{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=Mc.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:o}=t;null!=e&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==e&&(Mc.cancelAnimationFrame(e),t._scheduled=void 0)}});let Vg,jB=1;const qu={};function e1(i){return i in qu&&(delete qu[i],!0)}const zB={setImmediate(i){const t=jB++;return qu[t]=!0,Vg||(Vg=Promise.resolve()),Vg.then(()=>e1(t)&&i()),t},clearImmediate(i){e1(i)}},{setImmediate:WB,clearImmediate:GB}=zB,Xu={setImmediate(...i){const{delegate:t}=Xu;return((null==t?void 0:t.setImmediate)||WB)(...i)},clearImmediate(i){const{delegate:t}=Xu;return((null==t?void 0:t.clearImmediate)||GB)(i)},delegate:void 0},Hg=new class YB extends Bg{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class UB extends Ng{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=Xu.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:o}=t;null!=e&&(null===(r=o[o.length-1])||void 0===r?void 0:r.id)!==e&&(Xu.clearImmediate(e),t._scheduled=void 0)}}),Ec=new Bg(Ng),qB=Ec;function jg(i=0,t,e=qB){let n=-1;return null!=t&&(Bb(t)?e=t:n=t),new Me(r=>{let o=function $B(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=n?this.schedule(void 0,n):r.complete())},o)})}function t1(i,t=Ec){return function XB(i){return j((t,e)=>{let n=!1,r=null,o=null,s=!1;const a=()=>{if(null==o||o.unsubscribe(),o=null,n){n=!1;const p=r;r=null,e.next(p)}s&&e.complete()},l=()=>{o=null,s&&e.complete()};t.subscribe(K(e,p=>{n=!0,r=p,o||ki(i(p)).subscribe(o=K(e,a,l))},()=>{s=!0,(!n||!o||o.closed)&&e.complete()}))})}(()=>jg(i,t))}function bn(i,t){return j((e,n)=>{let r=0;e.subscribe(K(n,o=>i.call(t,o,r++)&&n.next(o)))})}let zg;try{zg="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(i){zg=!1}let qa,En=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?kg(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!zg)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(ee(ws))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const n1=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function r1(){if(qa)return qa;if("object"!=typeof document||!document)return qa=new Set(n1),qa;let i=document.createElement("input");return qa=new Set(n1.filter(t=>(i.setAttribute("type",t),i.type===t))),qa}let kc,Ts,Wg;function Pr(i){return function KB(){if(null==kc&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>kc=!0}))}finally{kc=kc||!1}return kc}()?i:!!i.capture}function QB(){if(null==Ts){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Ts=!1,Ts;if("scrollBehavior"in document.documentElement.style)Ts=!0;else{const i=Element.prototype.scrollTo;Ts=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return Ts}function Ku(i){if(function ZB(){if(null==Wg){const i="undefined"!=typeof document?document.head:null;Wg=!(!i||!i.createShadowRoot&&!i.attachShadow)}return Wg}()){const t=i.getRootNode?i.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Gg(){let i="undefined"!=typeof document&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const t=i.shadowRoot.activeElement;if(t===i)break;i=t}return i}function ar(i){return i.composedPath?i.composedPath()[0]:i.target}function Ug(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}const JB=new _e("cdk-dir-doc",{providedIn:"root",factory:function e5(){return Ul(ct)}}),t5=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let lr=(()=>{class i{constructor(e){if(this.value="ltr",this.change=new Te,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function n5(i){const t=(null==i?void 0:i.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?t5.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(ee(JB,8))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Xa=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({}),i})(),o1=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new W,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Me(n=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(t1(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Pi()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(bn(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&n.push(o)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=Bn(n),o=e.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Uo(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(e){return new(e||i)(ee(at),ee(En),ee(ct,8))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Es=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new W,this._changeListener=o=>{this._change.next(o)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,left:-o.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(t1(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(e){return new(e||i)(ee(En),ee(at),ee(ct,8))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Zr=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({}),i})(),Yg=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Xa,Zr],Xa,Zr]}),i})();class qg{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class $a extends qg{constructor(t,e,n,r){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r}}class ks extends qg{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class s5 extends qg{constructor(t){super(),this.element=t instanceof Ze?t.nativeElement:t}}class Qu{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof $a?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof ks?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof s5?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class a5 extends Qu{constructor(t,e,n,r,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=o}attachComponentPortal(t){const n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||nn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);-1!==r&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Ac=(()=>{class i extends Qu{constructor(e,n,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new Te,this.attachDomPortal=o=>{const s=o.element,a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,o=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),s=n.createComponent(o,n.length,e.injector||n.injector);return n!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=e,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(e){e.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return i.\u0275fac=function(e){return new(e||i)(N(Cs),N(Tn),N(ct))},i.\u0275dir=fe({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Pe]}),i})(),As=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({}),i})();function an(i){return i<=0?()=>Al:j((t,e)=>{let n=0;t.subscribe(K(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function Ut(i){return j((t,e)=>{ki(i).subscribe(K(e,()=>e.complete(),h)),!e.closed&&t.subscribe(e)})}function xi(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}const c1=QB();class C5{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Wn(-this._previousScrollPosition.left),t.style.top=Wn(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,n=t.style,r=this._document.body.style,o=n.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),c1&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),c1&&(n.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class x5{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class d1{enable(){}disable(){}attach(){}}function Kg(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function u1(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class w5{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();Kg(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let D5=(()=>{class i{constructor(e,n,r,o){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new d1,this.close=s=>new x5(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new C5(this._viewportRuler,this._document),this.reposition=s=>new w5(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}}return i.\u0275fac=function(e){return new(e||i)(ee(o1),ee(Es),ee(at),ee(ct))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Za{constructor(t){if(this.scrollStrategy=new d1,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class S5{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class M5{constructor(t,e,n,r,o,s,a,l,p){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=l,this._outsideClickDispatcher=p,this._backdropElement=null,this._backdropClick=new W,this._attachments=new W,this._detachments=new W,this._locationChanges=mt.EMPTY,this._backdropClickHandler=b=>this._backdropClick.next(b),this._backdropTransitionendHandler=b=>{this._disposeBackdrop(b.target)},this._keydownEvents=new W,this._outsidePointerEvents=new W,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(an(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Wn(this._config.width),t.height=Wn(this._config.height),t.minWidth=Wn(this._config.minWidth),t.minHeight=Wn(this._config.minHeight),t.maxWidth=Wn(this._config.maxWidth),t.maxHeight=Wn(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,n){const r=Uu(e||[]).filter(o=>!!o);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Ut(Yn(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let Qg=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Ug()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const n=this._document.createElement("div");n.classList.add(e),Ug()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(e){return new(e||i)(ee(ct),ee(En))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const h1="cdk-overlay-connected-position-bounding-box",T5=/([A-Za-z%]+)$/;class E5{constructor(t,e,n,r,o){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new W,this._resizeSubscription=mt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(h1),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,o=[];let s;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),p=this._getOverlayPoint(l,e,a),b=this._getOverlayFit(p,e,n,a);if(b.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(b,p,n)?o.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!s||s.overlayFit.visibleArea<b.visibleArea)&&(s={overlayFit:b,overlayPoint:p,originPoint:l,position:a,overlayRect:e})}if(o.length){let a=null,l=-1;for(const p of o){const b=p.boundingBoxRect.width*p.boundingBoxRect.height*(p.position.weight||1);b>l&&(l=b,a=p)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(s.position,s.originPoint);this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Rs(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(h1),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r,o;if("center"==n.originX)r=t.left+t.width/2;else{const s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==n.originX?s:a}return e.left<0&&(r-=e.left),o="center"==n.originY?t.top+t.height/2:"top"==n.originY?t.top:t.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(t,e,n){let r,o;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,e,n,r){const o=p1(e);let{x:s,y:a}=t,l=this._getOffset(r,"x"),p=this._getOffset(r,"y");l&&(s+=l),p&&(a+=p);let A=0-a,P=a+o.height-n.height,V=this._subtractOverflows(o.width,0-s,s+o.width-n.width),q=this._subtractOverflows(o.height,A,P),Z=V*q;return{visibleArea:Z,isCompletelyWithinViewport:o.width*o.height===Z,fitsInViewportVertically:q===o.height,fitsInViewportHorizontally:V==o.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,o=n.right-e.x,s=f1(this._overlayRef.getConfig().minHeight),a=f1(this._overlayRef.getConfig().minWidth),p=t.fitsInViewportHorizontally||null!=a&&a<=o;return(t.fitsInViewportVertically||null!=s&&s<=r)&&p}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=p1(e),o=this._viewportRect,s=Math.max(t.x+r.width-o.width,0),a=Math.max(t.y+r.height-o.height,0),l=Math.max(o.top-n.top-t.y,0),p=Math.max(o.left-n.left-t.x,0);let b=0,w=0;return b=r.width<=o.width?p||-s:t.x<this._viewportMargin?o.left-n.left-t.x:0,w=r.height<=o.height?l||-a:t.y<this._viewportMargin?o.top-n.top-t.y:0,this._previousPushAmount={x:b,y:w},{x:t.x+b,y:t.y+w}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new S5(t,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let o,s,a,b,w,A;if("top"===e.overlayY)s=t.y,o=n.height-s+this._viewportMargin;else if("bottom"===e.overlayY)a=n.height-t.y+2*this._viewportMargin,o=n.height-a+this._viewportMargin;else{const P=Math.min(n.bottom-t.y+n.top,t.y),V=this._lastBoundingBoxSize.height;o=2*P,s=t.y-P,o>V&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-V/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)A=n.width-t.x+this._viewportMargin,b=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)w=t.x,b=n.right-t.x;else{const P=Math.min(n.right-t.x+n.left,t.x),V=this._lastBoundingBoxSize.width;b=2*P,w=t.x-P,b>V&&!this._isInitialRender&&!this._growAfterOpen&&(w=t.x-V/2)}return{top:s,left:w,bottom:a,right:A,width:b,height:o}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=Wn(n.height),r.top=Wn(n.top),r.bottom=Wn(n.bottom),r.width=Wn(n.width),r.left=Wn(n.left),r.right=Wn(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=Wn(o)),s&&(r.maxWidth=Wn(s))}this._lastBoundingBoxSize=n,Rs(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Rs(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Rs(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){const b=this._viewportRuler.getViewportScrollPosition();Rs(n,this._getExactOverlayY(e,t,b)),Rs(n,this._getExactOverlayX(e,t,b))}else n.position="static";let a="",l=this._getOffset(e,"x"),p=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),p&&(a+=`translateY(${p}px)`),n.transform=a.trim(),s.maxHeight&&(r?n.maxHeight=Wn(s.maxHeight):o&&(n.maxHeight="")),s.maxWidth&&(r?n.maxWidth=Wn(s.maxWidth):o&&(n.maxWidth="")),Rs(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=Wn(o.y),r}_getExactOverlayX(t,e,n){let s,r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),s=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===s?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=Wn(o.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:u1(t,n),isOriginOutsideView:Kg(t,n),isOverlayClipped:u1(e,n),isOverlayOutsideView:Kg(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Uu(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Ze)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function Rs(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function f1(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(T5);return e&&"px"!==e?null:parseFloat(t)}return i||null}function p1(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const m1="cdk-global-overlay-wrapper";class k5{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(m1),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||s&&"100%"!==s&&"100vw"!==s),p=!("100%"!==o&&"100vh"!==o||a&&"100%"!==a&&"100vh"!==a);t.position=this._cssPosition,t.marginLeft=l?"0":this._leftOffset,t.marginTop=p?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,l?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=p?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(m1),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let A5=(()=>{class i{constructor(e,n,r,o){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=o}global(){return new k5}flexibleConnectedTo(e){return new E5(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(e){return new(e||i)(ee(Es),ee(ct),ee(En),ee(Qg))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),g1=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(e){return new(e||i)(ee(ct))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),I5=(()=>{class i extends g1{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{const o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){const a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(e){return new(e||i)(ee(ct),ee(at,8))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),P5=(()=>{class i extends g1{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=ar(o)},this._clickListener=o=>{const s=ar(o),a="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let p=l.length-1;p>-1;p--){const b=l[p];if(b._outsidePointerEvents.observers.length<1||!b.hasAttached())continue;if(b.overlayElement.contains(s)||b.overlayElement.contains(a))break;const w=b._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>w.next(o)):w.next(o)}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(e){return new(e||i)(ee(ct),ee(En),ee(at,8))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),R5=0,wi=(()=>{class i{constructor(e,n,r,o,s,a,l,p,b,w,A){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=l,this._document=p,this._directionality=b,this._location=w,this._outsideClickDispatcher=A}create(e){const n=this._createHostElement(),r=this._createPaneElement(n),o=this._createPortalOutlet(r),s=new Za(e);return s.direction=s.direction||this._directionality.value,new M5(o,n,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+R5++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Mu)),new a5(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(e){return new(e||i)(ee(D5),ee(Qg),ee(Cs),ee(A5),ee(I5),ee(nn),ee(at),ee(ct),ee(lr),ee(pg),ee(P5))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();const O5=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],_1=new _e("cdk-connected-overlay-scroll-strategy");let v1=(()=>{class i{constructor(e){this.elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(N(Ze))},i.\u0275dir=fe({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),i})(),b1=(()=>{class i{constructor(e,n,r,o,s){this._overlay=e,this._dir=s,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=mt.EMPTY,this._attachSubscription=mt.EMPTY,this._detachSubscription=mt.EMPTY,this._positionSubscription=mt.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Te,this.positionChange=new Te,this.attach=new Te,this.detach=new Te,this.overlayKeydown=new Te,this.overlayOutsideClick=new Te,this._templatePortal=new ks(n,r),this._scrollStrategyFactory=o,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Ke(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=Ke(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=Ke(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=Ke(e)}get push(){return this._push}set push(e){this._push=Ke(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=O5);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),27===n.keyCode&&!this.disableClose&&!xi(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{this.overlayOutsideClick.next(n)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new Za({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){const n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof v1?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function l5(i,t=!1){return j((e,n)=>{let r=0;e.subscribe(K(n,o=>{const s=i(o,r++);(s||t)&&n.next(o),!s&&n.complete()}))})}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(N(wi),N(_n),N(Tn),N(_1),N(lr,8))},i.\u0275dir=fe({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[fn]}),i})();const L5={provide:_1,deps:[wi],useFactory:function F5(i){return()=>i.scrollStrategies.reposition()}};let Os=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[wi,L5],imports:[[Xa,As,Yg],Yg]}),i})();class C1 extends W{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}function Rc(i,t,e){const n=S(i)||t||e?{next:i,error:t,complete:e}:i;return n?j((r,o)=>{var s;null===(s=n.subscribe)||void 0===s||s.call(n);let a=!0;r.subscribe(K(o,l=>{var p;null===(p=n.next)||void 0===p||p.call(n,l),o.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),o.complete()},l=>{var p;a=!1,null===(p=n.error)||void 0===p||p.call(n,l),o.error(l)},()=>{var l,p;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(p=n.finalize)||void 0===p||p.call(n)}))}):ke}function Zg(i,t=Ec){return j((e,n)=>{let r=null,o=null,s=null;const a=()=>{if(r){r.unsubscribe(),r=null;const p=o;o=null,n.next(p)}};function l(){const p=s+i,b=t.now();if(b<p)return r=this.schedule(void 0,p-b),void n.add(r);a()}e.subscribe(K(n,p=>{o=p,s=t.now(),r||(r=t.schedule(l,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{o=r=null}))})}function x1(i){return bn((t,e)=>i<=e)}function Jg(i,t=ke){return i=null!=i?i:N5,j((e,n)=>{let r,o=!0;e.subscribe(K(n,s=>{const a=t(s);(o||!i(r,a))&&(o=!1,r=a,n.next(s))}))})}function N5(i,t){return i===t}let w1=(()=>{class i{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),B5=(()=>{class i{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,n)=>this._cleanupObserver(n))}observe(e){const n=Bn(e);return new Me(r=>{const s=this._observeElement(n).subscribe(r);return()=>{s.unsubscribe(),this._unobserveElement(n)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const n=new W,r=this._mutationObserverFactory.create(o=>n.next(o));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:n,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:n,stream:r}=this._observedElements.get(e);n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}}}return i.\u0275fac=function(e){return new(e||i)(ee(w1))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),D1=(()=>{class i{constructor(e,n,r){this._contentObserver=e,this._elementRef=n,this._ngZone=r,this.event=new Te,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Ke(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Ci(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Zg(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(N(B5),N(Ze),N(at))},i.\u0275dir=fe({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),Zu=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[w1]}),i})();function Ju(i,t){return(i.getAttribute(t)||"").match(/\S+/g)||[]}const M1="cdk-describedby-message",eh="cdk-describedby-host";let T1=0,j5=(()=>{class i{constructor(e,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+T1++,this._document=e}describe(e,n,r){if(!this._canBeDescribed(e,n))return;const o=e_(n,r);"string"!=typeof n?(E1(n),this._messageRegistry.set(o,{messageElement:n,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(n,r),this._isElementDescribedByMessage(e,o)||this._addMessageReference(e,o)}removeDescription(e,n,r){var o;if(!n||!this._isElementNode(e))return;const s=e_(n,r);if(this._isElementDescribedByMessage(e,s)&&this._removeMessageReference(e,s),"string"==typeof n){const a=this._messageRegistry.get(s);a&&0===a.referenceCount&&this._deleteMessageElement(s)}0===(null===(o=this._messagesContainer)||void 0===o?void 0:o.childNodes.length)&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){var e;const n=this._document.querySelectorAll(`[${eh}="${this._id}"]`);for(let r=0;r<n.length;r++)this._removeCdkDescribedByReferenceIds(n[r]),n[r].removeAttribute(eh);null===(e=this._messagesContainer)||void 0===e||e.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,n){const r=this._document.createElement("div");E1(r),r.textContent=e,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(e_(e,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){var n,r;null===(r=null===(n=this._messageRegistry.get(e))||void 0===n?void 0:n.messageElement)||void 0===r||r.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let o=0;o<n.length;o++)n[o].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(e),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(e){const n=Ju(e,"aria-describedby").filter(r=>0!=r.indexOf(M1));e.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(e,n){const r=this._messageRegistry.get(n);(function V5(i,t,e){const n=Ju(i,t);n.some(r=>r.trim()==e.trim())||(n.push(e.trim()),i.setAttribute(t,n.join(" ")))})(e,"aria-describedby",r.messageElement.id),e.setAttribute(eh,this._id),r.referenceCount++}_removeMessageReference(e,n){const r=this._messageRegistry.get(n);r.referenceCount--,function H5(i,t,e){const r=Ju(i,t).filter(o=>o!=e.trim());r.length?i.setAttribute(t,r.join(" ")):i.removeAttribute(t)}(e,"aria-describedby",r.messageElement.id),e.removeAttribute(eh)}_isElementDescribedByMessage(e,n){const r=Ju(e,"aria-describedby"),o=this._messageRegistry.get(n),s=o&&o.messageElement.id;return!!s&&-1!=r.indexOf(s)}_canBeDescribed(e,n){if(!this._isElementNode(e))return!1;if(n&&"object"==typeof n)return!0;const r=null==n?"":`${n}`.trim(),o=e.getAttribute("aria-label");return!(!r||o&&o.trim()===r)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return i.\u0275fac=function(e){return new(e||i)(ee(ct),ee(En))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function e_(i,t){return"string"==typeof i?`${t||""}/${i}`:i}function E1(i){i.id||(i.id=`${M1}-${T1++}`)}class k1{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new W,this._typeaheadSubscription=mt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new W,this.change=new W,t instanceof xs&&t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Rc(e=>this._pressedLetters.push(e)),Zg(t),bn(()=>this._pressedLetters.length>0),ae(()=>this._pressedLetters.join(""))).subscribe(e=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const o=(this._activeItemIndex+r)%n.length,s=n[o];if(!this._skipPredicateFn(s)&&0===s.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||xi(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),r=e[n];this._activeItem=null==r?null:r,this._activeItemIndex=n}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const r=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof xs?this._items.toArray():this._items}}class A1 extends k1{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class t_ extends k1{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let I1=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function W5(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function z5(i){try{return i.frameElement}catch(t){return null}}(function Q5(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(n&&(-1===R1(n)||!this.isVisible(n)))return!1;let r=e.nodeName.toLowerCase(),o=R1(e);return e.hasAttribute("contenteditable")?-1!==o:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function $5(i){let t=i.nodeName.toLowerCase(),e="input"===t&&i.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==o:"video"===r?-1!==o&&(null!==o||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function K5(i){return!function U5(i){return function q5(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function G5(i){let t=i.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(i)||function Y5(i){return function X5(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||P1(i))}(e)&&!this.isDisabled(e)&&((null==n?void 0:n.ignoreVisibility)||this.isVisible(e))}}return i.\u0275fac=function(e){return new(e||i)(ee(En))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function P1(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let t=i.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function R1(i){if(!P1(i))return null;const t=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class Z5{constructor(t,e,n,r,o=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return null==n||n.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=0;n<e.length;n++){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=e.length-1;n>=0;n--){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(an(1)).subscribe(t)}}let J5=(()=>{class i{constructor(e,n,r){this._checker=e,this._ngZone=n,this._document=r}create(e,n=!1){return new Z5(e,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(e){return new(e||i)(ee(I1),ee(at),ee(ct))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function th(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function nh(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const eV=new _e("cdk-input-modality-detector-options"),tV={ignoreKeys:[18,17,224,91,16]},Ja=Pr({passive:!0,capture:!0});let nV=(()=>{class i{constructor(e,n,r,o){this._platform=e,this._mostRecentTarget=null,this._modality=new C1(null),this._lastTouchMs=0,this._onKeydown=s=>{var a,l;(null===(l=null===(a=this._options)||void 0===a?void 0:a.ignoreKeys)||void 0===l?void 0:l.some(p=>p===s.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=ar(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<650||(this._modality.next(th(s)?"keyboard":"mouse"),this._mostRecentTarget=ar(s))},this._onTouchstart=s=>{nh(s)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ar(s))},this._options=Object.assign(Object.assign({},tV),o),this.modalityDetected=this._modality.pipe(x1(1)),this.modalityChanged=this.modalityDetected.pipe(Jg()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Ja),r.addEventListener("mousedown",this._onMousedown,Ja),r.addEventListener("touchstart",this._onTouchstart,Ja)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ja),document.removeEventListener("mousedown",this._onMousedown,Ja),document.removeEventListener("touchstart",this._onTouchstart,Ja))}}return i.\u0275fac=function(e){return new(e||i)(ee(En),ee(at),ee(ct),ee(eV,8))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const iV=new _e("liveAnnouncerElement",{providedIn:"root",factory:function rV(){return null}}),oV=new _e("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let n_=(()=>{class i{constructor(e,n,r,o){this._ngZone=n,this._defaultOptions=o,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...n){const r=this._defaultOptions;let o,s;return 1===n.length&&"number"==typeof n[0]?s=n[0]:[o,s]=n,this.clear(),clearTimeout(this._previousTimeout),o||(o=r&&r.politeness?r.politeness:"polite"),null==s&&r&&(s=r.duration),this._liveElement.setAttribute("aria-live",o),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof s&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){var e,n;clearTimeout(this._previousTimeout),null===(e=this._liveElement)||void 0===e||e.remove(),this._liveElement=null,null===(n=this._currentResolve)||void 0===n||n.call(this),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",n=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let o=0;o<n.length;o++)n[o].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return i.\u0275fac=function(e){return new(e||i)(ee(iV,8),ee(at),ee(ct),ee(oV,8))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const sV=new _e("cdk-focus-monitor-default-options"),ih=Pr({passive:!0,capture:!0});let Jr=(()=>{class i{constructor(e,n,r,o,s){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new W,this._rootNodeFocusAndBlurListener=a=>{const l=ar(a),p="focus"===a.type?this._onFocus:this._onBlur;for(let b=l;b;b=b.parentElement)p.call(this,a,b)},this._document=o,this._detectionMode=(null==s?void 0:s.detectionMode)||0}monitor(e,n=!1){const r=Bn(e);if(!this._platform.isBrowser||1!==r.nodeType)return Pi(null);const o=Ku(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return n&&(s.checkChildren=!0),s.subject;const a={checkChildren:n,subject:new W,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const n=Bn(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){const o=Bn(e);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof o.focus&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused","touch"===n),e.classList.toggle("cdk-keyboard-focused","keyboard"===n),e.classList.toggle("cdk-mouse-focused","mouse"===n),e.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,n){const r=this._elementInfo.get(n),o=ar(e);!r||!r.checkChildren&&n!==o||this._originChanged(n,this._getFocusOrigin(o),r)}_onBlur(e,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r.subject,null))}_emitOrigin(e,n){this._ngZone.run(()=>e.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,ih),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,ih)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ut(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){const n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,ih),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,ih),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r.subject,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){const n=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&n.push([o,r])}),n}}return i.\u0275fac=function(e){return new(e||i)(ee(at),ee(En),ee(nV),ee(ct,8),ee(sV,8))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const F1="cdk-high-contrast-black-on-white",L1="cdk-high-contrast-white-on-black",i_="cdk-high-contrast-active";let N1=(()=>{class i{constructor(e,n){this._platform=e,this._document=n}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(i_),e.remove(F1),e.remove(L1),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?(e.add(i_),e.add(F1)):2===n&&(e.add(i_),e.add(L1))}}}return i.\u0275fac=function(e){return new(e||i)(ee(En),ee(ct))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),rh=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(e){return new(e||i)(ee(N1))},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Zu]]}),i})();class B1{}const bo="*";function kn(i,t){return{type:7,name:i,definitions:t,options:{}}}function qt(i,t=null){return{type:4,styles:t,timings:i}}function V1(i,t=null){return{type:3,steps:i,options:t}}function H1(i,t=null){return{type:2,steps:i,options:t}}function We(i){return{type:6,styles:i,offset:null}}function At(i,t,e){return{type:0,name:i,styles:t,options:e}}function jt(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function oh(i=null){return{type:9,options:i}}function sh(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function j1(i){Promise.resolve(null).then(i)}class Oc{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){j1(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class z1{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const o=this.players.length;0==o?j1(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++n==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}const zt=!1;function W1(i){return new Ue(3e3,zt)}function jV(){return"undefined"!=typeof window&&void 0!==window.document}function o_(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function qo(i){switch(i.length){case 0:return new Oc;case 1:return i[0];default:return new z1(i)}}function G1(i,t,e,n,r={},o={}){const s=[],a=[];let l=-1,p=null;if(n.forEach(b=>{const w=b.offset,A=w==l,P=A&&p||{};Object.keys(b).forEach(V=>{let q=V,Z=b[V];if("offset"!==V)switch(q=t.normalizePropertyName(q,s),Z){case"!":Z=r[V];break;case bo:Z=o[V];break;default:Z=t.normalizeStyleValue(V,q,Z,s)}P[q]=Z}),A||a.push(P),p=P,l=w}),s.length)throw function AV(i){return new Ue(3502,zt)}();return a}function s_(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&a_(e,"start",i)));break;case"done":i.onDone(()=>n(e&&a_(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&a_(e,"destroy",i)))}}function a_(i,t,e){const n=e.totalTime,o=l_(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,null==n?i.totalTime:n,!!e.disabled),s=i._data;return null!=s&&(o._data=s),o}function l_(i,t,e,n,r="",o=0,s){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:o,disabled:!!s}}function Ui(i,t,e){let n;return i instanceof Map?(n=i.get(t),n||i.set(t,n=e)):(n=i[t],n||(n=i[t]=e)),n}function U1(i){const t=i.indexOf(":");return[i.substring(1,t),i.substr(t+1)]}let c_=(i,t)=>!1,Y1=(i,t,e)=>[],q1=null;function d_(i){const t=i.parentNode||i.host;return t===q1?null:t}(o_()||"undefined"!=typeof Element)&&(jV()?(q1=(()=>document.documentElement)(),c_=(i,t)=>{for(;t;){if(t===i)return!0;t=d_(t)}return!1}):c_=(i,t)=>i.contains(t),Y1=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]});let Ls=null,X1=!1;function $1(i){Ls||(Ls=function WV(){return"undefined"!=typeof document?document.body:null}()||{},X1=!!Ls.style&&"WebkitAppearance"in Ls.style);let t=!0;return Ls.style&&!function zV(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in Ls.style,!t&&X1&&(t="Webkit"+i.charAt(0).toUpperCase()+i.substr(1)in Ls.style)),t}const K1=c_,Q1=Y1;let Z1=(()=>{class i{validateStyleProperty(e){return $1(e)}matchesElement(e,n){return!1}containsElement(e,n){return K1(e,n)}getParentElement(e){return d_(e)}query(e,n,r){return Q1(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,o,s,a=[],l){return new Oc(r,o)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})(),u_=(()=>{class i{}return i.NOOP=new Z1,i})();const h_="ng-enter",lh="ng-leave",ch="ng-trigger",dh=".ng-trigger",eS="ng-animating",f_=".ng-animating";function Ns(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:p_(parseFloat(t[1]),t[2])}function p_(i,t){return"s"===t?1e3*i:i}function uh(i,t,e){return i.hasOwnProperty("duration")?i:function YV(i,t,e){let r,o=0,s="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(W1()),{duration:0,delay:0,easing:""};r=p_(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(o=p_(parseFloat(l),a[4]));const p=a[5];p&&(s=p)}else r=i;if(!e){let a=!1,l=t.length;r<0&&(t.push(function lV(){return new Ue(3100,zt)}()),a=!0),o<0&&(t.push(function cV(){return new Ue(3101,zt)}()),a=!0),a&&t.splice(l,0,W1())}return{duration:r,delay:o,easing:s}}(i,t,e)}function el(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function Xo(i,t,e={}){if(t)for(let n in i)e[n]=i[n];else el(i,e);return e}function nS(i,t,e){return e?t+":"+e+";":""}function iS(i){let t="";for(let e=0;e<i.style.length;e++){const n=i.style.item(e);t+=nS(0,n,i.style.getPropertyValue(n))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=nS(0,$V(e),i.style[e]));i.setAttribute("style",t)}function eo(i,t,e){i.style&&(Object.keys(t).forEach(n=>{const r=g_(n);e&&!e.hasOwnProperty(n)&&(e[n]=i.style[r]),i.style[r]=t[n]}),o_()&&iS(i))}function Bs(i,t){i.style&&(Object.keys(t).forEach(e=>{const n=g_(e);i.style[n]=""}),o_()&&iS(i))}function Fc(i){return Array.isArray(i)?1==i.length?i[0]:H1(i):i}const m_=new RegExp("{{\\s*(.+?)\\s*}}","g");function rS(i){let t=[];if("string"==typeof i){let e;for(;e=m_.exec(i);)t.push(e[1]);m_.lastIndex=0}return t}function hh(i,t,e){const n=i.toString(),r=n.replace(m_,(o,s)=>{let a=t[s];return t.hasOwnProperty(s)||(e.push(function uV(i){return new Ue(3003,zt)}()),a=""),a.toString()});return r==n?i:r}function fh(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const XV=/-+([a-z0-9])/g;function g_(i){return i.replace(XV,(...t)=>t[1].toUpperCase())}function $V(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Yi(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function hV(i){return new Ue(3004,zt)}()}}function oS(i,t){return window.getComputedStyle(i)[t]}function t4(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function n4(i,t,e){if(":"==i[0]){const l=function r4(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function MV(i){return new Ue(3016,zt)}()),"* => *"}}(i,e);if("function"==typeof l)return void t.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function SV(i){return new Ue(3015,zt)}()),t;const r=n[1],o=n[2],s=n[3];t.push(sS(r,s));"<"==o[0]&&!("*"==r&&"*"==s)&&t.push(sS(s,r))}(n,e,t)):e.push(i),e}const _h=new Set(["true","1"]),vh=new Set(["false","0"]);function sS(i,t){const e=_h.has(i)||vh.has(i),n=_h.has(t)||vh.has(t);return(r,o)=>{let s="*"==i||i==r,a="*"==t||t==o;return!s&&e&&"boolean"==typeof r&&(s=r?_h.has(i):vh.has(i)),!a&&n&&"boolean"==typeof o&&(a=o?_h.has(t):vh.has(t)),s&&a}}const o4=new RegExp("s*:selfs*,?","g");function __(i,t,e,n){return new s4(i).build(t,e,n)}class s4{constructor(t){this._driver=t}build(t,e,n){const r=new c4(e);this._resetContextStyleTimingState(r);const o=Yi(this,Fc(t),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),o}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const o=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push(function pV(){return new Ue(3006,zt)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,p=l.name;p.toString().split(/\s*,\s*/).forEach(b=>{l.name=b,o.push(this.visitState(l,e))}),l.name=p}else if(1==a.type){const l=this.visitTransition(a,e);n+=l.queryCount,r+=l.depCount,s.push(l)}else e.errors.push(function mV(){return new Ue(3007,zt)}())}),{type:7,name:t.name,states:o,transitions:s,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const o=new Set,s=r||{};n.styles.forEach(a=>{if(bh(a)){const l=a;Object.keys(l).forEach(p=>{rS(l[p]).forEach(b=>{s.hasOwnProperty(b)||o.add(b)})})}}),o.size&&(fh(o.values()),e.errors.push(function gV(i,t){return new Ue(3008,zt)}()))}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Yi(this,Fc(t.animation),e);return{type:1,matchers:t4(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Vs(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>Yi(this,n,e)),options:Vs(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const o=t.steps.map(s=>{e.currentTime=n;const a=Yi(this,s,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:o,options:Vs(t.options)}}visitAnimate(t,e){const n=function u4(i,t){let e=null;if(i.hasOwnProperty("duration"))e=i;else if("number"==typeof i)return v_(uh(i,t).duration,0,"");const n=i;if(n.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=v_(0,0,"");return o.dynamic=!0,o.strValue=n,o}return e=e||uh(n,t),v_(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,o=t.styles?t.styles:We({});if(5==o.type)r=this.visitKeyframes(o,e);else{let s=t.styles,a=!1;if(!s){a=!0;const p={};n.easing&&(p.easing=n.easing),s=We(p)}e.currentTime+=n.duration+n.delay;const l=this.visitStyle(s,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(s=>{"string"==typeof s?s==bo?n.push(s):e.errors.push(function _V(i){return new Ue(3002,zt)}()):n.push(s)}):n.push(t.styles);let r=!1,o=null;return n.forEach(s=>{if(bh(s)){const a=s,l=a.easing;if(l&&(o=l,delete a.easing),!r)for(let p in a)if(a[p].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:n,easing:o,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,o=e.currentTime;n&&o>0&&(o-=n.duration+n.delay),t.styles.forEach(s=>{"string"!=typeof s&&Object.keys(s).forEach(a=>{if(!this._driver.validateStyleProperty(a))return delete s[a],void e.unsupportedCSSPropertiesFound.add(a);const l=e.collectedStyles[e.currentQuerySelector],p=l[a];let b=!0;p&&(o!=r&&o>=p.startTime&&r<=p.endTime&&(e.errors.push(function vV(i,t,e,n,r){return new Ue(3010,zt)}()),b=!1),o=p.startTime),b&&(l[a]={startTime:o,endTime:r}),e.options&&function qV(i,t,e){const n=t.params||{},r=rS(i);r.length&&r.forEach(o=>{n.hasOwnProperty(o)||e.push(function dV(i){return new Ue(3001,zt)}())})}(s[a],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function bV(){return new Ue(3011,zt)}()),n;let o=0;const s=[];let a=!1,l=!1,p=0;const b=t.steps.map(re=>{const J=this._makeStyleAst(re,e);let ve=null!=J.offset?J.offset:function d4(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(bh(e)&&e.hasOwnProperty("offset")){const n=e;t=parseFloat(n.offset),delete n.offset}});else if(bh(i)&&i.hasOwnProperty("offset")){const e=i;t=parseFloat(e.offset),delete e.offset}return t}(J.styles),be=0;return null!=ve&&(o++,be=J.offset=ve),l=l||be<0||be>1,a=a||be<p,p=be,s.push(be),J});l&&e.errors.push(function yV(){return new Ue(3012,zt)}()),a&&e.errors.push(function CV(){return new Ue(3200,zt)}());const w=t.steps.length;let A=0;o>0&&o<w?e.errors.push(function xV(){return new Ue(3202,zt)}()):0==o&&(A=1/(w-1));const P=w-1,V=e.currentTime,q=e.currentAnimateTimings,Z=q.duration;return b.forEach((re,J)=>{const ve=A>0?J==P?1:A*J:s[J],be=ve*Z;e.currentTime=V+q.delay+be,q.duration=be,this._validateStyleAst(re,e),re.offset=ve,n.styles.push(re)}),n}visitReference(t,e){return{type:8,animation:Yi(this,Fc(t.animation),e),options:Vs(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Vs(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Vs(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[o,s]=function a4(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(o4,"")),i=i.replace(/@\*/g,dh).replace(/@\w+/g,e=>dh+"-"+e.substr(1)).replace(/:animating/g,f_),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+o:o,Ui(e.collectedStyles,e.currentQuerySelector,{});const a=Yi(this,Fc(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:t.selector,options:Vs(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function wV(){return new Ue(3013,zt)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:uh(t.timings,e.errors,!0);return{type:12,animation:Yi(this,Fc(t.animation),e),timings:n,options:null}}}class c4{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function bh(i){return!Array.isArray(i)&&"object"==typeof i}function Vs(i){return i?(i=el(i)).params&&(i.params=function l4(i){return i?el(i):null}(i.params)):i={},i}function v_(i,t,e){return{duration:i,delay:t,easing:e}}function b_(i,t,e,n,r,o,s=null,a=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}class yh{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const p4=new RegExp(":enter","g"),g4=new RegExp(":leave","g");function y_(i,t,e,n,r,o={},s={},a,l,p=[]){return(new _4).buildKeyframes(i,t,e,n,r,o,s,a,l,p)}class _4{buildKeyframes(t,e,n,r,o,s,a,l,p,b=[]){p=p||new yh;const w=new C_(t,e,p,r,o,b,[]);w.options=l,w.currentTimeline.setStyles([s],null,w.errors,l),Yi(this,n,w);const A=w.timelines.filter(P=>P.containsAnimation());if(Object.keys(a).length){let P;for(let V=A.length-1;V>=0;V--){const q=A[V];if(q.element===e){P=q;break}}P&&!P.allowOnlyTimelineStyles()&&P.setStyles([a],null,w.errors,l)}return A.length?A.map(P=>P.buildKeyframes()):[b_(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),o=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);o!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let o=e.currentTimeline.currentTime;const s=null!=n.duration?Ns(n.duration):null,a=null!=n.delay?Ns(n.delay):null;return 0!==s&&t.forEach(l=>{const p=e.appendInstructionToTimeline(l,s,a);o=Math.max(o,p.duration+p.delay)}),o}visitReference(t,e){e.updateOptions(t.options,!0),Yi(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const o=t.options;if(o&&(o.params||o.delay)&&(r=e.createSubContext(o),r.transformIntoNewTimeline(),null!=o.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ch);const s=Ns(o.delay);r.delayNextStep(s)}t.steps.length&&(t.steps.forEach(s=>Yi(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const o=t.options&&t.options.delay?Ns(t.options.delay):0;t.steps.forEach(s=>{const a=e.createSubContext(t.options);o&&a.delayNextStep(o),Yi(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(s=>e.currentTimeline.mergeTimelineCollectedStyles(s)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return uh(e.params?hh(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const o=t.style;5==o.type?this.visitKeyframes(o,e):(e.incrementTime(n.duration),this.visitStyle(o,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();const o=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(o):n.setStyles(t.styles,o,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,o=n.duration,a=e.createSubContext().currentTimeline;a.easing=n.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*o),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+o),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},o=r.delay?Ns(r.delay):0;o&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Ch);let s=n;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((p,b)=>{e.currentQueryIndex=b;const w=e.createSubContext(t.options,p);o&&w.delayNextStep(o),p===e.element&&(l=w.currentTimeline),Yi(this,t.animation,w),w.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,w.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,o=t.timings,s=Math.abs(o.duration),a=s*(e.currentQueryTotal-1);let l=s*e.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const b=e.currentTimeline;l&&b.delayNextStep(l);const w=b.currentTime;Yi(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-w+(r.startTime-n.currentTimeline.startTime)}}const Ch={};class C_{constructor(t,e,n,r,o,s,a,l){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ch,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new xh(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=Ns(n.duration)),null!=n.delay&&(r.delay=Ns(n.delay));const o=n.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!e||!s.hasOwnProperty(a))&&(s[a]=hh(o[a],s,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,o=new C_(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(t),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(t){return this.previousNode=Ch,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},o=new v4(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,o,s){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(p4,"."+this._enterClassName)).replace(g4,"."+this._leaveClassName);let p=this._driver.query(this.element,t,1!=n);0!==n&&(p=n<0?p.slice(p.length+n,p.length):p.slice(0,n)),a.push(...p)}return!o&&0==a.length&&s.push(function DV(i){return new Ue(3014,zt)}()),a}}class xh{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new xh(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||bo,this._currentKeyframe[e]=bo}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&(this._previousKeyframe.easing=e);const o=r&&r.params||{},s=function b4(i,t){const e={};let n;return i.forEach(r=>{"*"===r?(n=n||Object.keys(t),n.forEach(o=>{e[o]=bo})):Xo(r,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(s).forEach(a=>{const l=hh(s[a],o,n);this._pendingStyles[a]=l,this._localTimelineStyles.hasOwnProperty(a)||(this._backFill[a]=this._globalTimelineStyles.hasOwnProperty(a)?this._globalTimelineStyles[a]:bo),this._updateStyle(a,l)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(n=>{this._currentKeyframe[n]=t[n]}),Object.keys(this._localTimelineStyles).forEach(n=>{this._currentKeyframe.hasOwnProperty(n)||(this._currentKeyframe[n]=this._localTimelineStyles[n])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],r=t._styleSummary[e];(!n||r.time>n.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const p=Xo(a,!0);Object.keys(p).forEach(b=>{const w=p[b];"!"==w?t.add(b):w==bo&&e.add(b)}),n||(p.offset=l/this.duration),r.push(p)});const o=t.size?fh(t.values()):[],s=e.size?fh(e.values()):[];if(n){const a=r[0],l=el(a);a.offset=0,l.offset=1,r=[a,l]}return b_(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}}class v4 extends xh{constructor(t,e,n,r,o,s,a=!1){super(t,e,s.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const o=[],s=n+e,a=e/s,l=Xo(t[0],!1);l.offset=0,o.push(l);const p=Xo(t[0],!1);p.offset=cS(a),o.push(p);const b=t.length-1;for(let w=1;w<=b;w++){let A=Xo(t[w],!1);A.offset=cS((e+A.offset*n)/s),o.push(A)}n=s,e=0,r="",t=o}return b_(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function cS(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class x_{}class y4 extends x_{normalizePropertyName(t,e){return g_(t)}normalizeStyleValue(t,e,n,r){let o="";const s=n.toString().trim();if(C4[e]&&0!==n&&"0"!==n)if("number"==typeof n)o="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function fV(i,t){return new Ue(3005,zt)}())}return s+o}}const C4=(()=>function x4(i){const t={};return i.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function dS(i,t,e,n,r,o,s,a,l,p,b,w,A){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:o,toState:n,toStyles:s,timelines:a,queriedElements:l,preStyleProps:p,postStyleProps:b,totalTime:w,errors:A}}const w_={};class uS{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function w4(i,t,e,n,r){return i.some(o=>o(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){const r=this._stateStyles["*"],o=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return o?o.buildStyles(e,n):s}build(t,e,n,r,o,s,a,l,p,b){const w=[],A=this.ast.options&&this.ast.options.params||w_,V=this.buildStyles(n,a&&a.params||w_,w),q=l&&l.params||w_,Z=this.buildStyles(r,q,w),re=new Set,J=new Map,ve=new Map,be="void"===r,Qe={params:Object.assign(Object.assign({},A),q)},_t=b?[]:y_(t,e,this.ast.animation,o,s,V,Z,Qe,p,w);let Lt=0;if(_t.forEach(Xt=>{Lt=Math.max(Xt.duration+Xt.delay,Lt)}),w.length)return dS(e,this._triggerName,n,r,be,V,Z,[],[],J,ve,Lt,w);_t.forEach(Xt=>{const cn=Xt.element,Pn=Ui(J,cn,{});Xt.preStyleProps.forEach(xn=>Pn[xn]=!0);const Rn=Ui(ve,cn,{});Xt.postStyleProps.forEach(xn=>Rn[xn]=!0),cn!==e&&re.add(cn)});const gn=fh(re.values());return dS(e,this._triggerName,n,r,be,V,Z,_t,gn,J,ve,Lt)}}class D4{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n={},r=el(this.defaultParams);return Object.keys(t).forEach(o=>{const s=t[o];null!=s&&(r[o]=s)}),this.styles.styles.forEach(o=>{if("string"!=typeof o){const s=o;Object.keys(s).forEach(a=>{let l=s[a];l.length>1&&(l=hh(l,r,e));const p=this.normalizer.normalizePropertyName(a,e);l=this.normalizer.normalizeStyleValue(a,p,l,e),n[p]=l})}}),n}}class M4{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new D4(r.style,r.options&&r.options.params||{},n)}),hS(this.states,"true","1"),hS(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new uS(t,r,this.states))}),this.fallbackTransition=function T4(i,t,e){return new uS(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(s,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(s=>s.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function hS(i,t,e){i.hasOwnProperty(t)?i.hasOwnProperty(e)||(i[e]=i[t]):i.hasOwnProperty(e)&&(i[t]=i[e])}const E4=new yh;class k4{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],o=__(this._driver,e,n,[]);if(n.length)throw function IV(i){return new Ue(3503,zt)}();this._animations[t]=o}_buildPlayer(t,e,n){const r=t.element,o=G1(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,o,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],o=this._animations[t];let s;const a=new Map;if(o?(s=y_(this._driver,e,o,h_,lh,{},{},n,E4,r),s.forEach(b=>{const w=Ui(a,b.element,{});b.postStyleProps.forEach(A=>w[A]=null)})):(r.push(function PV(){return new Ue(3300,zt)}()),s=[]),r.length)throw function RV(i){return new Ue(3504,zt)}();a.forEach((b,w)=>{Object.keys(b).forEach(A=>{b[A]=this._driver.computeStyle(w,A,bo)})});const p=qo(s.map(b=>{const w=a.get(b.element);return this._buildPlayer(b,{},w)}));return this._playersById[t]=p,p.onDestroy(()=>this.destroy(t)),this.players.push(p),p}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw function OV(i){return new Ue(3301,zt)}();return e}listen(t,e,n,r){const o=l_(e,"","","");return s_(this._getPlayer(t),n,o,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const o=this._getPlayer(t);switch(n){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const fS="ng-animate-queued",D_="ng-animate-disabled",O4=[],pS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},F4={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},cr="__ng_removed";class S_{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function V4(i){return null!=i?i:null}(n?t.value:t),n){const o=el(t);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const Lc="void",M_=new S_(Lc);class L4{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,dr(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.hasOwnProperty(e))throw function FV(i,t){return new Ue(3302,zt)}();if(null==n||0==n.length)throw function LV(i){return new Ue(3303,zt)}();if(!function H4(i){return"start"==i||"done"==i}(n))throw function NV(i,t){return new Ue(3400,zt)}();const o=Ui(this._elementListeners,t,[]),s={name:e,phase:n,callback:r};o.push(s);const a=Ui(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(dr(t,ch),dr(t,ch+"-"+e),a[e]=M_),()=>{this._engine.afterFlush(()=>{const l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw function BV(i){return new Ue(3401,zt)}();return e}trigger(t,e,n,r=!0){const o=this._getTrigger(e),s=new T_(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(dr(t,ch),dr(t,ch+"-"+e),this._engine.statesByElement.set(t,a={}));let l=a[e];const p=new S_(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&p.absorbOptions(l.options),a[e]=p,l||(l=M_),p.value!==Lc&&l.value===p.value){if(!function W4(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const o=e[r];if(!t.hasOwnProperty(o)||i[o]!==t[o])return!1}return!0}(l.params,p.params)){const q=[],Z=o.matchStyles(l.value,l.params,q),re=o.matchStyles(p.value,p.params,q);q.length?this._engine.reportError(q):this._engine.afterFlush(()=>{Bs(t,Z),eo(t,re)})}return}const A=Ui(this._engine.playersByElement,t,[]);A.forEach(q=>{q.namespaceId==this.id&&q.triggerName==e&&q.queued&&q.destroy()});let P=o.matchTransition(l.value,p.value,t,p.params),V=!1;if(!P){if(!r)return;P=o.fallbackTransition,V=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:P,fromState:l,toState:p,player:s,isFallbackTransition:V}),V||(dr(t,fS),s.onStart(()=>{tl(t,fS)})),s.onDone(()=>{let q=this.players.indexOf(s);q>=0&&this.players.splice(q,1);const Z=this._engine.playersByElement.get(t);if(Z){let re=Z.indexOf(s);re>=0&&Z.splice(re,1)}}),this.players.push(s),A.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,dh,!0);n.forEach(r=>{if(r[cr])return;const o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const o=this._engine.statesByElement.get(t),s=new Map;if(o){const a=[];if(Object.keys(o).forEach(l=>{if(s.set(l,o[l].value),this._triggers[l]){const p=this.trigger(t,l,Lc,r);p&&a.push(p)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,s),n&&qo(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(o=>{const s=o.name;if(r.has(s))return;r.add(s);const l=this._triggers[s].fallbackTransition,p=n[s]||M_,b=new S_(Lc),w=new T_(this.id,s,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:s,transition:l,fromState:p,toState:b,player:w,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const o=n.players.length?n.playersByQueriedElement.get(t):[];if(o&&o.length)r=!0;else{let s=t;for(;s=s.parentNode;)if(n.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const o=t[cr];(!o||o===pS)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){dr(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const o=n.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==n.triggerName){const l=l_(o,n.triggerName,n.fromState.value,n.toState.value);l._data=t,s_(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const o=n.transition.ast.depCount,s=r.transition.ast.depCount;return 0==o||0==s?o-s:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class N4{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new L4(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement,o=n.length-1;if(o>=0){let s=!1;if(void 0!==this.driver.getParentElement){let a=this.driver.getParentElement(e);for(;a;){const l=r.get(a);if(l){const p=n.indexOf(l);n.splice(p+1,0,t),s=!0;break}a=this.driver.getParentElement(a)}}else for(let a=o;a>=0;a--)if(this.driver.containsElement(n[a].hostElement,e)){n.splice(a+1,0,t),s=!0;break}s||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const r=Object.keys(n);for(let o=0;o<r.length;o++){const s=n[r[o]].namespaceId;if(s){const a=this._fetchNamespace(s);a&&e.add(a)}}}return e}trigger(t,e,n,r){if(wh(e)){const o=this._fetchNamespace(t);if(o)return o.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!wh(e))return;const o=e[cr];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const s=this.collectedLeaveElements.indexOf(e);s>=0&&this.collectedLeaveElements.splice(s,1)}if(t){const s=this._fetchNamespace(t);s&&s.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),dr(t,D_)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),tl(t,D_))}removeNode(t,e,n,r){if(wh(e)){const o=t?this._fetchNamespace(t):null;if(o?o.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r,o){this.collectedLeaveElements.push(e),e[cr]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:o}}listen(t,e,n,r,o){return wh(e)?this._fetchNamespace(t).listen(e,n,r,o):()=>{}}_buildInstruction(t,e,n,r,o){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,o)}destroyInnerAnimations(t){let e=this.driver.query(t,dh,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,f_,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return qo(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const n=t[cr];if(n&&n.setForRemoval){if(t[cr]=pS,n.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(D_))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)dr(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?qo(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function VV(i){return new Ue(3402,zt)}()}_flushAnimations(t,e){const n=new yh,r=[],o=new Map,s=[],a=new Map,l=new Map,p=new Map,b=new Set;this.disabledNodes.forEach(Ve=>{b.add(Ve);const et=this.driver.query(Ve,".ng-animate-queued",!0);for(let ot=0;ot<et.length;ot++)b.add(et[ot])});const w=this.bodyNode,A=Array.from(this.statesByElement.keys()),P=_S(A,this.collectedEnterElements),V=new Map;let q=0;P.forEach((Ve,et)=>{const ot=h_+q++;V.set(et,ot),Ve.forEach(Bt=>dr(Bt,ot))});const Z=[],re=new Set,J=new Set;for(let Ve=0;Ve<this.collectedLeaveElements.length;Ve++){const et=this.collectedLeaveElements[Ve],ot=et[cr];ot&&ot.setForRemoval&&(Z.push(et),re.add(et),ot.hasAnimation?this.driver.query(et,".ng-star-inserted",!0).forEach(Bt=>re.add(Bt)):J.add(et))}const ve=new Map,be=_S(A,Array.from(re));be.forEach((Ve,et)=>{const ot=lh+q++;ve.set(et,ot),Ve.forEach(Bt=>dr(Bt,ot))}),t.push(()=>{P.forEach((Ve,et)=>{const ot=V.get(et);Ve.forEach(Bt=>tl(Bt,ot))}),be.forEach((Ve,et)=>{const ot=ve.get(et);Ve.forEach(Bt=>tl(Bt,ot))}),Z.forEach(Ve=>{this.processLeaveNode(Ve)})});const Qe=[],_t=[];for(let Ve=this._namespaceList.length-1;Ve>=0;Ve--)this._namespaceList[Ve].drainQueuedTransitions(e).forEach(ot=>{const Bt=ot.player,Vn=ot.element;if(Qe.push(Bt),this.collectedEnterElements.length){const Ei=Vn[cr];if(Ei&&Ei.setForMove){if(Ei.previousTriggersValues&&Ei.previousTriggersValues.has(ot.triggerName)){const Qs=Ei.previousTriggersValues.get(ot.triggerName),ls=this.statesByElement.get(ot.element);ls&&ls[ot.triggerName]&&(ls[ot.triggerName].value=Qs)}return void Bt.destroy()}}const Mi=!w||!this.driver.containsElement(w,Vn),Ti=ve.get(Vn),as=V.get(Vn),wn=this._buildInstruction(ot,n,as,Ti,Mi);if(wn.errors&&wn.errors.length)return void _t.push(wn);if(Mi)return Bt.onStart(()=>Bs(Vn,wn.fromStyles)),Bt.onDestroy(()=>eo(Vn,wn.toStyles)),void r.push(Bt);if(ot.isFallbackTransition)return Bt.onStart(()=>Bs(Vn,wn.fromStyles)),Bt.onDestroy(()=>eo(Vn,wn.toStyles)),void r.push(Bt);const qk=[];wn.timelines.forEach(Ei=>{Ei.stretchStartingKeyframe=!0,this.disabledNodes.has(Ei.element)||qk.push(Ei)}),wn.timelines=qk,n.append(Vn,wn.timelines),s.push({instruction:wn,player:Bt,element:Vn}),wn.queriedElements.forEach(Ei=>Ui(a,Ei,[]).push(Bt)),wn.preStyleProps.forEach((Ei,Qs)=>{const ls=Object.keys(Ei);if(ls.length){let Zs=l.get(Qs);Zs||l.set(Qs,Zs=new Set),ls.forEach(Sb=>Zs.add(Sb))}}),wn.postStyleProps.forEach((Ei,Qs)=>{const ls=Object.keys(Ei);let Zs=p.get(Qs);Zs||p.set(Qs,Zs=new Set),ls.forEach(Sb=>Zs.add(Sb))})});if(_t.length){const Ve=[];_t.forEach(et=>{Ve.push(function HV(i,t){return new Ue(3505,zt)}())}),Qe.forEach(et=>et.destroy()),this.reportError(Ve)}const Lt=new Map,gn=new Map;s.forEach(Ve=>{const et=Ve.element;n.has(et)&&(gn.set(et,et),this._beforeAnimationBuild(Ve.player.namespaceId,Ve.instruction,Lt))}),r.forEach(Ve=>{const et=Ve.element;this._getPreviousPlayers(et,!1,Ve.namespaceId,Ve.triggerName,null).forEach(Bt=>{Ui(Lt,et,[]).push(Bt),Bt.destroy()})});const Xt=Z.filter(Ve=>bS(Ve,l,p)),cn=new Map;gS(cn,this.driver,J,p,bo).forEach(Ve=>{bS(Ve,l,p)&&Xt.push(Ve)});const Rn=new Map;P.forEach((Ve,et)=>{gS(Rn,this.driver,new Set(Ve),l,"!")}),Xt.forEach(Ve=>{const et=cn.get(Ve),ot=Rn.get(Ve);cn.set(Ve,Object.assign(Object.assign({},et),ot))});const xn=[],pi=[],Fi={};s.forEach(Ve=>{const{element:et,player:ot,instruction:Bt}=Ve;if(n.has(et)){if(b.has(et))return ot.onDestroy(()=>eo(et,Bt.toStyles)),ot.disabled=!0,ot.overrideTotalTime(Bt.totalTime),void r.push(ot);let Vn=Fi;if(gn.size>1){let Ti=et;const as=[];for(;Ti=Ti.parentNode;){const wn=gn.get(Ti);if(wn){Vn=wn;break}as.push(Ti)}as.forEach(wn=>gn.set(wn,Vn))}const Mi=this._buildAnimation(ot.namespaceId,Bt,Lt,o,Rn,cn);if(ot.setRealPlayer(Mi),Vn===Fi)xn.push(ot);else{const Ti=this.playersByElement.get(Vn);Ti&&Ti.length&&(ot.parentPlayer=qo(Ti)),r.push(ot)}}else Bs(et,Bt.fromStyles),ot.onDestroy(()=>eo(et,Bt.toStyles)),pi.push(ot),b.has(et)&&r.push(ot)}),pi.forEach(Ve=>{const et=o.get(Ve.element);if(et&&et.length){const ot=qo(et);Ve.setRealPlayer(ot)}}),r.forEach(Ve=>{Ve.parentPlayer?Ve.syncPlayerEvents(Ve.parentPlayer):Ve.destroy()});for(let Ve=0;Ve<Z.length;Ve++){const et=Z[Ve],ot=et[cr];if(tl(et,lh),ot&&ot.hasAnimation)continue;let Bt=[];if(a.size){let Mi=a.get(et);Mi&&Mi.length&&Bt.push(...Mi);let Ti=this.driver.query(et,f_,!0);for(let as=0;as<Ti.length;as++){let wn=a.get(Ti[as]);wn&&wn.length&&Bt.push(...wn)}}const Vn=Bt.filter(Mi=>!Mi.destroyed);Vn.length?j4(this,et,Vn):this.processLeaveNode(et)}return Z.length=0,xn.forEach(Ve=>{this.players.push(Ve),Ve.onDone(()=>{Ve.destroy();const et=this.players.indexOf(Ve);this.players.splice(et,1)}),Ve.play()}),xn}elementContainsData(t,e){let n=!1;const r=e[cr];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,o){let s=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(s=a)}else{const a=this.playersByElement.get(t);if(a){const l=!o||o==Lc;a.forEach(p=>{p.queued||!l&&p.triggerName!=r||s.push(p)})}}return(n||r)&&(s=s.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(t,e,n){const o=e.element,s=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const p=l.element,b=p!==o,w=Ui(n,p,[]);this._getPreviousPlayers(p,b,s,a,e.toState).forEach(P=>{const V=P.getRealPlayer();V.beforeDestroy&&V.beforeDestroy(),P.destroy(),w.push(P)})}Bs(o,e.fromStyles)}_buildAnimation(t,e,n,r,o,s){const a=e.triggerName,l=e.element,p=[],b=new Set,w=new Set,A=e.timelines.map(V=>{const q=V.element;b.add(q);const Z=q[cr];if(Z&&Z.removedBeforeQueried)return new Oc(V.duration,V.delay);const re=q!==l,J=function z4(i){const t=[];return vS(i,t),t}((n.get(q)||O4).map(Lt=>Lt.getRealPlayer())).filter(Lt=>!!Lt.element&&Lt.element===q),ve=o.get(q),be=s.get(q),Qe=G1(0,this._normalizer,0,V.keyframes,ve,be),_t=this._buildPlayer(V,Qe,J);if(V.subTimeline&&r&&w.add(q),re){const Lt=new T_(t,a,q);Lt.setRealPlayer(_t),p.push(Lt)}return _t});p.forEach(V=>{Ui(this.playersByQueriedElement,V.element,[]).push(V),V.onDone(()=>function B4(i,t,e){let n;if(i instanceof Map){if(n=i.get(t),n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}}else if(n=i[t],n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&delete i[t]}return n}(this.playersByQueriedElement,V.element,V))}),b.forEach(V=>dr(V,eS));const P=qo(A);return P.onDestroy(()=>{b.forEach(V=>tl(V,eS)),eo(l,e.toStyles)}),w.forEach(V=>{Ui(r,V,[]).push(P)}),P}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Oc(t.duration,t.delay)}}class T_{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Oc,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>s_(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ui(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function wh(i){return i&&1===i.nodeType}function mS(i,t){const e=i.style.display;return i.style.display=null!=t?t:"none",e}function gS(i,t,e,n,r){const o=[];e.forEach(l=>o.push(mS(l)));const s=[];n.forEach((l,p)=>{const b={};l.forEach(w=>{const A=b[w]=t.computeStyle(p,w,r);(!A||0==A.length)&&(p[cr]=F4,s.push(p))}),i.set(p,b)});let a=0;return e.forEach(l=>mS(l,o[a++])),s}function _S(i,t){const e=new Map;if(i.forEach(a=>e.set(a,[])),0==t.length)return e;const r=new Set(t),o=new Map;function s(a){if(!a)return 1;let l=o.get(a);if(l)return l;const p=a.parentNode;return l=e.has(p)?p:r.has(p)?1:s(p),o.set(a,l),l}return t.forEach(a=>{const l=s(a);1!==l&&e.get(l).push(a)}),e}function dr(i,t){var e;null===(e=i.classList)||void 0===e||e.add(t)}function tl(i,t){var e;null===(e=i.classList)||void 0===e||e.remove(t)}function j4(i,t,e){qo(e).onDone(()=>i.processLeaveNode(t))}function vS(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof z1?vS(n.players,t):t.push(n)}}function bS(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(o=>r.add(o)):t.set(i,n),e.delete(i),!0}class Dh{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new N4(t,e,n),this._timelineEngine=new k4(t,e,n),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(t,e,n,r,o){const s=t+"-"+r;let a=this._triggerCache[s];if(!a){const l=[],b=__(this._driver,o,l,[]);if(l.length)throw function kV(i,t){return new Ue(3404,zt)}();a=function S4(i,t,e){return new M4(i,t,e)}(r,b,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[o,s]=U1(n);this._timelineEngine.command(o,e,s,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,o){if("@"==n.charAt(0)){const[s,a]=U1(n);return this._timelineEngine.listen(s,e,a,o)}return this._transitionEngine.listen(t,e,n,r,o)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let U4=(()=>{class i{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let o=i.initialStylesByElement.get(e);o||i.initialStylesByElement.set(e,o={}),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&eo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(eo(this._element,this._initialStyles),this._endStyles&&(eo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(Bs(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Bs(this._element,this._endStyles),this._endStyles=null),eo(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function E_(i){let t=null;const e=Object.keys(i);for(let n=0;n<e.length;n++){const r=e[n];Y4(r)&&(t=t||{},t[r]=i[r])}return t}function Y4(i){return"display"===i||"position"===i}class yS{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(n=>{"offset"!=n&&(t[n]=this._finished?e[n]:oS(this.element,n))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class q4{validateStyleProperty(t){return $1(t)}matchesElement(t,e){return!1}containsElement(t,e){return K1(t,e)}getParentElement(t){return d_(t)}query(t,e,n){return Q1(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,o,s=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};o&&(l.easing=o);const p={},b=s.filter(A=>A instanceof yS);(function KV(i,t){return 0===i||0===t})(n,r)&&b.forEach(A=>{let P=A.currentSnapshot;Object.keys(P).forEach(V=>p[V]=P[V])}),e=function QV(i,t,e){const n=Object.keys(e);if(n.length&&t.length){let o=t[0],s=[];if(n.forEach(a=>{o.hasOwnProperty(a)||s.push(a),o[a]=e[a]}),s.length)for(var r=1;r<t.length;r++){let a=t[r];s.forEach(function(l){a[l]=oS(i,l)})}}return t}(t,e=e.map(A=>Xo(A,!1)),p);const w=function G4(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=E_(t[0]),t.length>1&&(n=E_(t[t.length-1]))):t&&(e=E_(t)),e||n?new U4(i,e,n):null}(t,e);return new yS(t,e,l,w)}}let X4=(()=>{class i extends B1{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:_r.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?H1(e):e;return CS(this._renderer,null,n,"register",[r]),new $4(n,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(ee(hc),ee(ct))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();class $4 extends class aV{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new K4(this._id,t,e||{},this._renderer)}}class K4{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return CS(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function CS(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const xS="@.disabled";let Q4=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(o,s)=>{const a=null==s?void 0:s.parentNode(o);a&&s.removeChild(a,o)}}createRenderer(e,n){const o=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let b=this._rendererCache.get(o);return b||(b=new wS("",o,this.engine),this._rendererCache.set(o,b)),b}const s=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=b=>{Array.isArray(b)?b.forEach(l):this.engine.registerTrigger(s,a,e,b.name,b)};return n.data.animation.forEach(l),new Z4(this,a,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(ee(hc),ee(Dh),ee(at))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();class wS{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==xS?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Z4 extends wS{constructor(t,e,n,r){super(e,n,r),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==xS?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function J4(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let o=e.substr(1),s="";return"@"!=o.charAt(0)&&([o,s]=function eH(i){const t=i.indexOf(".");return[i.substring(0,t),i.substr(t+1)]}(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(t,e,n)}}let tH=(()=>{class i extends Dh{constructor(e,n,r){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(ee(ct),ee(u_),ee(x_))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();const ii=new _e("AnimationModuleType"),DS=[{provide:B1,useClass:X4},{provide:x_,useFactory:function nH(){return new y4}},{provide:Dh,useClass:tH},{provide:hc,useFactory:function iH(i,t,e){return new Q4(i,t,e)},deps:[Gu,Dh,at]}],SS=[{provide:u_,useFactory:()=>new q4},{provide:ii,useValue:"BrowserAnimations"},...DS],rH=[{provide:u_,useClass:Z1},{provide:ii,useValue:"NoopAnimations"},...DS];let oH=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?rH:SS}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:SS,imports:[qD]}),i})();function sH(i,t){if(1&i&&Be(0,"mat-pseudo-checkbox",4),2&i){const e=M();R("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function aH(i,t){if(1&i&&(D(0,"span",5),B(1),k()),2&i){const e=M();O(1),Ct("(",e.group.label,")")}}const lH=["*"],hH=new _e("mat-sanity-checks",{providedIn:"root",factory:function uH(){return!0}});let nt=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Ug()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return i.\u0275fac=function(e){return new(e||i)(ee(N1),ee(hH,8),ee(ct))},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Xa],Xa]}),i})();function Nc(i){return class extends i{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=Ke(t)}}}function yo(i,t){return class extends i{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const n=e||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function $o(i){return class extends i{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Ke(t)}}}function nl(i,t=0){return class extends i{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Ci(e):this.defaultTabIndex}}}function k_(i){return class extends i{constructor(...t){super(...t),this.stateChanges=new W,this.errorState=!1}updateErrorState(){const t=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==t&&(this.errorState=o,this.stateChanges.next())}}}let il=(()=>{class i{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ES=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[nt],nt]}),i})();class pH{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const kS={enterDuration:225,exitDuration:150},A_=Pr({passive:!0}),AS=["mousedown","touchstart"],IS=["mouseup","mouseleave","touchend","touchcancel"];class PS{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Bn(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Object.assign(Object.assign({},kS),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const s=n.radius||function _H(i,t,e){const n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}(t,e,r),a=t-r.left,l=e-r.top,p=o.enterDuration,b=document.createElement("div");b.classList.add("mat-ripple-element"),b.style.left=a-s+"px",b.style.top=l-s+"px",b.style.height=2*s+"px",b.style.width=2*s+"px",null!=n.color&&(b.style.backgroundColor=n.color),b.style.transitionDuration=`${p}ms`,this._containerElement.appendChild(b),function gH(i){window.getComputedStyle(i).getPropertyValue("opacity")}(b),b.style.transform="scale(1)";const w=new pH(this,b,n);return w.state=0,this._activeRipples.add(w),n.persistent||(this._mostRecentTransientRipple=w),this._runTimeoutOutsideZone(()=>{const A=w===this._mostRecentTransientRipple;w.state=1,!n.persistent&&(!A||!this._isPointerDown)&&w.fadeOut()},p),w}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,r=Object.assign(Object.assign({},kS),t.config.animation);n.style.transitionDuration=`${r.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Bn(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(AS))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(IS),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=th(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!nh(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,A_)})})}_removeTriggerEvents(){this._triggerElement&&(AS.forEach(t=>{this._triggerElement.removeEventListener(t,this,A_)}),this._pointerUpEventsRegistered&&IS.forEach(t=>{this._triggerElement.removeEventListener(t,this,A_)}))}}const RS=new _e("mat-ripple-global-options");let Qo=(()=>{class i{constructor(e,n,r,o,s){this._elementRef=e,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new PS(this,n,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,n,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(at),N(En),N(RS,8),N(ii,8))},i.\u0275dir=fe({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,n){2&e&&Ot("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),to=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[nt],nt]}),i})(),vH=(()=>{class i{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return i.\u0275fac=function(e){return new(e||i)(N(ii,8))},i.\u0275cmp=st({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,n){2&e&&Ot("mat-pseudo-checkbox-indeterminate","indeterminate"===n.state)("mat-pseudo-checkbox-checked","checked"===n.state)("mat-pseudo-checkbox-disabled",n.disabled)("_mat-animation-noopable","NoopAnimations"===n._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,n){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),i})(),bH=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[nt]]}),i})();const I_=new _e("MAT_OPTION_PARENT_COMPONENT"),P_=new _e("MatOptgroup");let yH=0;class OS{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let CH=(()=>{class i{constructor(e,n,r,o){this._element=e,this._changeDetectorRef=n,this._parent=r,this.group=o,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+yH++,this.onSelectionChange=new Te,this._stateChanges=new W}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=Ke(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,n){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!xi(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new OS(this,e))}}return i.\u0275fac=function(e){La()},i.\u0275dir=fe({type:i,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),i})(),rl=(()=>{class i extends CH{constructor(e,n,r,o){super(e,n,r,o)}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(Zt),N(I_,8),N(P_,8))},i.\u0275cmp=st({type:i,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,n){1&e&&F("click",function(){return n._selectViaInteraction()})("keydown",function(o){return n._handleKeydown(o)}),2&e&&(Er("id",n.id),lt("tabindex",n._getTabIndex())("aria-selected",n._getAriaSelected())("aria-disabled",n.disabled.toString()),Ot("mat-selected",n.selected)("mat-option-multiple",n.multiple)("mat-active",n.active)("mat-option-disabled",n.disabled))},exportAs:["matOption"],features:[Pe],ngContentSelectors:lH,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,n){1&e&&(un(),G(0,sH,1,2,"mat-pseudo-checkbox",0),D(1,"span",1),St(2),k(),G(3,aH,2,1,"span",2),Be(4,"div",3)),2&e&&(R("ngIf",n.multiple),O(3),R("ngIf",n.group&&n.group._inert),O(1),R("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disabled||n.disableRipple))},directives:[vH,ni,Qo],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),i})();function R_(i,t,e){if(e.length){let n=t.toArray(),r=e.toArray(),o=0;for(let s=0;s<i+1;s++)n[s].group&&n[s].group===r[o]&&o++;return o}return 0}function FS(i,t,e,n){return i<e?i:i+t>e+n?Math.max(0,i-n+t):e}let Mh=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[to,Nn,nt,bH]]}),i})();const xH=["mat-button",""],wH=["*"],SH=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],MH=yo(Nc($o(class{constructor(i){this._elementRef=i}})));let Rr=(()=>{class i extends MH{constructor(e,n,r){super(e),this._focusMonitor=n,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of SH)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,n){e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(n=>this._getHostElement().hasAttribute(n))}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(Jr),N(ii,8))},i.\u0275cmp=st({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,n){if(1&e&&xe(Qo,5),2&e){let r;oe(r=se())&&(n.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,n){2&e&&(lt("disabled",n.disabled||null),Ot("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Pe],attrs:xH,ngContentSelectors:wH,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,n){1&e&&(un(),D(0,"span",0),St(1),k(),Be(2,"span",1)(3,"span",2)),2&e&&(O(2),Ot("mat-button-ripple-round",n.isRoundButton||n.isIconButton),R("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},directives:[Qo],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),i})(),ol=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[to,nt],nt]}),i})();const{isArray:TH}=Array,{getPrototypeOf:EH,prototype:kH,keys:AH}=Object;function LS(i){if(1===i.length){const t=i[0];if(TH(t))return{args:t,keys:null};if(function IH(i){return i&&"object"==typeof i&&EH(i)===kH}(t)){const e=AH(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}function NS(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function BS(i,t,e){i?lo(e,i,t):t()}function Th(...i){return function OH(){return Nb(1)}()(ds(i,Il(i)))}function di(...i){const t=Il(i);return j((e,n)=>{(t?Th(i,e,t):Th(i,e)).subscribe(n)})}const VS=new Set;let sl,FH=(()=>{class i{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):NH}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function LH(i){if(!VS.has(i))try{sl||(sl=document.createElement("style"),sl.setAttribute("type","text/css"),document.head.appendChild(sl)),sl.sheet&&(sl.sheet.insertRule(`@media ${i} {body{ }}`,0),VS.add(i))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return i.\u0275fac=function(e){return new(e||i)(ee(En))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function NH(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let O_=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new W}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return HS(Uu(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let o=function PH(...i){const t=Il(i),e=Vb(i),{args:n,keys:r}=LS(i);if(0===n.length)return ds([],t);const o=new Me(function RH(i,t,e=ke){return n=>{BS(t,()=>{const{length:r}=i,o=new Array(r);let s=r,a=r;for(let l=0;l<r;l++)BS(t,()=>{const p=ds(i[l],t);let b=!1;p.subscribe(K(n,w=>{o[l]=w,b||(b=!0,a--),a||n.next(e(o.slice()))},()=>{--s||n.complete()}))},n)},n)}}(n,t,r?s=>NS(r,s):ke));return e?o.pipe(Lg(e)):o}(HS(Uu(e)).map(s=>this._registerQuery(s).observable));return o=Th(o.pipe(an(1)),o.pipe(x1(1),Zg(0))),o.pipe(ae(s=>{const a={matches:!1,breakpoints:{}};return s.forEach(({matches:l,query:p})=>{a.matches=a.matches||l,a.breakpoints[p]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const n=this._mediaMatcher.matchMedia(e),o={observable:new Me(s=>{const a=l=>this._zone.run(()=>s.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(di(n),ae(({matches:s})=>({query:e,matches:s})),Ut(this._destroySubject)),mql:n};return this._queries.set(e,o),o}}return i.\u0275fac=function(e){return new(e||i)(ee(FH),ee(at))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function HS(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function BH(i,t){if(1&i){const e=te();D(0,"div",2)(1,"button",3),F("click",function(){return I(e),M().action()}),B(2),k()()}if(2&i){const e=M();O(2),Qn(e.data.action)}}function VH(i,t){}const zS=new _e("MatSnackBarData");class Eh{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const HH=Math.pow(2,31)-1;class F_{constructor(t,e){this._overlayRef=e,this._afterDismissed=new W,this._afterOpened=new W,this._onAction=new W,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,HH))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let jH=(()=>{class i{constructor(e,n){this.snackBarRef=e,this.data=n}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return i.\u0275fac=function(e){return new(e||i)(N(F_),N(zS))},i.\u0275cmp=st({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,n){1&e&&(D(0,"span",0),B(1),k(),G(2,BH,3,1,"div",1)),2&e&&(O(1),Qn(n.data.message),O(1),R("ngIf",n.hasAction))},directives:[Rr,ni],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}\n"],encapsulation:2,changeDetection:0}),i})();const zH={snackBarState:kn("state",[At("void, hidden",We({transform:"scale(0.8)",opacity:0})),At("visible",We({transform:"scale(1)",opacity:1})),jt("* => visible",qt("150ms cubic-bezier(0, 0, 0.2, 1)")),jt("* => void, * => hidden",qt("75ms cubic-bezier(0.4, 0.0, 1, 1)",We({opacity:0})))])};let WH=(()=>{class i extends Qu{constructor(e,n,r,o,s){super(),this._ngZone=e,this._elementRef=n,this._changeDetectorRef=r,this._platform=o,this.snackBarConfig=s,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new W,this._onExit=new W,this._onEnter=new W,this._animationState="void",this.attachDomPortal=a=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(a)),this._live="assertive"!==s.politeness||s.announcementMessage?"off"===s.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}onAnimationEnd(e){const{fromState:n,toState:r}=e;if(("void"===r&&"void"!==n||"hidden"===r)&&this._completeExit(),"visible"===r){const o=this._onEnter;this._ngZone.run(()=>{o.next(),o.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(an(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_applySnackBarClasses(){const e=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(r=>e.classList.add(r)):e.classList.add(n)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&n){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(r=document.activeElement),e.removeAttribute("aria-hidden"),n.appendChild(e),null==r||r.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return i.\u0275fac=function(e){return new(e||i)(N(at),N(Ze),N(Zt),N(En),N(Eh))},i.\u0275cmp=st({type:i,selectors:[["snack-bar-container"]],viewQuery:function(e,n){if(1&e&&xe(Ac,7),2&e){let r;oe(r=se())&&(n._portalOutlet=r.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,n){1&e&&hu("@state.done",function(o){return n.onAnimationEnd(o)}),2&e&&pu("@state",n._animationState)},features:[Pe],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,n){1&e&&(D(0,"div",0),G(1,VH,0,0,"ng-template",1),k(),Be(2,"div")),2&e&&(O(2),lt("aria-live",n._live)("role",n._role))},directives:[Ac],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[zH.snackBarState]}}),i})(),L_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Os,As,Nn,ol,nt],nt]}),i})();const WS=new _e("mat-snack-bar-default-options",{providedIn:"root",factory:function GH(){return new Eh}});let UH=(()=>{class i{constructor(e,n,r,o,s,a){this._overlay=e,this._live=n,this._injector=r,this._breakpointObserver=o,this._parentSnackBar=s,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,n){return this._attach(e,n)}openFromTemplate(e,n){return this._attach(e,n)}open(e,n="",r){const o=Object.assign(Object.assign({},this._defaultConfig),r);return o.data={message:e,action:n},o.announcementMessage===e&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,n){const o=nn.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:Eh,useValue:n}]}),s=new $a(this.snackBarContainerComponent,n.viewContainerRef,o),a=e.attach(s);return a.instance.snackBarConfig=n,a.instance}_attach(e,n){const r=Object.assign(Object.assign(Object.assign({},new Eh),this._defaultConfig),n),o=this._createOverlay(r),s=this._attachSnackBarContainer(o,r),a=new F_(s,o);if(e instanceof _n){const l=new ks(e,null,{$implicit:r.data,snackBarRef:a});a.instance=s.attachTemplatePortal(l)}else{const l=this._createInjector(r,a),p=new $a(e,void 0,l),b=s.attachComponentPortal(p);a.instance=b.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Ut(o.detachments())).subscribe(l=>{o.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&s._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,n){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),n.duration&&n.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(n.duration))}_createOverlay(e){const n=new Za;n.direction=e.direction;let r=this._overlay.position().global();const o="rtl"===e.direction,s="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!o||"end"===e.horizontalPosition&&o,a=!s&&"center"!==e.horizontalPosition;return s?r.left("0"):a?r.right("0"):r.centerHorizontally(),"top"===e.verticalPosition?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(e,n){return nn.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:F_,useValue:n},{provide:zS,useValue:e.data}]})}}return i.\u0275fac=function(e){return new(e||i)(ee(wi),ee(n_),ee(nn),ee(O_),ee(i,12),ee(WS))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})(),YH=(()=>{class i extends UH{constructor(e,n,r,o,s,a){super(e,n,r,o,s,a),this.simpleSnackBarComponent=jH,this.snackBarContainerComponent=WH,this.handsetCssClass="mat-snack-bar-handset"}}return i.\u0275fac=function(e){return new(e||i)(ee(wi),ee(n_),ee(nn),ee(O_),ee(i,12),ee(WS))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:L_}),i})();class GS{}class US{}class Co{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),o=r.toLowerCase(),s=e.slice(n+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Co?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Co;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Co?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const o=t.value;if(o){let s=this.headers.get(e);if(!s)return;s=s.filter(a=>-1===o.indexOf(a)),0===s.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class XH{encodeKey(t){return YS(t)}encodeValue(t){return YS(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const KH=/%(\d[a-f0-9])/gi,QH={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function YS(i){return encodeURIComponent(i).replace(KH,(t,e)=>{var n;return null!==(n=QH[e])&&void 0!==n?n:t})}function qS(i){return`${i}`}class Zo{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new XH,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function $H(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const o=r.indexOf("="),[s,a]=-1==o?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],l=e.get(s)||[];l.push(a),e.set(s,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(o=>{e.push({param:n,value:o,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Zo({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(qS(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(qS(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class ZH{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function XS(i){return"undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer}function $S(i){return"undefined"!=typeof Blob&&i instanceof Blob}function KS(i){return"undefined"!=typeof FormData&&i instanceof FormData}class Vc{constructor(t,e,n,r){let o;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function JH(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,o=r):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new Co),this.context||(this.context=new ZH),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+s}}else this.params=new Zo,this.urlWithParams=e}serializeBody(){return null===this.body?null:XS(this.body)||$S(this.body)||KS(this.body)||function ej(i){return"undefined"!=typeof URLSearchParams&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Zo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||KS(this.body)?null:$S(this.body)?this.body.type||null:XS(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Zo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,r=t.url||this.url,o=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,l=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let p=t.headers||this.headers,b=t.params||this.params;const w=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(p=Object.keys(t.setHeaders).reduce((A,P)=>A.set(P,t.setHeaders[P]),p)),t.setParams&&(b=Object.keys(t.setParams).reduce((A,P)=>A.set(P,t.setParams[P]),b)),new Vc(n,r,s,{params:b,headers:p,context:w,reportProgress:l,responseType:o,withCredentials:a})}}var Gn=(()=>((Gn=Gn||{})[Gn.Sent=0]="Sent",Gn[Gn.UploadProgress=1]="UploadProgress",Gn[Gn.ResponseHeader=2]="ResponseHeader",Gn[Gn.DownloadProgress=3]="DownloadProgress",Gn[Gn.Response=4]="Response",Gn[Gn.User=5]="User",Gn))();class N_{constructor(t,e=200,n="OK"){this.headers=t.headers||new Co,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class B_ extends N_{constructor(t={}){super(t),this.type=Gn.ResponseHeader}clone(t={}){return new B_({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class kh extends N_{constructor(t={}){super(t),this.type=Gn.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new kh({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class QS extends N_{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function V_(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let Hc=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let o;if(e instanceof Vc)o=e;else{let l,p;l=r.headers instanceof Co?r.headers:new Co(r.headers),r.params&&(p=r.params instanceof Zo?r.params:new Zo({fromObject:r.params})),o=new Vc(e,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:p,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const s=Pi(o).pipe(function qH(i,t){return S(t)?ea(i,t,1):ea(i,1)}(l=>this.handler.handle(l)));if(e instanceof Vc||"events"===r.observe)return s;const a=s.pipe(bn(l=>l instanceof kh));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ae(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ae(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ae(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(ae(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new Zo).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,V_(r,n))}post(e,n,r={}){return this.request("POST",e,V_(r,n))}put(e,n,r={}){return this.request("PUT",e,V_(r,n))}}return i.\u0275fac=function(e){return new(e||i)(ee(GS))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();class ZS{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const JS=new _e("HTTP_INTERCEPTORS");let tj=(()=>{class i{intercept(e,n){return n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();const nj=/^\)\]\}',?\n/;let eM=(()=>{class i{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Me(n=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((P,V)=>r.setRequestHeader(P,V.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const P=e.detectContentTypeHeader();null!==P&&r.setRequestHeader("Content-Type",P)}if(e.responseType){const P=e.responseType.toLowerCase();r.responseType="json"!==P?P:"text"}const o=e.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const P=r.statusText||"OK",V=new Co(r.getAllResponseHeaders()),q=function ij(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(r)||e.url;return s=new B_({headers:V,status:r.status,statusText:P,url:q}),s},l=()=>{let{headers:P,status:V,statusText:q,url:Z}=a(),re=null;204!==V&&(re=void 0===r.response?r.responseText:r.response),0===V&&(V=re?200:0);let J=V>=200&&V<300;if("json"===e.responseType&&"string"==typeof re){const ve=re;re=re.replace(nj,"");try{re=""!==re?JSON.parse(re):null}catch(be){re=ve,J&&(J=!1,re={error:be,text:re})}}J?(n.next(new kh({body:re,headers:P,status:V,statusText:q,url:Z||void 0})),n.complete()):n.error(new QS({error:re,headers:P,status:V,statusText:q,url:Z||void 0}))},p=P=>{const{url:V}=a(),q=new QS({error:P,status:r.status||0,statusText:r.statusText||"Unknown Error",url:V||void 0});n.error(q)};let b=!1;const w=P=>{b||(n.next(a()),b=!0);let V={type:Gn.DownloadProgress,loaded:P.loaded};P.lengthComputable&&(V.total=P.total),"text"===e.responseType&&!!r.responseText&&(V.partialText=r.responseText),n.next(V)},A=P=>{let V={type:Gn.UploadProgress,loaded:P.loaded};P.lengthComputable&&(V.total=P.total),n.next(V)};return r.addEventListener("load",l),r.addEventListener("error",p),r.addEventListener("timeout",p),r.addEventListener("abort",p),e.reportProgress&&(r.addEventListener("progress",w),null!==o&&r.upload&&r.upload.addEventListener("progress",A)),r.send(o),n.next({type:Gn.Sent}),()=>{r.removeEventListener("error",p),r.removeEventListener("abort",p),r.removeEventListener("load",l),r.removeEventListener("timeout",p),e.reportProgress&&(r.removeEventListener("progress",w),null!==o&&r.upload&&r.upload.removeEventListener("progress",A)),r.readyState!==r.DONE&&r.abort()}})}}return i.\u0275fac=function(e){return new(e||i)(ee(LD))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})();const H_=new _e("XSRF_COOKIE_NAME"),j_=new _e("XSRF_HEADER_NAME");class tM{}let rj=(()=>{class i{constructor(e,n,r){this.doc=e,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=TD(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return i.\u0275fac=function(e){return new(e||i)(ee(ct),ee(ws),ee(H_))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})(),z_=(()=>{class i{constructor(e,n){this.tokenService=e,this.headerName=n}intercept(e,n){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return n.handle(e);const o=this.tokenService.getToken();return null!==o&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,o)})),n.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(ee(tM),ee(j_))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})(),oj=(()=>{class i{constructor(e,n){this.backend=e,this.injector=n,this.chain=null}handle(e){if(null===this.chain){const n=this.injector.get(JS,[]);this.chain=n.reduceRight((r,o)=>new ZS(r,o),this.backend)}return this.chain.handle(e)}}return i.\u0275fac=function(e){return new(e||i)(ee(US),ee(nn))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})(),sj=(()=>{class i{static disable(){return{ngModule:i,providers:[{provide:z_,useClass:tj}]}}static withOptions(e={}){return{ngModule:i,providers:[e.cookieName?{provide:H_,useValue:e.cookieName}:[],e.headerName?{provide:j_,useValue:e.headerName}:[]]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[z_,{provide:JS,useExisting:z_,multi:!0},{provide:tM,useClass:rj},{provide:H_,useValue:"XSRF-TOKEN"},{provide:j_,useValue:"X-XSRF-TOKEN"}]}),i})(),aj=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[Hc,{provide:GS,useClass:oj},eM,{provide:US,useExisting:eM}],imports:[[sj.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),i})();const nM=oo(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function lj(i){return j((t,e)=>{let n=!1;t.subscribe(K(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function cj(i=dj){return j((t,e)=>{let n=!1;t.subscribe(K(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function dj(){return new nM}function iM(i,t){const e=arguments.length>=2;return n=>n.pipe(i?bn((r,o)=>i(r,o,n)):ke,an(1),e?lj(t):cj(()=>new nM))}function W_(i){return new Me(t=>{ki(i()).subscribe(t)})}function uj(i,t){}class G_{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const hj={dialogContainer:kn("dialogContainer",[At("void, exit",We({opacity:0,transform:"scale(0.7)"})),At("enter",We({transform:"none"})),jt("* => enter",V1([qt("150ms cubic-bezier(0, 0, 0.2, 1)",We({transform:"none",opacity:1})),sh("@*",oh(),{optional:!0})])),jt("* => void, * => exit",V1([qt("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",We({opacity:0})),sh("@*",oh(),{optional:!0})]))])};let fj=(()=>{class i extends Qu{constructor(e,n,r,o,s,a,l,p){super(),this._elementRef=e,this._focusTrapFactory=n,this._changeDetectorRef=r,this._config=s,this._interactivityChecker=a,this._ngZone=l,this._focusMonitor=p,this._animationStateChanged=new Te,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=b=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(b)),this._ariaLabelledBy=s.ariaLabelledBy||null,this._document=o}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=Gg())}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const n=Gg(),r=this._elementRef.nativeElement;(!n||n===this._document.body||n===r||r.contains(n))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=Gg();return e===n||e.contains(n)}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(J5),N(Zt),N(ct,8),N(G_),N(I1),N(at),N(Jr))},i.\u0275dir=fe({type:i,viewQuery:function(e,n){if(1&e&&xe(Ac,7),2&e){let r;oe(r=se())&&(n._portalOutlet=r.first)}},features:[Pe]}),i})(),pj=(()=>{class i extends fj{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:n}){"enter"===e?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:n})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:n}))}_onAnimationStart({toState:e,totalTime:n}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=It(i)))(n||i)}}(),i.\u0275cmp=st({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,n){1&e&&hu("@dialogContainer.start",function(o){return n._onAnimationStart(o)})("@dialogContainer.done",function(o){return n._onAnimationDone(o)}),2&e&&(Er("id",n._id),lt("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),pu("@dialogContainer",n._state))},features:[Pe],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&G(0,uj,0,0,"ng-template",0)},directives:[Ac],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[hj.dialogContainer]}}),i})(),mj=0;class U_{constructor(t,e,n="mat-dialog-"+mj++){this._overlayRef=t,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new W,this._afterClosed=new W,this._beforeClosed=new W,this._state=0,e._id=n,e._animationStateChanged.pipe(bn(r=>"opened"===r.state),an(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(bn(r=>"closed"===r.state),an(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(bn(r=>27===r.keyCode&&!this.disableClose&&!xi(r))).subscribe(r=>{r.preventDefault(),Y_(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Y_(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(bn(e=>"closing"===e.state),an(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Y_(i,t,e){return void 0!==i._containerInstance&&(i._containerInstance._closeInteractionType=t),i.close(e)}const rM=new _e("MatDialogData"),gj=new _e("mat-dialog-default-options"),oM=new _e("mat-dialog-scroll-strategy"),vj={provide:oM,deps:[wi],useFactory:function _j(i){return()=>i.scrollStrategies.block()}};let bj=(()=>{class i{constructor(e,n,r,o,s,a,l,p,b,w){this._overlay=e,this._injector=n,this._defaultOptions=r,this._parentDialog=o,this._overlayContainer=s,this._dialogRefConstructor=l,this._dialogContainerType=p,this._dialogDataToken=b,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new W,this._afterOpenedAtThisLevel=new W,this._ariaHiddenElements=new Map,this.afterAllClosed=W_(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(di(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,n){n=function yj(i,t){return Object.assign(Object.assign({},t),i)}(n,this._defaultOptions||new G_),n.id&&this.getDialogById(n.id);const r=this._createOverlay(n),o=this._attachDialogContainer(r,n),s=this._attachDialogContent(e,o,r,n);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(s),s.afterClosed().subscribe(()=>this._removeOpenDialog(s)),this.afterOpened.next(s),o._initializeWithAttachedContent(),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const n=this._getOverlayConfig(e);return this._overlay.create(n)}_getOverlayConfig(e){const n=new Za({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachDialogContainer(e,n){const o=nn.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:G_,useValue:n}]}),s=new $a(this._dialogContainerType,n.viewContainerRef,o,n.componentFactoryResolver);return e.attach(s).instance}_attachDialogContent(e,n,r,o){const s=new this._dialogRefConstructor(r,n,o.id);if(e instanceof _n)n.attachTemplatePortal(new ks(e,null,{$implicit:o.data,dialogRef:s}));else{const a=this._createInjector(o,s,n),l=n.attachComponentPortal(new $a(e,o.viewContainerRef,a,o.componentFactoryResolver));s.componentInstance=l.instance}return s.updateSize(o.width,o.height).updatePosition(o.position),s}_createInjector(e,n,r){const o=e&&e.viewContainerRef&&e.viewContainerRef.injector,s=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:n}];return e.direction&&(!o||!o.get(lr,null,bt.Optional))&&s.push({provide:lr,useValue:{value:e.direction,change:Pi()}}),nn.create({parent:o||this._injector,providers:s})}_removeOpenDialog(e){const n=this.openDialogs.indexOf(e);n>-1&&(this.openDialogs.splice(n,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,o)=>{r?o.setAttribute("aria-hidden",r):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){let o=n[r];o!==e&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return i.\u0275fac=function(e){La()},i.\u0275dir=fe({type:i}),i})(),Ah=(()=>{class i extends bj{constructor(e,n,r,o,s,a,l,p){super(e,n,o,a,l,s,U_,pj,rM,p)}}return i.\u0275fac=function(e){return new(e||i)(ee(wi),ee(nn),ee(pg,8),ee(gj,8),ee(oM),ee(i,12),ee(Qg),ee(ii,8))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})(),sM=(()=>{class i{constructor(e,n,r){this.dialogRef=e,this._elementRef=n,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=function Cj(i,t){let e=i.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-dialog-container");)e=e.parentElement;return e?t.find(n=>n.id===e.id):null}(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const n=e._matDialogClose||e._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(e){Y_(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}}return i.\u0275fac=function(e){return new(e||i)(N(U_,8),N(Ze),N(Ah))},i.\u0275dir=fe({type:i,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(e,n){1&e&&F("click",function(o){return n._onButtonClick(o)}),2&e&&lt("aria-label",n.ariaLabel||null)("type",n.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[fn]}),i})(),q_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[Ah,vj],imports:[[Os,As,nt],nt]}),i})();function aM(...i){const t=Vb(i),{args:e,keys:n}=LS(i),r=new Me(o=>{const{length:s}=e;if(!s)return void o.complete();const a=new Array(s);let l=s,p=s;for(let b=0;b<s;b++){let w=!1;ki(e[b]).subscribe(K(o,A=>{w||(w=!0,p--),a[b]=A},()=>l--,void 0,()=>{(!l||!w)&&(p||o.next(n?NS(n,a):a),o.complete())}))}});return t?r.pipe(Lg(t)):r}function xo(i){return j((t,e)=>{let o,n=null,r=!1;n=t.subscribe(K(e,void 0,void 0,s=>{o=ki(i(s,xo(i)(t))),n?(n.unsubscribe(),n=null,o.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,o.subscribe(e))})}const Dj=["*"];let Ih;function jc(i){var t;return(null===(t=function Sj(){if(void 0===Ih&&(Ih=null,"undefined"!=typeof window)){const i=window;void 0!==i.trustedTypes&&(Ih=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Ih}())||void 0===t?void 0:t.createHTML(i))||i}function lM(i){return Error(`Unable to find icon with the name "${i}"`)}function cM(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function dM(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class Hs{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let zc=(()=>{class i{constructor(e,n,r,o){this._httpClient=e,this._sanitizer=n,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,o){return this._addSvgIconConfig(e,n,new Hs(r,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,o){const s=this._sanitizer.sanitize($t.HTML,r);if(!s)throw dM(r);const a=jc(s);return this._addSvgIconConfig(e,n,new Hs("",a,o))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new Hs(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){const o=this._sanitizer.sanitize($t.HTML,n);if(!o)throw dM(n);const s=jc(o);return this._addSvgIconSetConfig(e,new Hs("",s,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const n=this._sanitizer.sanitize($t.RESOURCE_URL,e);if(!n)throw cM(e);const r=this._cachedIconsByUrl.get(n);return r?Pi(Ph(r)):this._loadSvgIconFromConfig(new Hs(e,null)).pipe(Rc(o=>this._cachedIconsByUrl.set(n,o)),ae(o=>Ph(o)))}getNamedSvgIcon(e,n=""){const r=uM(n,e);let o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(n,e),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);const s=this._iconSetConfigs.get(n);return s?this._getSvgFromIconSetConfigs(e,s):function xj(i,t){const e=S(i)?i:()=>i,n=r=>r.error(e());return new Me(t?r=>t.schedule(n,0,r):n)}(lM(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Pi(Ph(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(ae(n=>Ph(n)))}_getSvgFromIconSetConfigs(e,n){const r=this._extractIconWithNameFromAnySet(e,n);return r?Pi(r):aM(n.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(xo(a=>{const p=`Loading icon set URL: ${this._sanitizer.sanitize($t.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(p)),Pi(null)})))).pipe(ae(()=>{const s=this._extractIconWithNameFromAnySet(e,n);if(!s)throw lM(e);return s}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){const o=n[r];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){const s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Rc(n=>e.svgText=n),ae(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Pi(null):this._fetchIcon(e).pipe(Rc(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){const o=e.querySelector(`[id="${n}"]`);if(!o)return null;const s=o.cloneNode(!0);if(s.removeAttribute("id"),"svg"===s.nodeName.toLowerCase())return this._setSvgAttributes(s,r);if("symbol"===s.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(s),r);const a=this._svgElementFromString(jc("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(e){const n=this._document.createElement("DIV");n.innerHTML=e;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const n=this._svgElementFromString(jc("<svg></svg>")),r=e.attributes;for(let o=0;o<r.length;o++){const{name:s,value:a}=r[o];"id"!==s&&n.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[o].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){var n;const{url:r,options:o}=e,s=null!==(n=null==o?void 0:o.withCredentials)&&void 0!==n&&n;if(!this._httpClient)throw function Mj(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const a=this._sanitizer.sanitize($t.RESOURCE_URL,r);if(!a)throw cM(r);const l=this._inProgressUrlFetches.get(a);if(l)return l;const p=this._httpClient.get(a,{responseType:"text",withCredentials:s}).pipe(ae(b=>jc(b)),function wj(i){return j((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}(()=>this._inProgressUrlFetches.delete(a)),Wb());return this._inProgressUrlFetches.set(a,p),p}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(uM(e,n),r),this}_addSvgIconSetConfig(e,n){const r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){const n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){const o=this._resolvers[r](n,e);if(o)return Ej(o)?new Hs(o.url,null,o.options):new Hs(o,null)}}}return i.\u0275fac=function(e){return new(e||i)(ee(Hc,8),ee(Go),ee(ct,8),ee(Lo))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ph(i){return i.cloneNode(!0)}function uM(i,t){return i+":"+t}function Ej(i){return!(!i.url||!i.options)}const kj=yo(class{constructor(i){this._elementRef=i}}),Aj=new _e("mat-icon-location",{providedIn:"root",factory:function Ij(){const i=Ul(ct),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),hM=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Pj=hM.map(i=>`[${i}]`).join(", "),Rj=/^url\(['"]?#(.*?)['"]?\)$/;let Or=(()=>{class i extends kj{constructor(e,n,r,o,s){super(e),this._iconRegistry=n,this._location=o,this._errorHandler=s,this._inline=!1,this._currentIconFetch=mt.EMPTY,r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Ke(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=e.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,n=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();n!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),n&&e.classList.add(n),this._previousFontSetClass=n),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const n=this._elementsWithExternalReferences;n&&n.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){const n=e.querySelectorAll(Pj),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<n.length;o++)hM.forEach(s=>{const a=n[o],l=a.getAttribute(s),p=l?l.match(Rj):null;if(p){let b=r.get(a);b||(b=[],r.set(a,b)),b.push({name:s,value:p[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(an(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${o.message}`))})}}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(zc),tr("aria-hidden"),N(Aj),N(Lo))},i.\u0275cmp=st({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,n){2&e&&(lt("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet),Ot("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Pe],ngContentSelectors:Dj,decls:1,vars:0,template:function(e,n){1&e&&(un(),St(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),i})(),Rh=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[nt],nt]}),i})();const Oj=["*",[["mat-toolbar-row"]]],Fj=["*","mat-toolbar-row"],Lj=yo(class{constructor(i){this._elementRef=i}});let Nj=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=fe({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),Bj=(()=>{class i extends Lj{constructor(e,n,r){super(e),this._platform=n,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(En),N(ct))},i.\u0275cmp=st({type:i,selectors:[["mat-toolbar"]],contentQueries:function(e,n,r){if(1&e&&Ht(r,Nj,5),2&e){let o;oe(o=se())&&(n._toolbarRows=o)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,n){2&e&&Ot("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",0===n._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Pe],ngContentSelectors:Fj,decls:2,vars:0,template:function(e,n){1&e&&(un(Oj),St(0),St(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),i})(),X_=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[nt],nt]}),i})();function Vj(i,t){1&i&&(D(0,"mat-icon",4),B(1,"cancel "),k())}function Hj(i,t){if(1&i&&Be(0,"mat-toolbar",5),2&i){const e=M();Na("innerHtml",e.data.headerText,Kl),R("ngClass",e.data.cls)}}let jj=(()=>{class i{constructor(e,n){this.dialogRef=e,this.data=n}}return i.\u0275fac=function(e){return new(e||i)(N(U_),N(rM))},i.\u0275cmp=st({type:i,selectors:[["app-dialog"]],decls:4,vars:4,consts:[[2,"position","relative","margin-bottom","-6px","overflow","hidden"],["mat-dialog-close","","class","my-close-dialog","style","color: white",4,"ngIf"],["color","primary","style","position: relative;min-width: 350px;",3,"ngClass","innerHtml",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["mat-dialog-close","",1,"my-close-dialog",2,"color","white"],["color","primary",2,"position","relative","min-width","350px",3,"ngClass","innerHtml"]],template:function(e,n){1&e&&(D(0,"div",0),G(1,Vj,2,0,"mat-icon",1),G(2,Hj,1,2,"mat-toolbar",2),Gi(3,3),k()),2&e&&(O(1),R("ngIf",!1!==n.data.showClose),O(1),R("ngIf","false"!==n.data.headerText),O(1),R("ngTemplateOutlet",n.data.template)("ngTemplateOutletContext",n.data.context))},directives:[ni,Or,sM,Bj,Ms,wc],styles:["[_nghost-%COMP%]{display:inline-block;text-align:center;width:100%}.dialog-paragraph[_ngcontent-%COMP%]{margin:0}"]}),i})();class zj{constructor(t){this.dialogRef=t,this.opened$=this.dialogRef.afterOpened().pipe(iM())}get context(){return this.dialogRef.componentInstance.data.context}close(){this.dialogRef.close()}setHeaderText(t){this.dialogRef.componentInstance.data.headerText=t}setTemplate(t){this.dialogRef.componentInstance.data.template=t}setCls(t){this.dialogRef.componentInstance.data.cls=t||""}setShowClose(t){this.dialogRef.componentInstance.data.showClose=t||!0}}let Wj=(()=>{class i{constructor(e){this.dialog=e}open(e,n){n||(n={}),void 0===n.hasBackdrop&&(n.hasBackdrop=!0);let r=Object.assign({disableClose:!0,panelClass:"no-pad-dialog"},n);const o=this.dialog.open(jj,Object.assign(Object.assign({},this.fetchOptions(r)),{data:e}));return o.afterClosed().pipe(iM()),new zj(o)}fetchOptions({disableClose:e,panelClass:n,id:r,hasBackdrop:o}){return{disableClose:e,panelClass:n,id:r,hasBackdrop:o}}}return i.\u0275fac=function(e){return new(e||i)(ee(Ah))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),no=(()=>{class i{constructor(e,n,r,o){this.snackBar=e,this.http=n,this.dialogService=r,this.matDialog=o,this.selectedAssets=[],this.UI={toastComponent:{}},this.isProd=!(window.location.href.indexOf("localhost")>0),this.isProd&&(window.console.log=function(){}),this.windowWidth=window.innerWidth,this.isMobile=window.innerWidth<880,console.log("Core constructor",`Width ${this.windowWidth}`,`Is mobile ${this.isMobile}`)}openDialog(e,n){return this.dialogService.open(e,n)}closeAllDialogs(){this.matDialog.closeAll()}closeDialogById(e){var n,r;null===(r=null===(n=null==this?void 0:this.matDialog)||void 0===n?void 0:n.getDialogById(e))||void 0===r||r.close()}giveSnackbar(e,n={}){let r=Object.assign({horizontalPosition:"start",verticalPosition:"top",duration:1e3},n);this.snackBar.open(e,"",r)}getData(e,n={}){return this.http.get(e,n)}getDeep(e,n){let r=e;for(let o=0;o<n.length;++o){if(null==r[n[o]])return;r=r[n[o]]}return r}setDeep(e,n,r,o=!0){let s=0;n.reduce((a,l)=>(s++,o&&void 0===a[l]&&s!==n.length?(a[l]={},a[l]):s===n.length?(a[l]=r,r):a[l]),e)}getStorageObj(e){let n=localStorage.getItem(e);return!!n&&JSON.parse(n)}getStorageObjDeep(e,n){let r=localStorage.getItem(e),o=!!r&&JSON.parse(r);return!!o&&this.getDeep(o,n)}updateStorageObj(e,n){let r=localStorage.getItem(e),o=r?JSON.parse(r):{};Object.assign(o,n),localStorage.setItem(e,JSON.stringify(o))}updateStorageObjDeep(e,n,r){let o=localStorage.getItem(e),s=o?JSON.parse(o):{};this.setDeep(s,n,r,!0),localStorage.setItem(e,JSON.stringify(s))}dataURLtoFile(e,n){let r=e.split(","),o=r[0].match(/:(.*?);/)[1],s=atob(r[1]),a=s.length,l=new Uint8Array(a);for(;a--;)l[a]=s.charCodeAt(a);return new File([l],n,{type:o})}toBase64(e){return new Me(n=>{setTimeout(()=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>{n.next(r.result)}},0)})}shuffle(e){let r,n=e.length;for(;0!=n;)r=Math.floor(Math.random()*n),n--,[e[n],e[r]]=[e[r],e[n]];return e}arrayUnique(e){for(var n=e.concat(),r=0;r<n.length;++r)for(var o=r+1;o<n.length;++o)n[r]===n[o]&&n.splice(o--,1);return n}clone(e){return JSON.parse(JSON.stringify(e))}}return i.\u0275fac=function(e){return new(e||i)(ee(YH),ee(Hc),ee(Wj),ee(Ah))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Jo=(()=>{class i{constructor(e,n){this.http=e,this.coreService=n,this.apiUrl="http://localhost/asset-bank-api/public/api",this.imgPath="http://localhost/asset-bank-api/public/api/asset/",this.token="",this.categories=[{childsNum:0,title:"images",icon:"folder",childs:[],files:[]}],console.log("service contructor"),this.getAccessToken()}checkAccessToken(){console.log("checking token"),this.getAuthData("/checkToken").subscribe({error:e=>{this.token="",localStorage.removeItem("asset_bank_user")}})}getAccessToken(){this.user=this.coreService.getStorageObj("asset_bank_user"),this.token=this.user?this.user.token.access_token:"",this.coreService.isProd&&(this.apiUrl="https://tools.siteland.eu/asset-bank/asset-bank-api/public/api",this.imgPath="https://tools.siteland.eu/asset-bank/asset-bank-api/public/api/asset/"),this.user||(this.user={id:1}),this.imgPath+=this.user.id+"/"}getData(e,n={}){return this.http.get(this.apiUrl+e,{responseType:"json"}).pipe(xo(r=>{throw r}))}postData(e,n={}){return this.http.post(this.apiUrl+e,n).pipe(xo(r=>{throw r}))}getAuthData(e,n={}){return this.token?this.http.get(this.apiUrl+e,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}}).pipe(xo(r=>{throw r})):new Me(r=>{throw{message:"Unauthorized. Please login or Register First"}})}postAuthData(e,n={}){return this.token?(n.accountId=this.user.id,this.http.post(this.apiUrl+e,n,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}}).pipe(xo(r=>{throw r}))):new Me(r=>{throw{message:"Unauthorized. Please login or Register First"}})}uploadAsset(e,n){if(!this.token)return new Me(o=>{throw{message:"Unauthorized. Please login or Register First"}});const r=new FormData;return r.append("image",n),r.append("accountId",this.user.id),this.http.post(this.apiUrl+e,r,{headers:{Authorization:`Bearer ${this.token}`}}).pipe(xo(o=>{throw 401===o.status&&this.logout(),o}))}logout(){this.postAuthData("/logout",{}).subscribe({next:e=>{localStorage.removeItem("asset_bank_user"),this.token="",this.user={}},error:e=>{var n;this.coreService.giveSnackbar(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.message,{duration:5e3,verticalPosition:"top"}),localStorage.removeItem("asset_bank_user"),this.token="",this.user={}},complete:()=>{this.coreService.closeAllDialogs(),location.reload()}})}getAsset(e){return this.http.get(this.imgPath+e,{headers:{"Content-Type":"blob"},responseType:"blob"}).pipe(xo(n=>{throw n.message}))}getAssets(e,n){return this.http.get(`${this.apiUrl}/assets/${this.user.id}/${e}/${n}`,{headers:{Authorization:`Bearer ${this.token}`}}).pipe(xo(r=>{throw r.message}))}srcApiPath(e){let n=e.split(".");return this.imgPath+`${n[0]}/${n[1]}`}}return i.\u0275fac=function(e){return new(e||i)(ee(Hc),ee(no))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var $_=$i(327);let Oh=(()=>{class i{constructor(){this.compositeOperations=["color","color-burn","color-dodge","copy","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","lighten","lighter","luminosity","multiply","overlay","saturation","screen","soft-light","source-atop","source-in","source-out","source-over","xor"],this.cartoonColors=["rgb(244,67,54)","rgb(233,30,99)","rgb(156,39,176)","rgb(103,58,183)","rgb(63,81,181)","rgb(33,150,243)","rgb(3,169,244)","rgb(0,188,212)","rgb(0,150,136)","rgb(76,175,80)","rgb(139,195,74)","rgb(205,220,57)","rgb(255,235,59)","rgb(255,193,7)","rgb(255,152,0)","rgb(255,87,34)","rgb(121,85,72)","rgb(158,158,158)","rgb(96,125,139)"]}randNum(e,n,r=!0){return r?e+Math.floor(Math.random()*(n-e)):e+Math.ceil(Math.random()*(n-e))}giveDefaultCartoonColors(){return JSON.parse(JSON.stringify(this.cartoonColors))}rgbStrToObj(e){let n=e.replace(/[a-z\(\)]/g,"").split(",");return{r:Number(n[0]),g:Number(n[1]),b:Number(n[2])}}objToRgbString(e){return`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}getAverageRGB(e,n=5){let r={r:0,g:0,b:0},o=0,s=-4,a=e.data.length;for(;(s+=4*n)<a;)++o,r.r+=e.data[s],r.g+=e.data[s+1],r.b+=e.data[s+2];return r.r=~~(r.r/o),r.g=~~(r.g/o),r.b=~~(r.b/o),r}getColorsObj(e,n=5,r=20){let o={},s=-4,a=e.data.length;for(;(s+=4*n)<a;){let w=`${e.data[s]},${e.data[s+1]},${e.data[s+2]}`;o[w]?o[w]+=1:o[w]=1}let l=[];for(var p in o)l.push([p,o[p]]);l.sort(function(w,A){return A[1]-w[1]});let b=l.length;return l.length=r,{colors:l.filter(w=>w),colorCount:b}}findRGBRange(e,n=5){const r=[255,255,255,255],o=[0,0,0,-1],s=e.length/4;let p,b,w,A,a=4*n;for(let P=0;P<s;P+=a)p=e[P],b=e[P+1],w=e[P+2],A=e[P+3],p<r[0]&&(r[0]=p),b<r[1]&&(r[1]=b),w<r[2]&&(r[2]=w),w<r[3]&&(r[3]=A),p>o[0]&&(o[0]=p),b>o[1]&&(o[1]=b),w>o[2]&&(o[2]=w),w>o[3]&&(o[3]=A);return{min:{r:r[0],g:r[1],b:r[2],a:r[3]},max:{r:o[0],g:o[1],b:o[2],a:o[3]}}}giveRandomColorStr(e=!0){let n=Math.floor(255*Math.random()),r=Math.floor(255*Math.random()),o=Math.floor(255*Math.random()),s=Math.random();return e?`rgba(${n},${r},${o}, ${s})`:`rgb(${n},${r},${o})`}giveRandomColors(e,n=!0){let r=[];for(let o=0;o<e;o+=1){let s=this.giveRandomColorStr();r.push(s)}return r}getColorsInfo(e,n=5,r=20){let o=this.getAverageRGB(e,n),s=this.getColorsObj(e,n,r),a=this.findRGBRange(e.data,n);return Object.assign(s,{averageRgb:o,colorRange:a})}sumColor(e){return e.r+e.g+e.b+(e.a||0)}maxRGB(e){return Math.max(e.r,e.g,e.b)}colorsDiff(e,n){return Math.abs(e.r-n.r)+Math.abs(e.g-n.g)+Math.abs(e.b-n.b)}givePixelIndexFromPoint(e,n){return 4*(e.y*n+e.x)|0}givePolygonPoints(e,n){const r=2*Math.PI/n,o=[];for(let s=1;s<=n;s++){const a=Math.cos(s*r)*e,l=Math.sin(s*r)*e;o.push({x:a,y:l})}return o}inPolygon(e,n){for(var r=e.x,o=e.y,s=!1,a=0,l=n.length-1;a<n.length;l=a++){var p=n[a][0],b=n[a][1],A=n[l][1];b>o!=A>o&&r<(n[l][0]-p)*(o-b)/(A-b)+p&&(s=!s)}return s}getNextPointsSequence(e,n,r,o,s){let a=e.map(P=>Math.round(P[0])+o),l=e.map(P=>Math.round(P[1])),p={x:Math.min(...a),y:Math.min(...l)},b={x:Math.max(...a),y:Math.max(...l)};if(b.x>n+o&&b.y>r)return{poly:[],minPoint:p,maxPoint:b};b.x>n+o&&(a=e.map(P=>Math.round(P[0])-n),l=e.map(P=>Math.round(P[1])+s),p={x:Math.min(...a),y:Math.min(...l)},b={x:Math.max(...a),y:Math.max(...l)});let w=a.length,A=[];for(let P=0;P<w;P+=1)A.push([a[P],l[P]]);return{poly:A,minPoint:p,maxPoint:b}}drawFromPath(e,n,r){!n[0]||(e.fillStyle=r,e.beginPath(),e.moveTo(n[0][0],n[0][1]),n.forEach(o=>{e.lineTo(o[0],o[1])}),e.fill())}giveRandomPoly(e,n,r){let s,a,o=[],l=[],p=[];for(let b=0;b<e;b+=1)s=Math.floor(Math.random()*n),a=Math.floor(Math.random()*r),l.push(s),p.push(a),o.push([s,a]);return{poly:o,startP:{x:Math.min(...l),y:Math.min(...p)},endP:{x:Math.max(...l),y:Math.max(...p)}}}giveRandomRectPoints(e,n){return[{x:Math.floor(Math.random()*Math.round(e/2)),y:Math.floor(Math.random()*Math.round(n/2))},{x:Math.round(e/2)+Math.ceil(Math.random()*Math.round(e/2)),y:Math.round(n/2)+Math.ceil(Math.random()*Math.round(n/2))}]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),fM=(()=>{class i{constructor(){}givePixelIndexFromPoint(e,n){return 4*(e.y*n+e.x)|0}givePixelIndexPlusPoint(e,n,r){return 4*((e.y+n.y)*r+(e.x+n.x))|0}givePolygonPoints(e,n){const r=2*Math.PI/n,o=[];for(let s=1;s<=n;s++){const a=Math.cos(s*r)*e,l=Math.sin(s*r)*e;o.push({x:a,y:l})}return o}inPolygon(e,n){for(var r=e.x,o=e.y,s=!1,a=0,l=n.length-1;a<n.length;l=a++){var p=n[a][0],b=n[a][1],A=n[l][1];b>o!=A>o&&r<(n[l][0]-p)*(o-b)/(A-b)+p&&(s=!s)}return s}getNextPointsSequence(e,n,r,o,s){let a=e.map(P=>Math.round(P[0])+o),l=e.map(P=>Math.round(P[1])),p={x:Math.min(...a),y:Math.min(...l)},b={x:Math.max(...a),y:Math.max(...l)};if(b.x>n+o&&b.y>r)return{poly:[],minPoint:p,maxPoint:b};b.x>n+o&&(a=e.map(P=>Math.round(P[0])-n),l=e.map(P=>Math.round(P[1])+s),p={x:Math.min(...a),y:Math.min(...l)},b={x:Math.max(...a),y:Math.max(...l)});let w=a.length,A=[];for(let P=0;P<w;P+=1)A.push([a[P],l[P]]);return{poly:A,minPoint:p,maxPoint:b}}drawFromPath(e,n,r){!n[0]||(e.fillStyle=r,e.beginPath(),e.moveTo(n[0][0],n[0][1]),n.forEach(o=>{e.lineTo(o[0],o[1])}),e.fill())}giveRandomPoly(e,n,r){let s,a,o=[],l=[],p=[];for(let b=0;b<e;b+=1)s=Math.floor(Math.random()*n),a=Math.floor(Math.random()*r),l.push(s),p.push(a),o.push([s,a]);return{poly:o,startP:{x:Math.min(...l),y:Math.min(...p)},endP:{x:Math.max(...l),y:Math.max(...p)}}}giveRandomRectPoints(e,n){return[{x:Math.floor(Math.random()*Math.round(e/2)),y:Math.floor(Math.random()*Math.round(n/2))},{x:Math.round(e/2)+Math.ceil(Math.random()*Math.round(e/2)),y:Math.round(n/2)+Math.ceil(Math.random()*Math.round(n/2))}]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),pM=(()=>{class i{constructor(){this.cartoonColors=["rgb(244,67,54)","rgb(233,30,99)","rgb(156,39,176)","rgb(103,58,183)","rgb(63,81,181)","rgb(33,150,243)","rgb(3,169,244)","rgb(0,188,212)","rgb(0,150,136)","rgb(76,175,80)","rgb(139,195,74)","rgb(205,220,57)","rgb(255,235,59)","rgb(255,193,7)","rgb(255,152,0)","rgb(255,87,34)","rgb(121,85,72)","rgb(158,158,158)","rgb(96,125,139)"],this.materialColors={red:{50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},pink:{50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},purple:{50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},"deep-purple":{50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},indigo:{50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},blue:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},"light-blue":{50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},cyan:{50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},teal:{50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},green:{50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},"light-green":{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},orange:{50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},"deep-orange":{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},"blue-grey":{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"}}}pixelNegative(e,n,r,o=255){e.data[n]=o-r.r,e.data[n+1]=o-r.g,e.data[n+2]=o-r.b}giveRandomCartoonColors(){let e=2+Math.floor(10*Math.random()),n=[];for(let r=0;r<e;r+=1){let o=Math.floor(255*Math.random()),s=Math.floor(255*Math.random()),a=Math.floor(255*Math.random());n.push(`rgb(${o},${s},${a})`)}return n}hexToRgb(e){let n;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return n=e.substring(1).split(""),3==n.length&&(n=[n[0],n[0],n[1],n[1],n[2],n[2]]),n="0x"+n.join(""),"rgb("+[n>>16&255,n>>8&255,255&n].join(",")+")";throw new Error("Bad Hex")}giveRgbShades(e){let n=[];for(let r in this.materialColors[e])n.push(this.hexToRgb(this.materialColors[e][r]));return n}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),mM=(()=>{class i{constructor(e,n,r,o,s){this.helpers=e,this.geo=n,this.pallete=r,this.coreService=o,this.document=s,this.canvas=this.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.width=0,this.height=0,this.center={x:0,y:0},this.maxHypo=0,this.imageData=new ImageData(1,1),this.imageSrc="",this.info={averageRgb:{r:0,g:0,b:0},colors:[],colorCount:0},this.applyEffectWithReInit=!0,this.config={colorStops:[{color:"rgb(0,255,0)",stop:100},{color:"rgb(255,0,0)",stop:500},{color:"rgb(0,0,0)",stop:800}],confusion:{colors:[1,0,0],start:0,randomness:20},pixelate:{factor:3,outline:!1,circleFactor:5,circleOutline:!1},bnw:{rgb:["b","b","b"]},negative:{brightness:255},polychromeNegative:{middlePoint:127,range:100},exposure:{distance:1},whiteNoise:{factor:30},paradise:{factor:.1},intensity:{factor:.1},bloom:{factor:20},outlines:{factor:10,bgColor:"rgba(255,255,255,1)",hasBg:!1},water:{factor:200},blocks:{factor:50},frames:{factor:10,stop:50},rotatingFrames:{scaleFactor:.2,degreesStop:360,degreesPlus:1},cartoonColors:[],vinyl:{factor:.1},holyLight:{factor:1},fluffy:{factor:5},suck:{factor:10},spotlight:{controlX:100,controlY:200,rangeX:100,rangeY:200},blinds:{depth:1,freq:100},tremolo:{period:.1,pitch:10},ellipse:{rx:0,ry:0},brokenWall:{size:50,dist:100},klimt:{size:5,randomness:90},colendar:{factor:10},letters:{size:10,density:1.3,phrase:""},pourPaint:{color:"rgba(255,255,255,1)",range:10,density:10},comic:{reverse:80,sumFactor:382},whirlpool:{degreesStop:360,degreesPlus:.5},background:{color:"rgba(100, 100, 100, .8)"},shadesOf:{color:"red"},dream:{factor:20},acrylicScratch:{range:3}},this.history=[],this.historyCurrent=0,this.pattern={isRunning:!1},this.scissorsTest={var1:1,var2:1}}createCanvas(e,n,r){var o;this.canvas=this.document.createElement("canvas"),this.canvas.width=this.width=n,this.canvas.height=this.height=r,this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),null===(o=this.document.getElementById(e))||void 0===o||o.appendChild(this.canvas)}clearCanvas(){this.ctx.clearRect(0,0,this.width,this.height)}giveConstants(){this.config.cartoonColors=this.pallete.cartoonColors,this.center={x:Math.round(this.width/2),y:Math.round(this.height/2)},this.config.ellipse={rx:Math.round(this.width/2),ry:Math.round(this.height/2)},this.maxHypo=Math.round(Math.hypot(this.center.x-0,this.center.y-0))+1}tempCanvasDataUrl(e,n,r){let o=this.document.createElement("canvas");return o.width=n,o.height=r,o.getContext("2d").putImageData(e,0,0,0,0,n,r),setTimeout(()=>{o.remove()},5e3),o.toDataURL()}loadImage(e){return this.imageSrc=e,new Me(n=>{let r=new Image;r.onload=()=>{setTimeout(()=>{n.next(r)},0)},r.src=this.imageSrc,r.crossOrigin="Anonymous"})}initCanvasWithImage(e,n,r){return new Me(o=>{this.loadImage(n).subscribe(s=>{let a=s.width,l=s.height,p=s.width,b=s.height;if(r&&r<a){let P=r/a;p=a*P,b=l*P}this.width=p,this.height=b,this.createCanvas(e,p,b),this.ctx.drawImage(s,0,0,a,l,0,0,p,b),this.center={x:Math.round(this.width/2),y:Math.round(this.height/2)},this.getImageData(),this.giveConstants(),this.info=this.helpers.getColorsInfo(this.imageData);const w=this.canvas.toDataURL(),A=new Image;A.onload=()=>{this.image=A,this.imageProto=A},A.src=w,A.crossOrigin="Anonymous",o.next({img:w,width:p,height:b})})})}reInitImage(e=!1){return new Me(n=>{this.image=this.imageProto,this.ctx.drawImage(this.image,0,0,this.image.width,this.image.height,0,0,this.width,this.height),this.getImageData(),e&&(this.info=this.helpers.getColorsInfo(this.imageData)),n.next(this.info)})}getImageData(){this.imageData=this.ctx.getImageData(0,0,this.width,this.height)}getDataUrlForArea(e,n,r){let o=e.x<n.x?e.x:n.x,s=e.y<n.y?e.y:n.y,a=Math.abs(e.x-n.x),l=Math.abs(e.y-n.y),p=this.ctx.getImageData(o,s,a,l);return r&&this.doSomethingInLoopBetweenPoints((P,V)=>{this.imageData.data[P+3]=0},!0,{x:o,y:s},{x:o+a,y:s+l-1}),this.tempCanvasDataUrl(p,a,l)}refresh(){this.image=this.imageProto,this.clearCanvas(),this.ctx.drawImage(this.image,0,0,this.image.width,this.image.height),setTimeout(()=>{this.getImageData()},10)}doSomethingInLoop(e,n=!0,r,o,s){if(s)return void this.doSomethingInLoopInPolygogPoints(e,n,s,r,o);if(r&&o)return void this.doSomethingInLoopBetweenPoints(e,n,r,o);let p,b,a=-4,l=this.imageData.data.length;for(;(a+=4)<l;)p={x:a/4%this.width,y:Math.floor(a/4/this.width)},b={r:this.imageData.data[a],g:this.imageData.data[a+1],b:this.imageData.data[a+2],a:this.imageData.data[a+3]},e(a,p,b);n&&this.ctx.putImageData(this.imageData,0,0)}doSomethingInLoopBetween(e,n,r){let s,a,o=n-4;for(;(o+=4)<=r;)s={x:o/4%this.width,y:Math.floor(o/4/this.width)},a={r:this.imageData.data[o],g:this.imageData.data[o+1],b:this.imageData.data[o+2],a:this.imageData.data[o+3]},e(o,s,a);this.ctx.putImageData(this.imageData,0,0)}doSomethingInLoopBetweenPoints(e,n=!0,r,o){let p,b,s=r?this.helpers.givePixelIndexFromPoint(r,this.width):0,a=this.helpers.givePixelIndexFromPoint(o||{x:this.width,y:this.height},this.width),l=s-4;for(;(l+=4)<=a;)p={x:l/4%this.width,y:Math.floor(l/4/this.width)},b={r:this.imageData.data[l],g:this.imageData.data[l+1],b:this.imageData.data[l+2],a:this.imageData.data[l+3]},p.x>=r.x&&p.x<=o.x&&p.y>=r.y&&p.y<=o.y&&e(l,p,b);n&&this.ctx.putImageData(this.imageData,0,0)}doSomethingInLoopInPolygogPoints(e,n=!0,r,o,s){let b,w,a=o?this.geo.givePixelIndexFromPoint(o,this.width):0,l=this.geo.givePixelIndexFromPoint(s||{x:this.width,y:this.height},this.width),p=a-4;for(;(p+=4)<=l;)b={x:p/4%this.width,y:Math.floor(p/4/this.width)},w={r:this.imageData.data[p],g:this.imageData.data[p+1],b:this.imageData.data[p+2],a:this.imageData.data[p+3]},b.x>=o.x&&b.x<=s.x&&b.y>=o.y&&b.y<=s.y&&this.geo.inPolygon(b,r)&&e(p,b,w);n&&this.ctx.putImageData(this.imageData,0,0)}runWithReinit(e){this.applyEffectWithReInit?(this.image=this.imageProto,this.reInitImage().subscribe(()=>{setTimeout(e(),1e3)})):(e(),setTimeout(()=>{this.assignCanvasToThisImage()},0)),this.pattern.isRunning||this.addToHistory()}assignCanvasToThisImage(e=!1){this.canvas.toBlob(n=>{this.coreService.toBase64(n).subscribe(r=>{const o=new Image;o.onload=()=>{setTimeout(()=>{this.image=o,e&&(this.imageProto=o)},0)},o.src=r,o.crossOrigin="Anonymous"})})}pixelEquals(e,n,r,o){this.imageData.data[e]=n,this.imageData.data[e+1]=r,this.imageData.data[e+2]=o}pixelAddEach(e,n,r,o){this.imageData.data[e]+=n,this.imageData.data[e+1]+=r,this.imageData.data[e+2]+=o}pixelNegative(e,n,r=255){this.imageData.data[e]=r-n.r,this.imageData.data[e+1]=r-n.g,this.imageData.data[e+2]=r-n.b}pixelWithAplhaEquals(e,n,r,o,s){this.imageData.data[e]=n,this.imageData.data[e+1]=r,this.imageData.data[e+2]=o,this.imageData.data[e+3]=s}replaceColor(e,n){let r=-4,o=this.imageData.data.length;for(;(r+=4)<o;)this.imageData.data[r]===e.r&&this.imageData.data[r+1]===e.g&&this.imageData.data[r+2]===e.b&&(this.imageData.data[r]=n.r,this.imageData.data[r+1]=n.g,this.imageData.data[r+2]=n.b);this.ctx.putImageData(this.imageData,0,0)}giveConfusion(e,n,r){this.runWithReinit(()=>{let o=this.config.confusion.start,s=this.config.confusion.randomness;this.doSomethingInLoop(a=>{this.config.confusion.colors[0]&&(this.imageData.data[a]=o+Math.floor(Math.round(Math.random()*s))),this.config.confusion.colors[1]&&(this.imageData.data[a+1]=o+Math.floor(Math.round(Math.random()*s))),this.config.confusion.colors[2]&&(this.imageData.data[a+2]=o+Math.floor(Math.round(Math.random()*s)))},!0,e,n,r)})}giveMultiColor(e,n,r){this.runWithReinit(()=>{let s=JSON.parse(JSON.stringify(this.config.colorStops)).map(a=>{let l=this.helpers.rgbStrToObj(a.color);return Object.assign(l,{stop:a.stop})});s[s.length-1].stop=800,this.doSomethingInLoop(a=>{let l=this.imageData.data[a]+this.imageData.data[a+1]+this.imageData.data[a+1],p=s.filter(b=>b.stop>l)[0];this.imageData.data[a]=p.r,this.imageData.data[a+1]=p.g,this.imageData.data[a+2]=p.b},!0,e,n,r)})}givePixelate(e,n,r){this.runWithReinit(()=>{let o=0,s=this.config.pixelate.factor,a=Math.round(s/2);this.doSomethingInLoop((l,p,b)=>{p.x%s*3||p.y%s*3?o=l:this.config.pixelate.outline?(this.ctx.beginPath(),this.ctx.strokeStyle=`rgba(${b.r},${b.g},${b.b},${b.a})`,this.ctx.strokeRect(p.x-a,p.y-a,s,s),this.ctx.stroke()):(this.ctx.beginPath(),this.ctx.fillStyle=`rgba(${b.r},${b.g},${b.b},${b.a})`,this.ctx.fillRect(p.x-a,p.y-a,s,s),this.ctx.stroke())},!1,e,n,r),this.getImageData()})}givePixelate2(e,n,r){this.runWithReinit(()=>{let o=this.config.pixelate.circleFactor,s=0;this.doSomethingInLoop((a,l,p)=>{l.x%o||l.y%o?s=a:this.config.pixelate.circleOutline?(this.ctx.beginPath(),this.ctx.strokeStyle=this.helpers.objToRgbString(p),this.ctx.arc(l.x,l.y,o/2+Math.round(o/7),0,2*Math.PI),this.ctx.stroke()):(this.ctx.beginPath(),this.ctx.fillStyle=this.helpers.objToRgbString(p),this.ctx.arc(l.x,l.y,o/2+Math.round(o/7),0,2*Math.PI),this.ctx.fill())},!1,e,n,r),this.getImageData()})}giveBNW(e,n,r){this.runWithReinit(()=>{this.doSomethingInLoop((o,s,a)=>{this.pixelEquals(o,a[this.config.bnw.rgb[0]],a[this.config.bnw.rgb[0]],a[this.config.bnw.rgb[0]])},!0,e,n,r)})}giveNegative(e,n,r){this.runWithReinit(()=>{this.doSomethingInLoop((o,s,a)=>{this.pallete.pixelNegative(this.imageData,o,a,this.config.negative.brightness)},!0,e,n,r)})}giveExposure(e,n,r){this.runWithReinit(()=>{let o=this.config.exposure.distance;this.doSomethingInLoop((s,a,l)=>{this.pixelEquals(s,Math.round(l.r*o),Math.round(l.g*o),Math.round(l.b*o))},!0,e,n,r)})}givePolychromeNegative(e,n,r){this.runWithReinit(()=>{let o=this.config.polychromeNegative.range,s=this.config.polychromeNegative.middlePoint;this.doSomethingInLoop((a,l,p)=>{this.imageData.data[a]>s?this.imageData.data[a]-=o:this.imageData.data[a]+=o,this.imageData.data[a+1]>s?this.imageData.data[a+1]-=o:this.imageData.data[a+1]+=o,this.imageData.data[a+2]>s?this.imageData.data[a+2]-=o:this.imageData.data[a+2]+=o},!0,e,n,r)})}giveWhiteNoise(e,n,r){this.runWithReinit(()=>{let o;this.doSomethingInLoop((s,a,l)=>{o=-this.config.whiteNoise.factor+Math.ceil(Math.random()*(2*this.config.whiteNoise.factor)),this.pixelAddEach(s,o,o,o)},!0,e,n,r)})}giveParadise(e,n,r){this.runWithReinit(()=>{let s,a,o=this.config.paradise.factor;this.doSomethingInLoop((l,p,b)=>{a=Math.hypot(this.center.x-p.x,this.center.y-p.y),s=o*a,this.pixelAddEach(l,s,s,s)},!0,e,n,r)})}giveIntensity(e,n,r){this.runWithReinit(()=>{let s,a,l,o=this.config.intensity.factor;this.doSomethingInLoop((p,b,w)=>{s=this.imageData.data[p]-this.info.averageRgb.r,a=this.imageData.data[p+1]-this.info.averageRgb.g,l=this.imageData.data[p+2]-this.info.averageRgb.b,this.pixelAddEach(p,s*o,a*o,l*o)},!0,e,n,r)})}giveBloom(e,n,r){this.runWithReinit(()=>{let o=JSON.parse(JSON.stringify(this.imageData.data));this.doSomethingInLoop((s,a,l)=>{let p=Math.atan2(this.center.y-a.y,this.center.x-a.x),b=Math.round(a.x+Math.cos(p)*this.config.bloom.factor),A=4*((Math.round(a.y+Math.sin(p)*this.config.bloom.factor)-1)*this.width+b);this.pixelEquals(s,o[A],o[A+1],o[A+2])},!0,e,n,r)})}giveOutlines(e,n,r){this.runWithReinit(()=>{let a,o=JSON.parse(JSON.stringify(this.imageData.data)),s=50-this.config.outlines.factor;this.config.outlines.hasBg&&(a=this.helpers.rgbStrToObj(this.config.outlines.bgColor));let l=4*this.width;this.doSomethingInLoop((p,b,w)=>{a&&(this.imageData.data[p]=a.r,this.imageData.data[p+1]=a.g,this.imageData.data[p+2]=a.b),Math.abs(w.r-o[p+4])>s&&Math.abs(w.g-o[p+5])>s&&Math.abs(w.b-o[p+6])>s&&(this.imageData.data[p]=0,this.imageData.data[p+1]=0,this.imageData.data[p+2]=0),Math.abs(w.r-o[p+l])>s&&Math.abs(w.g-o[p+1+l])>s&&Math.abs(w.b-o[p+2+l])>s&&(this.imageData.data[p]=0,this.imageData.data[p+1]=0,this.imageData.data[p+2]=0)},!0,e,n,r)})}giveWater(e,n,r){this.runWithReinit(()=>{let o=JSON.parse(JSON.stringify(this.imageData.data)),s=0,a=!1,l=84+this.config.water.factor;this.doSomethingInLoop((p,b,w)=>{s>l?a=!1:s<-l&&(a=!0),a?s+=1:s-=1;let A=0===Math.round(Math.atan(s))?4*this.width:4*this.width*Math.round(Math.atan(s));this.imageData.data[p]=o[A+p],this.imageData.data[p+1]=o[A+p+1],this.imageData.data[p+2]=o[A+p+2],this.imageData.data[p+3]=o[A+p+3]},!0,e,n,r)})}giveFluffy(e,n,r){this.runWithReinit(()=>{this.doSomethingInLoop((o,s,a)=>{let l=-this.config.fluffy.factor+Math.ceil(2*Math.random()*this.config.fluffy.factor),p=-this.config.fluffy.factor+Math.ceil(2*Math.random()*this.config.fluffy.factor);this.ctx.beginPath(),this.ctx.strokeStyle=`rgba(${a.r},${a.g},${a.b},${a.a})`,this.ctx.moveTo(s.x,s.y),this.ctx.quadraticCurveTo(s.x-l/2,s.y-p/2,s.x+p,s.y+l),this.ctx.stroke()},!1,e,n,r),this.getImageData()})}giveSuck(e,n,r){this.runWithReinit(()=>{let s,a,l,p,b,w,A,o=JSON.parse(JSON.stringify(this.imageData.data));this.doSomethingInLoop((P,V,q)=>{s=Math.round(Math.hypot(this.center.x-V.x,this.center.y-V.y)),a=Math.atan2(this.center.y-V.y,this.center.x-V.x),l=Math.cos(a)*this.config.suck.factor,p=Math.sin(a)*this.config.suck.factor,b=Math.round(V.x-l),w=Math.round(V.y-p),A=this.geo.givePixelIndexFromPoint({x:b,y:w},this.width),this.pixelEquals(P,o[A],o[A+1],o[A+2]),(V.x<this.config.suck.factor||this.width-V.x<this.config.suck.factor)&&(this.imageData.data[P+3]=0)},!0,e,n,r)})}giveSpotlight(e,n,r){this.runWithReinit(()=>{let o=[[this.config.spotlight.controlX-this.config.spotlight.rangeX,0],[this.config.spotlight.controlX+this.config.spotlight.rangeX,0],[this.config.spotlight.controlY+this.config.spotlight.rangeY,this.height],[this.config.spotlight.controlY-this.config.spotlight.rangeY,this.height]];this.doSomethingInLoop((s,a,l)=>{this.helpers.inPolygon(a,o)?this.pixelAddEach(s,30,30,30):this.pixelAddEach(s,-60,-60,-60)},!0,e,n,r)})}giveCartoonColors(e,n,r){this.runWithReinit(()=>{let a,l,p,b,o=this.config.cartoonColors.map(w=>this.helpers.rgbStrToObj(w)),s=this.config.cartoonColors.length;this.doSomethingInLoop((w,A,P)=>{for(a=-1,l=765,b=0;b<s&&(p=this.helpers.colorsDiff(P,o[b]),!(p<l&&(a=b,l=p,0===p)));b+=1);this.pixelEquals(w,o[a].r,o[a].g,o[a].b)},!0,e,n,r)})}giveColendar(e,n,r){this.runWithReinit(()=>{this.clearCanvas();let o=this.config.colendar.factor;this.doSomethingInLoop((s,a,l)=>{if(!(a.x%o)&&!(a.y%o)||a.x+o>this.width||a.y+o>this.height){let p=Math.hypot(this.center.x-a.x,this.center.y-a.y),b=(1-Math.abs(p/this.maxHypo))*(o/2);this.ctx.clearRect(a.x-o/2,a.y-o/2,o,o),this.ctx.beginPath(),this.ctx.fillStyle=this.helpers.objToRgbString(l),this.ctx.arc(a.x,a.y,b,0,2*Math.PI),this.ctx.fill()}},!1,e,n,r),this.getImageData()})}giveLetters(e,n,r){this.runWithReinit(()=>{let o=this.config.letters.size,a=o*this.config.letters.density,l=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];this.config.letters.phrase&&(l=this.config.letters.phrase.split("")),this.doSomethingInLoop((p,b,w)=>{if(!(b.x%o||b.y%o)){let A=Math.floor(Math.random()*l.length);this.ctx.clearRect(b.x,b.y,o,o),this.ctx.font=`900 ${a}px Georgia`,this.ctx.beginPath(),this.ctx.fillStyle=this.helpers.objToRgbString(w),this.ctx.fillText(l[A],b.x,b.y+o)}},!1,e,n,r),this.getImageData()})}giveComic(e,n,r){this.runWithReinit(()=>{let o=this.config.comic.reverse,s=this.config.comic.sumFactor;this.doSomethingInLoop((a,l,p)=>{p.r+p.g+p.b<s?this.pixelEquals(a,p.r-o,p.g-o,p.b-o):this.pixelEquals(a,p.r+o,p.g+o,p.b+o)},!0,e,n,r)})}giveBackground(e,n,r){let o=this.helpers.rgbStrToObj(this.config.background.color);this.runWithReinit(()=>{this.doSomethingInLoop((s,a,l)=>{0===l.a&&this.pixelWithAplhaEquals(s,o.r,o.g,o.b,255)},!0,e,n,r)})}giveShadesOf(e,n,r){let l,p,b,w,s=this.pallete.giveRgbShades(this.config.shadesOf.color).map(A=>this.helpers.rgbStrToObj(A)),a=s.length;this.runWithReinit(()=>{this.doSomethingInLoop((A,P,V)=>{for(l=-1,p=765,w=0;w<a&&(b=this.helpers.colorsDiff(V,s[w]),!(b<p&&(l=w,p=b,0===b)));w+=1);this.pixelEquals(A,s[l].r,s[l].g,s[l].b)},!0,e,n,r)})}giveBlocks(){this.runWithReinit(()=>{let e=301-this.config.blocks.factor,n=e*(this.width/this.height),r=e*(this.height/this.width);for(let o=0;o<this.height;o+=r)for(let s=0;s<this.width;s+=n)this.ctx.drawImage(this.image,0,0,this.width,this.height,s,o,n,r);this.getImageData()})}giveFrames(){this.runWithReinit(()=>{let e=81-this.config.frames.factor,n=this.config.frames.stop;for(let r=0,o=0;r<this.center.x;r+=e,o+=e){let a=this.center.y-o;this.center.x-r>n&&a>n&&this.ctx.drawImage(this.image,0,0,this.width,this.height,r,o,this.width-2*r,this.height-2*o)}this.getImageData()})}giveRotatingFrames(){this.runWithReinit(()=>{let e=this.config.rotatingFrames.scaleFactor,n=this.config.rotatingFrames.degreesStop,r=this.config.rotatingFrames.degreesPlus,o=0,s=0,a=this.width/this.height,l=this.height/this.width,p=this.height/n,b=this.width/n;for(let w=0;w<n;w+=r)this.ctx.save(),this.ctx.translate(this.center.x,this.center.y),this.ctx.rotate(w*(Math.PI/180)),this.ctx.translate(-this.center.x,-this.center.y),this.ctx.drawImage(this.image,0,0,this.width,this.height,o/2,s/2,this.width-o,this.height-s),this.ctx.restore(),o+=p*a*e,s+=b*l*e;this.getImageData()})}giveVinyl(){this.runWithReinit(()=>{this.ctx.save(),this.ctx.globalAlpha=this.config.vinyl.factor;for(let o=180;o<360;o+=1)this.ctx.save(),this.ctx.translate(this.center.x,this.center.y),this.ctx.rotate(o*(Math.PI/180)),this.ctx.drawImage(this.image,0,0,this.width,this.height,-this.center.x,-this.center.y,this.width,this.height),this.ctx.restore();this.ctx.restore(),this.getImageData()})}giveHolyLight(){this.runWithReinit(()=>{let n=0,r=this.config.holyLight.factor;this.ctx.save(),this.ctx.globalCompositeOperation="lighter",this.ctx.globalAlpha=.01;for(let o=0;o<60;o+=1)this.ctx.drawImage(this.image,0,0,this.width,this.height,0-n,0-n,this.width+2*n,this.height+2*n),n+=r;this.ctx.restore(),this.getImageData()})}giveBlinds(){this.runWithReinit(()=>{let e=0;for(;e<this.height;){this.ctx.clearRect(0,e+1,this.width,this.height);let n=e%this.config.blinds.freq*this.config.blinds.depth;this.ctx.drawImage(this.image,0,e,this.width,this.height,Math.round(n/2),e,this.width-n,this.height),e+=1}this.getImageData()})}giveTremolo(){this.runWithReinit(()=>{let e=0;for(;e<this.height;){let n=Math.round(Math.cos(e*this.config.tremolo.period)*this.config.tremolo.pitch);this.ctx.drawImage(this.image,0,e,this.width,this.height,Math.round(n/2),e,this.width,this.height),e+=1}this.getImageData()})}giveEllipse(){this.runWithReinit(()=>{this.ctx.clearRect(0,0,this.width,this.height);for(var e=1.5*Math.PI;e<2.5*Math.PI;e+=.01){let n=this.center.x-this.config.ellipse.rx*Math.cos(e),r=this.center.y+this.config.ellipse.ry*Math.sin(e);this.ctx.clearRect(0,r,this.width,this.height),this.ctx.drawImage(this.image,0,r,this.width,this.height,n,r,2*(this.center.x-n),this.height)}this.getImageData()})}giveBrokenWall(){this.runWithReinit(()=>{let e=100-this.config.brokenWall.size,n=this.config.brokenWall.dist,r=Math.round(this.width/e),o=Math.round(this.height/e),s=Math.round(this.width%e/2),a=Math.round(this.height%e/2);this.clearCanvas();for(let l=s;l<this.width;l+=r)for(let p=a;p<this.height;p+=o){let b=Math.round(Math.hypot(this.center.x-l,this.center.y-p)),w=Math.atan2(this.center.y-p,this.center.x-l),A=Math.cos(w)*Math.sqrt(b/(this.maxHypo+n))*n,P=Math.sin(w)*Math.sqrt(b/(this.maxHypo+n))*n;this.ctx.drawImage(this.image,l,p,r,o,l-A,p-P,r,o)}this.getImageData()})}giveKlimt(){this.runWithReinit(()=>{let e=51-this.config.klimt.size,n=this.config.klimt.randomness,r=Math.round(this.width/e),o=Math.round(this.height/e);this.clearCanvas(),this.ctx.drawImage(this.image,0,0,this.width,this.height);for(let s=0;s<this.width;s+=r)for(let a=0;a<this.height;a+=o){let l=Math.ceil(Math.random()*n);this.ctx.save(),this.ctx.translate(s,a),this.ctx.rotate(l*(Math.PI/180)),this.ctx.translate(-s,-a),this.ctx.drawImage(this.image,s,a,r,o,s,a,r,o),this.ctx.restore()}this.getImageData()})}givePourPaint(){this.runWithReinit(()=>{let n,r,o,e=0,s=Math.round(this.width*this.height/1e4);this.ctx.save(),this.ctx.fillStyle=this.config.pourPaint.color;let a=this.config.pourPaint.density*s;for(;e<a;)n=Math.ceil(Math.random()*this.config.pourPaint.range),r=Math.floor(Math.random()*this.width),o=Math.floor(Math.random()*this.height),this.ctx.beginPath(),this.ctx.arc(r,o,n,0,2*Math.PI),this.ctx.fill(),e+=1;this.ctx.restore(),this.getImageData()})}giveWhirlpool(){this.runWithReinit(()=>{this.clearCanvas();let e=this.config.whirlpool.degreesStop,n=this.config.whirlpool.degreesPlus,r=0,o=0,l=this.center.x/e*(this.width/this.height),p=this.center.y/e*(this.height/this.width);this.ctx.save(),this.ctx.globalCompositeOperation="destination-over";for(let b=0;b<e;b+=n)this.ctx.save(),this.ctx.translate(this.center.x,this.center.y),this.ctx.rotate(b*(Math.PI/180)),this.ctx.translate(-this.center.x,-this.center.y),this.ctx.drawImage(this.image,this.center.x-r,this.center.y-o,2*r,2*o,this.center.x-r,this.center.y-o,2*r,2*o),this.ctx.restore(),r+=l,o+=p,console.log(this.center.x-r,this.center.y-o,2*r,2*o);this.ctx.restore(),this.getImageData()})}giveDream(){this.runWithReinit(()=>{this.clearCanvas();let e=[];for(let n=0;n<this.config.dream.factor;n+=1)e.push({x:n,y:n});e=this.coreService.shuffle(e),this.ctx.save(),this.ctx.globalAlpha=.1,e.forEach(n=>{this.ctx.drawImage(this.image,0,0,this.width,this.height,n.x,n.y,this.width-2*n.x,this.height-2*n.y)}),this.ctx.restore(),this.getImageData()})}giveAcrylicScratch(){this.runWithReinit(()=>{this.clearCanvas();let e=[];for(let n=-this.config.acrylicScratch.range;n<this.config.acrylicScratch.range;n+=1)e.push([n,n]);e=this.coreService.shuffle(e),this.ctx.save(),this.ctx.globalCompositeOperation="difference",e.forEach(n=>{this.ctx.drawImage(this.image,0,0,this.width,this.height,n[0],n[1],this.width-2*n[0],this.height-2*n[1])}),this.ctx.restore(),this.getImageData()})}scissors(e,n,r){this.runWithReinit(()=>{let p=[];for(let b=-this.config.acrylicScratch.range;b<this.config.acrylicScratch.range;b+=1)p.push([b,b]);p=this.coreService.shuffle(p),this.ctx.save(),this.ctx.globalCompositeOperation="difference",p.forEach(b=>{console.log(b),this.ctx.drawImage(this.image,0,0,this.width,this.height,b[0],b[1],this.width-2*b[0],this.height-2*b[1])}),this.ctx.restore(),this.getImageData()})}giveRandomStops(){let e=Math.ceil(5*Math.random()),n=50,r=[];for(let o=0;o<e;o+=1){let a={color:this.helpers.giveRandomColorStr(),stop:n};r.push(a),n+=Math.floor(Math.random()*(765/e))}return r}giveRandomConfig(){this.config.colorStops=this.giveRandomStops();let n=this.helpers.randNum(2,16);this.config.cartoonColors=this.helpers.giveRandomColors(n),this.config.confusion={colors:[[1,0,0],[0,1,0],[0,0,1],[1,1,0],[1,0,1],[0,1,1]][Math.floor(5*Math.random())],start:Math.floor(50*Math.random()),randomness:Math.floor(200*Math.random())},this.config.pixelate={factor:2+Math.floor(13*Math.random()),outline:!(Math.random()>.5),circleFactor:2+Math.floor(13*Math.random()),circleOutline:!(Math.random()>.5)},this.config.bnw={rgb:["b","b","b"]},this.config.negative={brightness:Math.floor(255*Math.random())},this.config.polychromeNegative={middlePoint:40+Math.floor(185*Math.random()),range:40+Math.floor(185*Math.random())},this.config.exposure={distance:.1+1.9*Math.random()},this.config.whiteNoise={factor:10+Math.floor(240*Math.random())},this.config.paradise={factor:Math.random()},this.config.intensity={factor:Math.random()},this.config.bloom={factor:Math.ceil(200*Math.random())},this.config.outlines={factor:Math.ceil(49*Math.random()),bgColor:"rgba(255,255,255,1)",hasBg:!(Math.random()>.5)},this.config.water={factor:Math.ceil(5*Math.random())},this.config.blocks={factor:20+Math.floor(260*Math.random())},this.config.frames={factor:Math.ceil(79*Math.random()),stop:Math.floor(Math.random()*(.7*this.width))},this.config.rotatingFrames={scaleFactor:Math.random(),degreesStop:Math.floor(360*Math.random()),degreesPlus:Math.ceil(14*Math.random())},this.config.vinyl={factor:.1+Math.floor(.2*Math.random())},this.config.holyLight={factor:1+Math.floor(9*Math.random())},this.config.fluffy={factor:5+Math.floor(45*Math.random())},this.config.suck={factor:10+Math.floor(90*Math.random())},this.config.spotlight={controlX:Math.floor(Math.random()*this.width),controlY:Math.floor(Math.random()*this.width),rangeX:Math.floor(Math.random()*(this.width/2)),rangeY:Math.floor(Math.random()*this.width)},this.config.blinds={depth:.1+1.4*Math.random(),freq:Math.floor(Math.random()*(this.width/3))},this.config.tremolo={period:.2*Math.random(),pitch:Math.floor(100*Math.random())},this.config.ellipse={rx:Math.floor(this.width/4)+Math.floor(Math.random()*(this.width/3)),ry:Math.floor(this.height/4)+Math.floor(Math.random()*(this.height/3))},this.config.brokenWall={size:Math.floor(100*Math.random()),dist:Math.floor(200*Math.random())},this.config.klimt={size:this.helpers.randNum(0,40),randomness:this.helpers.randNum(0,200)},this.config.pourPaint={color:this.helpers.giveRandomColorStr(),range:this.helpers.randNum(1,20),density:this.helpers.randNum(1,60)},this.config.colendar={factor:this.helpers.randNum(3,20)},this.config.letters={size:this.helpers.randNum(6,20),density:1,phrase:""}}assignCanvasToImage(e=!1){this.canvas.toBlob(n=>{this.coreService.toBase64(n).subscribe(r=>{const o=new Image;o.onload=()=>{this.width=o.width,this.height=o.height,setTimeout(()=>{this.image=o,e&&(this.imageProto=o)},0)},o.src=r,o.crossOrigin="Anonymous"})})}addToHistory(){let e=this.tempCanvasDataUrl(this.imageData,this.width,this.height);this.history.unshift(e),this.history.length>20&&this.history.pop(),this.historyCurrent=this.history.length}goToHistory(e){let n=this.history[e];const r=new Image;r.onload=()=>{this.clearCanvas(),this.ctx.drawImage(r,0,0,r.width,r.height),this.getImageData()},r.src=n,r.crossOrigin="Anonymous"}}return i.\u0275fac=function(e){return new(e||i)(ee(Oh),ee(fM),ee(pM),ee(no),ee(ct))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Pt=$i(621);let al=(()=>{class i{constructor(e,n){this.helpers=e,this.apiService=n}giveFabricCanvas(e,n){return new Me(r=>{let o=new Pt.fabric.Canvas(e,{backgroundColor:n.backgroundColor?n.backgroundColor:"rgba(0,0,0,0)",selection:!1,isDrawingMode:!1,preserveObjectStacking:!0,freeDrawingCursor:"pointer",width:n.width,height:n.height});r.next(o)})}removeSelection(e){let n=e.getActiveObject();e.remove(n)}doSelecteble(e){e.selectable=!0,e.isDrawingMode=!1}getPolyInfoFromObj(e){let r=[],o=[],s=[];(e.path?e.path:[]).forEach(p=>{r.push(Math.round(p[1])),o.push(Math.round(p[2]))}),r.forEach((p,b)=>{s.push([r[b],o[b]])});let a={x:Math.min(...r),y:Math.min(...o)},l={x:Math.max(...r),y:Math.max(...o)};return{poly:s,minPoint:a,maxPoint:l}}addBrush(e,n){e.isDrawingMode=!0,e.selection=!1;let r=new Pt.fabric.PencilBrush(e);r.color=n.color,r.width=n.width,r.strokeLineCap=n.strokeLineCap,e.freeDrawingBrush=r}addSpray(e){e.isDrawingMode=!0,e.selection=!1,(new Pt.fabric.Rect).set({width:100,height:100}),e.renderAll()}addTextBox(e,n){e.isDrawingMode=!1,e.selection=!0;let r=new Pt.fabric.Textbox("Add Text",{name:"my-textbox",stroke:n.stroke,fill:n.stroke,top:30,left:30,fontSize:n.fontSize,width:200,textAlign:"center",fontStyle:"normal",borderColor:n.borderColor,paintFirst:"fill",selectionBackgroundColor:n.selectionBackgroundColor,backgroundColor:n.backgroundColor,hasControls:!0,fontFamily:n.fontFamily});e.add(r)}getPolygon(e,n){let r={selectable:!0,objectCaching:!1,originX:"center",originY:"center",fill:"red",hasControls:!0};return Object.assign(r,n),new Pt.fabric.Polygon(e,r)}getCircle(e){let n={objectCaching:!1,radius:10,originX:"center",originY:"center",hasBorders:!1,hasControls:!1,hoverCursor:"pointer"};return Object.assign(n,e),new Pt.fabric.Circle(n)}addRect(e,n){let r={width:100,height:100,fill:"red",originX:"center",originY:"center",hasBorders:!1,hasControls:!0,name:"rect"};Object.assign(r,n);let o=new Pt.fabric.Rect(r);this.doSelecteble(e),e.add(o),e.renderAll()}addPolygon(e,n,r=50,o){let s=this.helpers.givePolygonPoints(r,n),a={selectable:!0,originX:"center",originY:"center",fill:"red"};Object.assign(a,o);let l=new Pt.fabric.Polygon(s,a);this.doSelecteble(e),e.add(l),e.renderAll()}addEditablePolygon(e,n,r=50,o,s){let a=(new Date).getTime(),l=this.helpers.givePolygonPoints(r,n);Object.assign(o,{name:`control-poly+${a}`,hasControls:!1});let p=this.getPolygon(l,o),b={};for(let w=0;w<n;w+=1){let A=this.getCircle({left:p.left+l[w].x,top:p.top+l[w].y,name:`${w}-${a}-cirlce-handler`});b[`${w}-${a}`]=A}e.on("object:moving",w=>{let A=w.target;if(A.name.includes("control-poly"))for(let P=0;P<n;P+=1)b[`${P}-${a}`].set({left:p.left+l[P].x,top:p.top+l[P].y});if(A.name.includes(`${a}-cirlce-handler`)){let P=A.name.split("-")[0],V=p.getCenterPoint();p.points[P]={x:A.left-V.x,y:A.top-V.y}}}),e.on("mouse:up",w=>{if(w.target){for(let A=0;A<n;A+=1){e.remove(b[`${A}-${a}`]);let P=this.getCircle({left:p.left+l[A].x,top:p.top+l[A].y,name:`${A}-${a}-cirlce-handler`});e.add(P),b[`${A}-${a}`]=P}e.renderAll()}}),e.add(p);for(let w in b)e.add(b[w]);e.renderAll()}addEditableShape(e,n,r,o){let s=(new Date).getTime(),a=n.length;Object.assign(r,{name:`control-poly+${s}`,hasControls:!1,originX:"left",originY:"top"});let l=this.getPolygon(n,r),p={};for(let b=0;b<a;b+=1){let w=this.getCircle({left:l.left+n[b].x,top:l.top+n[b].y,name:`${b}-${s}-cirlce-handler`});p[`${b}-${s}`]=w}e.on("object:moving",b=>{let w=b.target;if(w.name.includes("control-poly"))for(let A=0;A<a;A+=1)p[`${A}-${s}`].set({left:l.left+n[A].x,top:l.top+n[A].y});if(w.name.includes(`${s}-cirlce-handler`)){let A=w.name.split("-")[0],P=l.getCenterPoint();l.points[A]={x:w.left-P.x+l.pathOffset.x,y:w.top-P.y+l.pathOffset.y}}}),e.on("mouse:up",b=>{if(b.target){console.log("mouse:up",b.target);for(let w=0;w<a;w+=1){e.remove(p[`${w}-${s}`]);let A=this.getCircle({left:l.left+n[w].x,top:l.top+n[w].y,name:`${w}-${s}-cirlce-handler`});e.add(A),p[`${w}-${s}`]=A}e.renderAll()}}),e.add(l);for(let b in p)e.add(p[b]);e.renderAll()}addCircle(e,n){this.doSelecteble(e);let r={radius:50,fill:"red",originX:"center",originY:"center",hasBorders:!1,hasControls:!0,name:"circle"};Object.assign(r,n);let o=new Pt.fabric.Circle(r);e.add(o)}addControl(e){let n=new Pt.fabric.Rect({width:30,height:30,top:10,left:90}),r=new Pt.fabric.Control({x:.5,y:-.5,offsetY:16,cursorStyle:"pointer",render(o,s,a,l,p){o.fillRect(s,a,100,100),o.fill()}});n.controls.ko=r,e.add(n),e.renderAll()}showImage(e,n={}){return new Me(r=>{Pt.fabric.Image.fromURL(e,o=>{if(!o.width)return void console.log("No usage rights to share this image!");let s={cropX:0,cropY:0,width:o.width,height:o.height};Object.assign(s,n),o.set(s),r.next(o)},{crossOrigin:"anonymous"})})}giveImgObj(e,n,r,o=1){Pt.fabric.Image.fromURL(e,s=>{s.left=r.x,s.top=r.y,s.set({cropX:0,cropY:0,width:s.width,height:s.height,scaleX:o,scaleY:o}),n.add(s),s.bringToFront(),n.setActiveObject(s),n.renderAll()})}showImagesFromService(e){return new Me(n=>{let r=[];e.forEach((o,s)=>{const a=new Image;a.onload=()=>{let l=new Pt.fabric.Image(a,{});l.id=`image-${s}`,r[s]=l,s===e.length-1&&setTimeout(()=>{n.next(r)},500)},a.crossOrigin="anonymous",a.src=o})})}speechBubble(e,n){let p=n.backgroundColor,w=new Pt.fabric.Textbox("Text",{name:"my-textbox",left:200,top:80,width:180,fontSize:n.fontSize,originY:"center",originX:"center",stroke:n.stroke}),A=w.setCoords.bind(w);w.on({moving:A,scaling:A,rotating:A}),w.lastLeft=w.left,w.lastTop=w.top,w.id="speech-textbox-"+(new Date).getTime();let P=new Pt.fabric.Rect({fill:"transparent",left:128,top:160,width:24,height:24,hasRotatingPoint:!1,hasControls:!1,originY:"center",originX:"center"}),V=new Pt.fabric.Rect({fill:p,stroke:"black",strokeWidth:2,rx:8,ry:8,objectCaching:!1}),q=new Pt.fabric.Polygon([{x:0,y:0},{x:1,y:1},{x:1,y:0}],{fill:p,stroke:"black",strokeWidth:2,objectCaching:!1}),Z=new Pt.fabric.Polygon([{x:0,y:0},{x:1,y:1},{x:1,y:0}],{fill:p,objectCaching:!1});function re(J,ve,be){var Qe=w.left,_t=w.top,Lt=w.getBoundingRect();V.left=Lt.left-36,V.top=Lt.top-36,V.width=Lt.width+72,V.height=Lt.height+72,(Qe!==w.lastLeft||_t!==w.lastTop)&&(J.left+=Qe-w.lastLeft,J.top+=_t-w.lastTop,J.setCoords());var gn=Math.PI/2,Xt=Math.atan2(J.top-_t,J.left-Qe),cn=Math.cos(Xt+gn),Pn=Math.sin(Xt+gn);ve.points[0].x=J.left,ve.points[0].y=J.top,ve.points[1].x=Qe-16*cn,ve.points[1].y=_t-16*Pn,ve.points[2].x=Qe+16*cn,ve.points[2].y=_t+16*Pn,be.points[0].x=J.left,be.points[0].y=J.top,be.points[1].x=Qe-15*cn,be.points[1].y=_t-15*Pn,be.points[2].x=Qe+15*cn,be.points[2].y=_t+15*Pn,w.lastLeft=Qe,w.lastTop=_t}e.add(q,V,Z,w),e.add(P),e.setActiveObject(P),e.on("after:render",J=>{re(P,q,Z)}),e.on("object:removed",J=>{console.log(J.target.id),J.target.id&&-1!==J.target.id.indexOf("speech-textbox-")&&e.remove(q,V,Z,w)}),re(P,q,Z)}loadSVGFromString(e,n){Pt.fabric.loadSVGFromString(n.path,function(r,o){r.forEach(a=>{n.fill&&(a.fill=n.fill),n.stroke&&(a.stroke=n.stroke),n.strokeWidth&&(a.strokeWidth=n.strokeWidth)});let s=Pt.fabric.util.groupSVGElements(r,{name:"svg-group",originX:"center",originY:"center"});s.scaleX=n.scale,s.scaleY=n.scale,s.left=n.left,s.top=n.top,n.opacity&&(s.opacity=n.opacity),e.add(s).renderAll()})}blendColor(e,n){let r=new Pt.fabric.Image.filters.BlendColor({color:n,mode:"multiply"});e.filters.push(r),e.applyFilters()}blendImage(e){let n=new Pt.fabric.Image.filters.BlendImage({});e.filters.push(n),e.applyFilters()}brightness(e,n){let r=new Pt.fabric.Image.filters.Brightness({brightness:n});e.filters.push(r),e.applyFilters()}colorMatrix(e){let n=new Pt.fabric.Image.filters.ColorMatrix({matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]});e.filters.push(n),e.applyFilters()}contrast(e,n){let r=new Pt.fabric.Image.filters.Contrast({contrast:n});e.filters.push(r),e.applyFilters()}convolute(e){let n=new Pt.fabric.Image.filters.Convolute({matrix:[1,1,1,1,.7,-1,-1,-1,-1]});e.filters.push(n),e.applyFilters()}gradientTransparency(e,n){let r=new Pt.fabric.Image.filters.GradientTransparency({threshold:n});e.filters.push(r),e.applyFilters()}grayscale(e){let n=new Pt.fabric.Image.filters.Grayscale({});e.filters.push(n),e.applyFilters()}invert(e){let n=new Pt.fabric.Image.filters.Invert({});e.filters.push(n),e.applyFilters()}mask(e,n){let r=new Pt.fabric.Image.filters.Mask({channel:n});e.filters.push(r),e.applyFilters()}multiply(e,n){let r=new Pt.fabric.Image.filters.Multiply({color:n});e.filters.push(r),e.applyFilters()}noise(e,n){let r=new Pt.fabric.Image.filters.Noise({noise:n});e.filters.push(r),e.applyFilters()}pixelate(e,n=6){let r=new Pt.fabric.Image.filters.Pixelate({blocksize:n});e.filters.push(r),e.applyFilters()}removeWhite(e,n,r){let o=new Pt.fabric.Image.filters.RemoveWhite({threshold:n,distance:r});e.filters.push(o),e.applyFilters()}resize(e){let n=new Pt.fabric.Image.filters.Resize({scaleX:2,scaleY:2});e.filters.push(n),e.applyFilters()}saturation(e,n){let r=new Pt.fabric.Image.filters.Saturation({saturation:n});e.filters.push(r),e.applyFilters()}sepia2(e){let n=new Pt.fabric.Image.filters.Sepia2({});e.filters.push(n),e.applyFilters()}sepia(e){let n=new Pt.fabric.Image.filters.Sepia({});e.filters.push(n),e.applyFilters()}tint(e,n,r){let o=new Pt.fabric.Image.filters.Tint({color:n,opacity:r});e.filters.push(o),e.applyFilters()}}return i.\u0275fac=function(e){return new(e||i)(ee(Oh),ee(Jo))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Gj=["*"];let Uj=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-header"]],ngContentSelectors:Gj,decls:5,vars:0,consts:[[1,"flex","items-center"],["href","https://siteland.eu/",1,"relative","m-4"],["src","https://siteland.eu/favicon/favicon-32x32.png"],[1,"w-full"]],template:function(e,n){1&e&&(un(),D(0,"div",0)(1,"a",1),Be(2,"img",2),k(),D(3,"div",3),St(4),k()())},styles:[""]}),i})(),gM=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(N(zo),N(Ze))},i.\u0275dir=fe({type:i}),i})(),js=(()=>{class i extends gM{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=It(i)))(n||i)}}(),i.\u0275dir=fe({type:i,features:[Pe]}),i})();const ri=new _e("NgValueAccessor"),qj={provide:ri,useExisting:Gt(()=>ll),multi:!0},$j=new _e("CompositionEventMode");let ll=(()=>{class i extends gM{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Xj(){const i=Kr()?Kr().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(N(zo),N(Ze),N($j,8))},i.\u0275dir=fe({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&F("input",function(o){return n._handleInput(o.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(o){return n._compositionEnd(o.target.value)})},features:[$e([qj]),Pe]}),i})();function es(i){return null==i||0===i.length}function vM(i){return null!=i&&"number"==typeof i.length}const ei=new _e("NgValidators"),ts=new _e("NgAsyncValidators"),Kj=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Fh{static min(t){return function bM(i){return t=>{if(es(t.value)||es(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}(t)}static max(t){return function yM(i){return t=>{if(es(t.value)||es(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}(t)}static required(t){return function CM(i){return es(i.value)?{required:!0}:null}(t)}static requiredTrue(t){return function xM(i){return!0===i.value?null:{required:!0}}(t)}static email(t){return function wM(i){return es(i.value)||Kj.test(i.value)?null:{email:!0}}(t)}static minLength(t){return function DM(i){return t=>es(t.value)||!vM(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function SM(i){return t=>vM(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}(t)}static pattern(t){return function MM(i){if(!i)return Lh;let t,e;return"string"==typeof i?(e="","^"!==i.charAt(0)&&(e+="^"),e+=i,"$"!==i.charAt(i.length-1)&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(es(n.value))return null;const r=n.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return PM(t)}static composeAsync(t){return RM(t)}}function Lh(i){return null}function TM(i){return null!=i}function EM(i){const t=uu(i)?ds(i):i;return $C(t),t}function kM(i){let t={};return i.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function AM(i,t){return t.map(e=>e(i))}function IM(i){return i.map(t=>function Qj(i){return!i.validate}(t)?t:e=>t.validate(e))}function PM(i){if(!i)return null;const t=i.filter(TM);return 0==t.length?null:function(e){return kM(AM(e,t))}}function K_(i){return null!=i?PM(IM(i)):null}function RM(i){if(!i)return null;const t=i.filter(TM);return 0==t.length?null:function(e){return aM(AM(e,t).map(EM)).pipe(ae(kM))}}function Q_(i){return null!=i?RM(IM(i)):null}function OM(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function FM(i){return i._rawValidators}function LM(i){return i._rawAsyncValidators}function Z_(i){return i?Array.isArray(i)?i:[i]:[]}function Nh(i,t){return Array.isArray(i)?i.includes(t):i===t}function NM(i,t){const e=Z_(t);return Z_(i).forEach(r=>{Nh(e,r)||e.push(r)}),e}function BM(i,t){return Z_(t).filter(e=>!Nh(i,e))}class VM{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=K_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Q_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Fr extends VM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Di extends VM{get formDirective(){return null}get path(){return null}}class HM{constructor(t){this._cd=t}is(t){var e,n,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[t])}}let cl=(()=>{class i extends HM{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(N(Fr,2))},i.\u0275dir=fe({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&Ot("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))},features:[Pe]}),i})(),jM=(()=>{class i extends HM{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(N(Di,10))},i.\u0275dir=fe({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,n){2&e&&Ot("ng-untouched",n.is("untouched"))("ng-touched",n.is("touched"))("ng-pristine",n.is("pristine"))("ng-dirty",n.is("dirty"))("ng-valid",n.is("valid"))("ng-invalid",n.is("invalid"))("ng-pending",n.is("pending"))("ng-submitted",n.is("submitted"))},features:[Pe]}),i})();function Wc(i,t){tv(i,t),t.valueAccessor.writeValue(i.value),function s8(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&WM(i,t)})}(i,t),function l8(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function a8(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&WM(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function o8(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function Hh(i,t,e=!0){const n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),zh(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function jh(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function tv(i,t){const e=FM(i);null!==t.validator?i.setValidators(OM(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=LM(i);null!==t.asyncValidator?i.setAsyncValidators(OM(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();jh(t._rawValidators,r),jh(t._rawAsyncValidators,r)}function zh(i,t){let e=!1;if(null!==i){if(null!==t.validator){const r=FM(i);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,i.setValidators(o))}}if(null!==t.asyncValidator){const r=LM(i);if(Array.isArray(r)&&r.length>0){const o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,i.setAsyncValidators(o))}}}const n=()=>{};return jh(t._rawValidators,n),jh(t._rawAsyncValidators,n),e}function WM(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function GM(i,t){tv(i,t)}function nv(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function YM(i,t){i._syncPendingControls(),t.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function iv(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(o=>{o.constructor===ll?e=o:function u8(i){return Object.getPrototypeOf(i.constructor)===js}(o)?n=o:r=o}),r||n||e||null}function rv(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}const Gc="VALID",Wh="INVALID",dl="PENDING",Uc="DISABLED";function sv(i){return(Gh(i)?i.validators:i)||null}function qM(i){return Array.isArray(i)?K_(i):i||null}function av(i,t){return(Gh(t)?t.asyncValidators:i)||null}function XM(i){return Array.isArray(i)?Q_(i):i||null}function Gh(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}const $M=i=>i instanceof dv,lv=i=>i instanceof uv;function KM(i){return $M(i)?i.value:i.getRawValue()}function QM(i,t){const e=lv(i),n=i.controls;if(!(e?Object.keys(n):n).length)throw new Ue(1e3,"");if(!n[t])throw new Ue(1001,"")}function ZM(i,t){lv(i),i._forEachChild((n,r)=>{if(void 0===t[r])throw new Ue(1002,"")})}class cv{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=qM(this._rawValidators),this._composedAsyncValidatorFn=XM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Gc}get invalid(){return this.status===Wh}get pending(){return this.status==dl}get disabled(){return this.status===Uc}get enabled(){return this.status!==Uc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=qM(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=XM(t)}addValidators(t){this.setValidators(NM(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(NM(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(BM(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(BM(t,this._rawAsyncValidators))}hasValidator(t){return Nh(this._rawValidators,t)}hasAsyncValidator(t){return Nh(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=dl,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Uc,this.errors=null,this._forEachChild(n=>{n.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Gc,this._forEachChild(n=>{n.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gc||this.status===dl)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Uc:Gc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=dl,this._hasOwnPendingAsyncValidator=!0;const e=EM(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function h8(i,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let n=i;return t.forEach(r=>{n=lv(n)?n.controls.hasOwnProperty(r)?n.controls[r]:null:(i=>i instanceof p8)(n)&&n.at(r)||null}),n}(this,t,".")}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Te,this.statusChanges=new Te}_calculateStatus(){return this._allControlsDisabled()?Uc:this.errors?Wh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dl)?dl:this._anyControlsHaveStatus(Wh)?Wh:Gc}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Gh(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class dv extends cv{constructor(t=null,e,n){super(sv(e),av(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gh(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){rv(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){rv(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class uv extends cv{constructor(t,e,n){super(sv(e),av(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){ZM(this,t),Object.keys(t).forEach(n=>{QM(this,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=KM(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,o)=>{n=e(n,r,o)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class p8 extends cv{constructor(t,e,n){super(sv(e),av(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){ZM(this,t),t.forEach((n,r)=>{QM(this,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>KM(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const m8={provide:Di,useExisting:Gt(()=>zs)},Yc=(()=>Promise.resolve(null))();let zs=(()=>{class i extends Di{constructor(e,n){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new Te,this.form=new uv({},K_(e),Q_(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Yc.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Wc(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Yc.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Yc.then(()=>{const n=this._findContainer(e.path),r=new uv({});GM(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Yc.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){Yc.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,YM(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return i.\u0275fac=function(e){return new(e||i)(N(ei,10),N(ts,10))},i.\u0275dir=fe({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,n){1&e&&F("submit",function(o){return n.onSubmit(o)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[$e([m8]),Pe]}),i})();const _8={provide:Fr,useExisting:Gt(()=>ul)},tT=(()=>Promise.resolve(null))();let ul=(()=>{class i extends Fr{constructor(e,n,r,o,s){super(),this._changeDetectorRef=s,this.control=new dv,this._registered=!1,this.update=new Te,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=iv(0,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),nv(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Wc(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){tT.then(()=>{var n;this.control.setValue(e,{emitViewToModelChange:!1}),null===(n=this._changeDetectorRef)||void 0===n||n.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=""===n||n&&"false"!==n;tT.then(()=>{var o;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(o=this._changeDetectorRef)||void 0===o||o.markForCheck()})}_getPath(e){return this._parent?function Vh(i,t){return[...t.path,i]}(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(N(Di,9),N(ei,10),N(ts,10),N(ri,10),N(Zt,8))},i.\u0275dir=fe({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[$e([_8]),Pe,fn]}),i})(),nT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=fe({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})();const v8={provide:ri,useExisting:Gt(()=>Uh),multi:!0};let Uh=(()=>{class i extends js{writeValue(e){this.setProperty("value",null==e?"":e)}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=It(i)))(n||i)}}(),i.\u0275dir=fe({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,n){1&e&&F("input",function(o){return n.onChange(o.target.value)})("blur",function(){return n.onTouched()})},features:[$e([v8]),Pe]}),i})(),iT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({}),i})();const hv=new _e("NgModelWithFormControlWarning"),x8={provide:Fr,useExisting:Gt(()=>fv)};let fv=(()=>{class i extends Fr{constructor(e,n,r,o){super(),this._ngModelWarningConfig=o,this.update=new Te,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=iv(0,r)}set isDisabled(e){}ngOnChanges(e){if(this._isControlChanged(e)){const n=e.form.previousValue;n&&Hh(n,this,!1),Wc(this.form,this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this.form.updateValueAndValidity({emitEvent:!1})}nv(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&Hh(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(e){return new(e||i)(N(ei,10),N(ts,10),N(ri,10),N(hv,8))},i.\u0275dir=fe({type:i,selectors:[["","formControl",""]],inputs:{form:["formControl","form"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[$e([x8]),Pe,fn]}),i})();const w8={provide:Di,useExisting:Gt(()=>hl)};let hl=(()=>{class i extends Di{constructor(e,n){super(),this.validators=e,this.asyncValidators=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Te,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const n=this.form.get(e.path);return Wc(n,e),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){Hh(e.control||null,e,!1),rv(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,YM(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const n=e.control,r=this.form.get(e.path);n!==r&&(Hh(n||null,e),$M(r)&&(Wc(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const n=this.form.get(e.path);GM(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const n=this.form.get(e.path);n&&function c8(i,t){return zh(i,t)}(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){tv(this.form,this),this._oldForm&&zh(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(e){return new(e||i)(N(ei,10),N(ts,10))},i.\u0275dir=fe({type:i,selectors:[["","formGroup",""]],hostBindings:function(e,n){1&e&&F("submit",function(o){return n.onSubmit(o)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[$e([w8]),Pe,fn]}),i})(),vT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[iT]]}),i})(),z8=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[vT]}),i})(),W8=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:hv,useValue:e.warnOnNgModelWithFormControl}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[vT]}),i})();const G8=["input"],U8=function(i){return{enterDuration:i}},Y8=["*"],q8=new _e("mat-checkbox-default-options",{providedIn:"root",factory:bT});function bT(){return{color:"accent",clickAction:"check-indeterminate"}}let X8=0;const yT=bT(),$8={provide:ri,useExisting:Gt(()=>yv),multi:!0};class K8{}const Q8=nl(yo($o(Nc(class{constructor(i){this._elementRef=i}}))));let yv=(()=>{class i extends Q8{constructor(e,n,r,o,s,a,l){super(e),this._changeDetectorRef=n,this._focusMonitor=r,this._ngZone=o,this._animationMode=a,this._options=l,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++X8,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new Te,this.indeterminateChange=new Te,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||yT,this.color=this.defaultColor=this._options.color||yT.color,this.tabIndex=parseInt(s)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(e){this._required=Ke(e)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(e){const n=Ke(e);n!=this.checked&&(this._checked=n,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){const n=Ke(e);n!==this.disabled&&(this._disabled=n,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const n=e!=this._indeterminate;this._indeterminate=Ke(e),n&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(e){let n=this._currentCheckState,r=this._elementRef.nativeElement;if(n!==e&&(this._currentAnimationClass.length>0&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(n,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);const o=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(o)},1e3)})}}_emitChangeEvent(){const e=new K8;e.source=this,e.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(e),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_onInputClick(e){var n;const r=null===(n=this._options)||void 0===n?void 0:n.clickAction;e.stopPropagation(),this.disabled||"noop"===r?!this.disabled&&"noop"===r&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==r&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(e,n){e?this._focusMonitor.focusVia(this._inputElement,e,n):this._inputElement.nativeElement.focus(n)}_onInteractionEvent(e){e.stopPropagation()}_getAnimationClassForCheckStateTransition(e,n){if("NoopAnimations"===this._animationMode)return"";let r="";switch(e){case 0:if(1===n)r="unchecked-checked";else{if(3!=n)return"";r="unchecked-indeterminate"}break;case 2:r=1===n?"unchecked-checked":"unchecked-indeterminate";break;case 1:r=2===n?"checked-unchecked":"checked-indeterminate";break;case 3:r=1===n?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${r}`}_syncIndeterminate(e){const n=this._inputElement;n&&(n.nativeElement.indeterminate=e)}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(Zt),N(Jr),N(at),tr("tabindex"),N(ii,8),N(q8,8))},i.\u0275cmp=st({type:i,selectors:[["mat-checkbox"]],viewQuery:function(e,n){if(1&e&&(xe(G8,5),xe(Qo,5)),2&e){let r;oe(r=se())&&(n._inputElement=r.first),oe(r=se())&&(n.ripple=r.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:14,hostBindings:function(e,n){2&e&&(Er("id",n.id),lt("tabindex",null)("aria-label",null)("aria-labelledby",null),Ot("mat-checkbox-indeterminate",n.indeterminate)("mat-checkbox-checked",n.checked)("mat-checkbox-disabled",n.disabled)("mat-checkbox-label-before","before"==n.labelPosition)("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[$e([$8]),Pe],ngContentSelectors:Y8,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(e,n){if(1&e&&(un(),D(0,"label",0,1)(2,"span",2)(3,"input",3,4),F("change",function(o){return n._onInteractionEvent(o)})("click",function(o){return n._onInputClick(o)}),k(),D(5,"span",5),Be(6,"span",6),k(),Be(7,"span",7),D(8,"span",8),Ro(),D(9,"svg",9),Be(10,"path",10),k(),dp(),Be(11,"span",11),k()(),D(12,"span",12,13),F("cdkObserveContent",function(){return n._onLabelTextChange()}),D(14,"span",14),B(15,"\xa0"),k(),St(16),k()()),2&e){const r=Vt(1),o=Vt(13);lt("for",n.inputId),O(2),Ot("mat-checkbox-inner-container-no-side-margin",!o.textContent||!o.textContent.trim()),O(1),R("id",n.inputId)("required",n.required)("checked",n.checked)("disabled",n.disabled)("tabIndex",n.tabIndex),lt("value",n.value)("name",n.name)("aria-label",n.ariaLabel||null)("aria-labelledby",n.ariaLabelledby)("aria-checked",n._getAriaChecked())("aria-describedby",n.ariaDescribedby),O(2),R("matRippleTrigger",r)("matRippleDisabled",n._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",pc(19,U8,"NoopAnimations"===n._animationMode?0:150))}},directives:[Qo,D1],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}\n"],encapsulation:2,changeDetection:0}),i})(),CT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({}),i})(),xT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[to,nt,Zu,CT],nt,CT]}),i})();class xv{constructor(t=!1,e,n=!0){this._multiple=t,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new W,e&&e.length&&(t?e.forEach(r=>this._markSelected(r)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}let wv=(()=>{class i{constructor(){this._listeners=[]}notify(e,n){for(let r of this._listeners)r(e,n)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(n=>e!==n)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ez=0;const Dv=new _e("CdkAccordion");let tz=(()=>{class i{constructor(){this._stateChanges=new W,this._openCloseAllActions=new W,this.id="cdk-accordion-"+ez++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=Ke(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=fe({type:i,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[$e([{provide:Dv,useExisting:i}]),fn]}),i})(),nz=0,iz=(()=>{class i{constructor(e,n,r){this.accordion=e,this._changeDetectorRef=n,this._expansionDispatcher=r,this._openCloseAllSubscription=mt.EMPTY,this.closed=new Te,this.opened=new Te,this.destroyed=new Te,this.expandedChange=new Te,this.id="cdk-accordion-child-"+nz++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((o,s)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===s&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=Ke(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=Ke(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return i.\u0275fac=function(e){return new(e||i)(N(Dv,12),N(Zt),N(wv))},i.\u0275dir=fe({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[$e([{provide:Dv,useValue:void 0}])]}),i})(),rz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({}),i})();const oz=["body"];function sz(i,t){}const az=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],lz=["mat-expansion-panel-header","*","mat-action-row"];function cz(i,t){1&i&&Be(0,"span",2),2&i&&R("@indicatorRotate",M()._getExpandedState())}const dz=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],uz=["mat-panel-title","mat-panel-description","*"],Sv=new _e("MAT_ACCORDION"),ST="225ms cubic-bezier(0.4,0.0,0.2,1)",MT={indicatorRotate:kn("indicatorRotate",[At("collapsed, void",We({transform:"rotate(0deg)"})),At("expanded",We({transform:"rotate(180deg)"})),jt("expanded <=> collapsed, void => collapsed",qt(ST))]),bodyExpansion:kn("bodyExpansion",[At("collapsed, void",We({height:"0px",visibility:"hidden"})),At("expanded",We({height:"*",visibility:"visible"})),jt("expanded <=> collapsed, void => collapsed",qt(ST))])};let hz=(()=>{class i{constructor(e){this._template=e}}return i.\u0275fac=function(e){return new(e||i)(N(_n))},i.\u0275dir=fe({type:i,selectors:[["ng-template","matExpansionPanelContent",""]]}),i})(),fz=0;const TT=new _e("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let Yh=(()=>{class i extends iz{constructor(e,n,r,o,s,a,l){super(e,n,r),this._viewContainerRef=o,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new Te,this.afterCollapse=new Te,this._inputChanges=new W,this._headerId="mat-expansion-panel-header-"+fz++,this._bodyAnimationDone=new W,this.accordion=e,this._document=s,this._bodyAnimationDone.pipe(Jg((p,b)=>p.fromState===b.fromState&&p.toState===b.toState)).subscribe(p=>{"void"!==p.fromState&&("expanded"===p.toState?this.afterExpand.emit():"collapsed"===p.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=Ke(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(di(null),bn(()=>this.expanded&&!this._portal),an(1)).subscribe(()=>{this._portal=new ks(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,n=this._body.nativeElement;return e===n||n.contains(e)}return!1}}return i.\u0275fac=function(e){return new(e||i)(N(Sv,12),N(Zt),N(wv),N(Tn),N(ct),N(ii,8),N(TT,8))},i.\u0275cmp=st({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(e,n,r){if(1&e&&Ht(r,hz,5),2&e){let o;oe(o=se())&&(n._lazyContent=o.first)}},viewQuery:function(e,n){if(1&e&&xe(oz,5),2&e){let r;oe(r=se())&&(n._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,n){2&e&&Ot("mat-expanded",n.expanded)("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-expansion-panel-spacing",n._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[$e([{provide:Sv,useValue:void 0}]),Pe,fn],ngContentSelectors:lz,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,n){1&e&&(un(az),St(0),D(1,"div",0,1),F("@bodyExpansion.done",function(o){return n._bodyAnimationDone.next(o)}),D(3,"div",2),St(4,1),G(5,sz,0,0,"ng-template",3),k(),St(6,2),k()),2&e&&(O(1),R("@bodyExpansion",n._getExpandedState())("id",n.id),lt("aria-labelledby",n._headerId),O(4),R("cdkPortalOutlet",n._portal))},directives:[Ac],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}\n'],encapsulation:2,data:{animation:[MT.bodyExpansion]},changeDetection:0}),i})();class pz{}const mz=nl(pz);let qh=(()=>{class i extends mz{constructor(e,n,r,o,s,a,l){super(),this.panel=e,this._element=n,this._focusMonitor=r,this._changeDetectorRef=o,this._animationMode=a,this._parentChangeSubscription=mt.EMPTY;const p=e.accordion?e.accordion._stateChanges.pipe(bn(b=>!(!b.hideToggle&&!b.togglePosition))):Al;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Yn(e.opened,e.closed,p,e._inputChanges.pipe(bn(b=>!!(b.hideToggle||b.disabled||b.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(bn(()=>e._containsFocus())).subscribe(()=>r.focusVia(n,"program")),s&&(this.expandedHeight=s.expandedHeight,this.collapsedHeight=s.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:xi(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,n){e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return i.\u0275fac=function(e){return new(e||i)(N(Yh,1),N(Ze),N(Jr),N(Zt),N(TT,8),N(ii,8),tr("tabindex"))},i.\u0275cmp=st({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,n){1&e&&F("click",function(){return n._toggle()})("keydown",function(o){return n._keydown(o)}),2&e&&(lt("id",n.panel._headerId)("tabindex",n.tabIndex)("aria-controls",n._getPanelId())("aria-expanded",n._isExpanded())("aria-disabled",n.panel.disabled),rt("height",n._getHeaderHeight()),Ot("mat-expanded",n._isExpanded())("mat-expansion-toggle-indicator-after","after"===n._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===n._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[Pe],ngContentSelectors:uz,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,n){1&e&&(un(dz),D(0,"span",0),St(1),St(2,1),St(3,2),k(),G(4,cz,1,1,"span",1)),2&e&&(O(4),R("ngIf",n._showToggle()))},directives:[ni],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[MT.indicatorRotate]},changeDetection:0}),i})(),gz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=fe({type:i,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),i})(),Mv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=fe({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),i})(),Tv=(()=>{class i extends tz{constructor(){super(...arguments),this._ownHeaders=new xs,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=Ke(e)}ngAfterContentInit(){this._headers.changes.pipe(di(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(n=>n.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new t_(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=It(i)))(n||i)}}(),i.\u0275dir=fe({type:i,selectors:[["mat-accordion"]],contentQueries:function(e,n,r){if(1&e&&Ht(r,qh,5),2&e){let o;oe(o=se())&&(n._headers=o)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,n){2&e&&Ot("mat-accordion-multi",n.multi)},inputs:{multi:"multi",hideToggle:"hideToggle",displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],features:[$e([{provide:Sv,useExisting:i}]),Pe]}),i})(),ET=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Nn,nt,rz,As]]}),i})();const _z=["sliderWrapper"],ur=Pr({passive:!1}),xz={provide:ri,useExisting:Gt(()=>Xc),multi:!0};class wz{}const Dz=nl(yo(Nc(class{constructor(i){this._elementRef=i}}),"accent"));let Xc=(()=>{class i extends Dz{constructor(e,n,r,o,s,a,l,p){super(e),this._focusMonitor=n,this._changeDetectorRef=r,this._dir=o,this._ngZone=a,this._animationMode=p,this._invert=!1,this._max=100,this._min=0,this._step=1,this._thumbLabel=!1,this._tickInterval=0,this._value=null,this._vertical=!1,this.change=new Te,this.input=new Te,this.valueChange=new Te,this.onTouched=()=>{},this._percent=0,this._isSliding=null,this._isActive=!1,this._tickIntervalPercent=0,this._sliderDimensions=null,this._controlValueAccessorChangeFn=()=>{},this._dirChangeSubscription=mt.EMPTY,this._pointerDown=b=>{this.disabled||this._isSliding||!$c(b)&&0!==b.button||this._ngZone.run(()=>{this._touchId=$c(b)?function Sz(i,t){for(let e=0;e<i.touches.length;e++){const n=i.touches[e].target;if(t===n||t.contains(n))return i.touches[e].identifier}}(b,this._elementRef.nativeElement):void 0;const w=AT(b,this._touchId);if(w){const A=this.value;this._isSliding="pointer",this._lastPointerEvent=b,this._focusHostElement(),this._onMouseenter(),this._bindGlobalEvents(b),this._focusHostElement(),this._updateValueFromPosition(w),this._valueOnSlideStart=A,b.cancelable&&b.preventDefault(),A!=this.value&&this._emitInputEvent()}})},this._pointerMove=b=>{if("pointer"===this._isSliding){const w=AT(b,this._touchId);if(w){b.preventDefault();const A=this.value;this._lastPointerEvent=b,this._updateValueFromPosition(w),A!=this.value&&this._emitInputEvent()}}},this._pointerUp=b=>{"pointer"===this._isSliding&&(!$c(b)||"number"!=typeof this._touchId||Ev(b.changedTouches,this._touchId))&&(b.preventDefault(),this._removeGlobalEvents(),this._isSliding=null,this._touchId=void 0,this._valueOnSlideStart!=this.value&&!this.disabled&&this._emitChangeEvent(),this._valueOnSlideStart=this._lastPointerEvent=null)},this._windowBlur=()=>{this._lastPointerEvent&&this._pointerUp(this._lastPointerEvent)},this._document=l,this.tabIndex=parseInt(s)||0,a.runOutsideAngular(()=>{const b=e.nativeElement;b.addEventListener("mousedown",this._pointerDown,ur),b.addEventListener("touchstart",this._pointerDown,ur)})}get invert(){return this._invert}set invert(e){this._invert=Ke(e)}get max(){return this._max}set max(e){this._max=Ci(e,this._max),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get min(){return this._min}set min(e){this._min=Ci(e,this._min),this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}get step(){return this._step}set step(e){this._step=Ci(e,this._step),this._step%1!=0&&(this._roundToDecimal=this._step.toString().split(".").pop().length),this._changeDetectorRef.markForCheck()}get thumbLabel(){return this._thumbLabel}set thumbLabel(e){this._thumbLabel=Ke(e)}get tickInterval(){return this._tickInterval}set tickInterval(e){this._tickInterval="auto"===e?"auto":"number"==typeof e||"string"==typeof e?Ci(e,this._tickInterval):0}get value(){return null===this._value&&(this.value=this._min),this._value}set value(e){if(e!==this._value){let n=Ci(e,0);this._roundToDecimal&&n!==this.min&&n!==this.max&&(n=parseFloat(n.toFixed(this._roundToDecimal))),this._value=n,this._percent=this._calculatePercentage(this._value),this._changeDetectorRef.markForCheck()}}get vertical(){return this._vertical}set vertical(e){this._vertical=Ke(e)}get displayValue(){return this.displayWith?this.displayWith(this.value):this._roundToDecimal&&this.value&&this.value%1!=0?this.value.toFixed(this._roundToDecimal):this.value||0}focus(e){this._focusHostElement(e)}blur(){this._blurHostElement()}get percent(){return this._clamp(this._percent)}_shouldInvertAxis(){return this.vertical?!this.invert:this.invert}_isMinValue(){return 0===this.percent}_getThumbGap(){return this.disabled?7:this._isMinValue()&&!this.thumbLabel?this._isActive?10:7:0}_getTrackBackgroundStyles(){const n=this.vertical?`1, ${1-this.percent}, 1`:1-this.percent+", 1, 1";return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"-":""}${this._getThumbGap()}px) scale3d(${n})`}}_getTrackFillStyles(){const e=this.percent,r=this.vertical?`1, ${e}, 1`:`${e}, 1, 1`;return{transform:`translate${this.vertical?"Y":"X"}(${this._shouldInvertMouseCoords()?"":"-"}${this._getThumbGap()}px) scale3d(${r})`,display:0===e?"none":""}}_getTicksContainerStyles(){return{transform:`translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"-":""}${this._tickIntervalPercent/2*100}%)`}}_getTicksStyles(){let e=100*this._tickIntervalPercent,a={backgroundSize:this.vertical?`2px ${e}%`:`${e}% 2px`,transform:`translateZ(0) translate${this.vertical?"Y":"X"}(${this.vertical||"rtl"!=this._getDirection()?"":"-"}${e/2}%)${this.vertical||"rtl"!=this._getDirection()?"":" rotate(180deg)"}`};if(this._isMinValue()&&this._getThumbGap()){const l=this._shouldInvertAxis();let p;p=this.vertical?l?"Bottom":"Top":l?"Right":"Left",a[`padding${p}`]=`${this._getThumbGap()}px`}return a}_getThumbContainerStyles(){const e=this._shouldInvertAxis();return{transform:`translate${this.vertical?"Y":"X"}(-${100*(("rtl"!=this._getDirection()||this.vertical?e:!e)?this.percent:1-this.percent)}%)`}}_shouldInvertMouseCoords(){const e=this._shouldInvertAxis();return"rtl"!=this._getDirection()||this.vertical?e:!e}_getDirection(){return this._dir&&"rtl"==this._dir.value?"rtl":"ltr"}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{this._isActive=!!e&&"keyboard"!==e,this._changeDetectorRef.detectChanges()}),this._dir&&(this._dirChangeSubscription=this._dir.change.subscribe(()=>{this._changeDetectorRef.markForCheck()}))}ngOnDestroy(){const e=this._elementRef.nativeElement;e.removeEventListener("mousedown",this._pointerDown,ur),e.removeEventListener("touchstart",this._pointerDown,ur),this._lastPointerEvent=null,this._removeGlobalEvents(),this._focusMonitor.stopMonitoring(this._elementRef),this._dirChangeSubscription.unsubscribe()}_onMouseenter(){this.disabled||(this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent())}_onFocus(){this._sliderDimensions=this._getSliderDimensions(),this._updateTickIntervalPercent()}_onBlur(){this.onTouched()}_onKeydown(e){if(this.disabled||xi(e)||this._isSliding&&"keyboard"!==this._isSliding)return;const n=this.value;switch(e.keyCode){case 33:this._increment(10);break;case 34:this._increment(-10);break;case 35:this.value=this.max;break;case 36:this.value=this.min;break;case 37:this._increment("rtl"==this._getDirection()?1:-1);break;case 38:this._increment(1);break;case 39:this._increment("rtl"==this._getDirection()?-1:1);break;case 40:this._increment(-1);break;default:return}n!=this.value&&(this._emitInputEvent(),this._emitChangeEvent()),this._isSliding="keyboard",e.preventDefault()}_onKeyup(){"keyboard"===this._isSliding&&(this._isSliding=null)}_getWindow(){return this._document.defaultView||window}_bindGlobalEvents(e){const n=this._document,r=$c(e),s=r?"touchend":"mouseup";n.addEventListener(r?"touchmove":"mousemove",this._pointerMove,ur),n.addEventListener(s,this._pointerUp,ur),r&&n.addEventListener("touchcancel",this._pointerUp,ur);const a=this._getWindow();void 0!==a&&a&&a.addEventListener("blur",this._windowBlur)}_removeGlobalEvents(){const e=this._document;e.removeEventListener("mousemove",this._pointerMove,ur),e.removeEventListener("mouseup",this._pointerUp,ur),e.removeEventListener("touchmove",this._pointerMove,ur),e.removeEventListener("touchend",this._pointerUp,ur),e.removeEventListener("touchcancel",this._pointerUp,ur);const n=this._getWindow();void 0!==n&&n&&n.removeEventListener("blur",this._windowBlur)}_increment(e){const n=this._clamp(this.value||0,this.min,this.max);this.value=this._clamp(n+this.step*e,this.min,this.max)}_updateValueFromPosition(e){if(!this._sliderDimensions)return;let s=this._clamp(((this.vertical?e.y:e.x)-(this.vertical?this._sliderDimensions.top:this._sliderDimensions.left))/(this.vertical?this._sliderDimensions.height:this._sliderDimensions.width));if(this._shouldInvertMouseCoords()&&(s=1-s),0===s)this.value=this.min;else if(1===s)this.value=this.max;else{const a=this._calculateValue(s),l=Math.round((a-this.min)/this.step)*this.step+this.min;this.value=this._clamp(l,this.min,this.max)}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.value),this.valueChange.emit(this.value),this.change.emit(this._createChangeEvent())}_emitInputEvent(){this.input.emit(this._createChangeEvent())}_updateTickIntervalPercent(){if(!this.tickInterval||!this._sliderDimensions)return;let e;if("auto"==this.tickInterval){let n=this.vertical?this._sliderDimensions.height:this._sliderDimensions.width;e=Math.ceil(30/(n*this.step/(this.max-this.min)))*this.step/n}else e=this.tickInterval*this.step/(this.max-this.min);this._tickIntervalPercent=kT(e)?e:0}_createChangeEvent(e=this.value){let n=new wz;return n.source=this,n.value=e,n}_calculatePercentage(e){const n=((e||0)-this.min)/(this.max-this.min);return kT(n)?n:0}_calculateValue(e){return this.min+e*(this.max-this.min)}_clamp(e,n=0,r=1){return Math.max(n,Math.min(e,r))}_getSliderDimensions(){return this._sliderWrapper?this._sliderWrapper.nativeElement.getBoundingClientRect():null}_focusHostElement(e){this._elementRef.nativeElement.focus(e)}_blurHostElement(){this._elementRef.nativeElement.blur()}writeValue(e){this.value=e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(Jr),N(Zt),N(lr,8),tr("tabindex"),N(at),N(ct),N(ii,8))},i.\u0275cmp=st({type:i,selectors:[["mat-slider"]],viewQuery:function(e,n){if(1&e&&xe(_z,5),2&e){let r;oe(r=se())&&(n._sliderWrapper=r.first)}},hostAttrs:["role","slider",1,"mat-slider","mat-focus-indicator"],hostVars:29,hostBindings:function(e,n){1&e&&F("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()})("keydown",function(o){return n._onKeydown(o)})("keyup",function(){return n._onKeyup()})("mouseenter",function(){return n._onMouseenter()})("selectstart",function(o){return o.preventDefault()}),2&e&&(Er("tabIndex",n.tabIndex),lt("aria-disabled",n.disabled)("aria-valuemax",n.max)("aria-valuemin",n.min)("aria-valuenow",n.value)("aria-valuetext",null==n.valueText?n.displayValue:n.valueText)("aria-orientation",n.vertical?"vertical":"horizontal"),Ot("mat-slider-disabled",n.disabled)("mat-slider-has-ticks",n.tickInterval)("mat-slider-horizontal",!n.vertical)("mat-slider-axis-inverted",n._shouldInvertAxis())("mat-slider-invert-mouse-coords",n._shouldInvertMouseCoords())("mat-slider-sliding",n._isSliding)("mat-slider-thumb-label-showing",n.thumbLabel)("mat-slider-vertical",n.vertical)("mat-slider-min-value",n._isMinValue())("mat-slider-hide-last-tick",n.disabled||n._isMinValue()&&n._getThumbGap()&&n._shouldInvertAxis())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{disabled:"disabled",color:"color",tabIndex:"tabIndex",invert:"invert",max:"max",min:"min",step:"step",thumbLabel:"thumbLabel",tickInterval:"tickInterval",value:"value",displayWith:"displayWith",valueText:"valueText",vertical:"vertical"},outputs:{change:"change",input:"input",valueChange:"valueChange"},exportAs:["matSlider"],features:[$e([xz]),Pe],decls:13,vars:6,consts:[[1,"mat-slider-wrapper"],["sliderWrapper",""],[1,"mat-slider-track-wrapper"],[1,"mat-slider-track-background",3,"ngStyle"],[1,"mat-slider-track-fill",3,"ngStyle"],[1,"mat-slider-ticks-container",3,"ngStyle"],[1,"mat-slider-ticks",3,"ngStyle"],[1,"mat-slider-thumb-container",3,"ngStyle"],[1,"mat-slider-focus-ring"],[1,"mat-slider-thumb"],[1,"mat-slider-thumb-label"],[1,"mat-slider-thumb-label-text"]],template:function(e,n){1&e&&(D(0,"div",0,1)(2,"div",2),Be(3,"div",3)(4,"div",4),k(),D(5,"div",5),Be(6,"div",6),k(),D(7,"div",7),Be(8,"div",8)(9,"div",9),D(10,"div",10)(11,"span",11),B(12),k()()()()),2&e&&(O(3),R("ngStyle",n._getTrackBackgroundStyles()),O(1),R("ngStyle",n._getTrackFillStyles()),O(1),R("ngStyle",n._getTicksContainerStyles()),O(1),R("ngStyle",n._getTicksStyles()),O(1),R("ngStyle",n._getThumbContainerStyles()),O(5),Qn(n.displayValue))},directives:[Sg],styles:['.mat-slider{display:inline-block;position:relative;box-sizing:border-box;padding:8px;outline:none;vertical-align:middle}.mat-slider:not(.mat-slider-disabled):active,.mat-slider.mat-slider-sliding:not(.mat-slider-disabled){cursor:grabbing}.mat-slider-wrapper{-webkit-print-color-adjust:exact;color-adjust:exact;position:absolute}.mat-slider-track-wrapper{position:absolute;top:0;left:0;overflow:hidden}.mat-slider-track-fill{position:absolute;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-track-background{position:absolute;transform-origin:100% 100%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-ticks-container{position:absolute;left:0;top:0;overflow:hidden}.mat-slider-ticks{-webkit-background-clip:content-box;background-clip:content-box;background-repeat:repeat;box-sizing:border-box;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-container{position:absolute;z-index:1;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-focus-ring{position:absolute;width:30px;height:30px;border-radius:50%;transform:scale(0);opacity:0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider.cdk-keyboard-focused .mat-slider-focus-ring,.mat-slider.cdk-program-focused .mat-slider-focus-ring{transform:scale(1);opacity:1}.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb-label,.mat-slider:not(.mat-slider-disabled):not(.mat-slider-sliding) .mat-slider-thumb{cursor:grab}.mat-slider-thumb{position:absolute;right:-10px;bottom:-10px;box-sizing:border-box;width:20px;height:20px;border:3px solid transparent;border-radius:50%;transform:scale(0.7);transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-thumb-label{display:none;align-items:center;justify-content:center;position:absolute;width:28px;height:28px;border-radius:50%;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),border-radius 400ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.cdk-high-contrast-active .mat-slider-thumb-label{outline:solid 1px}.mat-slider-thumb-label-text{z-index:1;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-sliding .mat-slider-track-fill,.mat-slider-sliding .mat-slider-track-background,.mat-slider-sliding .mat-slider-thumb-container{transition-duration:0ms}.mat-slider-has-ticks .mat-slider-wrapper::after{content:"";position:absolute;border-width:0;border-style:solid;opacity:0;transition:opacity 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after,.mat-slider-has-ticks:hover:not(.mat-slider-hide-last-tick) .mat-slider-wrapper::after{opacity:1}.mat-slider-has-ticks.cdk-focused:not(.mat-slider-disabled) .mat-slider-ticks,.mat-slider-has-ticks:hover:not(.mat-slider-disabled) .mat-slider-ticks{opacity:1}.mat-slider-thumb-label-showing .mat-slider-focus-ring{display:none}.mat-slider-thumb-label-showing .mat-slider-thumb-label{display:flex}.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:100% 100%}.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:0 0}.mat-slider:not(.mat-slider-disabled).cdk-focused.mat-slider-thumb-label-showing .mat-slider-thumb{transform:scale(0)}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label{border-radius:50% 50% 0}.mat-slider:not(.mat-slider-disabled).cdk-focused .mat-slider-thumb-label-text{opacity:1}.mat-slider:not(.mat-slider-disabled).cdk-mouse-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-touch-focused .mat-slider-thumb,.mat-slider:not(.mat-slider-disabled).cdk-program-focused .mat-slider-thumb{border-width:2px;transform:scale(1)}.mat-slider-disabled .mat-slider-focus-ring{transform:scale(0);opacity:0}.mat-slider-disabled .mat-slider-thumb{border-width:4px;transform:scale(0.5)}.mat-slider-disabled .mat-slider-thumb-label{display:none}.mat-slider-horizontal{height:48px;min-width:128px}.mat-slider-horizontal .mat-slider-wrapper{height:2px;top:23px;left:8px;right:8px}.mat-slider-horizontal .mat-slider-wrapper::after{height:2px;border-left-width:2px;right:0;top:0}.mat-slider-horizontal .mat-slider-track-wrapper{height:2px;width:100%}.mat-slider-horizontal .mat-slider-track-fill{height:2px;width:100%;transform:scaleX(0)}.mat-slider-horizontal .mat-slider-track-background{height:2px;width:100%;transform:scaleX(1)}.mat-slider-horizontal .mat-slider-ticks-container{height:2px;width:100%}.cdk-high-contrast-active .mat-slider-horizontal .mat-slider-ticks-container{height:0;outline:solid 2px;top:1px}.mat-slider-horizontal .mat-slider-ticks{height:2px;width:100%}.mat-slider-horizontal .mat-slider-thumb-container{width:100%;height:0;top:50%}.mat-slider-horizontal .mat-slider-focus-ring{top:-15px;right:-15px}.mat-slider-horizontal .mat-slider-thumb-label{right:-14px;top:-40px;transform:translateY(26px) scale(0.01) rotate(45deg)}.mat-slider-horizontal .mat-slider-thumb-label-text{transform:rotate(-45deg)}.mat-slider-horizontal.cdk-focused .mat-slider-thumb-label{transform:rotate(45deg)}.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label,.cdk-high-contrast-active .mat-slider-horizontal.cdk-focused .mat-slider-thumb-label-text{transform:none}.mat-slider-vertical{width:48px;min-height:128px}.mat-slider-vertical .mat-slider-wrapper{width:2px;top:8px;bottom:8px;left:23px}.mat-slider-vertical .mat-slider-wrapper::after{width:2px;border-top-width:2px;bottom:0;left:0}.mat-slider-vertical .mat-slider-track-wrapper{height:100%;width:2px}.mat-slider-vertical .mat-slider-track-fill{height:100%;width:2px;transform:scaleY(0)}.mat-slider-vertical .mat-slider-track-background{height:100%;width:2px;transform:scaleY(1)}.mat-slider-vertical .mat-slider-ticks-container{width:2px;height:100%}.cdk-high-contrast-active .mat-slider-vertical .mat-slider-ticks-container{width:0;outline:solid 2px;left:1px}.mat-slider-vertical .mat-slider-focus-ring{bottom:-15px;left:-15px}.mat-slider-vertical .mat-slider-ticks{width:2px;height:100%}.mat-slider-vertical .mat-slider-thumb-container{height:100%;width:0;left:50%}.mat-slider-vertical .mat-slider-thumb{-webkit-backface-visibility:hidden;backface-visibility:hidden}.mat-slider-vertical .mat-slider-thumb-label{bottom:-14px;left:-40px;transform:translateX(26px) scale(0.01) rotate(-45deg)}.mat-slider-vertical .mat-slider-thumb-label-text{transform:rotate(45deg)}.mat-slider-vertical.cdk-focused .mat-slider-thumb-label{transform:rotate(-45deg)}[dir=rtl] .mat-slider-wrapper::after{left:0;right:auto}[dir=rtl] .mat-slider-horizontal .mat-slider-track-fill{transform-origin:100% 100%}[dir=rtl] .mat-slider-horizontal .mat-slider-track-background{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-fill{transform-origin:0 0}[dir=rtl] .mat-slider-horizontal.mat-slider-axis-inverted .mat-slider-track-background{transform-origin:100% 100%}.mat-slider._mat-animation-noopable .mat-slider-track-fill,.mat-slider._mat-animation-noopable .mat-slider-track-background,.mat-slider._mat-animation-noopable .mat-slider-ticks,.mat-slider._mat-animation-noopable .mat-slider-thumb-container,.mat-slider._mat-animation-noopable .mat-slider-focus-ring,.mat-slider._mat-animation-noopable .mat-slider-thumb,.mat-slider._mat-animation-noopable .mat-slider-thumb-label,.mat-slider._mat-animation-noopable .mat-slider-thumb-label-text,.mat-slider._mat-animation-noopable .mat-slider-has-ticks .mat-slider-wrapper::after{transition:none}\n'],encapsulation:2,changeDetection:0}),i})();function kT(i){return!isNaN(i)&&isFinite(i)}function $c(i){return"t"===i.type[0]}function AT(i,t){let e;return e=$c(i)?"number"==typeof t?Ev(i.touches,t)||Ev(i.changedTouches,t):i.touches[0]||i.changedTouches[0]:i,e?{x:e.clientX,y:e.clientY}:void 0}function Ev(i,t){for(let e=0;e<i.length;e++)if(i[e].identifier===t)return i[e]}let IT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Nn,nt],nt]}),i})();const Mz=["tooltip"],PT="tooltip-panel",RT=Pr({passive:!0}),OT=new _e("mat-tooltip-scroll-strategy"),Az={provide:OT,deps:[wi],useFactory:function kz(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}},Iz=new _e("mat-tooltip-default-options",{providedIn:"root",factory:function Pz(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let Rz=(()=>{class i{constructor(e,n,r,o,s,a,l,p,b,w,A,P){this._overlay=e,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=o,this._ngZone=s,this._platform=a,this._ariaDescriber=l,this._focusMonitor=p,this._dir=w,this._defaultOptions=A,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new W,this._scrollStrategy=b,this._document=P,A&&(A.position&&(this.position=A.position),A.touchGestures&&(this.touchGestures=A.touchGestures)),w.change.pipe(Ut(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(e){var n;e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),null===(n=this._tooltipInstance)||void 0===n||n.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(e){this._disabled=Ke(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=Ci(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=Ci(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Ut(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{e.removeEventListener(n,r,RT)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const n=this._createOverlay();this._detach(),this._portal=this._portal||new $a(this._tooltipComponent,this._viewContainerRef);const r=this._tooltipInstance=n.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe(Ut(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(e)}hide(e=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(e)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){var e;if(this._overlayRef)return this._overlayRef;const n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return r.positionChanges.pipe(Ut(this._destroyed)).subscribe(o=>{this._updateCurrentPositionClass(o.connectionPair),this._tooltipInstance&&o.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${PT}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Ut(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Ut(this._destroyed)).subscribe(()=>{var o;return null===(o=this._tooltipInstance)||void 0===o?void 0:o._handleBodyInteraction()}),this._overlayRef.keydownEvents().pipe(Ut(this._destroyed)).subscribe(o=>{this._isTooltipVisible()&&27===o.keyCode&&!xi(o)&&(o.preventDefault(),o.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),(null===(e=this._defaultOptions)||void 0===e?void 0:e.disableTooltipInteractivity)&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const n=e.getConfig().positionStrategy,r=this._getOrigin(),o=this._getOverlayPosition();n.withPositions([this._addOffset(Object.assign(Object.assign({},r.main),o.main)),this._addOffset(Object.assign(Object.assign({},r.fallback),o.fallback))])}_addOffset(e){return e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n||"below"==n?r={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&e||"right"==n&&!e?r={originX:"start",originY:"center"}:("after"==n||"right"==n&&e||"left"==n&&!e)&&(r={originX:"end",originY:"center"});const{x:o,y:s}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:o,originY:s}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n?r={overlayX:"center",overlayY:"bottom"}:"below"==n?r={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&e||"right"==n&&!e?r={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&e||"left"==n&&!e)&&(r={overlayX:"start",overlayY:"center"});const{x:o,y:s}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:o,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(an(1),Ut(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,n){return"above"===this.position||"below"===this.position?"top"===n?n="bottom":"bottom"===n&&(n="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:n}}_updateCurrentPositionClass(e){const{overlayY:n,originX:r,originY:o}=e;let s;if(s="center"===n?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===n&&"top"===o?"above":"below",s!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${PT}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+s)}this._currentPosition=s}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",n=>{var r;const o=n.relatedTarget;(!o||!(null===(r=this._overlayRef)||void 0===r?void 0:r.overlayElement.contains(o)))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",n],["touchcancel",n])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,RT)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const n=this._document.elementFromPoint(e.clientX,e.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const n=this._elementRef.nativeElement,r=n.style;("on"===e||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===e||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return i.\u0275fac=function(e){La()},i.\u0275dir=fe({type:i,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),i})(),Oz=(()=>{class i extends Rz{constructor(e,n,r,o,s,a,l,p,b,w,A,P){super(e,n,r,o,s,a,l,p,b,w,A,P),this._tooltipComponent=Lz}}return i.\u0275fac=function(e){return new(e||i)(N(wi),N(Ze),N(o1),N(Tn),N(at),N(En),N(j5),N(Jr),N(OT),N(lr,8),N(Iz,8),N(ct))},i.\u0275dir=fe({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[Pe]}),i})(),Fz=(()=>{class i{constructor(e,n){this._changeDetectorRef=e,this._visibility="initial",this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new W,this._animationsDisabled="NoopAnimations"===n}show(e){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&this.hide(this._mouseLeaveHideDelay)}_onShow(){}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){const n=this._tooltip.nativeElement,r=this._showAnimation,o=this._hideAnimation;if(n.classList.remove(e?o:r),n.classList.add(e?r:o),this._isVisible=e,e&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const s=getComputedStyle(n);("0s"===s.getPropertyValue("animation-duration")||"none"===s.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}}return i.\u0275fac=function(e){return new(e||i)(N(Zt),N(ii,8))},i.\u0275dir=fe({type:i}),i})(),Lz=(()=>{class i extends Fz{constructor(e,n,r){super(e,r),this._breakpointObserver=n,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)"),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return i.\u0275fac=function(e){return new(e||i)(N(Zt),N(O_),N(ii,8))},i.\u0275cmp=st({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(e,n){if(1&e&&xe(Mz,7),2&e){let r;oe(r=se())&&(n._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,n){1&e&&F("mouseleave",function(o){return n._handleMouseLeave(o)}),2&e&&rt("zoom",n.isVisible()?1:null)},features:[Pe],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(e,n){if(1&e&&(D(0,"div",0,1),F("animationend",function(o){return n._handleAnimationEnd(o)}),Xr(2,"async"),B(3),k()),2&e){let r;Ot("mat-tooltip-handset",null==(r=$r(2,4,n._isHandset))?null:r.matches),R("ngClass",n.tooltipClass),O(3),Qn(n.message)}},directives:[Ms],pipes:[Mg],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}\n"],encapsulation:2,changeDetection:0}),i})(),FT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[Az],imports:[[rh,Nn,Os,nt],nt,Zr]}),i})();function Gs(i,t){return j((e,n)=>{let r=null,o=0,s=!1;const a=()=>s&&!r&&n.complete();e.subscribe(K(n,l=>{null==r||r.unsubscribe();let p=0;const b=o++;ki(i(l,b)).subscribe(r=K(n,w=>n.next(t?t(l,w,b,p++):w),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function LT(i,t){return t?e=>Th(t.pipe(an(1),function Nz(){return j((i,t)=>{i.subscribe(K(t,h))})}()),e.pipe(LT(i))):ea((e,n)=>i(e,n).pipe(an(1),function Bz(i){return ae(()=>i)}(e)))}function kv(i,t=Ec){const e=jg(i,t);return LT(()=>e)}const Vz=["mat-menu-item",""];function Hz(i,t){1&i&&(Ro(),D(0,"svg",2),Be(1,"polygon",3),k())}const NT=["*"];function jz(i,t){if(1&i){const e=te();D(0,"div",0),F("keydown",function(r){return I(e),M()._handleKeydown(r)})("click",function(){return I(e),M().closed.emit("click")})("@transformMenu.start",function(r){return I(e),M()._onAnimationStart(r)})("@transformMenu.done",function(r){return I(e),M()._onAnimationDone(r)}),D(1,"div",1),St(2),k()()}if(2&i){const e=M();R("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),lt("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const Xh={transformMenu:kn("transformMenu",[At("void",We({opacity:0,transform:"scale(0.8)"})),jt("void => enter",qt("120ms cubic-bezier(0, 0, 0.2, 1)",We({opacity:1,transform:"scale(1)"}))),jt("* => void",qt("100ms 25ms linear",We({opacity:0})))]),fadeInItems:kn("fadeInItems",[At("showing",We({opacity:1})),jt("void => *",[We({opacity:0}),qt("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},zz=new _e("MatMenuContent"),Av=new _e("MAT_MENU_PANEL"),Wz=$o(Nc(class{}));let $h=(()=>{class i extends Wz{constructor(e,n,r,o,s){var a;super(),this._elementRef=e,this._document=n,this._focusMonitor=r,this._parentMenu=o,this._changeDetectorRef=s,this.role="menuitem",this._hovered=new W,this._focused=new W,this._highlighted=!1,this._triggersSubmenu=!1,null===(a=null==o?void 0:o.addItem)||void 0===a||a.call(o,this)}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var e;const n=this._elementRef.nativeElement.cloneNode(!0),r=n.querySelectorAll("mat-icon, .material-icons");for(let o=0;o<r.length;o++)r[o].remove();return(null===(e=n.textContent)||void 0===e?void 0:e.trim())||""}_setHighlighted(e){var n;this._highlighted=e,null===(n=this._changeDetectorRef)||void 0===n||n.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(ct),N(Jr),N(Av,8),N(Zt))},i.\u0275cmp=st({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(e,n){1&e&&F("click",function(o){return n._checkDisabled(o)})("mouseenter",function(){return n._handleMouseEnter()}),2&e&&(lt("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled.toString())("disabled",n.disabled||null),Ot("mat-menu-item",!0)("mat-menu-item-highlighted",n._highlighted)("mat-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[Pe],attrs:Vz,ngContentSelectors:NT,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,n){1&e&&(un(),St(0),Be(1,"div",0),G(2,Hz,2,0,"svg",1)),2&e&&(O(1),R("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),O(1),R("ngIf",n._triggersSubmenu))},directives:[Qo,ni],encapsulation:2,changeDetection:0}),i})();const BT=new _e("mat-menu-default-options",{providedIn:"root",factory:function Gz(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Uz=0,Kc=(()=>{class i{constructor(e,n,r,o){this._elementRef=e,this._ngZone=n,this._defaultOptions=r,this._changeDetectorRef=o,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new xs,this._tabSubscription=mt.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new W,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Te,this.close=this.closed,this.panelId="mat-menu-panel-"+Uz++}get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=Ke(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Ke(e)}set panelClass(e){const n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new t_(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(di(this._directDescendantItems),Gs(e=>Yn(...e.map(n=>n._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{var n;const r=this._keyManager;if("enter"===this._panelAnimationState&&(null===(n=r.activeItem)||void 0===n?void 0:n._hasFocus())){const o=e.toArray(),s=Math.max(0,Math.min(o.length-1,r.activeItemIndex||0));o[s]&&!o[s].disabled?r.setActiveItem(s):r.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(di(this._directDescendantItems),Gs(n=>Yn(...n.map(r=>r._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const n=e.keyCode,r=this._keyManager;switch(n){case 27:xi(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===n||40===n)&&r.setFocusOrigin("keyboard"),void r.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._ngZone.onStable.pipe(an(1)).subscribe(()=>{let n=null;if(this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!n||!n.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(e).setFirstItemActive(),!r.activeItem&&n&&n.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const n=Math.min(this._baseElevation+e,24),r=`${this._elevationPrefix}${n}`,o=Object.keys(this._classList).find(s=>s.startsWith(this._elevationPrefix));(!o||o===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(e=this.xPosition,n=this.yPosition){var r;const o=this._classList;o["mat-menu-before"]="before"===e,o["mat-menu-after"]="after"===e,o["mat-menu-above"]="above"===n,o["mat-menu-below"]="below"===n,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(di(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(at),N(BT),N(Zt))},i.\u0275dir=fe({type:i,contentQueries:function(e,n,r){if(1&e&&(Ht(r,zz,5),Ht(r,$h,5),Ht(r,$h,4)),2&e){let o;oe(o=se())&&(n.lazyContent=o.first),oe(o=se())&&(n._allItems=o),oe(o=se())&&(n.items=o)}},viewQuery:function(e,n){if(1&e&&xe(_n,5),2&e){let r;oe(r=se())&&(n.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),i})(),fl=(()=>{class i extends Kc{constructor(e,n,r,o){super(e,n,r,o),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(at),N(BT),N(Zt))},i.\u0275cmp=st({type:i,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,n){2&e&&lt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[$e([{provide:Av,useExisting:i}]),Pe],ngContentSelectors:NT,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(e,n){1&e&&(un(),G(0,jz,3,6,"ng-template"))},directives:[Ms],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::before{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n'],encapsulation:2,data:{animation:[Xh.transformMenu,Xh.fadeInItems]},changeDetection:0}),i})();const VT=new _e("mat-menu-scroll-strategy"),qz={provide:VT,deps:[wi],useFactory:function Yz(i){return()=>i.scrollStrategies.reposition()}},jT=Pr({passive:!0});let Xz=(()=>{class i{constructor(e,n,r,o,s,a,l,p,b){this._overlay=e,this._element=n,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=l,this._focusMonitor=p,this._ngZone=b,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=mt.EMPTY,this._hoverSubscription=mt.EMPTY,this._menuCloseSubscription=mt.EMPTY,this._handleTouchStart=w=>{nh(w)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Te,this.onMenuOpen=this.menuOpened,this.menuClosed=new Te,this.onMenuClose=this.menuClosed,this._scrollStrategy=o,this._parentMaterialMenu=s instanceof Kc?s:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,jT),a&&(a._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(n=>{this._destroyMenu(n),("click"===n||"tab"===n)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,jT),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const e=this._createOverlay(),n=e.getConfig(),r=n.positionStrategy;this._setPosition(r),n.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,e.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof Kc&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(Ut(this.menu.close)).subscribe(()=>{r.withLockedPosition(!1).reapplyLastPosition(),r.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}updatePosition(){var e;null===(e=this._overlayRef)||void 0===e||e.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof Kc?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(bn(r=>"void"===r.toState),an(1),Ut(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n.lazyContent&&n.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let e=0,n=this.menu.parentMenu;for(;n;)e++,n=n.parentMenu;this.menu.setElevation(e)}}_setIsMenuOpen(e){this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const e=this._getOverlayConfig();this._subscribeToPositions(e.positionStrategy),this._overlayRef=this._overlay.create(e),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new Za({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e){this.menu.setPositionClasses&&e.positionChanges.subscribe(n=>{const r="start"===n.connectionPair.overlayX?"after":"before",o="top"===n.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(r,o)):this.menu.setPositionClasses(r,o)})}_setPosition(e){let[n,r]="before"===this.menu.xPosition?["end","start"]:["start","end"],[o,s]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[a,l]=[o,s],[p,b]=[n,r],w=0;this.triggersSubmenu()?(b=n="before"===this.menu.xPosition?"start":"end",r=p="end"===n?"start":"end",w="bottom"===o?8:-8):this.menu.overlapTrigger||(a="top"===o?"bottom":"top",l="top"===s?"bottom":"top"),e.withPositions([{originX:n,originY:a,overlayX:p,overlayY:o,offsetY:w},{originX:r,originY:a,overlayX:b,overlayY:o,offsetY:w},{originX:n,originY:l,overlayX:p,overlayY:s,offsetY:-w},{originX:r,originY:l,overlayX:b,overlayY:s,offsetY:-w}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments();return Yn(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:Pi(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(bn(s=>s!==this._menuItemInstance),bn(()=>this._menuOpen)):Pi(),n)}_handleMousedown(e){th(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const n=e.keyCode;(13===n||32===n)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===n&&"ltr"===this.dir||37===n&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(bn(e=>e===this._menuItemInstance&&!e.disabled),kv(0,Hg)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Kc&&this.menu._isAnimating?this.menu._animationDone.pipe(an(1),kv(0,Hg),Ut(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new ks(this.menu.templateRef,this._viewContainerRef)),this._portal}}return i.\u0275fac=function(e){return new(e||i)(N(wi),N(Ze),N(Tn),N(VT),N(Av,8),N($h,10),N(lr,8),N(Jr),N(at))},i.\u0275dir=fe({type:i,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(e,n){1&e&&F("click",function(o){return n._handleClick(o)})("mousedown",function(o){return n._handleMousedown(o)})("keydown",function(o){return n._handleKeydown(o)}),2&e&&lt("aria-expanded",n.menuOpen||null)("aria-controls",n.menuOpen?n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),i})(),pl=(()=>{class i extends Xz{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=It(i)))(n||i)}}(),i.\u0275dir=fe({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[Pe]}),i})(),zT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[qz],imports:[[Nn,nt,to,Os],Zr,nt]}),i})();const $z=["dialogPopup"],Kz=["hueSlider"],Qz=["alphaSlider"];function Zz(i,t){if(1&i&&Be(0,"div"),2&i){const e=M();Pm("arrow arrow-",e.cpUsePosition,""),rt("top",e.arrowTop,"px")}}function Jz(i,t){if(1&i){const e=te();D(0,"div",26),F("newValue",function(r){return I(e),M().onColorChange(r)})("dragStart",function(){return I(e),M().onDragStart("saturation-lightness")})("dragEnd",function(){return I(e),M().onDragEnd("saturation-lightness")}),Be(1,"div",13),k()}if(2&i){const e=M();rt("background-color",e.hueSliderColor),R("rgX",1)("rgY",1),O(1),rt("top",null==e.slider?null:e.slider.v,"px")("left",null==e.slider?null:e.slider.s,"px")}}function e6(i,t){if(1&i){const e=te();D(0,"button",27),F("click",function(r){I(e);const o=M();return o.onAddPresetColor(r,o.selectedColor)}),B(1),k()}if(2&i){const e=M();bs(e.cpAddColorButtonClass),R("disabled",e.cpPresetColors&&e.cpPresetColors.length>=e.cpMaxPresetColorsLength),O(1),Ct(" ",e.cpAddColorButtonText," ")}}function t6(i,t){1&i&&Be(0,"div",28)}function n6(i,t){if(1&i){const e=te();D(0,"input",34),F("keyup.enter",function(r){return I(e),M(2).onAcceptColor(r)})("newValue",function(r){return I(e),M(2).onAlphaInput(r)}),k()}if(2&i){const e=M(2);R("rg",1)("value",null==e.cmykText?null:e.cmykText.a)}}function i6(i,t){1&i&&(D(0,"div"),B(1,"A"),k())}function r6(i,t){if(1&i){const e=te();D(0,"div",29)(1,"div",30)(2,"input",31),F("keyup.enter",function(r){return I(e),M().onAcceptColor(r)})("newValue",function(r){return I(e),M().onCyanInput(r)}),k(),D(3,"input",31),F("keyup.enter",function(r){return I(e),M().onAcceptColor(r)})("newValue",function(r){return I(e),M().onMagentaInput(r)}),k(),D(4,"input",31),F("keyup.enter",function(r){return I(e),M().onAcceptColor(r)})("newValue",function(r){return I(e),M().onYellowInput(r)}),k(),D(5,"input",31),F("keyup.enter",function(r){return I(e),M().onAcceptColor(r)})("newValue",function(r){return I(e),M().onBlackInput(r)}),k(),G(6,n6,1,2,"input",32),k(),D(7,"div",30)(8,"div"),B(9,"C"),k(),D(10,"div"),B(11,"M"),k(),D(12,"div"),B(13,"Y"),k(),D(14,"div"),B(15,"K"),k(),G(16,i6,2,0,"div",33),k()()}if(2&i){const e=M();rt("display",3!==e.format?"none":"block"),O(2),R("rg",100)("value",null==e.cmykText?null:e.cmykText.c),O(1),R("rg",100)("value",null==e.cmykText?null:e.cmykText.m),O(1),R("rg",100)("value",null==e.cmykText?null:e.cmykText.y),O(1),R("rg",100)("value",null==e.cmykText?null:e.cmykText.k),O(1),R("ngIf","disabled"!==e.cpAlphaChannel),O(10),R("ngIf","disabled"!==e.cpAlphaChannel)}}function o6(i,t){if(1&i){const e=te();D(0,"input",34),F("keyup.enter",function(r){return I(e),M(2).onAcceptColor(r)})("newValue",function(r){return I(e),M(2).onAlphaInput(r)}),k()}if(2&i){const e=M(2);R("rg",1)("value",null==e.hslaText?null:e.hslaText.a)}}function s6(i,t){1&i&&(D(0,"div"),B(1,"A"),k())}function a6(i,t){if(1&i){const e=te();D(0,"div",35)(1,"div",30)(2,"input",36),F("keyup.enter",function(r){return I(e),M().onAcceptColor(r)})("newValue",function(r){return I(e),M().onHueInput(r)}),k(),D(3,"input",31),F("keyup.enter",function(r){return I(e),M().onAcceptColor(r)})("newValue",function(r){return I(e),M().onSaturationInput(r)}),k(),D(4,"input",31),F("keyup.enter",function(r){return I(e),M().onAcceptColor(r)})("newValue",function(r){return I(e),M().onLightnessInput(r)}),k(),G(5,o6,1,2,"input",32),k(),D(6,"div",30)(7,"div"),B(8,"H"),k(),D(9,"div"),B(10,"S"),k(),D(11,"div"),B(12,"L"),k(),G(13,s6,2,0,"div",33),k()()}if(2&i){const e=M();rt("display",2!==e.format?"none":"block"),O(2),R("rg",360)("value",null==e.hslaText?null:e.hslaText.h),O(1),R("rg",100)("value",null==e.hslaText?null:e.hslaText.s),O(1),R("rg",100)("value",null==e.hslaText?null:e.hslaText.l),O(1),R("ngIf","disabled"!==e.cpAlphaChannel),O(8),R("ngIf","disabled"!==e.cpAlphaChannel)}}function l6(i,t){if(1&i){const e=te();D(0,"input",34),F("keyup.enter",function(r){return I(e),M(2).onAcceptColor(r)})("newValue",function(r){return I(e),M(2).onAlphaInput(r)}),k()}if(2&i){const e=M(2);R("rg",1)("value",null==e.rgbaText?null:e.rgbaText.a)}}function c6(i,t){1&i&&(D(0,"div"),B(1,"A"),k())}function d6(i,t){if(1&i){const e=te();D(0,"div",37)(1,"div",30)(2,"input",38),F("keyup.enter",function(r){return I(e),M().onAcceptColor(r)})("newValue",function(r){return I(e),M().onRedInput(r)}),k(),D(3,"input",38),F("keyup.enter",function(r){return I(e),M().onAcceptColor(r)})("newValue",function(r){return I(e),M().onGreenInput(r)}),k(),D(4,"input",38),F("keyup.enter",function(r){return I(e),M().onAcceptColor(r)})("newValue",function(r){return I(e),M().onBlueInput(r)}),k(),G(5,l6,1,2,"input",32),k(),D(6,"div",30)(7,"div"),B(8,"R"),k(),D(9,"div"),B(10,"G"),k(),D(11,"div"),B(12,"B"),k(),G(13,c6,2,0,"div",33),k()()}if(2&i){const e=M();rt("display",1!==e.format?"none":"block"),O(2),R("rg",255)("value",null==e.rgbaText?null:e.rgbaText.r),O(1),R("rg",255)("value",null==e.rgbaText?null:e.rgbaText.g),O(1),R("rg",255)("value",null==e.rgbaText?null:e.rgbaText.b),O(1),R("ngIf","disabled"!==e.cpAlphaChannel),O(8),R("ngIf","disabled"!==e.cpAlphaChannel)}}function u6(i,t){if(1&i){const e=te();D(0,"input",34),F("keyup.enter",function(r){return I(e),M(2).onAcceptColor(r)})("newValue",function(r){return I(e),M(2).onAlphaInput(r)}),k()}if(2&i){const e=M(2);R("rg",1)("value",e.hexAlpha)}}function h6(i,t){1&i&&(D(0,"div"),B(1,"A"),k())}function f6(i,t){if(1&i){const e=te();D(0,"div",39)(1,"div",30)(2,"input",40),F("blur",function(){return I(e),M().onHexInput(null)})("keyup.enter",function(r){return I(e),M().onAcceptColor(r)})("newValue",function(r){return I(e),M().onHexInput(r)}),k(),G(3,u6,1,2,"input",32),k(),D(4,"div",30)(5,"div"),B(6,"Hex"),k(),G(7,h6,2,0,"div",33),k()()}if(2&i){const e=M();rt("display",0!==e.format?"none":"block"),Ot("hex-alpha","forced"===e.cpAlphaChannel),O(2),R("value",e.hexText),O(1),R("ngIf","forced"===e.cpAlphaChannel),O(4),R("ngIf","forced"===e.cpAlphaChannel)}}function p6(i,t){if(1&i){const e=te();D(0,"input",34),F("keyup.enter",function(r){return I(e),M(2).onAcceptColor(r)})("newValue",function(r){return I(e),M(2).onAlphaInput(r)}),k()}if(2&i){const e=M(2);R("rg",1)("value",null==e.hslaText?null:e.hslaText.a)}}function m6(i,t){if(1&i){const e=te();D(0,"div",41)(1,"div",30)(2,"input",31),F("keyup.enter",function(r){return I(e),M().onAcceptColor(r)})("newValue",function(r){return I(e),M().onValueInput(r)}),k(),G(3,p6,1,2,"input",32),k(),D(4,"div",30)(5,"div"),B(6,"V"),k(),D(7,"div"),B(8,"A"),k()()()}if(2&i){const e=M();O(2),R("rg",100)("value",null==e.hslaText?null:e.hslaText.l),O(1),R("ngIf","disabled"!==e.cpAlphaChannel)}}function g6(i,t){if(1&i){const e=te();D(0,"div",42)(1,"span",43),F("click",function(){return I(e),M().onFormatToggle(-1)}),k(),D(2,"span",43),F("click",function(){return I(e),M().onFormatToggle(1)}),k()()}}function _6(i,t){if(1&i){const e=te();D(0,"span",50),F("click",function(r){I(e);const o=M().$implicit;return M(3).onRemovePresetColor(r,o)}),k()}2&i&&bs(M(4).cpRemoveColorButtonClass)}function v6(i,t){if(1&i){const e=te();D(0,"div",48),F("click",function(){const o=I(e).$implicit;return M(3).setColorFromString(o)}),G(1,_6,1,3,"span",49),k()}if(2&i){const e=t.$implicit,n=M(3);rt("background-color",e),O(1),R("ngIf",n.cpAddColorButton)}}function b6(i,t){if(1&i&&(D(0,"div"),G(1,v6,2,3,"div",47),k()),2&i){const e=M(2);bs(e.cpPresetColorsClass),O(1),R("ngForOf",e.cpPresetColors)}}function y6(i,t){if(1&i&&(D(0,"div"),B(1),k()),2&i){const e=M(2);bs(e.cpPresetEmptyMessageClass),O(1),Qn(e.cpPresetEmptyMessage)}}function C6(i,t){if(1&i&&(D(0,"div",44),Be(1,"hr"),D(2,"div",45),B(3),k(),G(4,b6,2,4,"div",46),G(5,y6,2,4,"div",46),k()),2&i){const e=M();O(3),Qn(e.cpPresetLabel),O(1),R("ngIf",null==e.cpPresetColors?null:e.cpPresetColors.length),O(1),R("ngIf",!(null!=e.cpPresetColors&&e.cpPresetColors.length)&&e.cpAddColorButton)}}function x6(i,t){if(1&i){const e=te();D(0,"button",53),F("click",function(r){return I(e),M(2).onCancelColor(r)}),B(1),k()}if(2&i){const e=M(2);bs(e.cpCancelButtonClass),O(1),Qn(e.cpCancelButtonText)}}function w6(i,t){if(1&i){const e=te();D(0,"button",53),F("click",function(r){return I(e),M(2).onAcceptColor(r)}),B(1),k()}if(2&i){const e=M(2);bs(e.cpOKButtonClass),O(1),Qn(e.cpOKButtonText)}}function D6(i,t){if(1&i&&(D(0,"div",51),G(1,x6,2,4,"button",52),G(2,w6,2,4,"button",52),k()),2&i){const e=M();O(1),R("ngIf",e.cpCancelButton),O(1),R("ngIf",e.cpOKButton)}}var ui=(()=>{return(i=ui||(ui={}))[i.HEX=0]="HEX",i[i.RGBA=1]="RGBA",i[i.HSLA=2]="HSLA",i[i.CMYK=3]="CMYK",ui;var i})();class wo{constructor(t,e,n,r){this.r=t,this.g=e,this.b=n,this.a=r}}class Kh{constructor(t,e,n,r){this.h=t,this.s=e,this.v=n,this.a=r}}class Us{constructor(t,e,n,r){this.h=t,this.s=e,this.l=n,this.a=r}}class Qc{constructor(t,e,n,r,o=1){this.c=t,this.m=e,this.y=n,this.k=r,this.a=o}}let T6=(()=>{class i{constructor(){this.newValue=new Te}inputChange(e){const n=e.target.value;if(void 0===this.rg)this.newValue.emit(n);else{const r=parseFloat(n);this.newValue.emit({v:r,rg:this.rg})}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=fe({type:i,selectors:[["","text",""]],hostBindings:function(e,n){1&e&&F("input",function(o){return n.inputChange(o)})},inputs:{rg:"rg",text:"text"},outputs:{newValue:"newValue"}}),i})(),E6=(()=>{class i{constructor(e){this.elRef=e,this.dragEnd=new Te,this.dragStart=new Te,this.newValue=new Te,this.listenerMove=n=>this.move(n),this.listenerStop=()=>this.stop()}mouseDown(e){this.start(e)}touchStart(e){this.start(e)}move(e){e.preventDefault(),this.setCursor(e)}start(e){this.setCursor(e),e.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()}stop(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()}getX(e){const n=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageX?e.pageX:e.touches[0].pageX)-n.left-window.pageXOffset}getY(e){const n=this.elRef.nativeElement.getBoundingClientRect();return(void 0!==e.pageY?e.pageY:e.touches[0].pageY)-n.top-window.pageYOffset}setCursor(e){const n=this.elRef.nativeElement.offsetWidth,r=this.elRef.nativeElement.offsetHeight,o=Math.max(0,Math.min(this.getX(e),n)),s=Math.max(0,Math.min(this.getY(e),r));void 0!==this.rgX&&void 0!==this.rgY?this.newValue.emit({s:o/n,v:1-s/r,rgX:this.rgX,rgY:this.rgY}):void 0===this.rgX&&void 0!==this.rgY?this.newValue.emit({v:s/r,rgY:this.rgY}):void 0!==this.rgX&&void 0===this.rgY&&this.newValue.emit({v:o/n,rgX:this.rgX})}}return i.\u0275fac=function(e){return new(e||i)(N(Ze))},i.\u0275dir=fe({type:i,selectors:[["","slider",""]],hostBindings:function(e,n){1&e&&F("mousedown",function(o){return n.mouseDown(o)})("touchstart",function(o){return n.touchStart(o)})},inputs:{rgX:"rgX",rgY:"rgY",slider:"slider"},outputs:{dragEnd:"dragEnd",dragStart:"dragStart",newValue:"newValue"}}),i})();class WT{constructor(t,e,n,r){this.h=t,this.s=e,this.v=n,this.a=r}}class GT{constructor(t,e,n,r){this.h=t,this.s=e,this.v=n,this.a=r}}let Iv=(()=>{class i{constructor(){this.active=null}setActive(e){this.active&&this.active!==e&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=e}hsva2hsla(e){const n=e.h,r=e.s,o=e.v,s=e.a;if(0===o)return new Us(n,0,0,s);if(0===r&&1===o)return new Us(n,1,1,s);{const a=o*(2-r)/2;return new Us(n,o*r/(1-Math.abs(2*a-1)),a,s)}}hsla2hsva(e){const n=Math.min(e.h,1),r=Math.min(e.s,1),o=Math.min(e.l,1),s=Math.min(e.a,1);if(0===o)return new Kh(n,0,0,s);{const a=o+r*(1-Math.abs(2*o-1))/2;return new Kh(n,2*(a-o)/a,a,s)}}hsvaToRgba(e){let n,r,o;const s=e.h,a=e.s,l=e.v,p=e.a,b=Math.floor(6*s),w=6*s-b,A=l*(1-a),P=l*(1-w*a),V=l*(1-(1-w)*a);switch(b%6){case 0:n=l,r=V,o=A;break;case 1:n=P,r=l,o=A;break;case 2:n=A,r=l,o=V;break;case 3:n=A,r=P,o=l;break;case 4:n=V,r=A,o=l;break;case 5:n=l,r=A,o=P;break;default:n=0,r=0,o=0}return new wo(n,r,o,p)}cmykToRgb(e){return new wo((1-e.c)*(1-e.k),(1-e.m)*(1-e.k),(1-e.y)*(1-e.k),e.a)}rgbaToCmyk(e){const n=1-Math.max(e.r,e.g,e.b);return 1===n?new Qc(0,0,0,1,e.a):new Qc((1-e.r-n)/(1-n),(1-e.g-n)/(1-n),(1-e.b-n)/(1-n),n,e.a)}rgbaToHsva(e){let n,r;const o=Math.min(e.r,1),s=Math.min(e.g,1),a=Math.min(e.b,1),l=Math.min(e.a,1),p=Math.max(o,s,a),b=Math.min(o,s,a),w=p,A=p-b;if(r=0===p?0:A/p,p===b)n=0;else{switch(p){case o:n=(s-a)/A+(s<a?6:0);break;case s:n=(a-o)/A+2;break;case a:n=(o-s)/A+4;break;default:n=0}n/=6}return new Kh(n,r,w,l)}rgbaToHex(e,n){let r="#"+(16777216|e.r<<16|e.g<<8|e.b).toString(16).substr(1);return n&&(r+=(256|Math.round(255*e.a)).toString(16).substr(1)),r}normalizeCMYK(e){return new Qc(e.c/100,e.m/100,e.y/100,e.k/100,e.a)}denormalizeCMYK(e){return new Qc(Math.floor(100*e.c),Math.floor(100*e.m),Math.floor(100*e.y),Math.floor(100*e.k),e.a)}denormalizeRGBA(e){return new wo(Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b),e.a)}stringToHsva(e="",n=!1){let r=null;e=(e||"").toLowerCase();const o=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(s){return new wo(parseInt(s[2],10)/255,parseInt(s[3],10)/255,parseInt(s[4],10)/255,isNaN(parseFloat(s[5]))?1:parseFloat(s[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(s){return new Us(parseInt(s[2],10)/360,parseInt(s[3],10)/100,parseInt(s[4],10)/100,isNaN(parseFloat(s[5]))?1:parseFloat(s[5]))}}];o.push(n?{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(s){return new wo(parseInt(s[1],16)/255,parseInt(s[2],16)/255,parseInt(s[3],16)/255,parseInt(s[4]||"FF",16)/255)}}:{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(s){return new wo(parseInt(s[1],16)/255,parseInt(s[2],16)/255,parseInt(s[3],16)/255,1)}}),o.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(s){return new wo(parseInt(s[1]+s[1],16)/255,parseInt(s[2]+s[2],16)/255,parseInt(s[3]+s[3],16)/255,1)}});for(const s in o)if(o.hasOwnProperty(s)){const a=o[s],l=a.re.exec(e),p=l&&a.parse(l);if(p)return p instanceof wo?r=this.rgbaToHsva(p):p instanceof Us&&(r=this.hsla2hsva(p)),r}return r}outputFormat(e,n,r){switch("auto"===n&&(n=e.a<1?"rgba":"hex"),n){case"hsla":const o=this.hsva2hsla(e),s=new Us(Math.round(360*o.h),Math.round(100*o.s),Math.round(100*o.l),Math.round(100*o.a)/100);return e.a<1||"always"===r?"hsla("+s.h+","+s.s+"%,"+s.l+"%,"+s.a+")":"hsl("+s.h+","+s.s+"%,"+s.l+"%)";case"rgba":const a=this.denormalizeRGBA(this.hsvaToRgba(e));return e.a<1||"always"===r?"rgba("+a.r+","+a.g+","+a.b+","+Math.round(100*a.a)/100+")":"rgb("+a.r+","+a.g+","+a.b+")";default:const l="always"===r||"forced"===r;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(e)),l)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})(),k6=(()=>{class i{constructor(e,n,r){this.elRef=e,this.cdRef=n,this.service=r,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[ui.HEX,ui.RGBA,ui.HSLA,ui.CMYK],this.useRootViewContainer=!1}handleEsc(e){this.show&&"popup"===this.cpDialogDisplay&&this.onCancelColor(e)}handleEnter(e){this.show&&"popup"===this.cpDialogDisplay&&this.onAcceptColor(e)}ngOnInit(){this.slider=new WT(0,0,0,0),this.sliderDimMax=new GT(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.format=this.cpCmykEnabled?ui.CMYK:"rgba"===this.cpOutputFormat?ui.RGBA:"hsla"===this.cpOutputFormat?ui.HSLA:ui.HEX,this.listenerMouseDown=r=>{this.onMouseDown(r)},this.listenerResize=()=>{this.onResize()},this.openDialog(this.initialColor,!1)}ngOnDestroy(){this.closeDialog()}ngAfterViewInit(){230===this.cpWidth&&"inline"!==this.cpDialogDisplay||(this.sliderDimMax=new GT(this.hueSlider.nativeElement.offsetWidth||140,this.cpWidth,130,this.alphaSlider.nativeElement.offsetWidth||140),this.updateColorPicker(!1),this.cdRef.detectChanges())}openDialog(e,n=!0){this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(e),this.setColorFromString(e,n),this.openColorPicker()}closeDialog(){this.closeColorPicker()}setupDialog(e,n,r,o,s,a,l,p,b,w,A,P,V,q,Z,re,J,ve,be,Qe,_t,Lt,gn,Xt,cn,Pn,Rn,xn,pi,Fi,Ve,et,ot,Bt,Vn,Mi){this.setInitialColor(r),this.setColorMode(p),this.isIE10=10===function M6(){let i="";"undefined"!=typeof navigator&&(i=navigator.userAgent.toLowerCase());const t=i.indexOf("msie ");return t>0&&parseInt(i.substring(t+5,i.indexOf(".",t)),10)}(),this.directiveInstance=e,this.directiveElementRef=n,this.cpDisableInput=P,this.cpCmykEnabled=b,this.cpAlphaChannel=w,this.cpOutputFormat=A,this.cpDialogDisplay=a,this.cpIgnoredElements=V,this.cpSaveClickOutside=q,this.cpCloseClickOutside=Z,this.useRootViewContainer=re,this.width=this.cpWidth=parseInt(o,10),this.height=this.cpHeight=parseInt(s,10),this.cpPosition=J,this.cpPositionOffset=parseInt(ve,10),this.cpOKButton=Pn,this.cpOKButtonText=xn,this.cpOKButtonClass=Rn,this.cpCancelButton=pi,this.cpCancelButtonText=Ve,this.cpCancelButtonClass=Fi,this.fallbackColor=l||"#fff",this.setPresetConfig(Qe,_t),this.cpPresetColorsClass=Lt,this.cpMaxPresetColorsLength=gn,this.cpPresetEmptyMessage=Xt,this.cpPresetEmptyMessageClass=cn,this.cpAddColorButton=et,this.cpAddColorButtonText=Bt,this.cpAddColorButtonClass=ot,this.cpRemoveColorButtonClass=Vn,this.cpTriggerElement=Mi,be||(this.dialogArrowOffset=0),"inline"===a&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),"hex"===A&&"always"!==w&&"forced"!==w&&(this.cpAlphaChannel="disabled")}setColorMode(e){switch(e.toString().toUpperCase()){case"1":case"C":case"COLOR":default:this.cpColorMode=1;break;case"2":case"G":case"GRAYSCALE":this.cpColorMode=2;break;case"3":case"P":case"PRESETS":this.cpColorMode=3}}setInitialColor(e){this.initialColor=e}setPresetConfig(e,n){this.cpPresetLabel=e,this.cpPresetColors=n}setColorFromString(e,n=!0,r=!0){let o;"always"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel?(o=this.service.stringToHsva(e,!0),!o&&!this.hsva&&(o=this.service.stringToHsva(e,!1))):o=this.service.stringToHsva(e,!1),!o&&!this.hsva&&(o=this.service.stringToHsva(this.fallbackColor,!1)),o&&(this.hsva=o,this.sliderH=this.hsva.h,"hex"===this.cpOutputFormat&&"disabled"===this.cpAlphaChannel&&(this.hsva.a=1),this.updateColorPicker(n,r))}onResize(){"fixed"===this.position?this.setDialogPosition():"inline"!==this.cpDialogDisplay&&this.closeColorPicker()}onDragEnd(e){this.directiveInstance.sliderDragEnd({slider:e,color:this.outputColor})}onDragStart(e){this.directiveInstance.sliderDragStart({slider:e,color:this.outputColor})}onMouseDown(e){this.show&&!this.isIE10&&"popup"===this.cpDialogDisplay&&e.target!==this.directiveElementRef.nativeElement&&!this.isDescendant(this.elRef.nativeElement,e.target)&&!this.isDescendant(this.directiveElementRef.nativeElement,e.target)&&0===this.cpIgnoredElements.filter(n=>n===e.target).length&&(this.cpSaveClickOutside?this.directiveInstance.colorSelected(this.outputColor):(this.hsva=null,this.setColorFromString(this.initialColor,!1),this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor),this.directiveInstance.colorCanceled()),this.cpCloseClickOutside&&this.closeColorPicker())}onAcceptColor(e){e.stopPropagation(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor),"popup"===this.cpDialogDisplay&&this.closeColorPicker()}onCancelColor(e){this.hsva=null,e.stopPropagation(),this.directiveInstance.colorCanceled(),this.setColorFromString(this.initialColor,!0),"popup"===this.cpDialogDisplay&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker())}onFormatToggle(e){const n=this.dialogInputFields.length-(this.cpCmykEnabled?0:1),r=((this.dialogInputFields.indexOf(this.format)+e)%n+n)%n;this.format=this.dialogInputFields[r]}onColorChange(e){this.hsva.s=e.s/e.rgX,this.hsva.v=e.v/e.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})}onHueChange(e){this.hsva.h=e.v/e.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})}onValueChange(e){this.hsva.v=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})}onAlphaChange(e){this.hsva.a=e.v/e.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})}onHexInput(e){if(null===e)this.updateColorPicker();else{e&&"#"!==e[0]&&(e="#"+e);let n=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;"always"===this.cpAlphaChannel&&(n=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);const r=n.test(e);r&&(e.length<5&&(e="#"+e.substring(1).split("").map(o=>o+o).join("")),"forced"===this.cpAlphaChannel&&(e+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(e,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:r,value:e,color:this.outputColor})}}onRedInput(e){const n=this.service.hsvaToRgba(this.hsva),r=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;r&&(n.r=e.v/e.rg,this.hsva=this.service.rgbaToHsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:r,value:n.r,color:this.outputColor})}onBlueInput(e){const n=this.service.hsvaToRgba(this.hsva),r=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;r&&(n.b=e.v/e.rg,this.hsva=this.service.rgbaToHsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:r,value:n.b,color:this.outputColor})}onGreenInput(e){const n=this.service.hsvaToRgba(this.hsva),r=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;r&&(n.g=e.v/e.rg,this.hsva=this.service.rgbaToHsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:r,value:n.g,color:this.outputColor})}onHueInput(e){const n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(this.hsva.h=e.v/e.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:n,value:this.hsva.h,color:this.outputColor})}onValueInput(e){const n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(this.hsva.v=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:n,value:this.hsva.v,color:this.outputColor})}onAlphaInput(e){const n=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;n&&(this.hsva.a=e.v/e.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:n,value:this.hsva.a,color:this.outputColor})}onLightnessInput(e){const n=this.service.hsva2hsla(this.hsva),r=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;r&&(n.l=e.v/e.rg,this.hsva=this.service.hsla2hsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:r,value:n.l,color:this.outputColor})}onSaturationInput(e){const n=this.service.hsva2hsla(this.hsva),r=!isNaN(e.v)&&e.v>=0&&e.v<=e.rg;r&&(n.s=e.v/e.rg,this.hsva=this.service.hsla2hsva(n),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:r,value:n.s,color:this.outputColor})}onCyanInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.c=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"cyan",valid:!0,value:this.cmyk.c,color:this.outputColor})}onMagentaInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.m=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"magenta",valid:!0,value:this.cmyk.m,color:this.outputColor})}onYellowInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.y=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"yellow",valid:!0,value:this.cmyk.y,color:this.outputColor})}onBlackInput(e){!isNaN(e.v)&&e.v>=0&&e.v<=e.rg&&(this.cmyk.k=e.v,this.updateColorPicker(!1,!0,!0)),this.directiveInstance.inputChanged({input:"black",valid:!0,value:this.cmyk.k,color:this.outputColor})}onAddPresetColor(e,n){e.stopPropagation(),this.cpPresetColors.filter(r=>r===n).length||(this.cpPresetColors=this.cpPresetColors.concat(n),this.directiveInstance.presetColorsChanged(this.cpPresetColors))}onRemovePresetColor(e,n){e.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter(r=>r!==n),this.directiveInstance.presetColorsChanged(this.cpPresetColors)}openColorPicker(){this.show||(this.show=!0,this.hidden=!0,setTimeout(()=>{this.hidden=!1,this.setDialogPosition(),this.cdRef.detectChanges()},0),this.directiveInstance.stateChanged(!0),this.isIE10||(document.addEventListener("mousedown",this.listenerMouseDown),document.addEventListener("touchstart",this.listenerMouseDown)),window.addEventListener("resize",this.listenerResize))}closeColorPicker(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||(document.removeEventListener("mousedown",this.listenerMouseDown),document.removeEventListener("touchstart",this.listenerMouseDown)),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())}updateColorPicker(e=!0,n=!0,r=!1){if(this.sliderDimMax){let o,s,a;2===this.cpColorMode&&(this.hsva.s=0);const l=this.outputColor;if(s=this.service.hsva2hsla(this.hsva),this.cpCmykEnabled?(r?(a=this.service.cmykToRgb(this.service.normalizeCMYK(this.cmyk)),this.hsva=this.service.rgbaToHsva(a)):(a=this.service.hsvaToRgba(this.hsva),this.cmyk=this.service.denormalizeCMYK(this.service.rgbaToCmyk(a))),a=this.service.denormalizeRGBA(a),this.sliderH=this.hsva.h):a=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),o=this.service.denormalizeRGBA(this.service.hsvaToRgba(new Kh(this.sliderH||this.hsva.h,1,1,1))),n&&(this.hslaText=new Us(Math.round(360*s.h),Math.round(100*s.s),Math.round(100*s.l),Math.round(100*s.a)/100),this.rgbaText=new wo(a.r,a.g,a.b,Math.round(100*a.a)/100),this.cpCmykEnabled&&(this.cmykText=new Qc(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k,Math.round(100*this.cmyk.a)/100)),this.hexText=this.service.rgbaToHex(a,"always"===this.cpAlphaChannel),this.hexAlpha=this.rgbaText.a),"auto"===this.cpOutputFormat&&this.format!==ui.RGBA&&this.format!==ui.CMYK&&this.hsva.a<1&&(this.format=this.hsva.a<1?ui.RGBA:ui.HEX),this.hueSliderColor="rgb("+o.r+","+o.g+","+o.b+")",this.alphaSliderColor="rgb("+a.r+","+a.g+","+a.b+")",this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.format!==ui.CMYK)this.cmykColor="";else if("always"===this.cpAlphaChannel||"enabled"===this.cpAlphaChannel||"forced"===this.cpAlphaChannel){const p=Math.round(100*this.cmyk.a)/100;this.cmykColor=`cmyka(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k},${p})`}else this.cmykColor=`cmyk(${this.cmyk.c},${this.cmyk.m},${this.cmyk.y},${this.cmyk.k})`;this.slider=new WT((this.sliderH||this.hsva.h)*this.sliderDimMax.h-8,this.hsva.s*this.sliderDimMax.s-8,(1-this.hsva.v)*this.sliderDimMax.v-8,this.hsva.a*this.sliderDimMax.a-8),e&&l!==this.outputColor&&(this.cpCmykEnabled&&this.directiveInstance.cmykChanged(this.cmykColor),this.directiveInstance.colorChanged(this.outputColor))}}setDialogPosition(){if("inline"===this.cpDialogDisplay)this.position="relative";else{let r,e="static",n="",o=null,s=null,a=this.directiveElementRef.nativeElement.parentNode;const l=this.dialogElement.nativeElement.offsetHeight;for(;null!==a&&"HTML"!==a.tagName;){if(r=window.getComputedStyle(a),e=r.getPropertyValue("position"),n=r.getPropertyValue("transform"),"static"!==e&&null===o&&(o=a),n&&"none"!==n&&null===s&&(s=a),"fixed"===e){o=s;break}a=a.parentNode}const p=this.createDialogBox(this.directiveElementRef.nativeElement,"fixed"!==e);if(this.useRootViewContainer||"fixed"===e&&(!o||o instanceof HTMLUnknownElement))this.top=p.top,this.left=p.left;else{null===o&&(o=a);const w=this.createDialogBox(o,"fixed"!==e);this.top=p.top-w.top,this.left=p.left-w.left}"fixed"===e&&(this.position="fixed");let b=this.cpPosition;"auto"===this.cpPosition&&(b=function S6(i,t){let e="right",n="bottom";const{height:r,width:o}=i,{top:s,left:a}=t,l=s+t.height,p=a+t.width,b=s-r<0,w=l+r>(window.innerHeight||document.documentElement.clientHeight),A=a-o<0,P=p+o>(window.innerWidth||document.documentElement.clientWidth);return w&&(n="top"),b&&(n="bottom"),A&&(e="right"),P&&(e="left"),b&&w&&A&&P?["left","right","top","bottom"].reduce((Z,re)=>i[Z]>i[re]?Z:re):A&&P?b?"bottom":w||s>l?"top":"bottom":b&&w?A?"right":P||a>p?"left":"right":`${n}-${e}`}(this.dialogElement.nativeElement.getBoundingClientRect(),this.cpTriggerElement.nativeElement.getBoundingClientRect())),"top"===b?(this.arrowTop=l-1,this.top-=l+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*p.width-this.dialogArrowOffset):"bottom"===b?(this.top+=p.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*p.width-this.dialogArrowOffset):"top-left"===b||"left-top"===b?(this.top-=l-p.height+p.height*this.cpPositionOffset/100,this.left-=this.cpWidth+this.dialogArrowSize-2-this.dialogArrowOffset):"top-right"===b||"right-top"===b?(this.top-=l-p.height+p.height*this.cpPositionOffset/100,this.left+=p.width+this.dialogArrowSize-2-this.dialogArrowOffset):"left"===b||"bottom-left"===b||"left-bottom"===b?(this.top+=p.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):(this.top+=p.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=p.width+this.dialogArrowSize-2),this.cpUsePosition=b}}isDescendant(e,n){let r=n.parentNode;for(;null!==r;){if(r===e)return!0;r=r.parentNode}return!1}createDialogBox(e,n){return{top:e.getBoundingClientRect().top+(n?window.pageYOffset:0),left:e.getBoundingClientRect().left+(n?window.pageXOffset:0),width:e.offsetWidth,height:e.offsetHeight}}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(Zt),N(Iv))},i.\u0275cmp=st({type:i,selectors:[["color-picker"]],viewQuery:function(e,n){if(1&e&&(xe($z,7),xe(Kz,7),xe(Qz,7)),2&e){let r;oe(r=se())&&(n.dialogElement=r.first),oe(r=se())&&(n.hueSlider=r.first),oe(r=se())&&(n.alphaSlider=r.first)}},hostBindings:function(e,n){1&e&&F("keyup.esc",function(o){return n.handleEsc(o)},!1,Np)("keyup.enter",function(o){return n.handleEnter(o)},!1,Np)},decls:28,vars:47,consts:[[1,"color-picker",3,"click"],["dialogPopup",""],[3,"class","top",4,"ngIf"],["class","saturation-lightness",3,"slider","rgX","rgY","background-color","newValue","dragStart","dragEnd",4,"ngIf"],[1,"hue-alpha","box"],[1,"left"],[1,"selected-color-background"],[1,"selected-color"],["type","button",3,"class","disabled","click",4,"ngIf"],[1,"right"],["style","height: 16px;",4,"ngIf"],[1,"hue",3,"slider","rgX","newValue","dragStart","dragEnd"],["hueSlider",""],[1,"cursor"],[1,"value",3,"slider","rgX","newValue","dragStart","dragEnd"],["valueSlider",""],[1,"alpha",3,"slider","rgX","newValue","dragStart","dragEnd"],["alphaSlider",""],["class","cmyk-text",3,"display",4,"ngIf"],["class","hsla-text",3,"display",4,"ngIf"],["class","rgba-text",3,"display",4,"ngIf"],["class","hex-text",3,"hex-alpha","display",4,"ngIf"],["class","value-text",4,"ngIf"],["class","type-policy",4,"ngIf"],["class","preset-area",4,"ngIf"],["class","button-area",4,"ngIf"],[1,"saturation-lightness",3,"slider","rgX","rgY","newValue","dragStart","dragEnd"],["type","button",3,"disabled","click"],[2,"height","16px"],[1,"cmyk-text"],[1,"box"],["type","number","pattern","[0-9]*","min","0","max","100",3,"text","rg","value","keyup.enter","newValue"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue",4,"ngIf"],[4,"ngIf"],["type","number","pattern","[0-9]+([\\.,][0-9]{1,2})?","min","0","max","1","step","0.1",3,"text","rg","value","keyup.enter","newValue"],[1,"hsla-text"],["type","number","pattern","[0-9]*","min","0","max","360",3,"text","rg","value","keyup.enter","newValue"],[1,"rgba-text"],["type","number","pattern","[0-9]*","min","0","max","255",3,"text","rg","value","keyup.enter","newValue"],[1,"hex-text"],[3,"text","value","blur","keyup.enter","newValue"],[1,"value-text"],[1,"type-policy"],[1,"type-policy-arrow",3,"click"],[1,"preset-area"],[1,"preset-label"],[3,"class",4,"ngIf"],["class","preset-color",3,"backgroundColor","click",4,"ngFor","ngForOf"],[1,"preset-color",3,"click"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"button-area"],["type","button",3,"class","click",4,"ngIf"],["type","button",3,"click"]],template:function(e,n){1&e&&(D(0,"div",0,1),F("click",function(o){return o.stopPropagation()}),G(2,Zz,1,5,"div",2),G(3,Jz,2,8,"div",3),D(4,"div",4)(5,"div",5),Be(6,"div",6)(7,"div",7),G(8,e6,2,5,"button",8),k(),D(9,"div",9),G(10,t6,1,0,"div",10),D(11,"div",11,12),F("newValue",function(o){return n.onHueChange(o)})("dragStart",function(){return n.onDragStart("hue")})("dragEnd",function(){return n.onDragEnd("hue")}),Be(13,"div",13),k(),D(14,"div",14,15),F("newValue",function(o){return n.onValueChange(o)})("dragStart",function(){return n.onDragStart("value")})("dragEnd",function(){return n.onDragEnd("value")}),Be(16,"div",13),k(),D(17,"div",16,17),F("newValue",function(o){return n.onAlphaChange(o)})("dragStart",function(){return n.onDragStart("alpha")})("dragEnd",function(){return n.onDragEnd("alpha")}),Be(19,"div",13),k()()(),G(20,r6,17,12,"div",18),G(21,a6,14,10,"div",19),G(22,d6,14,10,"div",20),G(23,f6,8,7,"div",21),G(24,m6,9,3,"div",22),G(25,g6,3,0,"div",23),G(26,C6,6,3,"div",24),G(27,D6,3,2,"div",25),k()),2&e&&(rt("display",n.show?"block":"none")("visibility",n.hidden?"hidden":"visible")("top",n.top,"px")("left",n.left,"px")("position",n.position)("height",n.cpHeight,"px")("width",n.cpWidth,"px"),Ot("open",n.show),O(2),R("ngIf","popup"==n.cpDialogDisplay),O(1),R("ngIf",1===(n.cpColorMode||1)),O(4),rt("background-color",n.selectedColor),O(1),R("ngIf",n.cpAddColorButton),O(2),R("ngIf","disabled"===n.cpAlphaChannel),O(1),rt("display",1===(n.cpColorMode||1)?"block":"none"),R("rgX",1),O(2),rt("left",null==n.slider?null:n.slider.h,"px"),O(1),rt("display",2===(n.cpColorMode||1)?"block":"none"),R("rgX",1),O(2),rt("right",null==n.slider?null:n.slider.v,"px"),O(1),rt("display","disabled"===n.cpAlphaChannel?"none":"block")("background-color",n.alphaSliderColor),R("rgX",1),O(2),rt("left",null==n.slider?null:n.slider.a,"px"),O(1),R("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),O(1),R("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),O(1),R("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),O(1),R("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),O(1),R("ngIf",!n.cpDisableInput&&2===(n.cpColorMode||1)),O(1),R("ngIf",!n.cpDisableInput&&1===(n.cpColorMode||1)),O(1),R("ngIf",(null==n.cpPresetColors?null:n.cpPresetColors.length)||n.cpAddColorButton),O(1),R("ngIf",n.cpOKButton||n.cpCancelButton))},directives:[ni,E6,T6,Qr],styles:['.color-picker{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;background-color:#fff;border:1px solid #777;cursor:default;height:auto;position:absolute;user-select:none;width:230px;z-index:1000}.color-picker *{box-sizing:border-box;font-size:11px;margin:0}.color-picker input{color:#000;font-size:13px;height:26px;min-width:0;text-align:center;width:0}.color-picker input:-moz-submit-invalid,.color-picker input:-moz-ui-invalid,.color-picker input:invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.color-picker .arrow{border-style:solid;height:0;position:absolute;width:0;z-index:999999}.color-picker .arrow.arrow-top{border-color:#777 transparent transparent;border-width:10px 5px;left:8px}.color-picker .arrow.arrow-bottom{border-color:transparent transparent #777;border-width:10px 5px;left:8px;top:-20px}.color-picker .arrow.arrow-left-top,.color-picker .arrow.arrow-top-left{border-color:transparent transparent transparent #777;border-width:5px 10px;bottom:8px;right:-21px}.color-picker .arrow.arrow-right-top,.color-picker .arrow.arrow-top-right{border-color:transparent #777 transparent transparent;border-width:5px 10px;bottom:8px;left:-20px}.color-picker .arrow.arrow-bottom-left,.color-picker .arrow.arrow-left,.color-picker .arrow.arrow-left-bottom{border-color:transparent transparent transparent #777;border-width:5px 10px;right:-21px;top:8px}.color-picker .arrow.arrow-bottom-right,.color-picker .arrow.arrow-right,.color-picker .arrow.arrow-right-bottom{border-color:transparent #777 transparent transparent;border-width:5px 10px;left:-20px;top:8px}.color-picker .cursor{border:2px solid #222;border-radius:50%;cursor:default;height:16px;position:relative;width:16px}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{padding:16px 8px;position:relative}.color-picker .right{flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .button-area button{margin-left:8px}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{color:#555;font-size:11px;overflow:hidden;padding:4px;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%}.color-picker .preset-area .preset-color{border:1px solid #a9a9a9;border-radius:25%;cursor:pointer;display:inline-block;height:18px;margin:4px 6px 8px;position:relative;width:18px}.color-picker .preset-area .preset-empty-message{font-style:italic;margin-bottom:8px;margin-top:4px;min-height:18px;text-align:center}.color-picker .hex-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{clear:left;color:#555;flex:1 1 auto;float:left;text-align:center}.color-picker .hex-text .box input{border:1px solid #a9a9a9;flex:1 1 auto;padding:1px}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .cmyk-text,.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{font-size:11px;padding:4px 8px;width:100%}.color-picker .cmyk-text .box,.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .cmyk-text .box div,.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{color:#555;flex:1 1 auto;margin-right:8px;text-align:center}.color-picker .cmyk-text .box div:last-child,.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .cmyk-text .box input,.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{border:1px solid #a9a9a9;flex:1;float:left;margin:0 8px 0 0;padding:1px}.color-picker .cmyk-text .box input:last-child,.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwkUFWbCCAAAAFxJREFUaN7t0kEKg0AQAME2x83/n2qu5qCgD1iDhCoYdpnbQC9bbY1qVO/jvc6k3ad91s7/7F1/csgPrujuQ17BDYSFsBAWwgJhISyEBcJCWAgLhIWwEBYIi2f7Ar/1TCgFH2X9AAAAAElFTkSuQmCC");direction:ltr}.color-picker .hue,.color-picker .value{background-size:100% 100%;border:none;cursor:pointer;height:16px;margin-bottom:16px;width:100%}.color-picker .value{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAACTklEQVR42u3SYUcrABhA4U2SkmRJMmWSJklKJiWZZpKUJJskKUmaTFImKZOUzMySpGRmliRNJilJSpKSJEtmSpIpmWmSdO736/6D+x7OP3gUCoWCv1cqlSQlJZGcnExKSgqpqamkpaWRnp5ORkYGmZmZqFQqsrKyyM7OJicnh9zcXNRqNXl5eeTn56PRaCgoKKCwsJCioiK0Wi3FxcWUlJRQWlpKWVkZ5eXlVFRUUFlZiU6no6qqiurqampqaqitraWurg69Xk99fT0GgwGj0UhDQwONjY00NTXR3NxMS0sLra2ttLW10d7ejslkwmw209HRQWdnJ11dXXR3d9PT00Nvby99fX309/czMDDA4OAgFouFoaEhrFYrw8PDjIyMMDo6ytjYGDabjfHxcSYmJpicnGRqagq73c709DQzMzPMzs4yNzfH/Pw8DocDp9OJy+XC7XazsLDA4uIiS0tLLC8vs7KywurqKmtra3g8HrxeLz6fD7/fz/r6OhsbG2xubrK1tcX29jaBQICdnR2CwSC7u7vs7e2xv7/PwcEBh4eHHB0dcXx8zMnJCaenp5ydnXF+fs7FxQWXl5dcXV1xfX3Nzc0Nt7e33N3dEQqFuL+/5+HhgXA4TCQS4fHxkaenJ56fn3l5eeH19ZVoNMrb2xvv7+98fHwQi8WIx+N8fn6SSCT4+vri+/ubn58ffn9/+VcKgSWwBJbAElgCS2AJLIElsASWwBJYAktgCSyBJbAElsASWAJLYAksgSWwBJbAElgCS2AJLIElsP4/WH8AmJ5Z6jHS4h8AAAAASUVORK5CYII=");direction:rtl}.color-picker .alpha{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAAAQCAYAAAD06IYnAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwYQlZMa3gAAAWVJREFUaN7tmEGO6jAQRCsOArHgBpyAJYGjcGocxAm4A2IHpmoWE0eBH+ezmFlNvU06shJ3W6VEelWMUQAIIF9f6qZpimsA1LYtS2uF51/u27YVAFZVRUkEoGHdPV/sIcbIEIIkUdI/9Xa7neyv61+SWFUVAVCSct00TWn2fv6u3+Ecfd3tXzy/0+nEUu+SPjo/kqzrmiQpScN6v98XewfA8/lMkiLJ2WxGSUopcT6fM6U0NX9/frfbjev1WtfrlZfLhYfDQQHG/AIOlnGwjINlHCxjHCzjYJm/TJWdCwquJXseFFzGwDNNeiKMOJTO8xQdDQaeB29+K9efeLaBo9J7vdvtJj1RjFFjfiv7qv95tjx/7leSQgh93e1ffMeIp6O+YQjho/N791t1XVOSSI7N//K+4/GoxWLBx+PB5/Op5XLJ+/3OlJJWqxU3m83ovv5iGf8KjYNlHCxjHCzjYBkHy5gf5gusvQU7U37jTAAAAABJRU5ErkJggg==");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:16px;width:100%}.color-picker .type-policy{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAgCAYAAAAffCjxAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAACewAAAnsB01CO3AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVEiJ7ZY9axRRFIafsxMStrLQJpAgpBFhi+C9w1YSo00I6RZ/g9vZpBf/QOr4GyRgkSKNSrAadsZqQGwCkuAWyRZJsySwvhZ7N/vhzrgbLH3Ld8597jlzz50zJokyxXH8DqDVar0qi6v8BbItqSGpEcfxdlmsFWXkvX8AfAVWg3UKPEnT9GKujMzsAFgZsVaCN1VTQd77XUnrgE1kv+6935268WRpzrnHZvYRWC7YvC3pRZZl3wozqtVqiyH9IgjAspkd1Gq1xUJQtVrdB9ZKIAOthdg/Qc65LUk7wNIMoCVJO865rYFhkqjX6/d7vV4GPJwBMqofURS5JEk6FYBer/eeYb/Mo9WwFnPOvQbeAvfuAAK4BN4sAJtAG/gJIElmNuiJyba3EGNmZiPeZuEVmVell/Y/6N+CzDn3AXhEOOo7Hv/3BeAz8IzQkMPnJbuPx1wC+yYJ7/0nYIP5S/0FHKdp+rwCEEXRS/rf5Hl1Gtb2M0iSpCOpCZzPATmX1EySpHMLAsiy7MjMDoHrGSDXZnaYZdnRwBh7J91utwmczAA6CbG3GgPleX4jqUH/a1CktqRGnuc3hSCAMB32gKspkCtgb3KCQMmkjeP4WNJThrNNZval1WptTIsv7JtQ4tmIdRa8qSoEpWl6YWZNoAN0zKxZNPehpLSBZv2t+Q0CJ9lLnARQLAAAAABJRU5ErkJggg==");background-position:50%;background-repeat:no-repeat;background-size:8px 16px;height:24px;position:absolute;right:12px;top:218px;width:16px}.color-picker .type-policy .type-policy-arrow{display:block;height:50%;width:100%}.color-picker .selected-color{border:1px solid #a9a9a9;border-radius:50%;height:40px;left:8px;position:absolute;top:16px;width:40px}.color-picker .selected-color-background{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC");border-radius:50%;height:40px;width:40px}.color-picker .saturation-lightness{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAACCCAYAAABSD7T3AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AIWDwksPWR6lgAAIABJREFUeNrtnVuT47gRrAHN+P//Or/61Y5wONZ7mZ1u3XAeLMjJZGZVgdKsfc5xR3S0RIIUW+CHzCpc2McYo7XGv3ex7UiZd57rjyzzv+v+33X/R/+3r/f7vR386Y+TvKNcf/wdhTLPcv9qU2wZd74uth0t1821jkIZLPcsI/6nWa4XvutquU0Z85mnx80S/ZzgpnLnOtHNt7/ofx1TKXcSNzN/7qbMQ3ju7rNQmMYYd/4s2j9aa+P+gGaMcZrb1M/tdrvf7/d2v99P9/t93O/3cbvdxu12G9frdVwul3E+n8c///nP+2+//Xb66aefxl//+tfx5z//2YK5Al2rgvf4UsbpdGrB52bAvArXpuzjmiqAVSGz5eDmGYXzhbAZmCrnmzddpUU+8Y1dAOYeXCtDUwVwV7YCGH6uAmyMcZ9l5vkUaBPGMUZ7/J5w/792/fvv9Xq93263dr/fTxPECeME8nK5jM/Pz/HTTz/dv337dvrll1/GP/7xj/G3v/1t/OUvfwkVswongjdOp9PzH3U3D3zmWGnZVXn4jCqs7wC2BKP4/8tAzkZsoWx6XrqeHZymvp4ABCBJhTQwKfDT8gzrZCIqi5AhiACjBfEB2rP8/X63MM7f6/V6v9/v7Xa7bYC83W7jcrlsVHIq5ffv30+//fbb+OWXX8ZPP/00/v73v4+ff/75JSvbeu+bL2WMMaFbAlpBNM85QX+ct6qoSqkPAwuQlBVKqGNFSUOAA3Bmu7gC5hNOd15nSwvAOUW7C4giUCV8Sgn5L9hNFIqTsp0GxI0ysioyjAjkY/tGJVEpz+fz+OWXX+7fv38//f777+Pbt2/j119/HT///PP49ddfx8fHRwrmTjV779EXu2px2xhjwtdJZQcAWQIPLPISsMJaSwiD8gzIKrwSyATE5j5nAbR5c1dBUwBlsEWW0h6LqiYsqFPAQxCyRZ3wOSARxmlXMX5k64pQfvv27f75+dk+Pj5OHx8f4/v37+Pbt2/jt99+G9++fRsfHx/jcrmUFLO31gYDWblxRIs/TqfT7ousxJsAxXA2Gc7TA9XdgfdoHbFsj76X2+1WArgI1ageGwA3qupqoHsmcbI6Fu93quggFa9d7LeDtgKfAFHBJ+NEByIkcJ5KervdTmhhGcgJJSZ5vn//fj+fz+18Pp8+Pz/H5+fnmGD+/vvv4/v37+Pj42N8fn6O2+1Ws7JjjP6wraMI5E4RZ8x2vV5TSwkquotV7/d7Tz6HFWsD/qNcdw0CQ3q/321c686TwDVIdbuy73zNldhSHb8I2klZznm+InBS4U6n0302aBFsLhHDAKJVJVglfI9jhvu53W53sLANYNxAiDA6MCeUHx8f9+v12i6XS7tcLqcZW57P5yeY8/fz83Ocz+fnsSmYUyknWEG85WBst9stzSLyMdfr9Qi08iY15UZ0LlDGLhR3o5zK2j7OPUTD0E+nU3tk7Xb/16NFbhloAMuY1zjLUOO3BKeIDe+Z8s3/J4gFo4TM5jPmuRg28foUKKVSwo16TgA5npywcWLHgYl/Pz8/73/605/ab7/91m63W7tcLie0sZj4mao5gTyfz88E0f1+j8EcYzwTPEG2cqjyfHNF0M8fuqEiaOVnRzZZQNh5fwQyHg/HDGfJo89Q1zb/quu5XC6773I2XKfTqd/v9+d3wuqWva/YTdUdEV3fhIv/Viyps6YE3x3r43K5bJQS66zaxVGFsvd+//j4aF+/fm3fv39vt9utff36tf3+++/tdrudvn37ZuNLBaaCMgUzC+rZRiFowxUuJI8YMqcCp9Opq5vagaYU6lGJA1XQqejchw6Cj0Gw5nYBrGw01A2O206n04BGouNNyTfp/FwElhUey6nXrIKw7QQWddxuN2ldL5fL839gSPF8ahu/JvBO48CPSuqMf8Vp9/P53L58+dLu93s7n8/tfr8/39/v9/b5+TkhPJ3P56mQ436/j+/fv+/iSgbzer0+AZx/5+88bv6OMda6S5z6kd21fYC9dxv7cIJJ2d9AOS30fPMzyHiTM8B4DF6XUlYHp4KQW3W+1t77MNB1vGHxWq7Xa7vf78+y5/N5A+H1et29xuP5dbYtyaRu4AksbPq6936fjRzXRxBbPr/b+b18+fKljTHaBBBfn8/n0/1+H1++fBnn8zm0sB8fH5u4cr5GuBhMVk0EEn9RsctgVhM+ixlJtMA23R8B6yysAstBOgFXIKKCMIgToMqNEu2fYMH7ztc732dQKkCj1ytAZtY0Kx8pIr8GGJ+AT3V+2Hirhl++fBmXy2Wz73w+b17P8p+fn8/tUwGVleVkTyUb68DkfayWY4zxNRihU4EpLJPZVrK+u7J4/mgfKqeLW9X2REWlItL1diynbDDb3+jXgYjQqn0rrxWc+NkILP7F7xIbMvx7vV53x40xnlbWJF12ZSag/N0pW6t+ZzmOMzHjajKwDfond78zYTdfq18up97zr2q8v3IioBprRtBl0EZ9og5WBRGOdOHjIjXF7UotFbgOWnXzIJyzYvjG5IYgsmMOxHkz8OsMSrVNWeq5T8DaOcbEv1Od5rbs9aO7YvMet63EkF++fMExq+MRl4/L5bLZN/+ez+fnZ6KazuMqXSQVO5spJXflHAIzes/xJseckRJiDMog9d6VfRrqXMr6KpVV27jRwJacGovOAM1zMdQMnwK1AubK63kdCChvI1C7g0z9nf/D+Xze2Vj8H7Gx4P9duQlsYCrqyN8XqG3Hm/10Oj3jw/n+crlstuM+jPmmxT2dTuPz83Pzt2pn1XsEHX/bnPaVqVmh0xwOt0o6XLLAHePUU203wHfcrspCwmV3TryB5s0Mseeg97x/BwzCjBlbB+pRAPla0BVQuT6V6QHdBlj3d0KG147b+DqxQeUymDO43W4dQar+TIjwmAd0z8/h65vf0/yLv3Pb5XLpru/ydDo9s7ET0I+Pj6dKK9VUEIeKWQWPAOrJ8LKd4vE+t91Y3e7UFlWatg2VwJnb+HPmtvm/sfK59/OaWF3x/eP1UPHvA5DDYDpYXfb0drv1V2DkBkxtw/tEWVVlXWdC9pFYs5/jfh9dS/16vW7s6lTG+TfqsxSJHxkXXq/Xdr1eu4LsfD6P3vsT3N77DkL+zPm5jSdKL4zR3AxQd6rHkLkYlSowsrq7znzu6wSwdsMJOXmA5fBcjxtgMGBYHlr5zokhtsMCTgXLQOW4XC6dEyEMprL8mAQzXRgduix2yZzorxkYsDn3hB1VeMLGsXsVtgl2pW8S3svk0vw7R4hNaHvv4cACl5HFzwIH0Kc6zu4XjDPR/jpAVxWzO1Xk2DDb3vTcxeGU1iWZHkmIDWziWKvirCJ4Dravs6IJ/GG6cTqWdXDy+fArQDVVkLqkVjAoZIITdmmIqXwqa95N3+MGYoZQdRVNO53Y1xRkhO16vY7eu507Ca9lJnbGpxOemQhSw/AQsmmp5zU9BiU8G6wvX76M6/U6Pj4+do0Bz4CpgiknTUeDqwlKBmg3u4OVjrZ1A+rAcgaejWq6eJCvCYFDONSwOgHX4EQRw8lxbzDOdEK6gZ3Hk1b+8g2o1JFtKXyv/fEdTXuWjWXdAZiBp6ADeDrCFiim7B6ZFneeI7Gvm/PMkUDX67W7xI8b0D7/v8dA9qfN5oaCf74WZjH0mf1cmfY1Y0JUFmVrTWu8uzkNcLtEj7u5FXBTkfC6GOA5q8YMxO8KVvF6sAVGdcrUbsKODcQKkLMOMdmlxum642YrPm26AlhZW1YB1R+rrGswE8TaYAWeUMxdf+WjwSvZ2Ef3ytOyfn5+PpVPAaqOn43MtNBqvmjjxbjM4lZjZY4gqNMI5ktaW/sYKNwS+9lFQzGihmMCKPa7+Z0V6Eb0GRmobtpX8JljWu5FMLN5ja6hG9kwQgZqf5+1NH5UxzkFReCdWhJ8XdlGUkxO7HRlYRm4mVO43W7ter12TPJEw/rmEN3L5SKHIWZg9mz+pUoKOYq5bJTJdX2gme1UcxMZQFaEQIlHct32M+Y1BzGkGuzfiyAN9z+ugplZ1symCrDCYYkGxDTpI9RzBy0rHyeDUC1nWaeUaD9n4xkNyYMBDZtzZ3B++fJlY21XFDOcARJlabOyiS3uCpLI9jrZjCDkaVvcCCjwognKShWdzXZWlZMvVTgD8LpqlCLrqgbcB+qYwrgKYpT0ccCqbKyCValkEabn/FynogCrPKfqf51xJ7sGB2ZXcZmxoSOztjx300DZi7a0/2AIR0UlBag9SuDw6KcAzlaB7vHZvWpjK90dyrq6bKyDUZQbR0B05biLQkHIcSUmgIK+SwuqgHCnoio2RQU1yj+BnBy9pphVKLGyC7ZzFK1pxWK+E8IhVCWLN/uLtnUU4ayoYLoaANz8FdtaSvY4pV0BEW2ls61czqllBKpTyKgMAhrZ1cdc1RROtPmvWNkdcKZ7ZKxaWjiPLJMpp7OZKxA+rqG/oJLjxf0pnJlqLoDZo3gyU0mKGys2taKecj/d1C+rJSplBqlTyAqgR+D8KjKlmRL2gtUcAdCtsL+ijCNT1oqqqkH2OHEbG5sDFnUg5Aa+yLou2VU1ptj1S2ZQqv1ORZN9IWzRfgaRBxKoBE8UWyqlJFtrIc0AxNjSjed99CTY/XDfSzCz5M0IZoVEsWnPFNTsl8ooVC1TzbGgqFZNDSgVwKK+1sGDMKqxZCWGVMDysiEr1jVSQJUYwj5iHOlThdHt44SQg9CN+nl8D90NMIgAdgr46JqRiR9I8vRdFvbr17m/yxUMKjNLMiVUADwu2CWGhhi+F55TWM9M9cogzms1dnM4uOF/LAEYWdcqnM7yFmyq3IfwmOROd7Y1iFWtOjoY8To41mTV5IysgFFuRzsbWFGbNIIJCDv1dOo4lZG7jWBwRFtVTKuWyeCByJKOan8oZ3ep9XddNl0tDuaywLz9cXPYeDAA0SpkBO9sbVcTOVWldPv4uyzEkzxHtjvonHoSkFEWNoo1d8DhcQputd2ppNon4BzoAiJ1hBFQg0dVtdbGHHDQWushmNEQukLM2QO1G2Y8bgTXqFhcBJj7EjPgcPts8US8qPpPB/dXznOh5Z438tzH5ec6QgrOKrRRfKmysBmUDB+PhYabMlVPER+GCSITTzr7am2tArH3bgcEzPJm+cr5jJ4NnHNFDVrFXcI5Le9k5Jnw+bedbV+FfRzZIHaOOaOsLY0/7UGs58DjrGwKMIMFIGzOEW1/jGsdAtCN6hEAI4hBe9YXeRROBSVPAVPAqvIM5bx5hVKWAMP6zBRy3iescridVdFBinBxXDnG2GRY2XbCvp1lhvGtO9Bxu5h908XQu42lnSArMFdizMim8uwRCxPGnnOS8lwpnbOiDqTAjsrRN/PcoAScCbaACqVM40ylnjjTBs+bwWlAG23/UKbdkiwKWIQPGzWaczpoSlxPEj822cNWkpS7FyzsDrqpfgpG3jahw2vgbaSQAxuLWZYt7JzyNe8JoZpNAcvDFOdw0wqYT9AK1rZz/DdbSlLPp0ryIxgQJlK9AZlEq7IOXpohg9PIhrCng88JsOxiV4ZWAYfg4sikx/8ky2Z9l862uqwrfscIH8+ugTmVGyiddeVYUgEMn4GZzg14EwIsh9sx2cKKiWXReuOE5gzGOQgdlRKVVdlevqb279Xq0Qnsts2VDaBO0coezsruWtHApu6sKG4IBhN0aGU2kLrMKGRTN3HmbCDwKV14zvkMEDG4QfZVspVlaNU2mhc5TEZ3N1h/zqTheuLpW05ZWTGVjb3dbnNmxKZBnN8JqidaVLKAOyARNLS+MB54Z2+VaqoMLKroVBlngefnTPAcoHNWCSvlfA8CI0HEmBNBnBlXyMrzU7A7WVm94PPqQ2gmqKx+WDGsnvilmcSOBJqOK1nYyAIzuAyesq3UdSK3KfWcYKD95HmfYOU3qser2CtYEUA+FpfqdNvgPBZUBhDrGONRVlQsh8rLcaUCykHG0OOUwTlLBrsh5soEMGezi1E4HRVt1icp5wZEFXdibCkG8Y8vX75sbO4E0iom9z+hjSiOfy3DhpXItpVhE+UGQdvoWjtChmrGHf4YAzKgBNnGtuJxFCeGdhUAfQLLK8kBYAP6gvFJZajMG3Xkycy8KuC0q4Eyymwtwdxdv2M0mIBtK0LKnf640j00Auq4gUkdWGlhs22qJc6dZCsL19oxnlTJG4SYVRIGpD8TPFBuM6OElbS1pldid4mGAyN6ZIupbC5bXJN9fdpbThSxLUaI8IG1XIYBxW3Tjs6KQosKcxfxcQmdnwRGM10GnFcCy2XYunLMyAkdgk4mePiczsLygthcBut6goOqS7YVFXADLjaosB6s6ofcZWAZSIRYqSUkizYwttYab3vUOQ9w2HRxIIg8WwRVeE68xi4UtL3zRphxplzwuZrcqYCq1I3jPI5dnJIygEohMbPqVJSzrwzxBJTs5zN+ReUSgxikPQVF3JVBeNQxbHENrEMNvEdFZVV9lH9+ORGEsNZQpyTNc4C3AG7XF4ngzq+DrO2zbuaaOXgdaFcdkEotoSFBVX2qJ0C8OWZeG4KGlpghA0XfTOPCqV2qqwQ26QWfF2PMLhI2w1lVAa2aPsYd0za25MQRwgcZN6uQDCi+ZxiD4XEM2kZxOT41FnZnaRlcpZouzlRqqdbQVWopQoSB58RV50lBNrHi/AwXS5LrwDVlpY3Fc3ByiYGc52Trist6kOXdwInAQtJpp5QchyaquYOV7Su+fxVMaV3dc0RE2S6mUY0gLt2pMcYqrKIQ9w2l1gpQUMtQYcmmbt5DTNxdhnUCjQqtbK9SUSzvrC0mmhhE1e2FS2+oxypy/ZASutkmtjx3vcBC24PX65nbqkBCRhfjS9kIYPnee8cMagVOhI/3T1fAmdtAWZsCswTJCkQVNa0qWKSKPOpHAUhD9DrbVcyoYkwqhvh17vYAayXLQyKGYdxlUDFp494rBXRjYgO17DDYetNIUj/ezp6S0lnlpEwsWmJMkOwsKXeZKEAjIHn0EQJISaRBcO6UMINz7p/bEjjnw4ft+xmDvksxX4G2rIris7qaeKwAFMP2Oi7n4criuZwtpSUwpfLxSnORSrIqusc5ZFaXysqRWjiZ2DyAWEIL35tVSoQElFACjOeGGSE7AHEQgdo/LSvCOgGBvkxsmDbvlS3Fp5vhaB2TAGqRKrKKMrhLVpaGzEVjZ0OQxDhaCTA+QyRR1d15aQzrJntL3RibsipjG6jlgL4yqbS0sNYg1e84vhbBVrElK64CUcWYXDfKxhpIuxiVJZUxsbMy/uRBKTNRQ4kQ3LdRYLS0rJjRPlTPqY6gdJsEDc+aQXAn+HgsNUCbRuF0Oj0zwnA7bWDkbhO5Ens00qeQhS1laBMl5M/cAaxsLF8rKyql+Tf7ELLEGu/ixiimdCvo0TjfpjKwaggen4eh5v7LokLKbLuyvHhcZG8dhGrEDx7Hg93ZppJF7qBqO3iVveXEDQNInzeoe8Yq6ePaZBZ2JviM3W2UAGotekRCAGq4EkF1X3DOnR11yRsBL1tRa0PVcZiNFXZ2c34FskvomInQQ6lzpJoZbJxk43NwKJFBquJSsrByHydxKOnTxQASBmS3j+JMnsHSla3Ec6K9VWoJVn9zfjwOM7hqYAAqJQwE2a3nA48J2QGegRkpZNivSY+ys3EkKd4oJIwsvIHl3cWgLt5k4NH6OmtLWdpurOkwEMupYc7eMtDRhOcI2ui5JhVIzXzLyto/GAPuZoyo8wkoduVgJglCt7OhGbgID4Mq4si+63zUS1FuFFXFlqyaj2emHlLMcBqYu0FMuR28BbB7lOxRMSiCQXFhCKuwkhZ+pYDiGSgbsKKV8MiSRsuHSIWM9rklRiIlZZuqXjsQK8ooYJMgq3JKWVkhHbhsVxFUzthOWPkYijcbx54IKsSdT+uLr3crGKyoYgFiGR9iBk4kfloUX+JIlQRQqabmpgnhqtpQpb6RVQ1WH5DnrS4hEoGZqaerQ2dhFbz8XePxShmDbo70eISjoorO2vK8SJXI4SUmEU4zWKDzUDtWTYw7xXlbSTEj4FRg7zKnKoGRALv0Gs9Tgc1BpCywGZRQAtqVz2xrBcAMzEpfZwFSa2G5W0QBFjSMapWAEFa3HcGN7CxDzECyIkJ97qwrqWNTWVo876PPsjPkj2wvgroM5lLZKMETKVql/CvnWVFiFa/SzJUQwkoZsr67Y6vlSRV3/2tmNTOY3vnaxYwMuoPKqdzR1w7IqHymlPxaAThfU7Ko2ZXYj4AYJHL+kNdKwRQYESTRa5fsUZ/rVC1TMTyWVyYoqNtuzaHsMyv2tvoarxdfqwYgU1axFo/cnql1FGsqK+uAROV8BX4GU8WcZTATi2q7Qcyi0O0V+GhWBMNRUkn8H1SsWVE5By3Gi0ECqUeJoBfAtDa4amkdXG37AGP5Ggeb84p7UazpoKRzdFzeQ8HkoHGxprKy/Hpm5t12p47J6xTYDEz7uINEXSuxYXvFskYAc+ySxH9sf5ftKzU6IbwVBcUGg5e5FMCEXSErZR0wGayV19woM9guPjTqJdVTqR4uE4nJnLldWVkECCZLd2VLF+xtamex7IpiriSDUpvrpn9lrwGMCHyppMH+ps6LILsuFGUj1XEOXiqbqSHPUKnClpWV68kqtURVNDY4TNaocykoYeTU5ngGEQa/S1DnnE4AeXMcKjHPAmFVjCBENaeyLVNHfr3px8xUstJ94hIpfH4HKE/eDaArK6lSyVVFbdt1gxTIVk3pppVlFXi4pEhVBTObquohU85MLXn1iahvUkHJjSCMc01tLFveVVBx0DodM6jftCu7DOtIzYxrc0qp1JGP2ayYFz2Gb6HvMrO8cnGtV6Gjm3uImSfD2GpWK6uowbZGMxFKQCo1pOMtcMXFpRst+hXGoAomF3sSTBGgTglbBKWwsQ3tZqaYSp0Z1CimRDWFcCJUPYJ00BI5FkKYNoifuQxmN88SWVXWLMaUqqqgC0BmQJR6sk3u9NCf6jYLXxAfqsYEgVLAhRY2AtgtflZNFmFyhxdrLkAdWlk4D88M2ixHyepIdhMHrG/iR1ZGtq0MGpbDbRPYOXeSY1M6Ny4ZstvGSktK+XbFPATj2D371saPEsAMXhXrsZ0km/XStkhhMyBfsa6uXFZe2VCe+YMr1+GKgwrQyNYq1VRrB+EizAow6NsdNKcyVEkYeM73ys6q4kAHp6BiFklTkIrVC5oYV7uzwOGCz4UJ0Stq2lWMJy4wtb+RetL6tZFicnJmBw5UjCvXXMZVJX2MQkbf+XN5EWd78Vz8/JEsMZTBiKNzsm1inLRUQ74H4NidaqI68j5sAFgxcRveC7ieLJXfQYxjZZ2CsiWFewZXJmBIlZ1tdtrX4hSuateKso/RZOtOKW2nmq1oTzeK6dRWAWu2NRVb4hq0SXm1GvtugHrbr5IXqmSktg5CuDE2MSlPwsY5kNE2Wp3AqiZbWVLAxiBF+2iBZbuNj6MB6rsMLC7FyasaYDyo7KkoPyEtw3pEMXfPvxAJi2jAQQgjrz0rLIZSWZlIoNhwd5xK4AR9mYNjWAaLrnuImJeBVN9zBORObVvbr+mTTfFSEJLSRnHo7hEJoIi8MFqjxmvgmF5URZz4zLFgZZ8Ctu2X7ggVccKm9gVxIsOHqxXgNMKnFWZYnf1dBnOhayXq17QwFlWW09eNKyVJFmXqaONGA5aCegMbJ3UUkGY1ic3nKWgjq8qfVYGQG1gRt6rs62a6HiqqUOqdesK5NmX4nGofJoiE1d0dF9lVVkvT1/kEEaaCoYOwFpcVcoLM+7669PxC9rWqktH0sWUYld0VCpuBZ/stVRcGgy9WX2+U1Qthi9SzAqSxzZsy+OiFzBYnySGV6Gku44rD8BCOZBV3BvD5+AKRHNwMEsB6EzHnJpkTAeiUlEGkcECeB6GDZTp5YEJTlvdrknxYjTllMkfNtXwDjM7uVjK5JXUUn43rrqpK2jytaxHW0M5G8DC8rtHMYs7KSgduVQMGTYFqFvVS6rkD3sDJ46afdYFwoq11AOKCBLhvwoUgc8IGANycR6knZrdJPdsuxnyjfd3FovTlRMdEdtOl5CMV5EHsXQBis7TOwvIDZaGj2Vnpbh7cpK63VwYEMLwqbjzyl699sawFFkF1yqjUU31HfC6sW1ZFVFuXVXVgz9keEaw0ys1lWfm+azQAQSWA+hKYVfsZjPncAcUB9oIayy/UZXRNckDGji77GsWbvBo6tPrWPqOyVkBUq+INeqpzNdYs/u0ifh5qmpqIW+33JVSUcwY70KL4U9lYdU6ljtSls7lmfi9g3YzeQfVkaGFaV3ODCnaD2N8wsEDFklE3RzM3ZghdYkWHsszq70FIecnKkVkt8ezMzRq9bkGuKojRLBVSod3Y1yPqKgYW7JRQTPVyy5xIYLjOgxgT52RKJUY1dOrIiRd4futQx/A5AcSmEjz0vFWrkLzvbWAu9HOWbGgxFk1VNTpnBKk6TgwisI/HcxYXP1uAWO72ULFlBTq+aSu2VTUs6hrxM2CF+hEor1VIA9ZmFUaab1lSSgZsVs4sxzHlVLoJHr9H4DhONTkI1XC0/wiY2NoWAG5RlnHFnq6oLccpQddMuJ/O17JVA5OHLi0BqCztq7Y1++ucCd98qLI8MIHBV/cKjxQTme3hFBS3MyCqnDsuym2o80HjvFFTtrURmNaGJsmVahImjTsUXKtQZTAVs7Mvv8/+fzUrZAXcLJ6M4koe6XP0b6SmWWNDzyUpQ8bl+LtWx4tuqZ36cRYV3yuVxPNwvIiqiQCSmu7srgTzR6nkyhpCarXwFy1vGd5iP2cY06lFr5Njhhg1Y6+NB28ftbK83s8rf7kLJbKwDFPbLg25a0AdZJEiqr5phixKMDlRUtcssq1hriLqGoH+zeNgVm9OemjsETV8JdF0NHnkIFxWY1OB4Yrp7rtWJ7NgAAAPXklEQVQ3oNs5nplyVf8u2FoLu1JrHveaZWQjqAkshtFa2gzsSG3Zpkbvg3HafF9slPPlldjFlK80Gysm8Mr4MPhneNWENPGjAIpmilTPATdTRTXlCBYHYAQuPwA36xIpWtGN4q3Y2MhiGsUpuSSnlEJRD8PorC7CFYVw+F51qThgabxsTxWzCGY0ZSsb3lfqAy0OPNjNy8xiQQKsHYFQ2HBZVvVbBuq3m1oWKajqaonsM6uZUr6CjXWNZ0l5E3h3jURma6kP3MJIiy1Lm+kahQq41N2iZja5sjtlLYNZHZrH6qUGm4vMbDp6Rw2CFmvuyFkrBcCyMtFqBaECmsHoK9BZ2LA/lJcRqSaDqnaWbrZdGaz3DLgIvBln4woGztbyJGqslwxkhhHrTjTYFXCtOoKS8uLdofVdAbOylGU6nlYpXWZts4nXBq6WxJitMNokHUJnbnJplQm+aGpY2a5GMV2QD1hRubBPFKdumf5OHkLHz0F9luE5kjBjRa0nFE5CUGqHw32MmjZ6xkgINVnSnZ1VZStK2qKlRaLlQgK7uTq7JFXJwM+3SOEKyhZNI+tJ0I5qMYy9k2qJD7dVWdqKXa0CKNR0Ccjg+B2IYu2fcBZJZkMFgM11r0X92wilghFGgzVnexlqB7xL9mS29SiYUVY2nXOZjNBRsyDsQPRWW5hrZ4XcdC4HVWRbjgJr4sFofK5SzjQ7rhI1UebdPdEbj6sqIvTZQZ5va08rABsAW0UxeWytAk7A2KJ9ZpxzCioB24XFtYAeXYxr6anSqhLgppEqWbGwLunTgrV+IjWlL29ljaAl4EQMGsErp4apeZiquwRXLXAqOCeru32mmydc6oWTSWpFAGdzeTB8RTHVMEtlM90CbbQCYhPjq3egYr1FGdYIQjiuDGZ5zZ/AzobKGOyLxti6c4Rwtv2anyWlLICnlLhxJRXt6A5ebDBWFNONbxWZ2d02mnu4S9YECpeppV1zSWRBWxHYzVIv1CXSouwqqX3jBBBDZdYQbpTQW4ZQlS8r5kH4suSRmg2++3JN10x1PaAmEkmtYlEdeGpJEM6kOuCqCR22oSujj5IV2HdT0zj5prLKTjXFAPjdQlyq7xIBxAQP5yMczG4VxAKw0n6ilZ2QBce2pLulkuxxqnoIzFfgqyqjil9S1VNwBrFmeyeops8yOjZUybZdfS8CuaTIJumzs5tODaNtLpFDQ/PcJGweLhmeL1nB0KqiUDScsiUVD89Di3HtrKtSULw3RLiygZD+7sF8JTObgYsrGvDNUFRGl1iy0Ll1YkUc2aJYMog920I8qW6YDCg1Mqk0JHJFKXkbgbRreI+qpYNOZHrVcDUba7pjsphSJNtK6upgRNAVoOS0mugBeN4bIZgHhuPZ/s1ENaX6KsVr+YNrh1Nb7ipR0PE5zbNRegCbrHRUw6Yf07dLBJl1f8KB9as2V1nNqAsl62LBBhehwalerkHmB1JFIEZKSEusdl5JQj1nJlHXSCF342gJ9CYGrXelknJIXqVP8sD+qtplCR3XH2qfKq0ygMp+KnVkKxNlZ8m2YkIlVMiCnXUwl7qznBKSvQz3m3Pt6oQbXO5b5FixCh/fHxUQW/AEcK6zCNqKQnL9sywqmKuwvqSYzT/aPVNNpVyhvRW21aqciCsjdWvBwILUvh5VyCzbWoC1pJjJ680CWsl+udKB6T5RwG1mlohnlpbg47iz5U9ha0FGtmRLFYBtO99y97Ap0z+ZDTAog6kSLZsMHg/IFkkgp6CpvU2U0cYVSdnmkjwBdOmXbxTWNWzuIbipMioVxEckZEoahSOiy2M3K0jcC1LhVDwaqG0ZvkcWqCnrG4GIxykrqlbWdw6LQyBaZR8HmLRIhQWsHswD42ZXVLNkf9l+FlW0HVQ2lwFsC/Z1FdzlQR0KaPfo+Fdfu+/dwVRICu1CGR7AEIiAhc+AZUF0kOBaPxmUqg4i64vQnU4nFDYJ9Nz+1fVXveH9qmr+kPILx8oKcRV/BFbxbE0JMT0kSD4w6L/lNY8ocsqagVdU3A3MjxhxcGuqzsPH4irpaow1q6OyrVjvp9Npc59E91LldboYVzJWdimWfAW2SNEKcDaX2FmBLLA/uKxlmhh613Is1URQApbKfttwxL02q6Onx5pQxSbPojAg+v5hAnN6LHVRDXIsvKtRjiS0qJUyZTAXVbAK82ElFJWaQdVoqUC1Unt7BVaTQudM6SuqexjQJN4+0icaxv/utbKv83ETbT8H8gjcOKxOJmbUa6OOVXht3dFY6rHv9XoNzFLceEA1o8+pKm0LAHPHZ2rYKjFq0hfZFixsqHJgD3eD5n+U0kb1mFjXkn2lvMSSOsNE/CdIAKF0Sytq6urOHUN5gwg4GZosgbmggM5ucra2qrS2Ig1cbiBBcxYzgzUDNLCvL8GbZXNp6ORy3LmS+Kk83zRIAK6A1ioKa2I9NapIuiUFdfC9766PFZUtqUr6KbWk+zZU1a/ZrIXEztrjTOfz7hwKziCeXIaraHtbZIMz+2pGgazCmw4qWAFvEdhodYp0Xq0pV7G1YWYWbO4qhGq42+Z8BYtrLWvluNPpZAeaFFS1vubPgbgxsqcpnAaszBovKaFoDQ8BGtjfUOl4NAG2nmQV04feJgumvX2fsrQEWZghL0JnVdYkn3DOZIeRN86RqPWCmsvGVqEMRnwxQAxwS8EMYo3IzmY2+BCcLp4MKiuyuhImamlbZFcNoNl7tp+RHd18ZjQIRKyXdFRhN98/hyKqwXWNo7O1wiaXoHN108REZZWEq6grnIfjzeg8jdRf1XEL4kkXa5bBjKxoKaljBjeHlVxQ4GaycpW4lDOAKtnTxHAtOfzOtZwHAM7sqVXkV6yu6kap1nHkXKqWF/4XHqjenNKqBjpR3l1ch3Ejg1+EsgdQhsdG0B4FM9sWAVWpuAyiwTPleZxt9VyZVS2qXfReWqTAilpr9ApoWTjxymit7NwV4JTriZyOA9B0k7HFfULourmKYHVnRQvqGL5HMHdqFcR2qWpmcK6eTwx2dipWrviDilr+fKWq3OWRWdHKwA4eu8wjchbeRzFilqjjZN3ufCpfkJ0/scVpnYk6L0PI77lxdWCZ87WiWm7B/AGquQSnujGKsB8CJmiJq8q1pKIVWyqOiTK66r18BN8r74/AE71fdC3yPS2MxdOpnE1tlVxD9JmVOoggN+r4PjAXVFPa3Eg5jVJGFVUGNolH20GVrUB7BOySWq6WqYQdWR92pcFMYMwckbSgCKCqD67DiiWu1g8MQC9ByfcFqW1L+jL714qNCuznoSxt0da2gtWN1G8F0BK0NN0nuimelUF9dIdAfjO44UT3CjQLoUeLHJFTO3gmpRuIIOvwBQCbqNeo3qtZ9iF6xVK13GRlo4zqimq+CGdTiR1uRY8oqgE02hZBa79kZXPMquxRHKla2saZWN4mRqZUj0vLCKhkjKnqOQHNuSZVJoKvAqS1wpEquvWDC1B2ypwrCPsRMEPVTODMLJMDv6qeKXwi2JYV5Sq4qKyvgGsHCLiuj2jR59V8gMqSJ2FJZRXEHVRHj3sFPrct6OpqlW1GpatQdt0GvwfM6n63InsGVFhJGaBqgqqIV6IsXllZgySPq4R3bnt3wi5cv+cN2yqQLW1T95KYVsWWtKk4cB9W53WQQflQYR6Wl4HaJZjvVE0D5yvq+RKgZCs5qdBEP5sD94cAvQLlSgNaSMAtHx88BuNQ41zdFsX30zKbcs0MLD/ihkpQzl0wiTqKLTfbKmCmyYICnK0IbaieC4CG9iSyLQ7cIMGQwau6TKoq60Apl3WN40LZpca1CKKK9VQyyIEn8w0F8F6CL2h8o3ixGwC7s7EWzCOqmcApYxYD4jsAzVS0sl2t98pA7vrKophCVSonbYpgH6mvSn24pTBV4sdtV3BtMq5k82y+IADvUJ0uAlkCVTxIaPm+UNu/qkV4F1TzHXCGrXIAqItBKypqK99VtAOVs64O4ObX7pHLVCpYHcRmwvLR7TvYAKBBN58LGVzDuFz+hQbWgncQyCZAk+VbsPSouf93261iZgmfCpwRbAvqmSqriU2PwhjaoOyYqtIegVXViTsmyta6bGySpY3gyRrpIyAeaWDDxtpsXwKyalMDKNP7YBXMqEskUsi2uC8FNAPxAKTVfT1o6VzM0E0jF+1rWcUuHvdyg7vgoFplX8HpvHpMCOMRUPHzZkInsqlFKNX/EIO52E0SxSzOwob2VmRLW5D1XIU0rbgM1AzWgyC7fe8G7xUAK/taEBat7luqtyP7EmsaJQOj5F+mrnZfCuYCfBUAWwShyd6pMY/vAHG1UqOYpbI/gy5T0CMKm+UO3gFuC85dgfDVeguPDfITrIBLsLrcgdh3CFgFZjaKJ4Iv3F8ANEqvuxR1tVKOgLoCa1jxboBAkj6v7j/icFbA7f4rfRnQDLRViG13i0vqBQrYVqBbADZT0ZpiHoSzvQpopKIFS3sE1HfBWlHXd0H7LnArqvougMtljHBgZnh3Eoz/BKjLML4Z2Aq0+hEJr9jaVUBbvNzCIUiroC7AWmmFw4o5AK3MtB5VypZMSFgs05JyGVwlwBqsEGAAa2ZU1CjUexXGsE4rKriilBvFzOKKo3AuAroE6QFQU3u8YpNXwS5k+1TZt5UrwouN4KiUEw+k3ZWDp1RXHNRqXb21Ts39945yZSg3VnZFNQ9CF3XeZyr5DgBXKiwCMa2MxeTDYXgP1Fsf9QNKZc0k81RJk3r6EQ3rCmBVyLL75EjZ1pIVDHoFtiOAHoB0BdTVylqBsKKKS+AeBXJVLY+CXASuGvO/Auq7GuEjDfGKg1oKa1z/dmmi9I9SUGNhl0AtfulHAawoYrnSkmNXAVuGEhrEVXvUF+A5Ct2PqNOjDetyna4CmeUolmeXLN4Aq7C5Sj10Q7yjgl+t6CNxSRHmI5X+CpwreYB3Qfdqna4q21KdBuc4GoZsn49ZOOiVinwHqK9WzjvgeweEh2AU5+vtxZ9Cd9Wqkh49V18E5oj6vVyn0RStAyGIO5edXRKd5B0VGVXq2yr3xYp+5Ut+C4QJ4P1N339pQMjRejj4vb/Dcr6rQc3O/0rjmtZpeYCBiCHfCemRbNhbK/pNUPc3wfKy5f2D7OlL3/uPhve/oU4T0F8f+VNM2vyoiv0jK+KHQfdHq+0bncz4oz73/+Y6LbKw1o/5B7eOf1Rl/0du9B9tn/9bvrf/j+v0h6ttn2tp/r/4819y4/zv5391uvzzfwDifz6phT1MPgAAAABJRU5ErkJggg==");background-size:100% 100%;border:none;cursor:pointer;direction:ltr;height:130px;touch-action:manipulation;width:100%}.color-picker .cp-add-color-button-class{background:transparent;border:0;cursor:pointer;display:inline;margin:3px -3px;padding:0;position:absolute}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{color:#999;cursor:not-allowed}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{background:#fff;border-radius:50%;box-shadow:1px 1px 5px #333;cursor:pointer;display:block;height:10px;position:absolute;right:-5px;text-align:center;top:-5px;width:10px}.color-picker .cp-remove-color-button-class:before{bottom:3.5px;content:"x";display:inline-block;font-size:10px;position:relative}'],encapsulation:2}),i})(),A6=(()=>{class i{constructor(e,n,r,o,s,a){this.injector=e,this.cfr=n,this.appRef=r,this.vcRef=o,this.elRef=s,this._service=a,this.dialogCreated=!1,this.ignoreChanges=!1,this.viewAttachedToAppRef=!1,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpCmykEnabled=!1,this.cpOutputFormat="auto",this.cpAlphaChannel="enabled",this.cpDisableInput=!1,this.cpDialogDisplay="popup",this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition="auto",this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpPresetLabel="Preset colors",this.cpPresetColorsClass="cp-preset-colors-class",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpAddColorButtonClass="cp-add-color-button-class",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpInputChange=new Te(!0),this.cpToggleChange=new Te(!0),this.cpSliderChange=new Te(!0),this.cpSliderDragEnd=new Te(!0),this.cpSliderDragStart=new Te(!0),this.colorPickerOpen=new Te(!0),this.colorPickerClose=new Te(!0),this.colorPickerCancel=new Te(!0),this.colorPickerSelect=new Te(!0),this.colorPickerChange=new Te(!1),this.cpCmykColorChange=new Te(!0),this.cpPresetColorsChange=new Te(!0)}handleClick(){this.inputFocus()}handleFocus(){this.inputFocus()}handleInput(e){this.inputChange(e)}ngOnDestroy(){null!=this.cmpRef&&(this.viewAttachedToAppRef&&this.appRef.detachView(this.cmpRef.hostView),this.cmpRef.destroy(),this.cmpRef=null,this.dialog=null)}ngOnChanges(e){e.cpToggle&&!this.cpDisabled&&(e.cpToggle.currentValue?this.openDialog():e.cpToggle.currentValue||this.closeDialog()),e.colorPicker&&(this.dialog&&!this.ignoreChanges&&("inline"===this.cpDialogDisplay&&this.dialog.setInitialColor(e.colorPicker.currentValue),this.dialog.setColorFromString(e.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(e.cpPresetLabel||e.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)}openDialog(){if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.colorPicker);else{let e=this.vcRef;if(this.dialogCreated=!0,this.viewAttachedToAppRef=!1,this.cpUseRootViewContainer&&"inline"!==this.cpDialogDisplay){const o=this.injector.get(this.appRef.componentTypes[0],nn.NULL);o!==nn.NULL?(e=o.vcRef||o.viewContainerRef||this.vcRef,e===this.vcRef&&console.warn("You are using cpUseRootViewContainer, but the root component is not exposing viewContainerRef!Please expose it by adding 'public vcRef: ViewContainerRef' to the constructor.")):this.viewAttachedToAppRef=!0}const n=this.cfr.resolveComponentFactory(k6);if(this.viewAttachedToAppRef)this.cmpRef=n.create(this.injector),this.appRef.attachView(this.cmpRef.hostView),document.body.appendChild(this.cmpRef.hostView.rootNodes[0]);else{const r=Fa.fromResolvedProviders([],e.parentInjector);this.cmpRef=e.createComponent(n,0,r,[])}this.cmpRef.instance.setupDialog(this,this.elRef,this.colorPicker,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpCmykEnabled,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpPresetColorsClass,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonClass,this.cpAddColorButtonText,this.cpRemoveColorButtonClass,this.elRef),this.dialog=this.cmpRef.instance,this.vcRef!==e&&this.cmpRef.changeDetectorRef.detectChanges()}}closeDialog(){this.dialog&&"popup"===this.cpDialogDisplay&&this.dialog.closeDialog()}cmykChanged(e){this.cpCmykColorChange.emit(e)}stateChanged(e){this.cpToggleChange.emit(e),e?this.colorPickerOpen.emit(this.colorPicker):this.colorPickerClose.emit(this.colorPicker)}colorChanged(e,n=!0){this.ignoreChanges=n,this.colorPickerChange.emit(e)}colorSelected(e){this.colorPickerSelect.emit(e)}colorCanceled(){this.colorPickerCancel.emit()}inputFocus(){const e=this.elRef.nativeElement,n=this.cpIgnoredElements.filter(r=>r===e);!this.cpDisabled&&!n.length&&("undefined"!=typeof document&&e===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())}inputChange(e){this.dialog?this.dialog.setColorFromString(e.target.value,!0):(this.colorPicker=e.target.value,this.colorPickerChange.emit(this.colorPicker))}inputChanged(e){this.cpInputChange.emit(e)}sliderChanged(e){this.cpSliderChange.emit(e)}sliderDragEnd(e){this.cpSliderDragEnd.emit(e)}sliderDragStart(e){this.cpSliderDragStart.emit(e)}presetColorsChanged(e){this.cpPresetColorsChange.emit(e)}}return i.\u0275fac=function(e){return new(e||i)(N(nn),N(Cs),N(Mu),N(Tn),N(Ze),N(Iv))},i.\u0275dir=fe({type:i,selectors:[["","colorPicker",""]],hostBindings:function(e,n){1&e&&F("click",function(){return n.handleClick()})("focus",function(){return n.handleFocus()})("input",function(o){return n.handleInput(o)})},inputs:{cpWidth:"cpWidth",cpHeight:"cpHeight",cpToggle:"cpToggle",cpDisabled:"cpDisabled",cpIgnoredElements:"cpIgnoredElements",cpFallbackColor:"cpFallbackColor",cpColorMode:"cpColorMode",cpCmykEnabled:"cpCmykEnabled",cpOutputFormat:"cpOutputFormat",cpAlphaChannel:"cpAlphaChannel",cpDisableInput:"cpDisableInput",cpDialogDisplay:"cpDialogDisplay",cpSaveClickOutside:"cpSaveClickOutside",cpCloseClickOutside:"cpCloseClickOutside",cpUseRootViewContainer:"cpUseRootViewContainer",cpPosition:"cpPosition",cpPositionOffset:"cpPositionOffset",cpPositionRelativeToArrow:"cpPositionRelativeToArrow",cpOKButton:"cpOKButton",cpOKButtonText:"cpOKButtonText",cpOKButtonClass:"cpOKButtonClass",cpCancelButton:"cpCancelButton",cpCancelButtonText:"cpCancelButtonText",cpCancelButtonClass:"cpCancelButtonClass",cpPresetLabel:"cpPresetLabel",cpPresetColorsClass:"cpPresetColorsClass",cpMaxPresetColorsLength:"cpMaxPresetColorsLength",cpPresetEmptyMessage:"cpPresetEmptyMessage",cpPresetEmptyMessageClass:"cpPresetEmptyMessageClass",cpAddColorButton:"cpAddColorButton",cpAddColorButtonText:"cpAddColorButtonText",cpAddColorButtonClass:"cpAddColorButtonClass",cpRemoveColorButtonClass:"cpRemoveColorButtonClass",colorPicker:"colorPicker",cpPresetColors:"cpPresetColors"},outputs:{cpInputChange:"cpInputChange",cpToggleChange:"cpToggleChange",cpSliderChange:"cpSliderChange",cpSliderDragEnd:"cpSliderDragEnd",cpSliderDragStart:"cpSliderDragStart",colorPickerOpen:"colorPickerOpen",colorPickerClose:"colorPickerClose",colorPickerCancel:"colorPickerCancel",colorPickerSelect:"colorPickerSelect",colorPickerChange:"colorPickerChange",cpCmykColorChange:"cpCmykColorChange",cpPresetColorsChange:"cpPresetColorsChange"},exportAs:["ngxColorPicker"],features:[fn]}),i})(),I6=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[Iv],imports:[[Nn]]}),i})();function P6(i,t){if(1&i&&(D(0,"button",6),B(1),k()),2&i){const e=M(),n=Vt(4);rt("background-color",e.color),R("matMenuTriggerFor",n),O(1),Ct("",e.label,"\n")}}function R6(i,t){if(1&i&&(D(0,"button",7)(1,"mat-icon"),B(2),k()()),2&i){const e=M(),n=Vt(4);rt("background-color",e.color),R("matMenuTriggerFor",n),O(2),Qn(e.icon)}}function O6(i,t){if(1&i&&(D(0,"button",8)(1,"mat-icon"),B(2),k()()),2&i){const e=M();R("matMenuTriggerFor",Vt(4)),O(2),Qn(e.iconNoBg)}}const F6=["*"];let Zc=(()=>{class i{constructor(){this.label="",this.icon="",this.color="red",this.iconNoBg="",this.onPickColor=new Te}ngOnInit(){}onColorChange(e){this.color=e,this.onPickColor.emit({event:Event,color:e})}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-picker-menu"]],inputs:{label:"label",icon:"icon",color:"color",iconNoBg:"iconNoBg"},outputs:{onPickColor:"onPickColor"},ngContentSelectors:F6,decls:8,vars:8,consts:[["mat-button","",3,"matMenuTriggerFor","backgroundColor",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor","backgroundColor",4,"ngIf"],["mat-icon-button","","color","accent",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],[1,"p-2",3,"click"],["type","hidden","colorPicker","undefined",3,"cpCmykEnabled","cpOutputFormat","cpDialogDisplay","cpToggle","cpDisableInput","colorPickerChange"],["mat-button","",3,"matMenuTriggerFor"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-icon-button","","color","accent",3,"matMenuTriggerFor"]],template:function(e,n){1&e&&(un(),G(0,P6,2,4,"button",0),G(1,R6,3,4,"button",1),G(2,O6,3,2,"button",2),D(3,"mat-menu",null,3)(5,"div",4),F("click",function(o){return o.stopPropagation()}),D(6,"input",5),F("colorPickerChange",function(o){return n.onColorChange(o)}),k(),St(7),k()()),2&e&&(R("ngIf",n.label),O(1),R("ngIf",n.icon),O(1),R("ngIf",n.iconNoBg),O(4),R("cpCmykEnabled",!0)("cpOutputFormat","rgba")("cpDialogDisplay","inline")("cpToggle",!0)("cpDisableInput",!0))},directives:[ni,Rr,pl,Or,fl,A6],styles:[""]}),i})();const L6=["button"],N6=["*"],UT=new _e("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),YT=new _e("MatButtonToggleGroup"),B6={provide:ri,useExisting:Gt(()=>$T),multi:!0};let qT=0;class XT{constructor(t,e){this.source=t,this.value=e}}let $T=(()=>{class i{constructor(e,n){this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name="mat-button-toggle-group-"+qT++,this.valueChange=new Te,this.change=new Te,this.appearance=n&&n.appearance?n.appearance:"standard"}get name(){return this._name}set name(e){this._name=e,this._buttonToggles&&this._buttonToggles.forEach(n=>{n.name=this._name,n._markForCheck()})}get vertical(){return this._vertical}set vertical(e){this._vertical=Ke(e)}get value(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(n=>n.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){const e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=Ke(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=Ke(e),this._buttonToggles&&this._buttonToggles.forEach(n=>n._markForCheck())}ngOnInit(){this._selectionModel=new xv(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked))}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_emitChangeEvent(){const e=this.selected,n=Array.isArray(e)?e[e.length-1]:e,r=new XT(n,this.value);this._controlValueAccessorChangeFn(r.value),this.change.emit(r)}_syncButtonToggle(e,n,r=!1,o=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?n?this._selectionModel.select(e):this._selectionModel.deselect(e):o=!0,o?Promise.resolve().then(()=>this._updateModelValue(r)):this._updateModelValue(r)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return void 0!==this._rawValue&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(n=>null!=e.value&&n===e.value):e.value===this._rawValue)}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(n=>this._selectValue(n))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>e.checked=!1)}_selectValue(e){const n=this._buttonToggles.find(r=>null!=r.value&&r.value===e);n&&(n.checked=!0,this._selectionModel.select(n))}_updateModelValue(e){e&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}return i.\u0275fac=function(e){return new(e||i)(N(Zt),N(UT,8))},i.\u0275dir=fe({type:i,selectors:[["mat-button-toggle-group"]],contentQueries:function(e,n,r){if(1&e&&Ht(r,KT,5),2&e){let o;oe(o=se())&&(n._buttonToggles=o)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(e,n){2&e&&(lt("aria-disabled",n.disabled),Ot("mat-button-toggle-vertical",n.vertical)("mat-button-toggle-group-appearance-standard","standard"===n.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[$e([B6,{provide:YT,useExisting:i}])]}),i})();const V6=$o(class{});let KT=(()=>{class i extends V6{constructor(e,n,r,o,s,a){super(),this._changeDetectorRef=n,this._elementRef=r,this._focusMonitor=o,this._isSingleSelector=!1,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new Te;const l=Number(s);this.tabIndex=l||0===l?l:null,this.buttonToggleGroup=e,this.appearance=a&&a.appearance?a.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){const n=Ke(e);n!==this._checked&&(this._checked=n,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=Ke(e)}ngOnInit(){const e=this.buttonToggleGroup;this._isSingleSelector=e&&!e.multiple,this.id=this.id||"mat-button-toggle-"+qT++,this._isSingleSelector&&(this.name=e.name),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this._isSingleSelector||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new XT(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(N(YT,8),N(Zt),N(Ze),N(Jr),tr("tabindex"),N(UT,8))},i.\u0275cmp=st({type:i,selectors:[["mat-button-toggle"]],viewQuery:function(e,n){if(1&e&&xe(L6,5),2&e){let r;oe(r=se())&&(n._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(e,n){1&e&&F("focus",function(){return n.focus()}),2&e&&(lt("aria-label",null)("aria-labelledby",null)("id",n.id)("name",null),Ot("mat-button-toggle-standalone",!n.buttonToggleGroup)("mat-button-toggle-checked",n.checked)("mat-button-toggle-disabled",n.disabled)("mat-button-toggle-appearance-standard","standard"===n.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[Pe],ngContentSelectors:N6,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(e,n){if(1&e&&(un(),D(0,"button",0,1),F("click",function(){return n._onButtonClick()}),D(2,"span",2),St(3),k()(),Be(4,"span",3)(5,"span",4)),2&e){const r=Vt(1);R("id",n.buttonId)("disabled",n.disabled||null),lt("tabindex",n.disabled?-1:n.tabIndex)("aria-pressed",n.checked)("name",n.name||null)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby),O(5),R("matRippleTrigger",r)("matRippleDisabled",n.disableRipple||n.disabled)}},directives:[Qo],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent;transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .cdk-high-contrast-active .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),i})(),QT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[nt,to],nt]}),i})();const H6=["connectionContainer"],j6=["inputContainer"],z6=["label"];function W6(i,t){1&i&&(Ho(0),D(1,"div",14),Be(2,"div",15)(3,"div",16)(4,"div",17),k(),D(5,"div",18),Be(6,"div",15)(7,"div",16)(8,"div",17),k(),jo())}function G6(i,t){if(1&i){const e=te();D(0,"div",19),F("cdkObserveContent",function(){return I(e),M().updateOutlineGap()}),St(1,1),k()}2&i&&R("cdkObserveContentDisabled","outline"!=M().appearance)}function U6(i,t){if(1&i&&(Ho(0),St(1,2),D(2,"span"),B(3),k(),jo()),2&i){const e=M(2);O(3),Qn(e._control.placeholder)}}function Y6(i,t){1&i&&St(0,3,["*ngSwitchCase","true"])}function q6(i,t){1&i&&(D(0,"span",23),B(1," *"),k())}function X6(i,t){if(1&i){const e=te();D(0,"label",20,21),F("cdkObserveContent",function(){return I(e),M().updateOutlineGap()}),G(2,U6,4,1,"ng-container",12),G(3,Y6,1,0,"ng-content",12),G(4,q6,2,0,"span",22),k()}if(2&i){const e=M();Ot("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),R("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),lt("for",e._control.id)("aria-owns",e._control.id),O(2),R("ngSwitchCase",!1),O(1),R("ngSwitchCase",!0),O(1),R("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function $6(i,t){1&i&&(D(0,"div",24),St(1,4),k())}function K6(i,t){if(1&i&&(D(0,"div",25),Be(1,"span",26),k()),2&i){const e=M();O(1),Ot("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function Q6(i,t){1&i&&(D(0,"div"),St(1,5),k()),2&i&&R("@transitionMessages",M()._subscriptAnimationState)}function Z6(i,t){if(1&i&&(D(0,"div",30),B(1),k()),2&i){const e=M(2);R("id",e._hintLabelId),O(1),Qn(e.hintLabel)}}function J6(i,t){if(1&i&&(D(0,"div",27),G(1,Z6,2,2,"div",28),St(2,6),Be(3,"div",29),St(4,7),k()),2&i){const e=M();R("@transitionMessages",e._subscriptAnimationState),O(1),R("ngIf",e.hintLabel)}}const e7=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],t7=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],n7=new _e("MatError"),r7={transitionMessages:kn("transitionMessages",[At("enter",We({opacity:1,transform:"translateY(0%)"})),jt("void => enter",[We({opacity:0,transform:"translateY(-5px)"}),qt("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Jc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=fe({type:i}),i})();const o7=new _e("MatHint");let ml=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=fe({type:i,selectors:[["mat-label"]]}),i})(),s7=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=fe({type:i,selectors:[["mat-placeholder"]]}),i})();const a7=new _e("MatPrefix"),l7=new _e("MatSuffix");let ZT=0;const d7=yo(class{constructor(i){this._elementRef=i}},"primary"),u7=new _e("MAT_FORM_FIELD_DEFAULT_OPTIONS"),ed=new _e("MatFormField");let Qh=(()=>{class i extends d7{constructor(e,n,r,o,s,a,l){super(e),this._changeDetectorRef=n,this._dir=r,this._defaults=o,this._platform=s,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new W,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+ZT++,this._labelId="mat-form-field-label-"+ZT++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=o&&o.appearance?o.appearance:"legacy",this._hideRequiredMarker=!(!o||null==o.hideRequiredMarker)&&o.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const n=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&n!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Ke(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(di(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Ut(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ut(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Yn(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(di(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(di(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Ut(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const n=this._control?this._control.ngControl:null;return n&&n[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Uo(this._label.nativeElement,"transitionend").pipe(an(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const n=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,r=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;n?e.push(n.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null,n=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",o=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!e||!e.children.length||!e.textContent.trim()){const b=n.querySelectorAll(`${r}, ${o}`);for(let w=0;w<b.length;w++)b[w].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let s=0,a=0;const l=n.querySelectorAll(r),p=n.querySelectorAll(o);if(this._label&&this._label.nativeElement.children.length){const b=n.getBoundingClientRect();if(0===b.width&&0===b.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const w=this._getStartEnd(b),A=e.children,P=this._getStartEnd(A[0].getBoundingClientRect());let V=0;for(let q=0;q<A.length;q++)V+=A[q].offsetWidth;s=Math.abs(P-w)-5,a=V>0?.75*V+10:0}for(let b=0;b<l.length;b++)l[b].style.width=`${s}px`;for(let b=0;b<p.length;b++)p[b].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const n=e.getRootNode();return n&&n!==e}return document.documentElement.contains(e)}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(Zt),N(lr,8),N(u7,8),N(En),N(at),N(ii,8))},i.\u0275cmp=st({type:i,selectors:[["mat-form-field"]],contentQueries:function(e,n,r){if(1&e&&(Ht(r,Jc,5),Ht(r,Jc,7),Ht(r,ml,5),Ht(r,ml,7),Ht(r,s7,5),Ht(r,n7,5),Ht(r,o7,5),Ht(r,a7,5),Ht(r,l7,5)),2&e){let o;oe(o=se())&&(n._controlNonStatic=o.first),oe(o=se())&&(n._controlStatic=o.first),oe(o=se())&&(n._labelChildNonStatic=o.first),oe(o=se())&&(n._labelChildStatic=o.first),oe(o=se())&&(n._placeholderChild=o.first),oe(o=se())&&(n._errorChildren=o),oe(o=se())&&(n._hintChildren=o),oe(o=se())&&(n._prefixChildren=o),oe(o=se())&&(n._suffixChildren=o)}},viewQuery:function(e,n){if(1&e&&(xe(H6,7),xe(j6,5),xe(z6,5)),2&e){let r;oe(r=se())&&(n._connectionContainerRef=r.first),oe(r=se())&&(n._inputContainerRef=r.first),oe(r=se())&&(n._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,n){2&e&&Ot("mat-form-field-appearance-standard","standard"==n.appearance)("mat-form-field-appearance-fill","fill"==n.appearance)("mat-form-field-appearance-outline","outline"==n.appearance)("mat-form-field-appearance-legacy","legacy"==n.appearance)("mat-form-field-invalid",n._control.errorState)("mat-form-field-can-float",n._canLabelFloat())("mat-form-field-should-float",n._shouldLabelFloat())("mat-form-field-has-label",n._hasFloatingLabel())("mat-form-field-hide-placeholder",n._hideControlPlaceholder())("mat-form-field-disabled",n._control.disabled)("mat-form-field-autofilled",n._control.autofilled)("mat-focused",n._control.focused)("ng-untouched",n._shouldForward("untouched"))("ng-touched",n._shouldForward("touched"))("ng-pristine",n._shouldForward("pristine"))("ng-dirty",n._shouldForward("dirty"))("ng-valid",n._shouldForward("valid"))("ng-invalid",n._shouldForward("invalid"))("ng-pending",n._shouldForward("pending"))("_mat-animation-noopable",!n._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[$e([{provide:ed,useExisting:i}]),Pe],ngContentSelectors:t7,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,n){1&e&&(un(e7),D(0,"div",0)(1,"div",1,2),F("click",function(o){return n._control.onContainerClick&&n._control.onContainerClick(o)}),G(3,W6,9,0,"ng-container",3),G(4,G6,2,1,"div",4),D(5,"div",5,6),St(7),D(8,"span",7),G(9,X6,5,16,"label",8),k()(),G(10,$6,2,0,"div",9),k(),G(11,K6,2,4,"div",10),D(12,"div",11),G(13,Q6,2,1,"div",12),G(14,J6,5,2,"div",13),k()()),2&e&&(O(3),R("ngIf","outline"==n.appearance),O(1),R("ngIf",n._prefixChildren.length),O(5),R("ngIf",n._hasFloatingLabel()),O(1),R("ngIf",n._suffixChildren.length),O(1),R("ngIf","outline"!=n.appearance),O(1),R("ngSwitch",n._getDisplayedMessages()),O(1),R("ngSwitchCase","error"),O(1),R("ngSwitchCase","hint"))},directives:[ni,D1,Ya,Vu],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[r7.transitionMessages]},changeDetection:0}),i})(),td=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Nn,nt,Zu],nt]}),i})();const h7=["trigger"],f7=["panel"];function p7(i,t){if(1&i&&(D(0,"span",8),B(1),k()),2&i){const e=M();O(1),Qn(e.placeholder)}}function m7(i,t){if(1&i&&(D(0,"span",12),B(1),k()),2&i){const e=M(2);O(1),Qn(e.triggerValue)}}function g7(i,t){1&i&&St(0,0,["*ngSwitchCase","true"])}function _7(i,t){1&i&&(D(0,"span",9),G(1,m7,2,1,"span",10),G(2,g7,1,0,"ng-content",11),k()),2&i&&(R("ngSwitch",!!M().customTrigger),O(2),R("ngSwitchCase",!0))}function v7(i,t){if(1&i){const e=te();D(0,"div",13)(1,"div",14,15),F("@transformPanel.done",function(r){return I(e),M()._panelDoneAnimatingStream.next(r.toState)})("keydown",function(r){return I(e),M()._handleKeydown(r)}),St(3,1),k()()}if(2&i){const e=M();R("@transformPanelWrap",void 0),O(1),Pm("mat-select-panel ",e._getPanelTheme(),""),rt("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),R("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),lt("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const b7=[[["mat-select-trigger"]],"*"],y7=["mat-select-trigger","*"],eE={transformPanelWrap:kn("transformPanelWrap",[jt("* => void",sh("@transformPanel",[oh()],{optional:!0}))]),transformPanel:kn("transformPanel",[At("void",We({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),At("showing",We({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),At("showing-multiple",We({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),jt("void => *",qt("120ms cubic-bezier(0, 0, 0.2, 1)")),jt("* => void",qt("100ms 25ms linear",We({opacity:0})))])};let tE=0;const iE=new _e("mat-select-scroll-strategy"),D7=new _e("MAT_SELECT_CONFIG"),S7={provide:iE,deps:[wi],useFactory:function w7(i){return()=>i.scrollStrategies.reposition()}};class M7{constructor(t,e){this.source=t,this.value=e}}const T7=$o(nl(Nc(k_(class{constructor(i,t,e,n,r){this._elementRef=i,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r}})))),E7=new _e("MatSelectTrigger");let k7=(()=>{class i extends T7{constructor(e,n,r,o,s,a,l,p,b,w,A,P,V,q){var Z,re,J;super(s,o,l,p,w),this._viewportRuler=e,this._changeDetectorRef=n,this._ngZone=r,this._dir=a,this._parentFormField=b,this._liveAnnouncer=V,this._defaultOptions=q,this._panelOpen=!1,this._compareWith=(ve,be)=>ve===be,this._uid="mat-select-"+tE++,this._triggerAriaLabelledBy=null,this._destroy=new W,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+tE++,this._panelDoneAnimatingStream=new W,this._overlayPanelClass=(null===(Z=this._defaultOptions)||void 0===Z?void 0:Z.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=null!==(J=null===(re=this._defaultOptions)||void 0===re?void 0:re.disableOptionCentering)&&void 0!==J&&J,this.ariaLabel="",this.optionSelectionChanges=W_(()=>{const ve=this.options;return ve?ve.changes.pipe(di(ve),Gs(()=>Yn(...ve.map(be=>be.onSelectionChange)))):this._ngZone.onStable.pipe(an(1),Gs(()=>this.optionSelectionChanges))}),this.openedChange=new Te,this._openedStream=this.openedChange.pipe(bn(ve=>ve),ae(()=>{})),this._closedStream=this.openedChange.pipe(bn(ve=>!ve),ae(()=>{})),this.selectionChange=new Te,this.valueChange=new Te,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==q?void 0:q.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=q.typeaheadDebounceInterval),this._scrollStrategyFactory=P,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(A)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){var e,n,r,o;return null!==(o=null!==(e=this._required)&&void 0!==e?e:null===(r=null===(n=this.ngControl)||void 0===n?void 0:n.control)||void 0===r?void 0:r.hasValidator(Fh.required))&&void 0!==o&&o}set required(e){this._required=Ke(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=Ke(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=Ke(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Ci(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new xv(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Jg(),Ut(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Ut(this._destroy)).subscribe(e=>{e.added.forEach(n=>n.select()),e.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(di(null),Ut(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),n=this.ngControl;if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var e,n;return this.multiple?(null===(e=this._selectionModel)||void 0===e?void 0:e.selected)||[]:null===(n=this._selectionModel)||void 0===n?void 0:n.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const n=e.keyCode,r=40===n||38===n||37===n||39===n,o=13===n||32===n,s=this._keyManager;if(!s.isTyping()&&o&&!xi(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;s.onKeydown(e);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const n=this._keyManager,r=e.keyCode,o=40===r||38===r,s=n.isTyping();if(o&&e.altKey)e.preventDefault(),this.close();else if(s||13!==r&&32!==r||!n.activeItem||xi(e))if(!s&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=n.activeItemIndex;n.onKeydown(e),this._multiple&&o&&e.shiftKey&&n.activeItem&&n.activeItemIndex!==a&&n.activeItem._selectViaInteraction()}else e.preventDefault(),n.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(an(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(e);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,e)}catch(o){return!1}});return n&&this._selectionModel.select(n),n}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new A1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Ut(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Ut(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=Yn(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Ut(e)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Yn(...this.options.map(n=>n._stateChanges)).pipe(Ut(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,n){const r=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),n&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),n&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,e):e.indexOf(n)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let n=null;n=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null===(e=this.options)||void 0===e?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){var e;if(this.ariaLabel)return null;const n=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();return this.ariaLabelledby?(n?n+" ":"")+this.ariaLabelledby:n}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var e;if(this.ariaLabel)return null;const n=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();let r=(n?n+" ":"")+this._valueId;return this.ariaLabelledby&&(r+=" "+this.ariaLabelledby),r}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return i.\u0275fac=function(e){return new(e||i)(N(Es),N(Zt),N(at),N(il),N(Ze),N(lr,8),N(zs,8),N(hl,8),N(ed,8),N(Fr,10),tr("tabindex"),N(iE),N(n_),N(D7,8))},i.\u0275dir=fe({type:i,viewQuery:function(e,n){if(1&e&&(xe(h7,5),xe(f7,5),xe(b1,5)),2&e){let r;oe(r=se())&&(n.trigger=r.first),oe(r=se())&&(n.panel=r.first),oe(r=se())&&(n._overlayDir=r.first)}},inputs:{panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Pe,fn]}),i})(),Pv=(()=>{class i extends k7{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,n,r){const o=this._getItemHeight();return Math.min(Math.max(0,o*e-n+o/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Ut(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(an(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const n=R_(e,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===e&&1===n?0:FS((e+n)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new M7(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),r=this._isRtl(),o=this.multiple?56:32;let s;if(this.multiple)s=40;else if(this.disableOptionCentering)s=16;else{let p=this._selectionModel.selected[0]||this.options.first;s=p&&p.group?32:16}r||(s*=-1);const a=0-(e.left+s-(r?o:0)),l=e.right+s-n.width+(r?0:o);a>0?s+=a+8:l>0&&(s-=l+8),this._overlayDir.offsetX=Math.round(s),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,n,r){const o=this._getItemHeight(),s=(o-this._triggerRect.height)/2,a=Math.floor(256/o);let l;return this.disableOptionCentering?0:(l=0===this._scrollTop?e*o:this._scrollTop===r?(e-(this._getItemCount()-a))*o+(o-(this._getItemCount()*o-256)%o):n-o/2,Math.round(-1*l-s))}_checkOverlayWithinViewport(e){const n=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),o=this._triggerRect.top-8,s=r.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),p=Math.min(this._getItemCount()*n,256)-a-this._triggerRect.height;p>s?this._adjustPanelUp(p,s):a>o?this._adjustPanelDown(a,o,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,n){const r=Math.round(e-n);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,n,r){const o=Math.round(e-n);if(this._scrollTop+=o,this._offsetY+=o,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),n=this._getItemCount(),r=Math.min(n*e,256),s=n*e-r;let a;a=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),a+=R_(a,this.options,this.optionGroups);const l=r/2;this._scrollTop=this._calculateOverlayScroll(a,l,s),this._offsetY=this._calculateOverlayOffsetY(a,l,s),this._checkOverlayWithinViewport(s)}_getOriginBasedOnOption(){const e=this._getItemHeight(),n=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-n+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=It(i)))(n||i)}}(),i.\u0275cmp=st({type:i,selectors:[["mat-select"]],contentQueries:function(e,n,r){if(1&e&&(Ht(r,E7,5),Ht(r,rl,5),Ht(r,P_,5)),2&e){let o;oe(o=se())&&(n.customTrigger=o.first),oe(o=se())&&(n.options=o),oe(o=se())&&(n.optionGroups=o)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,n){1&e&&F("keydown",function(o){return n._handleKeydown(o)})("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()}),2&e&&(lt("id",n.id)("tabindex",n.tabIndex)("aria-controls",n.panelOpen?n.id+"-panel":null)("aria-expanded",n.panelOpen)("aria-label",n.ariaLabel||null)("aria-required",n.required.toString())("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-describedby",n._ariaDescribedby||null)("aria-activedescendant",n._getAriaActiveDescendant()),Ot("mat-select-disabled",n.disabled)("mat-select-invalid",n.errorState)("mat-select-required",n.required)("mat-select-empty",n.empty)("mat-select-multiple",n.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[$e([{provide:Jc,useExisting:i},{provide:I_,useExisting:i}]),Pe],ngContentSelectors:y7,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,n){if(1&e&&(un(b7),D(0,"div",0,1),F("click",function(){return n.toggle()}),D(3,"div",2),G(4,p7,2,1,"span",3),G(5,_7,3,2,"span",4),k(),D(6,"div",5),Be(7,"div",6),k()(),G(8,v7,4,14,"ng-template",7),F("backdropClick",function(){return n.close()})("attach",function(){return n._onAttached()})("detach",function(){return n.close()})),2&e){const r=Vt(1);lt("aria-owns",n.panelOpen?n.id+"-panel":null),O(3),R("ngSwitch",n.empty),lt("id",n._valueId),O(1),R("ngSwitchCase",!0),O(1),R("ngSwitchCase",!1),O(3),R("cdkConnectedOverlayPanelClass",n._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",n._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",n.panelOpen)("cdkConnectedOverlayPositions",n._positions)("cdkConnectedOverlayMinWidth",null==n._triggerRect?null:n._triggerRect.width)("cdkConnectedOverlayOffsetY",n._offsetY)}},directives:[v1,Ya,Vu,AD,b1,Ms],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}\n'],encapsulation:2,data:{animation:[eE.transformPanelWrap,eE.transformPanel]},changeDetection:0}),i})(),rE=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[S7],imports:[[Nn,Os,Mh,nt],Zr,td,Mh,nt]}),i})(),Rv=(()=>{class i{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=Ke(e)}get inset(){return this._inset}set inset(e){this._inset=Ke(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,n){2&e&&(lt("aria-orientation",n.vertical?"vertical":"horizontal"),Ot("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,n){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),i})(),oE=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[nt],nt]}),i})();const A7=["comicDialog"],I7=["imageEditorDialog"],P7=["miniTreeDialog"];function R7(i,t){if(1&i){const e=te();D(0,"button",26),F("click",function(){const o=I(e).index;return M(2).goToPage(o)}),B(1),k()}if(2&i){const e=t.index;R("disabled",M(2).page==e),O(1),Ct(" ",e+1," ")}}function O7(i,t){if(1&i&&(D(0,"div",24),G(1,R7,2,2,"button",25),k()),2&i){const e=M();O(1),R("ngForOf",e.pages)}}function F7(i,t){1&i&&Be(0,"div",27)}function L7(i,t){if(1&i){const e=te();D(0,"mat-option",28),F("click",function(){return I(e),M().getAssetsForTags()}),B(1),k()}if(2&i){const e=t.$implicit;R("value",e),O(1),Ct(" ",e," ")}}function N7(i,t){if(1&i){const e=te();D(0,"button",29),F("click",function(){return I(e),M().selectAll()}),B(1," Selected All "),k()}2&i&&(M(),R("matMenuTriggerFor",Vt(18)))}function B7(i,t){if(1&i&&(D(0,"button",30),B(1),k()),2&i){const e=M();R("matMenuTriggerFor",Vt(18)),O(1),Ct(" Selected (",e.coreService.selectedAssets.length,") ")}}function V7(i,t){if(1&i){const e=te();D(0,"button",31),F("click",function(){return I(e),M().openComicDialog()}),B(1," Composition "),k()}}function H7(i,t){if(1&i){const e=te();D(0,"button",31),F("click",function(){return I(e),M().openMiniTreeDialog()}),B(1," Add to category "),k()}}function j7(i,t){if(1&i){const e=te();D(0,"button",31),F("click",function(){return I(e),M().addToSelectedCategory()}),B(1),k()}if(2&i){const e=M();O(1),Ct(" Add to category ",e.apiService.selectedCategory.title," ")}}function z7(i,t){if(1&i){const e=te();D(0,"button",31),F("click",function(){return I(e),M().addToImage()}),B(1," Add to image "),k()}}function W7(i,t){if(1&i){const e=te();D(0,"button",32),F("click",function(){return I(e),M().coreService.selectedAssets=[]}),D(1,"mat-icon"),B(2,"cancel"),k()()}}function G7(i,t){if(1&i){const e=te();D(0,"mat-chip",33),F("removed",function(){const o=I(e).index,s=M();return s.selectedTags.splice(o,1),s.getAssetsForTags(!0)}),B(1),D(2,"button",34)(3,"mat-icon"),B(4,"cancel"),k()()()}if(2&i){const e=t.$implicit;O(1),Ct(" ",e," ")}}function U7(i,t){if(1&i){const e=te();D(0,"button",42),F("click",function(){I(e);const r=M().$implicit;return M().openimageEditorDialog(r)}),D(1,"mat-icon"),B(2,"edit"),k()()}}function Y7(i,t){if(1&i){const e=te();D(0,"div",43),F("click",function(){I(e);const r=M().$implicit,o=M();return o.coreService.selectedAssets.splice(o.coreService.selectedAssets.indexOf(r.src),1)}),D(1,"div",37)(2,"button",44)(3,"mat-icon"),B(4,"check"),k()()()()}}function q7(i,t){if(1&i){const e=te();D(0,"div",35)(1,"div",36)(2,"div",37),G(3,U7,3,0,"button",38),D(4,"button",39),F("click",function(){const o=I(e).$implicit;return M().coreService.selectedAssets.push(o.src)}),D(5,"mat-icon"),B(6,"done"),k()()()(),G(7,Y7,5,0,"div",40),Be(8,"div",41),Xr(9,"apiPathSm"),k()}if(2&i){const e=t.$implicit,n=M();O(3),R("ngIf","image"!==n.addAction),O(4),R("ngIf",n.coreService.selectedAssets.includes(e.src)),O(1),rt("background-image","url("+n.apiService.imgPath+$r(9,4,e.src)+")")}}function X7(i,t){1&i&&Be(0,"app-comic")}function $7(i,t){if(1&i){const e=te();D(0,"app-canvas",47),F("onRemoveFile",function(r){return I(e),M(2).assets.splice(r,1)})("onAddFile",function(r){return I(e),M(2).assets.push(r)}),k()}2&i&&R("selectedFile",M(2).selectedFile)}function K7(i,t){if(1&i&&(D(0,"div",45),G(1,$7,1,1,"app-canvas",46),k()),2&i){const e=M();O(1),R("ngIf",e.selectedFile.path)}}function Q7(i,t){if(1&i){const e=te();D(0,"div",48)(1,"app-mini-tree",49),F("onSelectCategory",function(r){return I(e),M().onSelectCategory(r)}),k()()}}let sE=(()=>{class i{constructor(e,n){this.coreService=e,this.apiService=n,this.addAction="",this.specificForCat=!1,this.onAddSelected=new Te,this.assets=[],this.total=0,this.page=0,this.pageSize=10,this.pages=[],this.tagCtrl=new dv(""),this.selectedTags=[],this.selectedFile={}}ngOnInit(){var e;this.apiService.tags?this.filteredTags=this.tagCtrl.valueChanges.pipe(di(""),ae(r=>r?this.filterTags(r):this.apiService.tags.slice())):this.apiService.getData(`/tagsForAccount/${this.apiService.user.id}`).subscribe(r=>{this.apiService.tags=this.coreService.isProd?Object.values(r):r,this.filteredTags=this.tagCtrl.valueChanges.pipe(di(""),ae(o=>o?this.filterTags(o):this.apiService.tags.slice()))});let n=null===(e=this.apiService.selectedCategory)||void 0===e?void 0:e.files;n&&n.length?(this.assets=n.map(r=>({src:r})),this.total=n.length,this.pages=[0],this.sortablejsOptions={onUpdate:r=>{var o;(null===(o=this.apiService.selectedCategory)||void 0===o?void 0:o.files)&&(this.apiService.selectedCategory.files=this.assets.map(s=>s.src))}}):this.goToPage(0)}filterTags(e){const n=e.toLowerCase();return this.apiService.tags.filter(r=>r.toLowerCase().includes(n))}goToPage(e){this.page=e,this.apiService.getAssets(this.pageSize,this.page*this.pageSize).subscribe({next:n=>{this.assets=n.assets,this.total=n.total,this.pages=Array.from(Array(Math.floor((this.total-1)/this.pageSize)).keys())},error:n=>{console.log(n),this.coreService.giveSnackbar("Login First!",{})}})}getTags(){}openComicDialog(){this.coreService.openDialog({headerText:"Comic",template:this.comicDialog,cls:"no-display"},{id:"comicDialog"})}openimageEditorDialog(e){this.selectedFile=e,this.selectedFile.path=this.apiService.srcApiPath(e.src),this.coreService.openDialog({headerText:"",template:this.imageEditorDialog,cls:"no-display",showClose:!1},{id:"imageEditorDialog"})}openMiniTreeDialog(){this.coreService.openDialog({headerText:"Select Category",template:this.miniTreeDialog},{id:"miniTreeDialog"})}onSelectCategory(e){let n=[...this.coreService.selectedAssets];e.files=e.files?e.files.concat(n):n,this.apiService.postAuthData("/tree",{categories:this.apiService.categories}).subscribe({next:r=>{this.coreService.giveSnackbar("New tree version created")},error:r=>{console.log(r),this.coreService.selectedAssets=[],this.coreService.giveSnackbar(null==r?void 0:r.message,{duration:5e3,verticalPosition:"top"})},complete:()=>{this.coreService.selectedAssets=[],this.coreService.closeAllDialogs()}})}addToSelectedCategory(){let e=[...this.coreService.selectedAssets];this.apiService.selectedCategory.files=this.apiService.selectedCategory.files?this.apiService.selectedCategory.files.concat(e):e,this.coreService.selectedAssets=[],this.coreService.closeAllDialogs()}addToImage(){this.onAddSelected.emit()}selectAll(){let e=this.assets.map(n=>n.src);this.coreService.selectedAssets=this.coreService.selectedAssets.concat(e)}getAssetsForTags(e=!1){e||(this.selectedTags.push(this.tagCtrl.value),this.selectedTags=this.coreService.arrayUnique(this.selectedTags));let n=this.selectedTags.join(",");this.selectedTags.length?this.apiService.getData(`/assetsForTags/${this.apiService.user.id}/${n}`).subscribe({next:r=>{this.assets=r,this.tagCtrl.setValue("")},error:r=>{console.log(r),this.coreService.giveSnackbar("Login First!",{})}}):this.goToPage(0)}}return i.\u0275fac=function(e){return new(e||i)(N(no),N(Jo))},i.\u0275cmp=st({type:i,selectors:[["app-gallery"]],viewQuery:function(e,n){if(1&e&&(xe(A7,7),xe(I7,7),xe(P7,7)),2&e){let r;oe(r=se())&&(n.comicDialog=r.first),oe(r=se())&&(n.imageEditorDialog=r.first),oe(r=se())&&(n.miniTreeDialog=r.first)}},inputs:{addAction:"addAction",specificForCat:"specificForCat"},outputs:{onAddSelected:"onAddSelected"},decls:35,vars:18,consts:[["align","center",1,"my-gallery"],[1,"row","mrgn-t-sm","pad-all-sm",2,"margin","0"],["class","col-xs-12 col-sm-5 col-md-6 start-xs my-scroll","style","white-space: nowrap; overflow-x: auto;",4,"ngIf"],["class","col-xs-12 col-sm-5 col-md-6",4,"ngIf"],[1,"d-xs-none","col-sm-7","col-md-6","end-xs"],["type","text","aria-label","Search Tags",2,"opacity","0","width","1px"],[1,"",2,"display","inline-block"],["appearance","fill"],["type","text","aria-label","Search Tags","matInput","",3,"matAutocomplete","formControl"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["mat-button","",3,"matMenuTriggerFor","click",4,"ngIf"],["mat-button","",3,"matMenuTriggerFor",4,"ngIf"],["selectedMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-button","","color","warn",3,"click",4,"ngIf"],[1,"row","pad-all-sm",2,"margin","0px"],["aria-label","Selected Tags"],[3,"removed",4,"ngFor","ngForOf"],[1,"row","around-xs",2,"margin","0",3,"sortablejs","sortablejsOptions"],["class","pad-all-sm mrgn-all-sm gallery-card",4,"ngFor","ngForOf"],["comicDialog",""],["imageEditorDialog",""],["miniTreeDialog",""],[1,"col-xs-12","col-sm-5","col-md-6","start-xs","my-scroll",2,"white-space","nowrap","overflow-x","auto"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-xs-12","col-sm-5","col-md-6"],[3,"value","click"],["mat-button","",3,"matMenuTriggerFor","click"],["mat-button","",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-button","","color","warn",3,"click"],[3,"removed"],["matChipRemove",""],[1,"pad-all-sm","mrgn-all-sm","gallery-card"],[1,"gallery-card-overlay"],[2,"width","100%"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-icon-button","",1,"d-xs-none","d-sm-inline-block",3,"click"],["class","gallery-card-selected",3,"click",4,"ngIf"],[1,"bg-image-contain",2,"width","150px","height","150px"],["mat-icon-button","",3,"click"],[1,"gallery-card-selected",3,"click"],["mat-icon-button","",1,"mat-green"],[1,"my-scroll","mat-grey",2,"height","95vh","margin-bottom","-5px"],[3,"selectedFile","onRemoveFile","onAddFile",4,"ngIf"],[3,"selectedFile","onRemoveFile","onAddFile"],[1,"my-scroll",2,"height","95vh","margin-bottom","-5px","min-width","300px"],[3,"onSelectCategory"]],template:function(e,n){if(1&e&&(D(0,"div",0)(1,"div",1),G(2,O7,2,1,"div",2),G(3,F7,1,0,"div",3),D(4,"div",4),Be(5,"input",5),D(6,"form",6)(7,"mat-form-field",7)(8,"mat-label"),B(9,"Search Tag"),k(),Be(10,"input",8),D(11,"mat-autocomplete",null,9),G(13,L7,2,2,"mat-option",10),Xr(14,"async"),k()()(),G(15,N7,2,1,"button",11),G(16,B7,2,2,"button",12),D(17,"mat-menu",null,13),G(19,V7,2,0,"button",14),G(20,H7,2,0,"button",14),G(21,j7,2,1,"button",14),G(22,z7,2,0,"button",14),k(),G(23,W7,3,0,"button",15),k(),D(24,"div",16)(25,"mat-chip-list",17),G(26,G7,5,1,"mat-chip",18),k()()(),D(27,"div",19),G(28,q7,10,6,"div",20),k()(),G(29,X7,1,0,"ng-template",null,21,Ie),G(31,K7,2,1,"ng-template",null,22,Ie),G(33,Q7,2,0,"ng-template",null,23,Ie)),2&e){const r=Vt(12);O(2),R("ngIf",n.pages.length>1),O(1),R("ngIf",n.pages.length<=1),O(7),R("matAutocomplete",r)("formControl",n.tagCtrl),O(3),R("ngForOf",$r(14,16,n.filteredTags)),O(2),R("ngIf",!n.coreService.selectedAssets.length),O(1),R("ngIf",n.coreService.selectedAssets.length),O(3),R("ngIf","image"!==n.addAction),O(1),R("ngIf",!n.addAction),O(1),R("ngIf","category"===n.addAction),O(1),R("ngIf","image"===n.addAction),O(1),R("ngIf",n.coreService.selectedAssets.length),O(3),R("ngForOf",n.selectedTags),O(1),R("sortablejs",n.assets)("sortablejsOptions",n.sortablejsOptions),O(1),R("ngForOf",n.assets)}},styles:[".my-gallery[_ngcontent-%COMP%]{min-width:300px}@media only screen and (min-width: 48em){.my-gallery[_ngcontent-%COMP%]{min-width:40em}}"]}),i})();function Z7(i,t){if(1&i&&(D(0,"mat-option",45),B(1),k()),2&i){const e=t.$implicit;R("value",e),O(1),Ct(" ",e," ")}}function J7(i,t){if(1&i){const e=te();D(0,"button",46),F("click",function(){const o=I(e).$implicit;return M(2).getSvgFile(o.name)}),B(1),k()}if(2&i){const e=t.$implicit;O(1),Ct(" ",e.name," ")}}function e9(i,t){if(1&i){const e=te();D(0,"button",47),F("click",function(){const o=I(e).$implicit;return M(2).giveSVGIcon(o.svg)}),k()}if(2&i){const e=t.$implicit,n=M(2);rt("fill",n.icon.fill)("stroke",n.icon.stroke),R("innerHTML",n.sanitizer.bypassSecurityTrustHtml(e.svg),Kl)}}function t9(i,t){if(1&i){const e=te();D(0,"div",2)(1,"div",3)(2,"div",4)(3,"button",5),F("click",function(){I(e);const r=M();return r.fabricCanvas.isDrawingMode=!0,r.fabricCanvas.appStatus="excludeCrop"}),Be(4,"mat-icon",6),k(),D(5,"button",7),F("click",function(){I(e);const r=M();return r.fabricCanvas.selection=!0,r.fabricCanvas.appStatus="selectAndRemovePart"}),D(6,"mat-icon"),B(7,"crop"),k()(),D(8,"button",8),F("click",function(){return I(e),M().duplicateSelection()}),D(9,"mat-icon"),B(10,"content_copy"),k()(),D(11,"button",9),F("click",function(){I(e);const r=M();return r.fabricCanvas.isDrawingMode=!1,r.fabricCanvas.selection=!0}),D(12,"mat-icon"),B(13,"touch_app"),k()(),D(14,"button",10),F("click",function(){return I(e),M().fabricCanvas.discardActiveObject().renderAll()}),D(15,"mat-icon"),B(16,"remove_done"),k()(),D(17,"button",11),F("click",function(){return I(e),M().removeSelection()}),D(18,"mat-icon"),B(19,"remove"),k()(),D(20,"div",12),St(21),k()(),D(22,"div",4)(23,"div",13),B(24," Brush "),D(25,"app-picker-menu",14),F("click",function(){I(e);const r=M();return r.fabricCanvas.appStatus="",r.fabricService.addBrush(r.fabricCanvas,r.brush)})("onPickColor",function(r){I(e);const o=M();return o.brush.color=r.color,o.fabricService.addBrush(o.fabricCanvas,o.brush),o.changeActiveBrush()}),D(26,"div",15)(27,"div",16),B(28," Line Width "),D(29,"mat-slider",17),F("ngModelChange",function(r){return I(e),M().brush.width=r})("change",function(){I(e);const r=M();return r.fabricService.addBrush(r.fabricCanvas,r.brush),r.changeActiveBrush()}),k()(),D(30,"div"),B(31," Line Miter "),D(32,"mat-button-toggle-group",18),F("ngModelChange",function(r){return I(e),M().brush.strokeLineCap=r})("change",function(){I(e);const r=M();return r.fabricService.addBrush(r.fabricCanvas,r.brush),r.changeActiveBrush()}),D(33,"mat-button-toggle",19)(34,"mat-icon"),B(35,"rectangle"),k()(),D(36,"mat-button-toggle",20)(37,"mat-icon"),B(38,"lens"),k()(),D(39,"mat-button-toggle",21)(40,"mat-icon"),B(41,"square"),k()()()(),D(42,"button",22),F("click",function(){I(e);const r=M();return r.fabricCanvas.isDrawingMode=!1,r.fabricCanvas.appStatus="colorpicker-brush"}),Be(43,"mat-icon",23),k()()()(),D(44,"div",13),B(45," Textbox "),D(46,"div")(47,"app-picker-menu",24),F("onPickColor",function(r){I(e);const o=M();return o.textbox.stroke=r.color,o.changeActiveText()}),D(48,"div",25)(49,"div",16),B(50," Font Size "),D(51,"mat-slider",26),F("ngModelChange",function(r){return I(e),M().textbox.fontSize=r})("change",function(){return I(e),M().changeActiveText()}),k()(),D(52,"mat-form-field",27)(53,"mat-label"),B(54,"Font"),k(),D(55,"mat-select",28),F("ngModelChange",function(r){return I(e),M().textbox.fontFamily=r})("selectionChange",function(){return I(e),M().changeActiveText()}),G(56,Z7,2,2,"mat-option",29),k()()()(),D(57,"app-picker-menu",24),F("onPickColor",function(r){I(e);const o=M();return o.textbox.backgroundColor=r.color,o.changeActiveText()}),D(58,"button",22),F("click",function(){I(e);const r=M();return r.fabricCanvas.isDrawingMode=!1,r.fabricCanvas.appStatus="colorpicker-textbox"}),Be(59,"mat-icon",23),k()(),D(60,"button",22),F("click",function(){I(e);const r=M();return r.fabricService.addTextBox(r.fabricCanvas,r.textbox)}),D(61,"mat-icon"),B(62,"notes"),k()(),D(63,"button",22),F("click",function(){I(e);const r=M();return r.fabricService.speechBubble(r.fabricCanvas,r.textbox)}),D(64,"mat-icon"),B(65,"comment"),k()()()(),D(66,"div",13),B(67," Icons "),D(68,"div")(69,"app-picker-menu",30),F("onPickColor",function(r){I(e);const o=M();return o.icon.stroke=r.color,o.changeActiveIcon()}),D(70,"div",25)(71,"div",16),B(72," Stroke Width "),D(73,"mat-slider",31),F("ngModelChange",function(r){return I(e),M().icon.strokeWidth=r})("change",function(){return I(e),M().changeActiveIcon()}),k()()()(),D(74,"app-picker-menu",32),F("onPickColor",function(r){I(e);const o=M();return o.icon.fill=r.color,o.changeActiveIcon()}),D(75,"button",22),F("click",function(){I(e);const r=M();return r.fabricCanvas.isDrawingMode=!1,r.fabricCanvas.appStatus="colorpicker-icon"}),Be(76,"mat-icon",23),k()(),D(77,"button",33)(78,"mat-icon"),B(79,"image"),k()(),D(80,"mat-menu",34,35)(82,"div",36),F("click",function(r){return r.stopPropagation()}),D(83,"div",37)(84,"div",38),G(85,J7,2,1,"button",39),k(),D(86,"div",40)(87,"div",41),G(88,e9,1,5,"button",42),k()()()()()()()(),D(89,"div",43)(90,"button",44),F("click",function(){return I(e),M().fabricCanvas.clear()}),D(91,"mat-icon"),B(92,"delete"),k()()()()()}if(2&i){const e=Vt(81),n=M();O(25),R("icon","brush")("color",n.brush.color),O(4),R("ngModel",n.brush.width),O(3),R("ngModel",n.brush.strokeLineCap),O(15),R("icon","text_fields")("color",n.textbox.stroke),O(4),R("ngModel",n.textbox.fontSize),O(4),R("ngModel",n.textbox.fontFamily),O(1),R("ngForOf",n.fonts),O(1),R("icon","format_paint")("color",n.textbox.backgroundColor),O(12),R("color",n.icon.stroke),O(4),R("ngModel",n.icon.strokeWidth),O(1),R("color",n.icon.fill),O(3),R("matMenuTriggerFor",e),O(3),R("overlapTrigger",!1),O(5),R("ngForOf",n.svgFiles),O(3),R("ngForOf",n.svgIcons)}}function n9(i,t){if(1&i){const e=te();D(0,"div",62),F("click",function(r){return r.stopPropagation()}),D(1,"app-gallery",63),F("onAddSelected",function(){return I(e),M(2).onAddSelected()}),k()()}2&i&&(O(1),R("addAction","image"))}function r9(i,t){if(1&i&&(D(0,"mat-option",45),B(1),k()),2&i){const e=t.$implicit;R("value",e),O(1),Ct(" ",e," ")}}function o9(i,t){if(1&i){const e=te();D(0,"button",64),F("click",function(){const o=I(e).$implicit;return M(2).getSvgFile(o.name)}),B(1),k()}if(2&i){const e=t.$implicit;O(1),Ct(" ",e.name," ")}}function s9(i,t){if(1&i){const e=te();D(0,"button",47),F("click",function(){const o=I(e).$implicit;return M(2).giveSVGIcon(o.svg)}),k()}if(2&i){const e=t.$implicit,n=M(2);rt("fill",n.icon.fill)("stroke",n.icon.stroke),R("innerHTML",n.sanitizer.bypassSecurityTrustHtml(e.svg),Kl)}}function a9(i,t){if(1&i){const e=te();D(0,"div",48)(1,"div",49),Be(2,"mat-divider",50),D(3,"div")(4,"button",51),F("click",function(){return I(e),M().showGallery=!0}),D(5,"mat-icon"),B(6,"folder"),k()(),D(7,"mat-menu",52,53),G(9,n9,2,1,"div",54),k(),D(10,"button",55),F("click",function(){return I(e),M().duplicateSelection()}),D(11,"mat-icon"),B(12,"content_copy"),k()(),D(13,"button",55),F("click",function(){I(e);const r=M();return r.fabricCanvas.isDrawingMode=!1,r.fabricCanvas.selection=!0}),D(14,"mat-icon"),B(15,"touch_app"),k()(),D(16,"button",44),F("click",function(){return I(e),M().removeSelection()}),D(17,"mat-icon"),B(18,"remove"),k()()(),Be(19,"mat-divider",50),D(20,"div",56)(21,"div",57),B(22," Brush "),D(23,"app-picker-menu",14),F("click",function(){I(e);const r=M();return r.fabricService.addBrush(r.fabricCanvas,r.brush)})("onPickColor",function(r){I(e);const o=M();return o.brush.color=r.color,o.fabricService.addBrush(o.fabricCanvas,o.brush)}),D(24,"div",25)(25,"div",16),B(26," Line Width "),D(27,"mat-slider",17),F("ngModelChange",function(r){return I(e),M().brush.width=r})("change",function(){I(e);const r=M();return r.fabricService.addBrush(r.fabricCanvas,r.brush)}),k()(),D(28,"div"),B(29," Line Miter "),D(30,"mat-button-toggle-group",18),F("ngModelChange",function(r){return I(e),M().brush.strokeLineCap=r})("change",function(){I(e);const r=M();return r.fabricService.addBrush(r.fabricCanvas,r.brush)}),D(31,"mat-button-toggle",19)(32,"mat-icon"),B(33,"rectangle"),k()(),D(34,"mat-button-toggle",20)(35,"mat-icon"),B(36,"lens"),k()(),D(37,"mat-button-toggle",21)(38,"mat-icon"),B(39,"square"),k()()()()()()(),D(40,"div",58),B(41," Textbox "),D(42,"div")(43,"app-picker-menu",24),F("onPickColor",function(r){I(e);const o=M();return o.textbox.stroke=r.color,o.changeActiveText()}),D(44,"div",25)(45,"div",16),B(46," Font Size "),D(47,"mat-slider",26),F("ngModelChange",function(r){return I(e),M().textbox.fontSize=r})("change",function(){return I(e),M().changeActiveText()}),k()(),D(48,"mat-form-field",27)(49,"mat-label"),B(50,"Font"),k(),D(51,"mat-select",28),F("ngModelChange",function(r){return I(e),M().textbox.fontFamily=r})("selectionChange",function(){return I(e),M().changeActiveText()}),G(52,r9,2,2,"mat-option",29),k()()()(),D(53,"app-picker-menu",24),F("onPickColor",function(r){I(e);const o=M();return o.textbox.backgroundColor=r.color,o.changeActiveText()}),k(),D(54,"button",55),F("click",function(){I(e);const r=M();return r.fabricService.addTextBox(r.fabricCanvas,r.textbox)}),D(55,"mat-icon"),B(56,"notes"),k()(),D(57,"button",55),F("click",function(){I(e);const r=M();return r.fabricService.speechBubble(r.fabricCanvas,r.textbox)}),D(58,"mat-icon"),B(59,"comment"),k()()()(),D(60,"div",13),B(61," Icons "),D(62,"div")(63,"app-picker-menu",30),F("onPickColor",function(r){I(e);const o=M();return o.icon.stroke=r.color,o.changeActiveIcon()}),D(64,"div",25)(65,"div",16),B(66," Stroke Width "),D(67,"mat-slider",31),F("ngModelChange",function(r){return I(e),M().icon.strokeWidth=r})("change",function(){return I(e),M().changeActiveIcon()}),k()()()(),D(68,"app-picker-menu",32),F("onPickColor",function(r){I(e);const o=M();return o.icon.fill=r.color,o.changeActiveIcon()}),k(),D(69,"button",59)(70,"mat-icon"),B(71,"image"),k()(),D(72,"mat-menu",34,35)(74,"div",36),F("click",function(r){return r.stopPropagation()}),D(75,"div",37)(76,"div",38),G(77,o9,2,1,"button",60),k(),D(78,"div",61)(79,"div",37),G(80,s9,1,5,"button",42),k()()()()()()()()()()}if(2&i){const e=Vt(8),n=Vt(73),r=M();O(4),R("matMenuTriggerFor",e),O(5),R("ngIf",r.showGallery),O(14),R("icon","brush")("color",r.brush.color),O(4),R("ngModel",r.brush.width),O(3),R("ngModel",r.brush.strokeLineCap),O(13),R("icon","text_fields")("color",r.textbox.stroke),O(4),R("ngModel",r.textbox.fontSize),O(4),R("ngModel",r.textbox.fontFamily),O(1),R("ngForOf",r.fonts),O(1),R("icon","format_paint")("color",r.textbox.backgroundColor),O(10),R("color",r.icon.stroke),O(4),R("ngModel",r.icon.strokeWidth),O(1),R("color",r.icon.fill),O(1),R("matMenuTriggerFor",n),O(3),R("overlapTrigger",!1),O(5),R("ngForOf",r.svgFiles),O(3),R("ngForOf",r.svgIcons)}}const l9=["*"];let Ov=(()=>{class i{constructor(e,n,r,o){this.apiService=e,this.fabricService=n,this.coreService=r,this.sanitizer=o,this.view="edit",this.images=[],this.gotEvent=!1,this.svgFiles=[{name:"textbox"},{name:"christmas"},{name:"superheroes"},{name:"animals"},{name:"face-emotions"},{name:"instruments"}],this.fonts=["sans-serif","serif","Times New Roman","Helvetica","Arial","Verdana","Courier New"],this.showGallery=!1,this.brush={color:"white",strokeLineCap:"butt",width:30},this.textbox={backgroundColor:"rgba(255, 255, 255, 1)",stroke:"rgba(50,50,50, 1)",fontSize:30,fontFamily:"serif"},this.icon={fill:"white",stroke:"black",scale:2,strokeWidth:.5}}ngOnInit(){console.log("ngOnInit fabric")}ngAfterViewChecked(){this.fabricCanvas&&!this.gotEvent&&(console.log("app fabric ngAfterContentInit triggered many times"),this.gotEvent=!0,this.fabricCanvas.on("mouse:down",e=>{if(this.fabricCanvas.appStatus.indexOf("colorpicker")>-1){let s,n=Math.round(e.pointer.x),r=Math.round(e.pointer.y),o=this.ctxFabric.getImageData(n,r,1,1);o&&o.data[3]||(o=this.ctx.getImageData(n,r,1,1)),s=o.data,this.fabricCanvas.isDrawingMode=!0,this.fabricCanvas.selectable=!1;let a=`rgba(${s[0]},${s[1]},${s[2]},${s[3]})`;"colorpicker-icon"===this.fabricCanvas.appStatus?this.icon.fill=a:"colorpicker-brush"===this.fabricCanvas.appStatus?(this.fabricCanvas.freeDrawingBrush.color=a,this.brush.color=a):"colorpicker-textbox"===this.fabricCanvas.appStatus&&(this.textbox.backgroundColor=a),this.fabricCanvas.appStatus=""}}))}ngAfterContentInit(){}getSvgFile(e){this.coreService.getData(`./assets/json/svg-${e}.json`).subscribe(n=>{this.svgIcons=n})}removeSelection(){let e=this.fabricCanvas.getActiveObject();this.fabricCanvas.remove(e),e._objects&&e._objects.forEach(n=>{this.fabricCanvas.remove(n)}),this.fabricCanvas.discardActiveObject()}giveSVGIcon(e){this.fabricService.loadSVGFromString(this.fabricCanvas,{path:e,fill:this.icon.fill,stroke:this.icon.stroke,strokeWidth:this.icon.strokeWidth,scale:this.icon.scale,left:this.fabricCanvas.width/2-25,top:this.fabricCanvas.height/2-25})}changeActiveBrush(){let e=this.fabricCanvas.getActiveObject();!e||!e.strokeMiterLimit||(e.set("stroke",this.brush.color),e.set("strokeWidth",this.brush.width),e.set("strokeLineCap",this.brush.strokeLineCap),this.fabricCanvas.renderAll())}changeActiveIcon(){let e=this.fabricCanvas.getActiveObject();!e||!e.fromSVG&&"svg-group"!==e.name||(e._objects?e._objects.forEach(n=>{n.set("fill",this.icon.fill),n.set("stroke",this.icon.stroke),n.set("strokeWidth",this.icon.strokeWidth)}):(e.set("fill",this.icon.fill),e.set("stroke",this.icon.stroke),e.set("strokeWidth",this.icon.strokeWidth)),this.fabricCanvas.renderAll())}changeActiveText(){let e=this.fabricCanvas.getActiveObject();!e||"my-textbox"!==e.name||(e.set("backgroundColor",this.textbox.backgroundColor),e.set("stroke",this.textbox.stroke),e.set("fontSize",this.textbox.fontSize),e.set("fontFamily",this.textbox.fontFamily),this.fabricCanvas.renderAll())}onAddSelected(){let e=[...this.coreService.selectedAssets].map(n=>this.apiService.srcApiPath(n));this.fabricService.showImagesFromService(e).subscribe(n=>{n.forEach(r=>{console.log(r),this.fabricCanvas.add(r)}),setTimeout(()=>{this.fabricCanvas.renderAll(),this.coreService.selectedAssets=[]},1e3)})}duplicateSelection(){let e=this.fabricCanvas.getActiveObject();e?e._objects?this.coreService.giveSnackbar("Can only clone one object at the time!"):this.fabricCanvas.getActiveObject().clone(r=>{r.clone(o=>{this.fabricCanvas.discardActiveObject(),o.set("id",`image-${this.images.length}`),this.fabricCanvas.add(o),this.fabricCanvas.setActiveObject(o),this.fabricCanvas.requestRenderAll(),this.images.push(o)})}):this.coreService.giveSnackbar("Select an object first!")}}return i.\u0275fac=function(e){return new(e||i)(N(Jo),N(al),N(no),N(Go))},i.\u0275cmp=st({type:i,selectors:[["app-fabric"]],inputs:{fabricCanvas:"fabricCanvas",ctxFabric:"ctxFabric",ctx:"ctx",view:"view",images:"images"},ngContentSelectors:l9,decls:3,vars:2,consts:[["class","flex flex-row fabric-colors-con p-4",4,"ngIf"],["class","row fabric-colors-con",4,"ngIf"],[1,"flex","flex-row","fabric-colors-con","p-4"],[1,"flex","flex-col","w-full"],[1,"flex","flex-row","flex-wrap"],["mat-icon-button","","color","accent","matTooltip","Lasso crop",3,"click"],["svgIcon","lasso"],["mat-icon-button","","color","accent","matTooltip","Rectangle crop",3,"click"],["mat-icon-button","","color","accent","matTooltip","Duplicate selection",3,"click"],["mat-icon-button","","color","accent","matTooltip","Select objects",3,"click"],["mat-icon-button","","color","accent","matTooltip","Clear Selection",3,"click"],["mat-icon-button","","color","warn","matTooltip","Remove Selected Objects",3,"click"],[1,"col-xs","end-xs"],[1,"flex","flex-col","p-2"],[3,"icon","color","click","onPickColor"],[1,"flex","flex-col"],[2,"z-index","9999"],["thumbLabel","","step","1","min","1","max","50",3,"ngModel","ngModelChange","change"],["aria-label","Select an option",3,"ngModel","ngModelChange","change"],["value","butt"],["value","round"],["value","square"],["mat-icon-button","","color","accent",3,"click"],["svgIcon","colorpicker"],[3,"icon","color","onPickColor"],[1,"col"],["thumbLabel","","step","1","min","5","max","50",3,"ngModel","ngModelChange","change"],[2,"width","100px","margin","0 7px 0 7px"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["icon","border_color",3,"color","onPickColor"],["thumbLabel","","step","0.1","min","0.2","max","5",3,"ngModel","ngModelChange","change"],["icon","format_paint",3,"color","onPickColor"],["mat-icon-button","","color","accent",3,"matMenuTriggerFor"],[1,"my-menu","p-2",3,"overlapTrigger"],["iconsMenu","matMenu"],[3,"click"],[1,"flex","flex-row"],[1,"w-1/3"],["style","width: 100%","mat-raised-button","","color","primary",3,"click",4,"ngFor","ngForOf"],[1,"flex","flex-col","w-2/3"],[1,"flex","flex-row","flex-wrap","gap-2"],["mat-raised-button","","color","primary","class","svg-but",3,"fill","stroke","innerHTML","click",4,"ngFor","ngForOf"],[1,"flex","flex-row","justify-end"],["mat-raised-button","","color","warn",3,"click"],[3,"value"],["mat-raised-button","","color","primary",2,"width","100%",3,"click"],["mat-raised-button","","color","primary",1,"svg-but",3,"innerHTML","click"],[1,"row","fabric-colors-con"],[1,"col",2,"width","100%"],[1,"mrgn-t-md","mrgn-b-md"],["mat-raised-button","","color","accent",3,"matMenuTriggerFor","click"],["yPosition","above"],["galleryMenu","matMenu"],["style","width: 600px;",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"],[1,"middle-xs","pad-l-sm"],[1,"col","pad-all-xs"],[1,"col","pad-all-xs",2,"background","rgba(150,150,150,.5)"],["mat-raised-button","","color","accent",3,"matMenuTriggerFor"],["mat-raised-button","","color","primary",3,"click",4,"ngFor","ngForOf"],[1,"w-2/3"],[2,"width","600px",3,"click"],[3,"addAction","onAddSelected"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,n){1&e&&(un(),D(0,"div"),G(1,t9,93,18,"div",0),G(2,a9,81,20,"div",1),k()),2&e&&(O(1),R("ngIf","edit"===n.view),O(1),R("ngIf","comic"===n.view))},directives:[ni,Rr,Oz,Or,Zc,Xc,cl,ul,$T,KT,Qh,ml,Pv,Qr,rl,pl,fl,Rv,sE],styles:[".fabric-colors-con[_ngcontent-%COMP%]{position:relative;transform-origin:left top}.fabric-colors-con[_ngcontent-%COMP%]   app-picker-menu[_ngcontent-%COMP%]{margin-left:7px;margin-right:7px;color:#000}.svg-but[_ngcontent-%COMP%]{width:50px}.svg-but[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px}  .mat-menu-panel{max-width:none!important}"]}),i})();const c9=["input"],d9=function(i){return{enterDuration:i}},u9=["*"],h9=new _e("mat-radio-default-options",{providedIn:"root",factory:function f9(){return{color:"accent"}}});let aE=0;const p9={provide:ri,useExisting:Gt(()=>Fv),multi:!0};class lE{constructor(t,e){this.source=t,this.value=e}}const cE=new _e("MatRadioGroup");let m9=(()=>{class i{constructor(e){this._changeDetector=e,this._value=null,this._name="mat-radio-group-"+aE++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new Te}get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition="before"===e?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=Ke(e),this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=Ke(e),this._markRadiosForCheck()}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(n=>{n.checked=this.value===n.value,n.checked&&(this._selected=n)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new lE(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(N(Zt))},i.\u0275dir=fe({type:i,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),i})(),Fv=(()=>{class i extends m9{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=It(i)))(n||i)}}(),i.\u0275dir=fe({type:i,selectors:[["mat-radio-group"]],contentQueries:function(e,n,r){if(1&e&&Ht(r,Lv,5),2&e){let o;oe(o=se())&&(n._radios=o)}},hostAttrs:["role","radiogroup",1,"mat-radio-group"],exportAs:["matRadioGroup"],features:[$e([p9,{provide:cE,useExisting:i}]),Pe]}),i})();class g9{constructor(t){this._elementRef=t}}const _9=$o(nl(g9));let v9=(()=>{class i extends _9{constructor(e,n,r,o,s,a,l,p){super(n),this._changeDetector=r,this._focusMonitor=o,this._radioDispatcher=s,this._providerOverride=l,this._uniqueId="mat-radio-"+ ++aE,this.id=this._uniqueId,this.change=new Te,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=e,this._noopAnimations="NoopAnimations"===a,p&&(this.tabIndex=Ci(p,0)),this._removeUniqueSelectionListener=s.listen((b,w)=>{b!==this.id&&w===this.name&&(this.checked=!1)})}get checked(){return this._checked}set checked(e){const n=Ke(e);this._checked!==n&&(this._checked=n,n&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!n&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),n&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(e){this._setDisabled(Ke(e))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){this._required=Ke(e)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(e){this._color=e}get inputId(){return`${this.id||this._uniqueId}-input`}focus(e,n){n?this._focusMonitor.focusVia(this._inputElement,n,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name)}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new lE(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(e){e.stopPropagation()}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){const n=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),n&&this.radioGroup._emitChangeEvent())}}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}_updateTabIndex(){var e;const n=this.radioGroup;let r;if(r=n&&n.selected&&!this.disabled?n.selected===this?this.tabIndex:-1:this.tabIndex,r!==this._previousTabIndex){const o=null===(e=this._inputElement)||void 0===e?void 0:e.nativeElement;o&&(o.setAttribute("tabindex",r+""),this._previousTabIndex=r)}}}return i.\u0275fac=function(e){La()},i.\u0275dir=fe({type:i,viewQuery:function(e,n){if(1&e&&xe(c9,5),2&e){let r;oe(r=se())&&(n._inputElement=r.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[Pe]}),i})(),Lv=(()=>{class i extends v9{constructor(e,n,r,o,s,a,l,p){super(e,n,r,o,s,a,l,p)}}return i.\u0275fac=function(e){return new(e||i)(N(cE,8),N(Ze),N(Zt),N(Jr),N(wv),N(ii,8),N(h9,8),tr("tabindex"))},i.\u0275cmp=st({type:i,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-radio-button"],hostVars:17,hostBindings:function(e,n){1&e&&F("focus",function(){return n._inputElement.nativeElement.focus()}),2&e&&(lt("tabindex",null)("id",n.id)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),Ot("mat-radio-checked",n.checked)("mat-radio-disabled",n.disabled)("_mat-animation-noopable",n._noopAnimations)("mat-primary","primary"===n.color)("mat-accent","accent"===n.color)("mat-warn","warn"===n.color))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[Pe],ngContentSelectors:u9,decls:13,vars:19,consts:[[1,"mat-radio-label"],["label",""],[1,"mat-radio-container"],[1,"mat-radio-outer-circle"],[1,"mat-radio-inner-circle"],["type","radio",1,"mat-radio-input",3,"id","checked","disabled","required","change","click"],["input",""],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mat-radio-label-content"],[2,"display","none"]],template:function(e,n){if(1&e&&(un(),D(0,"label",0,1)(2,"span",2),Be(3,"span",3)(4,"span",4),D(5,"input",5,6),F("change",function(o){return n._onInputInteraction(o)})("click",function(o){return n._onInputClick(o)}),k(),D(7,"span",7),Be(8,"span",8),k()(),D(9,"span",9)(10,"span",10),B(11,"\xa0"),k(),St(12),k()()),2&e){const r=Vt(1);lt("for",n.inputId),O(5),R("id",n.inputId)("checked",n.checked)("disabled",n.disabled)("required",n.required),lt("name",n.name)("value",n.value)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedby),O(2),R("matRippleTrigger",r)("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",pc(17,d9,n._noopAnimations?0:150)),O(2),Ot("mat-radio-label-before","before"==n.labelPosition)}},directives:[Qo],styles:[".mat-radio-button{display:inline-block;-webkit-tap-highlight-color:transparent;outline:0}.mat-radio-label{-webkit-user-select:none;user-select:none;cursor:pointer;display:inline-flex;align-items:center;white-space:nowrap;vertical-align:middle;width:100%}.mat-radio-container{box-sizing:border-box;display:inline-block;position:relative;width:20px;height:20px;flex-shrink:0}.mat-radio-outer-circle{box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;transition:border-color ease 280ms;width:20px;border-width:2px;border-style:solid;border-radius:50%}._mat-animation-noopable .mat-radio-outer-circle{transition:none}.mat-radio-inner-circle{border-radius:50%;box-sizing:border-box;display:block;height:20px;left:0;position:absolute;top:0;opacity:0;transition:transform ease 280ms,background-color ease 280ms,opacity linear 1ms 280ms;width:20px;transform:scale(0.001);-webkit-print-color-adjust:exact;color-adjust:exact}.mat-radio-checked .mat-radio-inner-circle{transform:scale(0.5);opacity:1;transition:transform ease 280ms,background-color ease 280ms}.cdk-high-contrast-active .mat-radio-checked .mat-radio-inner-circle{border:solid 10px}._mat-animation-noopable .mat-radio-inner-circle{transition:none}.mat-radio-label-content{-webkit-user-select:auto;user-select:auto;display:inline-block;order:0;line-height:inherit;padding-left:8px;padding-right:0}[dir=rtl] .mat-radio-label-content{padding-right:8px;padding-left:0}.mat-radio-label-content.mat-radio-label-before{order:-1;padding-left:0;padding-right:8px}[dir=rtl] .mat-radio-label-content.mat-radio-label-before{padding-right:0;padding-left:8px}.mat-radio-disabled,.mat-radio-disabled .mat-radio-label{cursor:default}.mat-radio-button .mat-radio-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-radio-button .mat-radio-ripple .mat-ripple-element:not(.mat-radio-persistent-ripple){opacity:.16}.mat-radio-persistent-ripple{width:100%;height:100%;transform:none;top:0;left:0}.mat-radio-container:hover .mat-radio-persistent-ripple{opacity:.04}.mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-persistent-ripple,.mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-persistent-ripple{opacity:.12}.mat-radio-persistent-ripple,.mat-radio-disabled .mat-radio-container:hover .mat-radio-persistent-ripple{opacity:0}@media(hover: none){.mat-radio-container:hover .mat-radio-persistent-ripple{display:none}}.mat-radio-input{opacity:0;position:absolute;top:0;left:0;margin:0;width:100%;height:100%;cursor:inherit;z-index:-1}.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-keyboard-focused .mat-radio-ripple,.cdk-high-contrast-active .mat-radio-button:not(.mat-radio-disabled).cdk-program-focused .mat-radio-ripple{outline:solid 3px}.cdk-high-contrast-active .mat-radio-disabled{opacity:.5}\n"],encapsulation:2,changeDetection:0}),i})(),dE=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[to,nt],nt]}),i})();function b9(i,t){if(1&i){const e=te();D(0,"div",3),F("click",function(){const o=I(e).$implicit;return M().colorSelect(o)}),k()}if(2&i){const e=t.$implicit;rt("background",e.c)("transform",e.s?"scale(1.5)":"scale(1)")}}let uE=(()=>{class i{constructor(){this.addColors=[],this.onColorSelect=new Te,this.colors=[{c:"rgb(244,67,54)",s:0},{c:"rgb(233,30,99)",s:0},{c:"rgb(156,39,176)",s:0},{c:"rgb(103,58,183)",s:0},{c:"rgb(63,81,181)",s:0},{c:"rgb(33,150,243)",s:0},{c:"rgb(3,169,244)",s:0},{c:"rgb(0,188,212)",s:0},{c:"rgb(0,150,136)",s:0},{c:"rgb(76,175,80)",s:0},{c:"rgb(139,195,74)",s:0},{c:"rgb(205,220,57)",s:0},{c:"rgb(255,235,59)",s:0},{c:"rgb(255,193,7)",s:0},{c:"rgb(255,152,0)",s:0},{c:"rgb(255,87,34)",s:0},{c:"rgb(121,85,72)",s:0},{c:"rgb(158,158,158)",s:0},{c:"rgb(96,125,139)",s:0}]}ngOnInit(){}colorSelect(e){e.s=!e.s;let n=this.colors.map(r=>{if(r.s)return r.c}).filter(r=>r);this.onColorSelect.emit(n)}selectAll(){this.colors.forEach(n=>{n.s=1});let e=this.colors.map(n=>{if(n.s)return n.c}).filter(n=>n);this.onColorSelect.emit(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-pallet-picker"]],inputs:{addColors:"addColors"},outputs:{onColorSelect:"onColorSelect"},decls:6,vars:1,consts:[[2,"max-width","100px"],["style","display: inline-block;width: 20px; height: 20px;cursor: pointer;",3,"background","transform","click",4,"ngFor","ngForOf"],["mat-icon-button","",3,"click"],[2,"display","inline-block","width","20px","height","20px","cursor","pointer",3,"click"]],template:function(e,n){1&e&&(D(0,"div",0),G(1,b9,1,4,"div",1),D(2,"div")(3,"button",2),F("click",function(){return n.selectAll()}),D(4,"mat-icon"),B(5,"select_all"),k()()()()),2&e&&(O(1),R("ngForOf",n.colors))},directives:[Qr,Rr,Or],styles:[""]}),i})();const hE=Pr({passive:!0});let y9=(()=>{class i{constructor(e,n){this._platform=e,this._ngZone=n,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Al;const n=Bn(e),r=this._monitoredElements.get(n);if(r)return r.subject;const o=new W,s="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||n.classList.contains(s)?"cdk-text-field-autofill-end"===l.animationName&&n.classList.contains(s)&&(n.classList.remove(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!1}))):(n.classList.add(s),this._ngZone.run(()=>o.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",a,hE),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:o,unlisten:()=>{n.removeEventListener("animationstart",a,hE)}}),o}stopMonitoring(e){const n=Bn(e),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((e,n)=>this.stopMonitoring(n))}}return i.\u0275fac=function(e){return new(e||i)(ee(En),ee(at))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),fE=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({}),i})();const pE=new _e("MAT_INPUT_VALUE_ACCESSOR"),C9=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let x9=0;const w9=k_(class{constructor(i,t,e,n){this._defaultErrorStateMatcher=i,this._parentForm=t,this._parentFormGroup=e,this.ngControl=n}});let Nv=(()=>{class i extends w9{constructor(e,n,r,o,s,a,l,p,b,w){super(a,o,s,r),this._elementRef=e,this._platform=n,this._autofillMonitor=p,this._formField=w,this._uid="mat-input-"+x9++,this.focused=!1,this.stateChanges=new W,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(V=>r1().has(V)),this._iOSKeyupListener=V=>{const q=V.target;!q.value&&0===q.selectionStart&&0===q.selectionEnd&&(q.setSelectionRange(1,1),q.setSelectionRange(0,0))};const A=this._elementRef.nativeElement,P=A.nodeName.toLowerCase();this._inputValueAccessor=l||A,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&b.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===P,this._isTextarea="textarea"===P,this._isInFormField=!!w,this._isNativeSelect&&(this.controlType=A.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=Ke(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){var e,n,r,o;return null!==(o=null!==(e=this._required)&&void 0!==e?e:null===(r=null===(n=this.ngControl)||void 0===n?void 0:n.control)||void 0===r?void 0:r.hasValidator(Fh.required))&&void 0!==o&&o}set required(e){this._required=Ke(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&r1().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Ke(e)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var e,n;const r=(null===(n=null===(e=this._formField)||void 0===e?void 0:e._hideControlPlaceholder)||void 0===n?void 0:n.call(e))?null:this.placeholder;if(r!==this._previousPlaceholder){const o=this._elementRef.nativeElement;this._previousPlaceholder=r,r?o.setAttribute("placeholder",r):o.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_validateType(){C9.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,n=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&n&&n.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(En),N(Fr,10),N(zs,8),N(hl,8),N(il),N(pE,10),N(y9),N(at),N(ed,8))},i.\u0275dir=fe({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(e,n){1&e&&F("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),2&e&&(Er("disabled",n.disabled)("required",n.required),lt("id",n.id)("data-placeholder",n.placeholder)("name",n.name||null)("readonly",n.readonly&&!n._isNativeSelect||null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required),Ot("mat-input-server",n._isServer)("mat-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[$e([{provide:Jc,useExisting:i}]),Pe,fn]}),i})(),mE=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[il],imports:[[fE,td,nt],fE,td]}),i})();function gE(i,t){var e=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);t&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),e.push.apply(e,n)}return e}function io(i){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?gE(Object(e),!0).forEach(function(n){D9(i,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)):gE(Object(e)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(e,n))})}return i}function Jh(i){return(Jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(i)}function D9(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function hr(){return hr=Object.assign||function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},hr.apply(this,arguments)}function M9(i,t){if(null==i)return{};var n,r,e=function S9(i,t){if(null==i)return{};var r,o,e={},n=Object.keys(i);for(o=0;o<n.length;o++)!(t.indexOf(r=n[o])>=0)&&(e[r]=i[r]);return e}(i,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(i);for(r=0;r<o.length;r++)!(t.indexOf(n=o[r])>=0)&&(!Object.prototype.propertyIsEnumerable.call(i,n)||(e[n]=i[n]))}return e}function Do(i){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(i)}var So=Do(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),id=Do(/Edge/i),_E=Do(/firefox/i),rd=Do(/safari/i)&&!Do(/chrome/i)&&!Do(/android/i),vE=Do(/iP(ad|od|hone)/i),bE=Do(/chrome/i)&&Do(/android/i),yE={capture:!1,passive:!1};function Wt(i,t,e){i.addEventListener(t,e,!So&&yE)}function Ft(i,t,e){i.removeEventListener(t,e,!So&&yE)}function ef(i,t){if(t){if(">"===t[0]&&(t=t.substring(1)),i)try{if(i.matches)return i.matches(t);if(i.msMatchesSelector)return i.msMatchesSelector(t);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function R9(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function Lr(i,t,e,n){if(i){e=e||document;do{if(null!=t&&(">"===t[0]?i.parentNode===e&&ef(i,t):ef(i,t))||n&&i===e)return i;if(i===e)break}while(i=R9(i))}return null}var od,CE=/\s+/g;function yn(i,t,e){if(i&&t)if(i.classList)i.classList[e?"add":"remove"](t);else{var n=(" "+i.className+" ").replace(CE," ").replace(" "+t+" "," ");i.className=(n+(e?" "+t:"")).replace(CE," ")}}function Je(i,t,e){var n=i&&i.style;if(n){if(void 0===e)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(e=i.currentStyle),void 0===t?e:e[t];!(t in n)&&-1===t.indexOf("webkit")&&(t="-webkit-"+t),n[t]=e+("string"==typeof e?"":"px")}}function Ys(i,t){var e="";if("string"==typeof i)e=i;else do{var n=Je(i,"transform");n&&"none"!==n&&(e=n+" "+e)}while(!t&&(i=i.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(e)}function xE(i,t,e){if(i){var n=i.getElementsByTagName(t),r=0,o=n.length;if(e)for(;r<o;r++)e(n[r],r);return n}return[]}function ro(){return document.scrollingElement||document.documentElement}function pn(i,t,e,n,r){if(i.getBoundingClientRect||i===window){var o,s,a,l,p,b,w;if(i!==window&&i.parentNode&&i!==ro()?(s=(o=i.getBoundingClientRect()).top,a=o.left,l=o.bottom,p=o.right,b=o.height,w=o.width):(s=0,a=0,l=window.innerHeight,p=window.innerWidth,b=window.innerHeight,w=window.innerWidth),(t||e)&&i!==window&&(r=r||i.parentNode,!So))do{if(r&&r.getBoundingClientRect&&("none"!==Je(r,"transform")||e&&"static"!==Je(r,"position"))){var A=r.getBoundingClientRect();s-=A.top+parseInt(Je(r,"border-top-width")),a-=A.left+parseInt(Je(r,"border-left-width")),l=s+o.height,p=a+o.width;break}}while(r=r.parentNode);if(n&&i!==window){var P=Ys(r||i),V=P&&P.a,q=P&&P.d;P&&(l=(s/=q)+(b/=q),p=(a/=V)+(w/=V))}return{top:s,left:a,bottom:l,right:p,width:w,height:b}}}function wE(i,t,e){for(var n=ns(i,!0),r=pn(i)[t];n;){var o=pn(n)[e];if(!("top"===e||"left"===e?r>=o:r<=o))return n;if(n===ro())break;n=ns(n,!1)}return!1}function _l(i,t,e,n){for(var r=0,o=0,s=i.children;o<s.length;){if("none"!==s[o].style.display&&s[o]!==ft.ghost&&(n||s[o]!==ft.dragged)&&Lr(s[o],e.draggable,i,!1)){if(r===t)return s[o];r++}o++}return null}function Vv(i,t){for(var e=i.lastElementChild;e&&(e===ft.ghost||"none"===Je(e,"display")||t&&!ef(e,t));)e=e.previousElementSibling;return e||null}function An(i,t){var e=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)"TEMPLATE"!==i.nodeName.toUpperCase()&&i!==ft.clone&&(!t||ef(i,t))&&e++;return e}function DE(i){var t=0,e=0,n=ro();if(i)do{var r=Ys(i);t+=i.scrollLeft*r.a,e+=i.scrollTop*r.d}while(i!==n&&(i=i.parentNode));return[t,e]}function ns(i,t){if(!i||!i.getBoundingClientRect)return ro();var e=i,n=!1;do{if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var r=Je(e);if(e.clientWidth<e.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||e.clientHeight<e.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!e.getBoundingClientRect||e===document.body)return ro();if(n||t)return e;n=!0}}}while(e=e.parentNode);return ro()}function Hv(i,t){return Math.round(i.top)===Math.round(t.top)&&Math.round(i.left)===Math.round(t.left)&&Math.round(i.height)===Math.round(t.height)&&Math.round(i.width)===Math.round(t.width)}function SE(i,t){return function(){if(!od){var e=arguments,n=this;1===e.length?i.call(n,e[0]):i.apply(n,e),od=setTimeout(function(){od=void 0},t)}}}function ME(i,t,e){i.scrollLeft+=t,i.scrollTop+=e}function jv(i){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(i).cloneNode(!0):e?e(i).clone(!0)[0]:i.cloneNode(!0)}var hi="Sortable"+(new Date).getTime();var vl=[],Wv={initializeByDefault:!0},sd={mount:function(t){for(var e in Wv)Wv.hasOwnProperty(e)&&!(e in t)&&(t[e]=Wv[e]);vl.forEach(function(n){if(n.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),vl.push(t)},pluginEvent:function(t,e,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=t+"Global";vl.forEach(function(s){!e[s.pluginName]||(e[s.pluginName][o]&&e[s.pluginName][o](io({sortable:e},n)),e.options[s.pluginName]&&e[s.pluginName][t]&&e[s.pluginName][t](io({sortable:e},n)))})},initializePlugins:function(t,e,n,r){for(var o in vl.forEach(function(a){var l=a.pluginName;if(t.options[l]||a.initializeByDefault){var p=new a(t,e,t.options);p.sortable=t,p.options=t.options,t[l]=p,hr(n,p.defaults)}}),t.options)if(t.options.hasOwnProperty(o)){var s=this.modifyOption(t,o,t.options[o]);void 0!==s&&(t.options[o]=s)}},getEventProperties:function(t,e){var n={};return vl.forEach(function(r){"function"==typeof r.eventProperties&&hr(n,r.eventProperties.call(e[r.pluginName],t))}),n},modifyOption:function(t,e,n){var r;return vl.forEach(function(o){!t[o.pluginName]||o.optionListeners&&"function"==typeof o.optionListeners[e]&&(r=o.optionListeners[e].call(t[o.pluginName],n))}),r}};var H9=["evt"],Ri=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,o=M9(n,H9);sd.pluginEvent.bind(ft)(t,e,io({dragEl:Oe,parentEl:In,ghostEl:Mt,rootEl:mn,nextEl:qs,lastDownEl:tf,cloneEl:Cn,cloneHidden:is,dragStarted:cd,putSortable:oi,activeSortable:ft.active,originalEvent:r,oldIndex:bl,oldDraggableIndex:ld,newIndex:qi,newDraggableIndex:rs,hideGhostForTarget:OE,unhideGhostForTarget:FE,cloneNowHidden:function(){is=!0},cloneNowShown:function(){is=!1},dispatchSortableEvent:function(a){Si({sortable:e,name:a,originalEvent:r})}},o))};function Si(i){!function ad(i){var t=i.sortable,e=i.rootEl,n=i.name,r=i.targetEl,o=i.cloneEl,s=i.toEl,a=i.fromEl,l=i.oldIndex,p=i.newIndex,b=i.oldDraggableIndex,w=i.newDraggableIndex,A=i.originalEvent,P=i.putSortable,V=i.extraEventProperties;if(t=t||e&&e[hi]){var q,Z=t.options,re="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||So||id?(q=document.createEvent("Event")).initEvent(n,!0,!0):q=new CustomEvent(n,{bubbles:!0,cancelable:!0}),q.to=s||e,q.from=a||e,q.item=r||e,q.clone=o,q.oldIndex=l,q.newIndex=p,q.oldDraggableIndex=b,q.newDraggableIndex=w,q.originalEvent=A,q.pullMode=P?P.lastPutMode:void 0;var J=io(io({},V),sd.getEventProperties(n,t));for(var ve in J)q[ve]=J[ve];e&&e.dispatchEvent(q),Z[re]&&Z[re].call(t,q)}}(io({putSortable:oi,cloneEl:Cn,targetEl:Oe,rootEl:mn,oldIndex:bl,oldDraggableIndex:ld,newIndex:qi,newDraggableIndex:rs},i))}var Oe,In,Mt,mn,qs,tf,Cn,is,bl,qi,ld,rs,nf,oi,Xs,Nr,Gv,Uv,EE,kE,cd,Cl,dd,lf,fi,yl=!1,rf=!1,sf=[],ud=!1,af=!1,Yv=[],qv=!1,cf=[],df="undefined"!=typeof document,uf=vE,AE=id||So?"cssFloat":"float",j9=df&&!bE&&!vE&&"draggable"in document.createElement("div"),IE=function(){if(df){if(So)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto","auto"===i.style.pointerEvents}}(),PE=function(t,e){var n=Je(t),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=_l(t,0,e),s=_l(t,1,e),a=o&&Je(o),l=s&&Je(s),p=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+pn(o).width,b=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+pn(s).width;return"flex"===n.display?"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal":"grid"===n.display?n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":o&&a.float&&"none"!==a.float?!s||"both"!==l.clear&&l.clear!==("left"===a.float?"left":"right")?"horizontal":"vertical":o&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||p>=r&&"none"===n[AE]||s&&"none"===n[AE]&&p+b>r)?"vertical":"horizontal"},RE=function(t){function e(o,s){return function(a,l,p,b){if(null==o&&(s||a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name))return!0;if(null==o||!1===o)return!1;if(s&&"clone"===o)return o;if("function"==typeof o)return e(o(a,l,p,b),s)(a,l,p,b);var A=(s?a:l).options.group.name;return!0===o||"string"==typeof o&&o===A||o.join&&o.indexOf(A)>-1}}var n={},r=t.group;(!r||"object"!=Jh(r))&&(r={name:r}),n.name=r.name,n.checkPull=e(r.pull,!0),n.checkPut=e(r.put),n.revertClone=r.revertClone,t.group=n},OE=function(){!IE&&Mt&&Je(Mt,"display","none")},FE=function(){!IE&&Mt&&Je(Mt,"display","")};df&&!bE&&document.addEventListener("click",function(i){if(rf)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),rf=!1,!1},!0);var $s=function(t){if(Oe){var e=function(t,e){var n;return sf.some(function(r){var o=r[hi].options.emptyInsertThreshold;if(o&&!Vv(r)){var s=pn(r);if(t>=s.left-o&&t<=s.right+o&&e>=s.top-o&&e<=s.bottom+o)return n=r}}),n}((t=t.touches?t.touches[0]:t).clientX,t.clientY);if(e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[hi]._onDragOver(n)}}},G9=function(t){Oe&&Oe.parentNode[hi]._isOutsideThisEl(t.target)};function ft(i,t){if(!i||!i.nodeType||1!==i.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=t=hr({},t),i[hi]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return PE(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,a){s.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ft.supportPointer&&"PointerEvent"in window&&!rd,emptyInsertThreshold:5};for(var n in sd.initializePlugins(this,i,e),e)!(n in t)&&(t[n]=e[n]);for(var r in RE(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&j9,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Wt(i,"pointerdown",this._onTapStart):(Wt(i,"mousedown",this._onTapStart),Wt(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(Wt(i,"dragover",this),Wt(i,"dragenter",this)),sf.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),hr(this,function N9(){var t,i=[];return{captureAnimationState:function(){i=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(r){if("none"!==Je(r,"display")&&r!==ft.ghost){i.push({target:r,rect:pn(r)});var o=io({},i[i.length-1].rect);if(r.thisAnimationDuration){var s=Ys(r,!0);s&&(o.top-=s.f,o.left-=s.e)}r.fromRect=o}})},addAnimationState:function(n){i.push(n)},removeAnimationState:function(n){i.splice(function O9(i,t){for(var e in i)if(i.hasOwnProperty(e))for(var n in t)if(t.hasOwnProperty(n)&&t[n]===i[e][n])return Number(e);return-1}(i,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof n&&n());var o=!1,s=0;i.forEach(function(a){var l=0,p=a.target,b=p.fromRect,w=pn(p),A=p.prevFromRect,P=p.prevToRect,V=a.rect,q=Ys(p,!0);q&&(w.top-=q.f,w.left-=q.e),p.toRect=w,p.thisAnimationDuration&&Hv(A,w)&&!Hv(b,w)&&(V.top-w.top)/(V.left-w.left)==(b.top-w.top)/(b.left-w.left)&&(l=function V9(i,t,e,n){return Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*n.animation}(V,A,P,r.options)),Hv(w,b)||(p.prevFromRect=b,p.prevToRect=w,l||(l=r.options.animation),r.animate(p,V,w,l)),l&&(o=!0,s=Math.max(s,l),clearTimeout(p.animationResetTimer),p.animationResetTimer=setTimeout(function(){p.animationTime=0,p.prevFromRect=null,p.fromRect=null,p.prevToRect=null,p.thisAnimationDuration=null},l),p.thisAnimationDuration=l)}),clearTimeout(t),o?t=setTimeout(function(){"function"==typeof n&&n()},s):"function"==typeof n&&n(),i=[]},animate:function(n,r,o,s){if(s){Je(n,"transition",""),Je(n,"transform","");var a=Ys(this.el),b=(r.left-o.left)/(a&&a.a||1),w=(r.top-o.top)/(a&&a.d||1);n.animatingX=!!b,n.animatingY=!!w,Je(n,"transform","translate3d("+b+"px,"+w+"px,0)"),this.forRepaintDummy=function B9(i){return i.offsetWidth}(n),Je(n,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),Je(n,"transform","translate3d(0,0,0)"),"number"==typeof n.animated&&clearTimeout(n.animated),n.animated=setTimeout(function(){Je(n,"transition",""),Je(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},s)}}}}())}function hf(i,t,e,n,r,o,s,a){var l,w,p=i[hi],b=p.options.onMove;return!window.CustomEvent||So||id?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=i,l.dragged=e,l.draggedRect=n,l.related=r||t,l.relatedRect=o||pn(t),l.willInsertAfter=a,l.originalEvent=s,i.dispatchEvent(l),b&&(w=b.call(p,l,s)),w}function Xv(i){i.draggable=!1}function Y9(){qv=!1}function Q9(i){for(var t=i.tagName+i.className+i.src+i.href+i.textContent,e=t.length,n=0;e--;)n+=t.charCodeAt(e);return n.toString(36)}function ff(i){return setTimeout(i,0)}function $v(i){return clearTimeout(i)}ft.prototype={constructor:ft,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(Cl=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Oe):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,r=this.options,o=r.preventOnFilter,s=t.type,a=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,l=(a||t).target,p=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,b=r.filter;if(function Z9(i){cf.length=0;for(var t=i.getElementsByTagName("input"),e=t.length;e--;){var n=t[e];n.checked&&cf.push(n)}}(n),!Oe&&!(/mousedown|pointerdown/.test(s)&&0!==t.button||r.disabled)&&!p.isContentEditable&&(this.nativeDraggable||!rd||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=Lr(l,r.draggable,n,!1))&&l.animated||tf===l)){if(bl=An(l),ld=An(l,r.draggable),"function"==typeof b){if(b.call(this,t,l,this))return Si({sortable:e,rootEl:p,name:"filter",targetEl:l,toEl:n,fromEl:n}),Ri("filter",e,{evt:t}),void(o&&t.cancelable&&t.preventDefault())}else if(b&&(b=b.split(",").some(function(w){if(w=Lr(p,w.trim(),n,!1))return Si({sortable:e,rootEl:w,name:"filter",targetEl:l,fromEl:n,toEl:n}),Ri("filter",e,{evt:t}),!0})))return void(o&&t.cancelable&&t.preventDefault());r.handle&&!Lr(p,r.handle,n,!1)||this._prepareDragStart(t,a,l)}}},_prepareDragStart:function(t,e,n){var l,r=this,o=r.el,s=r.options,a=o.ownerDocument;if(n&&!Oe&&n.parentNode===o){var p=pn(n);if(mn=o,In=(Oe=n).parentNode,qs=Oe.nextSibling,tf=n,nf=s.group,ft.dragged=Oe,EE=(Xs={target:Oe,clientX:(e||t).clientX,clientY:(e||t).clientY}).clientX-p.left,kE=Xs.clientY-p.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Oe.style["will-change"]="all",l=function(){Ri("delayEnded",r,{evt:t}),ft.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!_E&&r.nativeDraggable&&(Oe.draggable=!0),r._triggerDragStart(t,e),Si({sortable:r,name:"choose",originalEvent:t}),yn(Oe,s.chosenClass,!0))},s.ignore.split(",").forEach(function(b){xE(Oe,b.trim(),Xv)}),Wt(a,"dragover",$s),Wt(a,"mousemove",$s),Wt(a,"touchmove",$s),Wt(a,"mouseup",r._onDrop),Wt(a,"touchend",r._onDrop),Wt(a,"touchcancel",r._onDrop),_E&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Oe.draggable=!0),Ri("delayStart",this,{evt:t}),!s.delay||s.delayOnTouchOnly&&!e||this.nativeDraggable&&(id||So))l();else{if(ft.eventCanceled)return void this._onDrop();Wt(a,"mouseup",r._disableDelayedDrag),Wt(a,"touchend",r._disableDelayedDrag),Wt(a,"touchcancel",r._disableDelayedDrag),Wt(a,"mousemove",r._delayedDragTouchMoveHandler),Wt(a,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&Wt(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,s.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Oe&&Xv(Oe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Ft(t,"mouseup",this._disableDelayedDrag),Ft(t,"touchend",this._disableDelayedDrag),Ft(t,"touchcancel",this._disableDelayedDrag),Ft(t,"mousemove",this._delayedDragTouchMoveHandler),Ft(t,"touchmove",this._delayedDragTouchMoveHandler),Ft(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?Wt(document,this.options.supportPointer?"pointermove":e?"touchmove":"mousemove",this._onTouchMove):(Wt(Oe,"dragend",this),Wt(mn,"dragstart",this._onDragStart));try{document.selection?ff(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(t,e){if(yl=!1,mn&&Oe){Ri("dragStarted",this,{evt:e}),this.nativeDraggable&&Wt(document,"dragover",G9);var n=this.options;!t&&yn(Oe,n.dragClass,!1),yn(Oe,n.ghostClass,!0),ft.active=this,t&&this._appendGhost(),Si({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Nr){this._lastX=Nr.clientX,this._lastY=Nr.clientY,OE();for(var t=document.elementFromPoint(Nr.clientX,Nr.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Nr.clientX,Nr.clientY))!==e;)e=t;if(Oe.parentNode[hi]._isOutsideThisEl(t),e)do{if(e[hi]&&e[hi]._onDragOver({clientX:Nr.clientX,clientY:Nr.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=e.parentNode);FE()}},_onTouchMove:function(t){if(Xs){var e=this.options,n=e.fallbackTolerance,r=e.fallbackOffset,o=t.touches?t.touches[0]:t,s=Mt&&Ys(Mt,!0),a=Mt&&s&&s.a,l=Mt&&s&&s.d,p=uf&&fi&&DE(fi),b=(o.clientX-Xs.clientX+r.x)/(a||1)+(p?p[0]-Yv[0]:0)/(a||1),w=(o.clientY-Xs.clientY+r.y)/(l||1)+(p?p[1]-Yv[1]:0)/(l||1);if(!ft.active&&!yl){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(Mt){s?(s.e+=b-(Gv||0),s.f+=w-(Uv||0)):s={a:1,b:0,c:0,d:1,e:b,f:w};var A="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");Je(Mt,"webkitTransform",A),Je(Mt,"mozTransform",A),Je(Mt,"msTransform",A),Je(Mt,"transform",A),Gv=b,Uv=w,Nr=o}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Mt){var t=this.options.fallbackOnBody?document.body:mn,e=pn(Oe,!0,uf,!0,t),n=this.options;if(uf){for(fi=t;"static"===Je(fi,"position")&&"none"===Je(fi,"transform")&&fi!==document;)fi=fi.parentNode;fi!==document.body&&fi!==document.documentElement?(fi===document&&(fi=ro()),e.top+=fi.scrollTop,e.left+=fi.scrollLeft):fi=ro(),Yv=DE(fi)}yn(Mt=Oe.cloneNode(!0),n.ghostClass,!1),yn(Mt,n.fallbackClass,!0),yn(Mt,n.dragClass,!0),Je(Mt,"transition",""),Je(Mt,"transform",""),Je(Mt,"box-sizing","border-box"),Je(Mt,"margin",0),Je(Mt,"top",e.top),Je(Mt,"left",e.left),Je(Mt,"width",e.width),Je(Mt,"height",e.height),Je(Mt,"opacity","0.8"),Je(Mt,"position",uf?"absolute":"fixed"),Je(Mt,"zIndex","100000"),Je(Mt,"pointerEvents","none"),ft.ghost=Mt,t.appendChild(Mt),Je(Mt,"transform-origin",EE/parseInt(Mt.style.width)*100+"% "+kE/parseInt(Mt.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,r=t.dataTransfer,o=n.options;Ri("dragStart",this,{evt:t}),ft.eventCanceled?this._onDrop():(Ri("setupClone",this),ft.eventCanceled||((Cn=jv(Oe)).removeAttribute("id"),Cn.draggable=!1,Cn.style["will-change"]="",this._hideClone(),yn(Cn,this.options.chosenClass,!1),ft.clone=Cn),n.cloneId=ff(function(){Ri("clone",n),!ft.eventCanceled&&(n.options.removeCloneOnHide||mn.insertBefore(Cn,Oe),n._hideClone(),Si({sortable:n,name:"clone"}))}),!e&&yn(Oe,o.dragClass,!0),e?(rf=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Ft(document,"mouseup",n._onDrop),Ft(document,"touchend",n._onDrop),Ft(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,Oe)),Wt(document,"drop",n),Je(Oe,"transform","translateZ(0)")),yl=!0,n._dragStartId=ff(n._dragStarted.bind(n,e,t)),Wt(document,"selectstart",n),cd=!0,rd&&Je(document.body,"user-select","none"))},_onDragOver:function(t){var r,o,s,P,e=this.el,n=t.target,a=this.options,l=a.group,p=ft.active,b=nf===l,w=a.sort,A=oi||p,V=this,q=!1;if(!qv){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),n=Lr(n,a.draggable,e,!0),Z("dragOver"),ft.eventCanceled)return q;if(Oe.contains(t.target)||n.animated&&n.animatingX&&n.animatingY||V._ignoreWhileAnimating===n)return J(!1);if(rf=!1,p&&!a.disabled&&(b?w||(s=In!==mn):oi===this||(this.lastPutMode=nf.checkPull(this,p,Oe,t))&&l.checkPut(this,p,Oe,t))){if(P="vertical"===this._getDirection(t,n),r=pn(Oe),Z("dragOverValid"),ft.eventCanceled)return q;if(s)return In=mn,re(),this._hideClone(),Z("revert"),ft.eventCanceled||(qs?mn.insertBefore(Oe,qs):mn.appendChild(Oe)),J(!0);var be=Vv(e,a.draggable);if(!be||function X9(i,t,e){var n=pn(Vv(e.el,e.options.draggable));return t?i.clientX>n.right+10||i.clientX<=n.right&&i.clientY>n.bottom&&i.clientX>=n.left:i.clientX>n.right&&i.clientY>n.top||i.clientX<=n.right&&i.clientY>n.bottom+10}(t,P,this)&&!be.animated){if(be===Oe)return J(!1);if(be&&e===t.target&&(n=be),n&&(o=pn(n)),!1!==hf(mn,e,Oe,r,n,o,t,!!n))return re(),be&&be.nextSibling?e.insertBefore(Oe,be.nextSibling):e.appendChild(Oe),In=e,ve(),J(!0)}else if(be&&function q9(i,t,e){var n=pn(_l(e.el,0,e.options,!0));return t?i.clientX<n.left-10||i.clientY<n.top&&i.clientX<n.right:i.clientY<n.top-10||i.clientY<n.bottom&&i.clientX<n.left}(t,P,this)){var Qe=_l(e,0,a,!0);if(Qe===Oe)return J(!1);if(o=pn(n=Qe),!1!==hf(mn,e,Oe,r,n,o,t,!1))return re(),e.insertBefore(Oe,Qe),In=e,ve(),J(!0)}else if(n.parentNode===e){o=pn(n);var _t,Lt,xn,gn=Oe.parentNode!==e,Xt=!function(t,e,n){var r=n?t.left:t.top,a=n?e.left:e.top;return r===a||(n?t.right:t.bottom)===(n?e.right:e.bottom)||r+(n?t.width:t.height)/2===a+(n?e.width:e.height)/2}(Oe.animated&&Oe.toRect||r,n.animated&&n.toRect||o,P),cn=P?"top":"left",Pn=wE(n,"top","top")||wE(Oe,"top","top"),Rn=Pn?Pn.scrollTop:void 0;if(Cl!==n&&(Lt=o[cn],ud=!1,af=!Xt&&a.invertSwap||gn),_t=function $9(i,t,e,n,r,o,s,a){var l=n?i.clientY:i.clientX,p=n?e.height:e.width,b=n?e.top:e.left,w=n?e.bottom:e.right,A=!1;if(!s)if(a&&lf<p*r){if(!ud&&(1===dd?l>b+p*o/2:l<w-p*o/2)&&(ud=!0),ud)A=!0;else if(1===dd?l<b+lf:l>w-lf)return-dd}else if(l>b+p*(1-r)/2&&l<w-p*(1-r)/2)return function K9(i){return An(Oe)<An(i)?1:-1}(t);return(A=A||s)&&(l<b+p*o/2||l>w-p*o/2)?l>b+p/2?1:-1:0}(t,n,o,P,Xt?1:a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,af,Cl===n),0!==_t){var pi=An(Oe);do{xn=In.children[pi-=_t]}while(xn&&("none"===Je(xn,"display")||xn===Mt))}if(0===_t||xn===n)return J(!1);Cl=n,dd=_t;var Fi=n.nextElementSibling,Ve=!1,et=hf(mn,e,Oe,r,n,o,t,Ve=1===_t);if(!1!==et)return(1===et||-1===et)&&(Ve=1===et),qv=!0,setTimeout(Y9,30),re(),Ve&&!Fi?e.appendChild(Oe):n.parentNode.insertBefore(Oe,Ve?Fi:n),Pn&&ME(Pn,0,Rn-Pn.scrollTop),In=Oe.parentNode,void 0!==Lt&&!af&&(lf=Math.abs(Lt-pn(n)[cn])),ve(),J(!0)}if(e.contains(Oe))return J(!1)}return!1}function Z(ot,Bt){Ri(ot,V,io({evt:t,isOwner:b,axis:P?"vertical":"horizontal",revert:s,dragRect:r,targetRect:o,canSort:w,fromSortable:A,target:n,completed:J,onMove:function(Mi,Ti){return hf(mn,e,Oe,r,Mi,pn(Mi),t,Ti)},changed:ve},Bt))}function re(){Z("dragOverAnimationCapture"),V.captureAnimationState(),V!==A&&A.captureAnimationState()}function J(ot){return Z("dragOverCompleted",{insertion:ot}),ot&&(b?p._hideClone():p._showClone(V),V!==A&&(yn(Oe,oi?oi.options.ghostClass:p.options.ghostClass,!1),yn(Oe,a.ghostClass,!0)),oi!==V&&V!==ft.active?oi=V:V===ft.active&&oi&&(oi=null),A===V&&(V._ignoreWhileAnimating=n),V.animateAll(function(){Z("dragOverAnimationComplete"),V._ignoreWhileAnimating=null}),V!==A&&(A.animateAll(),A._ignoreWhileAnimating=null)),(n===Oe&&!Oe.animated||n===e&&!n.animated)&&(Cl=null),!a.dragoverBubble&&!t.rootEl&&n!==document&&(Oe.parentNode[hi]._isOutsideThisEl(t.target),!ot&&$s(t)),!a.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),q=!0}function ve(){qi=An(Oe),rs=An(Oe,a.draggable),Si({sortable:V,name:"change",toEl:e,newIndex:qi,newDraggableIndex:rs,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ft(document,"mousemove",this._onTouchMove),Ft(document,"touchmove",this._onTouchMove),Ft(document,"pointermove",this._onTouchMove),Ft(document,"dragover",$s),Ft(document,"mousemove",$s),Ft(document,"touchmove",$s)},_offUpEvents:function(){var t=this.el.ownerDocument;Ft(t,"mouseup",this._onDrop),Ft(t,"touchend",this._onDrop),Ft(t,"pointerup",this._onDrop),Ft(t,"touchcancel",this._onDrop),Ft(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;qi=An(Oe),rs=An(Oe,n.draggable),Ri("drop",this,{evt:t}),In=Oe&&Oe.parentNode,qi=An(Oe),rs=An(Oe,n.draggable),ft.eventCanceled||(yl=!1,af=!1,ud=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),$v(this.cloneId),$v(this._dragStartId),this.nativeDraggable&&(Ft(document,"drop",this),Ft(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),rd&&Je(document.body,"user-select",""),Je(Oe,"transform",""),t&&(cd&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),Mt&&Mt.parentNode&&Mt.parentNode.removeChild(Mt),(mn===In||oi&&"clone"!==oi.lastPutMode)&&Cn&&Cn.parentNode&&Cn.parentNode.removeChild(Cn),Oe&&(this.nativeDraggable&&Ft(Oe,"dragend",this),Xv(Oe),Oe.style["will-change"]="",cd&&!yl&&yn(Oe,oi?oi.options.ghostClass:this.options.ghostClass,!1),yn(Oe,this.options.chosenClass,!1),Si({sortable:this,name:"unchoose",toEl:In,newIndex:null,newDraggableIndex:null,originalEvent:t}),mn!==In?(qi>=0&&(Si({rootEl:In,name:"add",toEl:In,fromEl:mn,originalEvent:t}),Si({sortable:this,name:"remove",toEl:In,originalEvent:t}),Si({rootEl:In,name:"sort",toEl:In,fromEl:mn,originalEvent:t}),Si({sortable:this,name:"sort",toEl:In,originalEvent:t})),oi&&oi.save()):qi!==bl&&qi>=0&&(Si({sortable:this,name:"update",toEl:In,originalEvent:t}),Si({sortable:this,name:"sort",toEl:In,originalEvent:t})),ft.active&&((null==qi||-1===qi)&&(qi=bl,rs=ld),Si({sortable:this,name:"end",toEl:In,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){Ri("nulling",this),mn=Oe=In=Mt=qs=Cn=tf=is=Xs=Nr=cd=qi=rs=bl=ld=Cl=dd=oi=nf=ft.dragged=ft.ghost=ft.clone=ft.active=null,cf.forEach(function(t){t.checked=!0}),cf.length=Gv=Uv=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Oe&&(this._onDragOver(t),function U9(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,o=n.length,s=this.options;r<o;r++)Lr(e=n[r],s.draggable,this.el,!1)&&t.push(e.getAttribute(s.dataIdAttr)||Q9(e));return t},sort:function(t,e){var n={},r=this.el;this.toArray().forEach(function(o,s){var a=r.children[s];Lr(a,this.options.draggable,r,!1)&&(n[o]=a)},this),e&&this.captureAnimationState(),t.forEach(function(o){n[o]&&(r.removeChild(n[o]),r.appendChild(n[o]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Lr(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var r=sd.modifyOption(this,t,e);n[t]=void 0!==r?r:e,"group"===t&&RE(n)},destroy:function(){Ri("destroy",this);var t=this.el;t[hi]=null,Ft(t,"mousedown",this._onTapStart),Ft(t,"touchstart",this._onTapStart),Ft(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ft(t,"dragover",this),Ft(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sf.splice(sf.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!is){if(Ri("hideClone",this),ft.eventCanceled)return;Je(Cn,"display","none"),this.options.removeCloneOnHide&&Cn.parentNode&&Cn.parentNode.removeChild(Cn),is=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(is){if(Ri("showClone",this),ft.eventCanceled)return;Oe.parentNode!=mn||this.options.group.revertClone?qs?mn.insertBefore(Cn,qs):mn.appendChild(Cn):mn.insertBefore(Cn,Oe),this.options.group.revertClone&&this.animate(Oe,Cn),Je(Cn,"display",""),is=!1}}else this._hideClone()}},df&&Wt(document,"touchmove",function(i){(ft.active||yl)&&i.cancelable&&i.preventDefault()}),ft.utils={on:Wt,off:Ft,css:Je,find:xE,is:function(t,e){return!!Lr(t,e,t,!1)},extend:function F9(i,t){if(i&&t)for(var e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i},throttle:SE,closest:Lr,toggleClass:yn,clone:jv,index:An,nextTick:ff,cancelNextTick:$v,detectDirection:PE,getChild:_l},ft.get=function(i){return i[hi]},ft.mount=function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(ft.utils=io(io({},ft.utils),n.utils)),sd.mount(n)})},ft.create=function(i,t){return new ft(i,t)},ft.version="1.15.0";var hd,Kv,Zv,Jv,pf,fd,Un=[],Qv=!1;function mf(){Un.forEach(function(i){clearInterval(i.pid)}),Un=[]}function LE(){clearInterval(fd)}var eb=SE(function(i,t,e,n){if(t.scroll){var b,r=(i.touches?i.touches[0]:i).clientX,o=(i.touches?i.touches[0]:i).clientY,s=t.scrollSensitivity,a=t.scrollSpeed,l=ro(),p=!1;Kv!==e&&(Kv=e,mf(),b=t.scrollFn,!0===(hd=t.scroll)&&(hd=ns(e,!0)));var w=0,A=hd;do{var P=A,V=pn(P),q=V.top,Z=V.bottom,re=V.left,J=V.right,ve=V.width,be=V.height,Qe=void 0,_t=void 0,Lt=P.scrollWidth,gn=P.scrollHeight,Xt=Je(P),cn=P.scrollLeft,Pn=P.scrollTop;P===l?(Qe=ve<Lt&&("auto"===Xt.overflowX||"scroll"===Xt.overflowX||"visible"===Xt.overflowX),_t=be<gn&&("auto"===Xt.overflowY||"scroll"===Xt.overflowY||"visible"===Xt.overflowY)):(Qe=ve<Lt&&("auto"===Xt.overflowX||"scroll"===Xt.overflowX),_t=be<gn&&("auto"===Xt.overflowY||"scroll"===Xt.overflowY));var Rn=Qe&&(Math.abs(J-r)<=s&&cn+ve<Lt)-(Math.abs(re-r)<=s&&!!cn),xn=_t&&(Math.abs(Z-o)<=s&&Pn+be<gn)-(Math.abs(q-o)<=s&&!!Pn);if(!Un[w])for(var pi=0;pi<=w;pi++)Un[pi]||(Un[pi]={});(Un[w].vx!=Rn||Un[w].vy!=xn||Un[w].el!==P)&&(Un[w].el=P,Un[w].vx=Rn,Un[w].vy=xn,clearInterval(Un[w].pid),(0!=Rn||0!=xn)&&(p=!0,Un[w].pid=setInterval(function(){n&&0===this.layer&&ft.active._onTouchMove(pf);var Fi=Un[this.layer].vy?Un[this.layer].vy*a:0,Ve=Un[this.layer].vx?Un[this.layer].vx*a:0;"function"==typeof b&&"continue"!==b.call(ft.dragged.parentNode[hi],Ve,Fi,i,pf,Un[this.layer].el)||ME(Un[this.layer].el,Ve,Fi)}.bind({layer:w}),24))),w++}while(t.bubbleScroll&&A!==l&&(A=ns(A,!1)));Qv=p}},30),NE=function(t){var e=t.originalEvent,n=t.putSortable,r=t.dragEl,s=t.dispatchSortableEvent,l=t.unhideGhostForTarget;if(e){var p=n||t.activeSortable;(0,t.hideGhostForTarget)();var b=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,w=document.elementFromPoint(b.clientX,b.clientY);l(),p&&!p.el.contains(w)&&(s("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function tb(){}function nb(){}tb.prototype={startIndex:null,dragStart:function(t){this.startIndex=t.oldDraggableIndex},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=_l(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(e,r):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:NE},hr(tb,{pluginName:"revertOnSpill"}),nb.prototype={onSpill:function(t){var e=t.dragEl,r=t.putSortable||this.sortable;r.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),r.animateAll()},drop:NE},hr(nb,{pluginName:"removeOnSpill"}),ft.mount(new function J9(){function i(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return i.prototype={dragStarted:function(e){var n=e.originalEvent;this.sortable.nativeDraggable?Wt(document,"dragover",this._handleAutoScroll):Wt(document,this.options.supportPointer?"pointermove":n.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var n=e.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?Ft(document,"dragover",this._handleAutoScroll):(Ft(document,"pointermove",this._handleFallbackAutoScroll),Ft(document,"touchmove",this._handleFallbackAutoScroll),Ft(document,"mousemove",this._handleFallbackAutoScroll)),LE(),mf(),function L9(){clearTimeout(od),od=void 0}()},nulling:function(){pf=Kv=hd=Qv=fd=Zv=Jv=null,Un.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,n){var r=this,o=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(o,s);if(pf=e,n||this.options.forceAutoScrollFallback||id||So||rd){eb(e,this.options,a,n);var l=ns(a,!0);Qv&&(!fd||o!==Zv||s!==Jv)&&(fd&&LE(),fd=setInterval(function(){var p=ns(document.elementFromPoint(o,s),!0);p!==l&&(l=p,mf()),eb(e,r.options,p,n)},10),Zv=o,Jv=s)}else{if(!this.options.bubbleScroll||ns(a,!0)===ro())return void mf();eb(e,this.options,ns(a,!1),!1)}}},hr(i,{pluginName:"scroll",initializeByDefault:!0})}),ft.mount(nb,tb);const ib=ft,VE=new _e("Global config for sortablejs");class nW{constructor(t){this.target=t}insert(t,e){this.isFormArray?this.target.insert(t,e):this.target.splice(t,0,e)}get(t){return this.isFormArray?this.target.at(t):this.target[t]}remove(t){let e;return this.isFormArray?(e=this.target.at(t),this.target.removeAt(t)):e=this.target.splice(t,1)[0],e}get isFormArray(){return!!this.target.at&&!!this.target.insert&&!!this.target.reset}}class rb{constructor(t){this.bindings=t.map(e=>new nW(e))}injectIntoEvery(t,e){this.bindings.forEach((n,r)=>n.insert(t,e[r]))}getFromEvery(t){return this.bindings.map(e=>e.get(t))}extractFromEvery(t){return this.bindings.map(e=>e.remove(t))}get provided(){return!!this.bindings.length}}let iW=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({factory:function(){return new i},token:i,providedIn:"root"}),i})(),vf=(()=>{class i{constructor(e,n,r,o,s){this.globalConfig=e,this.service=n,this.element=r,this.zone=o,this.renderer=s,this.sortablejsInit=new Te}ngOnInit(){ib&&ib.create&&this.create()}ngOnChanges(e){const n=e.sortablejsOptions;if(n&&!n.isFirstChange()){const r=n.previousValue,o=n.currentValue;Object.keys(o).forEach(s=>{o[s]!==r[s]&&this.sortableInstance.option(s,this.options[s])})}}ngOnDestroy(){this.sortableInstance&&this.sortableInstance.destroy()}create(){const e=this.sortablejsContainer?this.element.nativeElement.querySelector(this.sortablejsContainer):this.element.nativeElement;setTimeout(()=>{this.sortableInstance=ib.create(e,this.options),this.sortablejsInit.emit(this.sortableInstance)},0)}getBindings(){return this.sortablejs?this.sortablejs instanceof rb?this.sortablejs:new rb([this.sortablejs]):new rb([])}get options(){return Object.assign(Object.assign({},this.optionsWithoutEvents),this.overridenOptions)}get optionsWithoutEvents(){return Object.assign(Object.assign({},this.globalConfig||{}),this.sortablejsOptions||{})}proxyEvent(e,...n){this.zone.run(()=>{this.optionsWithoutEvents&&this.optionsWithoutEvents[e]&&this.optionsWithoutEvents[e](...n)})}get isCloning(){return"clone"===this.sortableInstance.options.group.checkPull(this.sortableInstance,this.sortableInstance)}clone(e){return(this.sortablejsCloneFunction||(n=>n))(e)}get overridenOptions(){return{onAdd:e=>{this.service.transfer=n=>{this.getBindings().injectIntoEvery(e.newIndex,n),this.proxyEvent("onAdd",e)},this.proxyEvent("onAddOriginal",e)},onRemove:e=>{const n=this.getBindings();n.provided&&(this.isCloning?(this.service.transfer(n.getFromEvery(e.oldIndex).map(r=>this.clone(r))),this.renderer.removeChild(e.item.parentNode,e.item),this.renderer.insertBefore(e.clone.parentNode,e.item,e.clone),this.renderer.removeChild(e.clone.parentNode,e.clone)):this.service.transfer(n.extractFromEvery(e.oldIndex)),this.service.transfer=null),this.proxyEvent("onRemove",e)},onUpdate:e=>{const n=this.getBindings(),r=(i=>i.hasOwnProperty("newDraggableIndex")&&i.hasOwnProperty("oldDraggableIndex")?{new:i.newDraggableIndex,old:i.oldDraggableIndex}:{new:i.newIndex,old:i.oldIndex})(e);n.injectIntoEvery(r.new,n.extractFromEvery(r.old)),this.proxyEvent("onUpdate",e)}}}}return i.\u0275fac=function(e){return new(e||i)(N(VE,8),N(iW),N(Ze),N(at),N(zo))},i.\u0275dir=fe({type:i,selectors:[["","sortablejs",""]],inputs:{sortablejs:"sortablejs",sortablejsContainer:"sortablejsContainer",sortablejsOptions:"sortablejsOptions",sortablejsCloneFunction:"sortablejsCloneFunction"},outputs:{sortablejsInit:"sortablejsInit"},features:[fn]}),i})(),oW=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[{provide:VE,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({}),i})();function sW(i,t){if(1&i){const e=te();D(0,"button",9),F("click",function(){const o=I(e).$implicit;return M().getSvgFile(o.name)}),B(1),k()}if(2&i){const e=t.$implicit;O(1),Ct(" ",e.name," ")}}function aW(i,t){if(1&i){const e=te();D(0,"button",10),F("click",function(){const o=I(e).$implicit;return M().emitSVGIcon(o)}),k()}if(2&i){const e=t.$implicit,n=M();rt("fill",n.fill)("stroke",n.stroke),R("innerHTML",n.sanitizer.bypassSecurityTrustHtml(e.svg),Kl)}}let lW=(()=>{class i{constructor(e,n,r){if(this.coreService=e,this.fabricService=n,this.sanitizer=r,this.stroke="#000",this.fill="red",this.type="monochrome",this.onEmitSvg=new Te,this.svgFiles=[],this.svg={monochrome:[{name:"textbox"},{name:"christmas"},{name:"superheroes"},{name:"animals"},{name:"face-emotions"},{name:"instruments"}],polychrome:[{name:"lips"}]},"all"!==this.type)this.svgFiles=this.svg[this.type];else if("all"===this.type)for(let o in this.svg)this.svgFiles=this.svgFiles.concat(this.svg[o])}ngOnInit(){}getSvgFile(e){this.coreService.getData(`./assets/json/svg-${e}.json`).subscribe(n=>{this.svgIcons=n})}emitSVGIcon(e){this.onEmitSvg.emit(e)}}return i.\u0275fac=function(e){return new(e||i)(N(no),N(al),N(Go))},i.\u0275cmp=st({type:i,selectors:[["app-svg-icons-menu"]],inputs:{stroke:"stroke",fill:"fill",type:"type"},outputs:{onEmitSvg:"onEmitSvg"},decls:12,vars:4,consts:[["mat-icon-button","","color","accent",3,"matMenuTriggerFor"],[1,"my-menu","pad-all-sm",3,"overlapTrigger"],["iconsMenu","matMenu"],[3,"click"],[1,"row"],[1,"col-xs-4"],["style","width: 100%","mat-raised-button","","color","primary",3,"click",4,"ngFor","ngForOf"],[1,"col-xs-8"],["mat-raised-button","","color","primary","class","svg-but",3,"fill","stroke","innerHTML","click",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",2,"width","100%",3,"click"],["mat-raised-button","","color","primary",1,"svg-but",3,"innerHTML","click"]],template:function(e,n){1&e&&(D(0,"button",0)(1,"mat-icon"),B(2,"image"),k()(),D(3,"mat-menu",1,2)(5,"div",3),F("click",function(o){return o.stopPropagation()}),D(6,"div",4)(7,"div",5),G(8,sW,2,1,"button",6),k(),D(9,"div",7)(10,"div",4),G(11,aW,1,5,"button",8),k()()()()()),2&e&&(R("matMenuTriggerFor",Vt(4)),O(3),R("overlapTrigger",!1),O(5),R("ngForOf",n.svgFiles),O(3),R("ngForOf",n.svgIcons))},directives:[Rr,pl,Or,fl,Qr],styles:[""]}),i})();const cW=["*"];let HE=(()=>{class i{constructor(e,n,r){this.coreService=e,this.fabricService=n,this.sanitizer=r,this.width=200,this.height=200,this.onEmitPath=new Te,this.center={x:0,y:0},this.color="red"}ngOnInit(){this.center={x:Math.round(this.width/2),y:Math.round(this.height/2)},this.fabricService.giveFabricCanvas("miniFabricCanvas",{width:this.width,height:this.height}).subscribe(e=>{this.fabricCanvas=e,this.fabricCtx=this.fabricCanvas.getContext("2d")})}ngAfterViewInit(){}addSVGIcon(e){let n={};n=e.type?{path:e.svg,left:this.center.x,top:this.center.y,name:"svg-icon",scale:1.5}:{path:e.svg,fill:this.color,stroke:"#000",strokeWidth:0,scale:1.5,left:this.center.x,top:this.center.y,name:"svg-icon"},this.fabricService.loadSVGFromString(this.fabricCanvas,n)}addRect(){this.fabricService.addRect(this.fabricCanvas,{left:this.center.x,top:this.center.y,fill:this.color})}addCircle(){this.fabricService.addPolygon(this.fabricCanvas,60,50,{left:this.center.x,top:this.center.y,name:"circle",fill:this.color})}addEditablePolygon(){this.fabricService.addEditablePolygon(this.fabricCanvas,7,50,{left:this.center.x,top:this.center.y,fill:this.color})}emitPath(){let e=[];for(let n=0;n<this.fabricCanvas._objects.length;n+=1){let o,s,r=this.fabricCanvas._objects[n];r.radius&&5===r.radius||r._objects||r.name&&r.name.includes("cirlce-handler")||(o=this.getPathFromObj(r),s=r.fill,e.push({path:o,color:s}))}this.onEmitPath.emit(e)}colorChange(e){this.color=e,this.fabricCanvas.getActiveObject().set({fill:e}),this.fabricCanvas.renderAll()}getPathFromObj(e){let n=[];if(console.log(e),e){if(e.name&&"rect"===e.name){let r=["tl","tr","br","bl"];for(let o=0;o<4;o+=1)n.push([e.aCoords[r[o]].x,e.aCoords[r[o]].y])}else e.name&&("circle"===e.name||e.name.includes("control-poly"))?n=e.points.map(r=>[e.left+r.x*e.scaleX,e.top+r.y*e.scaleY]):e.fromSVG&&(n=e.path.map(r=>{let o=Math.cos(e.angle*(Math.PI/180)),s=Math.sin(e.angle*(Math.PI/180));return[e.left+(r[1]*e.scaleX*o-r[2]*e.scaleY*s),e.top+(r[1]*e.scaleX*s+r[2]*e.scaleY*o)]}),n.pop());if(!e._objects)return n;this.coreService.giveSnackbar("The current object cannot be used in pattern!")}else this.coreService.giveSnackbar("Select a pattern first!")}clear(){this.fabricCanvas.dispose(),this.fabricService.giveFabricCanvas("miniFabricCanvas",{width:this.width,height:this.height}).subscribe(e=>{this.fabricCanvas=e,this.fabricCtx=this.fabricCanvas.getContext("2d")})}}return i.\u0275fac=function(e){return new(e||i)(N(no),N(al),N(Go))},i.\u0275cmp=st({type:i,selectors:[["app-mini-fabric"]],inputs:{width:"width",height:"height"},outputs:{onEmitPath:"onEmitPath"},ngContentSelectors:cW,decls:20,vars:2,consts:[[1,"flex","flex-col","gap-3"],[1,"flex","flex-row","justify-center"],["id","miniFabricCanvas",2,"border","1px dotted grey"],["mat-icon-button","","color","accent",3,"click"],["svgIcon","polygon"],[3,"fill","onEmitSvg"],[3,"iconNoBg","onPickColor"],["mat-raised-button","","color","warn",3,"click"],[3,"click"]],template:function(e,n){1&e&&(un(),D(0,"div",0)(1,"div",1),Be(2,"canvas",2),k(),D(3,"div",1)(4,"button",3),F("click",function(){return n.addRect()}),D(5,"mat-icon"),B(6,"rectangle"),k()(),D(7,"button",3),F("click",function(){return n.addCircle()}),D(8,"mat-icon"),B(9,"circle"),k()(),D(10,"button",3),F("click",function(){return n.addEditablePolygon()}),Be(11,"mat-icon",4),k(),D(12,"app-svg-icons-menu",5),F("onEmitSvg",function(o){return n.addSVGIcon(o)}),k(),D(13,"app-picker-menu",6),F("onPickColor",function(o){return n.colorChange(o.color)}),k(),D(14,"button",7),F("click",function(){return n.clear()}),D(15,"mat-icon"),B(16,"remove"),k()()(),D(17,"div",1)(18,"div",8),F("click",function(){return n.emitPath()}),St(19),k()()()),2&e&&(O(12),R("fill",n.color),O(1),R("iconNoBg","brush"))},directives:[Rr,Or,lW,Zc],styles:[""]}),i})();function dW(i,t){if(1&i){const e=te();D(0,"ngx-dropzone-remove-badge",1),F("click",function(r){return I(e),M()._remove(r)}),k()}}const uW=[[["ngx-dropzone-label"]]],hW=["ngx-dropzone-label"],fW=["fileInput"];function pW(i,t){1&i&&St(0,2,["*ngIf","!_hasPreviews"])}const mW=[[["ngx-dropzone-preview"]],"*",[["ngx-dropzone-label"]]],gW=["ngx-dropzone-preview","*","ngx-dropzone-label"];let _W=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=fe({type:i,selectors:[["ngx-dropzone-label"]]}),i})();function wl(i){return null!=i&&"false"!=`${i}`}let bW=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["ngx-dropzone-remove-badge"]],decls:3,vars:0,consts:[["x1","0","y1","0","x2","10","y2","10"],["x1","0","y1","10","x2","10","y2","0"]],template:function(e,n){1&e&&(Ro(),D(0,"svg"),Be(1,"line",0)(2,"line",1),k())},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:22px;width:22px;position:absolute;top:5px;right:5px;border-radius:50%;background:#bbb;color:#333;cursor:pointer}[_nghost-%COMP%]:hover{background:#aeaeae}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:10px;width:10px}[_nghost-%COMP%] > svg[_ngcontent-%COMP%] > line[_ngcontent-%COMP%]{stroke-width:2px;stroke:#fff}"]}),i})();var _d=(()=>{return(i=_d||(_d={}))[i.BACKSPACE=8]="BACKSPACE",i[i.DELETE=46]="DELETE",_d;var i})();let yW=(()=>{class i{constructor(e){this.sanitizer=e,this._removable=!1,this.removed=new Te,this.tabIndex=0}set file(e){this._file=e}get file(){return this._file}get removable(){return this._removable}set removable(e){this._removable=wl(e)}keyEvent(e){switch(e.keyCode){case _d.BACKSPACE:case _d.DELETE:this.remove()}}get hostStyle(){return this.sanitizer.bypassSecurityTrustStyle("\n\t\t\tdisplay: flex;\n\t\t\theight: 140px;\n\t\t\tmin-height: 140px;\n\t\t\tmin-width: 180px;\n\t\t\tmax-width: 180px;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 20px;\n\t\t\tmargin: 10px;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: relative;\n\t\t")}_remove(e){e.stopPropagation(),this.remove()}remove(){this._removable&&this.removed.next(this.file)}readFile(){return pe(this,void 0,void 0,function*(){return new Promise((e,n)=>{const r=new FileReader;if(r.onload=o=>{e(o.target.result)},r.onerror=o=>{console.error(`FileReader failed on file ${this.file.name}.`),n(o)},!this.file)return n("No file to read. Please provide a file using the [file] Input property.");r.readAsDataURL(this.file)})})}}return i.\u0275fac=function(e){return new(e||i)(N(Go))},i.\u0275cmp=st({type:i,selectors:[["ngx-dropzone-preview"]],hostVars:3,hostBindings:function(e,n){1&e&&F("keyup",function(o){return n.keyEvent(o)}),2&e&&(Er("tabindex",n.tabIndex),function Sr(i){Tr(mx,uO,i,!1)}(n.hostStyle))},inputs:{file:"file",removable:"removable"},outputs:{removed:"removed"},ngContentSelectors:hW,decls:2,vars:1,consts:[[3,"click",4,"ngIf"],[3,"click"]],template:function(e,n){1&e&&(un(uW),St(0),G(1,dW,1,0,"ngx-dropzone-remove-badge",0)),2&e&&(O(1),R("ngIf",n.removable))},directives:[bW,ni],styles:["[_nghost-%COMP%]{background-image:linear-gradient(to top,#ededed,#efefef,#f1f1f1,#f4f4f4,#f6f6f6)}[_nghost-%COMP%]:hover, [_nghost-%COMP%]:focus{background-image:linear-gradient(to top,#e3e3e3,#ebeaea,#e8e7e7,#ebeaea,#f4f4f4);outline:0}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     ngx-dropzone-label{overflow-wrap:break-word}"]}),i})(),jE=(()=>{class i{parseFileList(e,n,r,o){const s=[],a=[];for(let p=0;p<e.length;p++){const b=e.item(p);this.isAccepted(b,n)?r&&b.size>r?this.rejectFile(a,b,"size"):!o&&s.length>=1?this.rejectFile(a,b,"no_multiple"):s.push(b):this.rejectFile(a,b,"type")}return{addedFiles:s,rejectedFiles:a}}isAccepted(e,n){if("*"===n)return!0;const r=n.split(",").map(l=>l.toLowerCase().trim()),o=e.type.toLowerCase(),s=e.name.toLowerCase();return!!r.find(l=>l.endsWith("/*")?o.split("/")[0]===l.split("/")[0]:l.startsWith(".")?s.endsWith(l):l==o)}rejectFile(e,n,r){const o=n;o.reason=r,e.push(o)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac}),i})(),CW=(()=>{class i{constructor(e){this.service=e,this.change=new Te,this.accept="*",this._disabled=!1,this._multiple=!0,this._maxFileSize=void 0,this._expandable=!1,this._disableClick=!1,this._processDirectoryDrop=!1,this._isHovered=!1}get _hasPreviews(){return!!this._previewChildren.length}get disabled(){return this._disabled}set disabled(e){this._disabled=wl(e),this._isHovered&&(this._isHovered=!1)}get multiple(){return this._multiple}set multiple(e){this._multiple=wl(e)}get maxFileSize(){return this._maxFileSize}set maxFileSize(e){this._maxFileSize=function vW(i){return isNaN(parseFloat(i))||isNaN(Number(i))?null:Number(i)}(e)}get expandable(){return this._expandable}set expandable(e){this._expandable=wl(e)}get disableClick(){return this._disableClick}set disableClick(e){this._disableClick=wl(e)}get processDirectoryDrop(){return this._processDirectoryDrop}set processDirectoryDrop(e){this._processDirectoryDrop=wl(e)}_onClick(){this.disableClick||this.showFileSelector()}_onDragOver(e){this.disabled||(this.preventDefault(e),this._isHovered=!0)}_onDragLeave(){this._isHovered=!1}_onDrop(e){if(!this.disabled)if(this.preventDefault(e),this._isHovered=!1,this.processDirectoryDrop&&DataTransferItem.prototype.webkitGetAsEntry){const n=e.dataTransfer.items;if(n.length>0){const r=[],o=[];for(let a=0;a<n.length;a++){const l=n[a].webkitGetAsEntry();l.isFile?r.push(e.dataTransfer.files[a]):l.isDirectory&&o.push(l)}const s=new DataTransfer;if(r.forEach(a=>{s.items.add(a)}),!o.length&&s.items.length&&this.handleFileDrop(s.files),o.length){const a=[];for(const l of o)a.push(this.extractFilesFromDirectory(l));Promise.all(a).then(l=>{l.reduce((p,b)=>[...p,...b]).forEach(p=>{s.items.add(p)}),this.handleFileDrop(s.files)})}}}else this.handleFileDrop(e.dataTransfer.files)}extractFilesFromDirectory(e){function n(r){return pe(this,void 0,void 0,function*(){try{return yield new Promise((o,s)=>r.file(o,s))}catch(o){console.log("Error converting a fileEntry to a File: ",o)}})}return new Promise((r,o)=>{const s=[],a=e.createReader(),l=()=>{a.readEntries(p=>pe(this,void 0,void 0,function*(){if(p.length){const b=p.filter(w=>w.isFile);for(const w of b){const A=yield n(w);s.push(A)}l()}else r(s)}))};l()})}showFileSelector(){this.disabled||this._fileInput.nativeElement.click()}_onFilesSelected(e){this.handleFileDrop(e.target.files),this._fileInput.nativeElement.value="",this.preventDefault(e)}handleFileDrop(e){const n=this.service.parseFileList(e,this.accept,this.maxFileSize,this.multiple);this.change.next({addedFiles:n.addedFiles,rejectedFiles:n.rejectedFiles,source:this})}preventDefault(e){e.preventDefault(),e.stopPropagation()}}return i.\u0275fac=function(e){return new(e||i)(N(jE,2))},i.\u0275cmp=st({type:i,selectors:[["ngx-dropzone"],["","ngx-dropzone",""]],contentQueries:function(e,n,r){if(1&e&&Ht(r,yW,5),2&e){let o;oe(o=se())&&(n._previewChildren=o)}},viewQuery:function(e,n){if(1&e&&xe(fW,7),2&e){let r;oe(r=se())&&(n._fileInput=r.first)}},hostVars:8,hostBindings:function(e,n){1&e&&F("click",function(){return n._onClick()})("dragover",function(o){return n._onDragOver(o)})("dragleave",function(){return n._onDragLeave()})("drop",function(o){return n._onDrop(o)}),2&e&&Ot("ngx-dz-disabled",n.disabled)("expandable",n.expandable)("unclickable",n.disableClick)("ngx-dz-hovered",n._isHovered)},inputs:{accept:"accept",disabled:"disabled",multiple:"multiple",maxFileSize:"maxFileSize",expandable:"expandable",disableClick:"disableClick",processDirectoryDrop:"processDirectoryDrop",id:"id",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedBy:["aria-describedby","ariaDescribedBy"]},outputs:{change:"change"},features:[$e([jE])],ngContentSelectors:gW,decls:5,vars:8,consts:[["type","file",3,"id","multiple","accept","disabled","change"],["fileInput",""],[4,"ngIf"]],template:function(e,n){1&e&&(un(mW),D(0,"input",0,1),F("change",function(o){return n._onFilesSelected(o)}),k(),G(2,pW,1,0,"ng-content",2),St(3),St(4,1)),2&e&&(R("id",n.id)("multiple",n.multiple)("accept",n.accept)("disabled",n.disabled),lt("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedBy),O(2),R("ngIf",!n._hasPreviews))},directives:[ni],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:180px;background:#fff;cursor:pointer;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px;overflow-x:auto}.ngx-dz-hovered[_nghost-%COMP%]{border-style:solid}.ngx-dz-disabled[_nghost-%COMP%]{opacity:.5;cursor:no-drop;pointer-events:none}.expandable[_nghost-%COMP%]{overflow:hidden;height:unset;min-height:180px;flex-wrap:wrap}.unclickable[_nghost-%COMP%]{cursor:default}[_nghost-%COMP%]     ngx-dropzone-label{text-align:center;z-index:10;margin:10px auto}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus +   ngx-dropzone-label{outline:1px dotted #000;outline:-webkit-focus-ring-color auto 5px}"]}),i})(),xW=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Nn]]}),i})();const wW=["*"];let zE=(()=>{class i{constructor(e,n,r){this.el=e,this.zone=n,this.platformId=r,this.afterChange=new Te,this.beforeChange=new Te,this.breakpoint=new Te,this.destroy=new Te,this.init=new Te,this.currentIndex=0,this.slides=[],this.initialized=!1,this._removedSlides=[],this._addedSlides=[]}ngOnDestroy(){this.unslick()}ngAfterViewInit(){this.ngAfterViewChecked()}ngAfterViewChecked(){if(!function Y3(i){return"server"===i}(this.platformId)&&(this._addedSlides.length>0||this._removedSlides.length>0)){const e=this.slides.length-this._removedSlides.length+this._addedSlides.length;this.initialized?0===e?this.unslick():(this._addedSlides.forEach(n=>{this.slides.push(n),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickAdd",n.el.nativeElement)})}),this._addedSlides=[],this._removedSlides.forEach(n=>{const r=this.slides.indexOf(n);this.slides=this.slides.filter(o=>o!==n),this.zone.runOutsideAngular(()=>{this.$instance.slick("slickRemove",r)})}),this._removedSlides=[]):e>0&&this.initSlick()}}initSlick(){this.slides=this._addedSlides,this._addedSlides=[],this._removedSlides=[],this.zone.runOutsideAngular(()=>{this.$instance=jQuery(this.el.nativeElement),this.$instance.on("init",(e,n)=>{this.zone.run(()=>{this.init.emit({event:e,slick:n})})}),this.$instance.slick(this.config),this.zone.run(()=>{var e;this.initialized=!0,this.currentIndex=(null===(e=this.config)||void 0===e?void 0:e.initialSlide)||0}),this.$instance.on("afterChange",(e,n,r)=>{this.zone.run(()=>{this.afterChange.emit({event:e,slick:n,currentSlide:r,first:0===r,last:n.$slides.length===r+n.options.slidesToScroll}),this.currentIndex=r})}),this.$instance.on("beforeChange",(e,n,r,o)=>{this.zone.run(()=>{this.beforeChange.emit({event:e,slick:n,currentSlide:r,nextSlide:o}),this.currentIndex=o})}),this.$instance.on("breakpoint",(e,n,r)=>{this.zone.run(()=>{this.breakpoint.emit({event:e,slick:n,breakpoint:r})})}),this.$instance.on("destroy",(e,n)=>{this.zone.run(()=>{this.destroy.emit({event:e,slick:n}),this.initialized=!1})})})}addSlide(e){this._addedSlides.push(e)}removeSlide(e){this._removedSlides.push(e)}slickGoTo(e){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickGoTo",e)})}slickNext(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickNext")})}slickPrev(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPrev")})}slickPause(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPause")})}slickPlay(){this.zone.runOutsideAngular(()=>{this.$instance.slick("slickPlay")})}unslick(){this.$instance&&(this.zone.runOutsideAngular(()=>{this.$instance.slick("unslick")}),this.$instance=void 0),this.initialized=!1}ngOnChanges(e){if(this.initialized){const n=e.config;if(n.previousValue!==n.currentValue&&void 0!==n.currentValue){const r=n.currentValue.refresh,o=Object.assign({},n.currentValue);delete o.refresh,this.zone.runOutsideAngular(()=>{this.$instance.slick("slickSetOption",o,r)})}}}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(at),N(ws))},i.\u0275cmp=st({type:i,selectors:[["ngx-slick-carousel"]],inputs:{config:"config"},outputs:{afterChange:"afterChange",beforeChange:"beforeChange",breakpoint:"breakpoint",destroy:"destroy",init:"init"},exportAs:["slick-carousel"],features:[$e([{provide:ri,useExisting:Gt(()=>i),multi:!0}]),fn],ngContentSelectors:wW,decls:1,vars:0,template:function(e,n){1&e&&(un(),St(0))},encapsulation:2}),i})(),DW=(()=>{class i{constructor(e,n,r){this.el=e,this.platformId=n,this.carousel=r}ngOnInit(){kg(this.platformId)&&this.carousel.addSlide(this)}ngOnDestroy(){kg(this.platformId)&&this.carousel.removeSlide(this)}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(ws),N(zE,1))},i.\u0275dir=fe({type:i,selectors:[["","ngxSlickItem",""]]}),i})(),SW=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Nn]]}),i})(),WE=(()=>{class i{transform(e){let n=e.split(".");return`${n[0]}-sm/${n[1]}`}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=qn({name:"apiPathSm",type:i,pure:!0}),i})(),GE=(()=>{class i{transform(e){return e.replace(/[^0-9]/g,"")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=qn({name:"onlyNumber",type:i,pure:!0}),i})(),ob=(()=>{class i{transform(e){return Math.round(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275pipe=qn({name:"roundNum",type:i,pure:!0}),i})();const EW=["confusionTmpl"],kW=["whiteNoiseTmpl"],AW=["colorStopsTmpl"],IW=["negativeTmpl"],PW=["pixelateTmpl"],RW=["pixelateCircleTmpl"],OW=["bnwTmpl"],FW=["polychromeNegativeTmpl"],LW=["paradiseTmpl"],NW=["exposureTmpl"],BW=["intensityTmpl"],VW=["bloomTmpl"],HW=["outlinesTmpl"],jW=["waterTmpl"],zW=["blocksTmpl"],WW=["framesTmpl"],GW=["rotatingFramesTmpl"],UW=["cartoonColorsTmpl"],YW=["vinylTmpl"],qW=["holyLightTmpl"],XW=["fluffyTmpl"],$W=["spotlightTmpl"],KW=["blindsTmpl"],QW=["ellipseTmpl"],ZW=["tremoloTmpl"],JW=["brokenWallTmpl"],eG=["suckTmpl"],tG=["klimtTmpl"],nG=["pourPaintTmpl"],iG=["colendarTmpl"],rG=["lettersTmpl"],oG=["comicTmpl"],sG=["whirlpoolTmpl"],aG=["backgroundTmpl"],lG=["shadesOfTmpl"],cG=["dreamTmpl"],dG=["acrylicScratchTmpl"],uG=["addImageDialogTmpl"],hG=["introDialogTmpl"];function fG(i,t){}function pG(i,t){1&i&&G(0,fG,0,0,"ng-template")}function mG(i,t){}function gG(i,t){1&i&&G(0,mG,0,0,"ng-template")}function _G(i,t){if(1&i){const e=te();D(0,"div",74)(1,"button",75),F("click",function(){I(e);const r=M().$implicit,o=M();return o.fabricCanvas.isDrawingMode=!1,o.fabricCanvas.selection=!0,o.fabricCanvas.appStatus="lassoRectangeEffect",o.fabricCanvas.effectMethod=r.method}),D(2,"mat-icon"),B(3,"crop"),k()(),D(4,"button",75),F("click",function(){I(e);const r=M().$implicit,o=M();return o.fabricCanvas.isDrawingMode=!0,o.fabricCanvas.selection=!1,o.fabricCanvas.appStatus="lassoMethodEffect",o.fabricCanvas.effectMethod=r.method}),Be(5,"mat-icon",76),k()()}}function vG(i,t){if(1&i&&(D(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),B(3),k()(),G(4,gG,1,0,null,11),G(5,_G,6,0,"div",73),k()),2&i){const e=t.$implicit;O(3),Ct(" ",e.head," "),O(1),R("ngTemplateOutlet",e.tmpl),O(1),R("ngIf",!e.noParamsMethod)}}function bG(i,t){}function yG(i,t){1&i&&G(0,bG,0,0,"ng-template")}function CG(i,t){}function xG(i,t){1&i&&G(0,CG,0,0,"ng-template")}function wG(i,t){if(1&i){const e=te();D(0,"div"),B(1," range"),D(2,"mat-slider",77),F("ngModelChange",function(r){return I(e),M().canvasService.scissorsTest.var1=r}),k(),B(3," inc"),D(4,"mat-slider",78),F("ngModelChange",function(r){return I(e),M().canvasService.scissorsTest.var2=r}),k(),D(5,"button",26),F("click",function(){return I(e),M().canvasService.scissors()}),B(6,"scissors()"),k()()}if(2&i){const e=M();O(2),R("min",1)("max",60)("ngModel",e.canvasService.scissorsTest.var1),O(2),R("min",.5)("max",4.1)("step",.1)("ngModel",e.canvasService.scissorsTest.var2)}}function DG(i,t){}function SG(i,t){1&i&&G(0,DG,0,0,"ng-template")}function MG(i,t){if(1&i){const e=te();D(0,"div")(1,"div",79)(2,"mat-checkbox",80),F("ngModelChange",function(r){return I(e),M().canvasService.config.confusion.colors[0]=r}),B(3,"R"),k(),D(4,"mat-checkbox",81),F("ngModelChange",function(r){return I(e),M().canvasService.config.confusion.colors[1]=r}),B(5,"G"),k(),D(6,"mat-checkbox",81),F("ngModelChange",function(r){return I(e),M().canvasService.config.confusion.colors[2]=r}),B(7,"B"),k()(),D(8,"div"),B(9," Start "),D(10,"mat-slider",77),F("ngModelChange",function(r){return I(e),M().canvasService.config.confusion.start=r}),k()(),D(11,"div"),B(12," Randomness "),D(13,"mat-slider",77),F("ngModelChange",function(r){return I(e),M().canvasService.config.confusion.randomness=r}),k()(),D(14,"button",26),F("click",function(){return I(e),M().canvasService.giveConfusion()}),B(15," Add confusion "),k()()}if(2&i){const e=M();O(2),R("ngModel",e.canvasService.config.confusion.colors[0]),O(2),R("ngModel",e.canvasService.config.confusion.colors[1]),O(2),R("ngModel",e.canvasService.config.confusion.colors[2]),O(4),R("min",0)("max",200)("ngModel",e.canvasService.config.confusion.start),O(3),R("min",0)("max",50)("ngModel",e.canvasService.config.confusion.randomness)}}function TG(i,t){1&i&&Be(0,"span")}function EG(i,t){1&i&&G(0,TG,1,0,"span",15),2&i&&R("ngForOf",M().canvasService.info.colors)}function kG(i,t){if(1&i){const e=te();D(0,"div")(1,"app-picker-menu",83),F("onPickColor",function(r){return I(e).$implicit.color=r.color}),k(),D(2,"mat-slider",84),F("ngModelChange",function(r){return I(e).$implicit.stop=r}),k(),D(3,"button",82),F("click",function(){const o=I(e).index;return M(2).canvasService.config.colorStops.splice(o,1)}),D(4,"mat-icon"),B(5,"remove_circle"),k()()()}if(2&i){const e=t.$implicit,n=t.index;O(1),Na("label",n+1),R("color",e.color),O(1),R("min",100)("max",800)("ngModel",e.stop)}}function AG(i,t){if(1&i){const e=te();G(0,kG,6,5,"div",15),D(1,"button",82),F("click",function(){I(e);const r=M();return r.canvasService.config.colorStops.push({color:"rgb(0,0,0)",stop:r.canvasService.config.colorStops[r.canvasService.config.colorStops.length-1].stop+100})}),D(2,"mat-icon"),B(3,"add_circle"),k()(),D(4,"div")(5,"button",26),F("click",function(){return I(e),M().canvasService.giveMultiColor()}),B(6," Apply Stops "),k()()}2&i&&R("ngForOf",M().canvasService.config.colorStops)}function IG(i,t){}function PG(i,t){if(1&i){const e=te();D(0,"mat-radio-group",85),F("ngModelChange",function(r){return I(e),M().canvasService.config.pixelate.outline=r})("change",function(){return I(e),M().canvasService.givePixelate()}),B(1," Outline Style "),D(2,"mat-radio-button",86),B(3,"Y"),k(),D(4,"mat-radio-button",86),B(5,"N"),k()(),D(6,"div",16),B(7," Factor "),D(8,"mat-slider",87),F("ngModelChange",function(r){return I(e),M().canvasService.config.pixelate.factor=r})("change",function(){return I(e),M().canvasService.givePixelate()}),k()()}if(2&i){const e=M();R("ngModel",e.canvasService.config.pixelate.outline),O(2),R("value",!0),O(2),R("value",!1),O(4),R("min",2)("max",15)("ngModel",e.canvasService.config.pixelate.factor)}}function RG(i,t){if(1&i){const e=te();D(0,"mat-radio-group",85),F("ngModelChange",function(r){return I(e),M().canvasService.config.pixelate.circleOutline=r})("change",function(){return I(e),M().canvasService.givePixelate2()}),B(1," Outline Style "),D(2,"mat-radio-button",86),B(3,"Y"),k(),D(4,"mat-radio-button",86),B(5,"N"),k()(),D(6,"div",16),B(7," Radius "),D(8,"mat-slider",87),F("ngModelChange",function(r){return I(e),M().canvasService.config.pixelate.circleFactor=r})("change",function(){return I(e),M().canvasService.givePixelate2()}),k()()}if(2&i){const e=M();R("ngModel",e.canvasService.config.pixelate.circleOutline),O(2),R("value",!0),O(2),R("value",!1),O(4),R("min",2)("max",15)("ngModel",e.canvasService.config.pixelate.circleFactor)}}function OG(i,t){if(1&i&&(D(0,"mat-option",86),B(1),k()),2&i){const e=t.$implicit;R("value",e),O(1),Ct(" ",e," ")}}const FG=function(){return["r","g","b"]};function LG(i,t){if(1&i){const e=te();D(0,"div")(1,"mat-form-field")(2,"mat-label"),B(3,"Type"),k(),D(4,"mat-select",88),F("ngModelChange",function(r){return I(e),M().canvasService.config.bnw.rgb[0]=r})("selectionChange",function(){return I(e),M().canvasService.giveBNW()}),G(5,OG,2,2,"mat-option",89),k()()()}if(2&i){const e=M();O(4),R("ngModel",e.canvasService.config.bnw.rgb[0]),O(1),R("ngForOf",Cu(2,FG))}}function NG(i,t){if(1&i){const e=te();D(0,"mat-slider",87),F("ngModelChange",function(r){return I(e),M().canvasService.config.negative.brightness=r})("change",function(){return I(e),M().canvasService.giveNegative()}),k()}if(2&i){const e=M();R("min",70)("max",255)("ngModel",e.canvasService.config.negative.brightness)}}function BG(i,t){if(1&i){const e=te();D(0,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.exposure.distance=r})("change",function(){return I(e),M().canvasService.giveExposure()}),k()}if(2&i){const e=M();R("min",.1)("max",2)("step",.1)("ngModel",e.canvasService.config.exposure.distance)}}function VG(i,t){if(1&i){const e=te();D(0,"div"),B(1," Middle "),D(2,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.polychromeNegative.middlePoint=r})("change",function(){return I(e),M().canvasService.givePolychromeNegative()}),k()(),D(3,"div"),B(4," Reverse "),D(5,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.polychromeNegative.range=r})("change",function(){return I(e),M().canvasService.givePolychromeNegative()}),k()()}if(2&i){const e=M();O(2),R("min",40)("max",225)("step",1)("ngModel",e.canvasService.config.polychromeNegative.middlePoint),O(3),R("min",40)("max",225)("step",1)("ngModel",e.canvasService.config.polychromeNegative.range)}}function HG(i,t){if(1&i){const e=te();D(0,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.whiteNoise.factor=r})("change",function(){return I(e),M().canvasService.giveWhiteNoise()}),k()}if(2&i){const e=M();R("min",0)("max",205)("step",1)("ngModel",e.canvasService.config.whiteNoise.factor)}}function jG(i,t){if(1&i){const e=te();D(0,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.paradise.factor=r})("change",function(){return I(e),M().canvasService.giveParadise()}),k()}if(2&i){const e=M();R("min",.1)("max",1)("step",.1)("ngModel",e.canvasService.config.paradise.factor)}}function zG(i,t){if(1&i){const e=te();D(0,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.intensity.factor=r})("change",function(){return I(e),M().canvasService.giveIntensity()}),k()}if(2&i){const e=M();R("min",0)("max",1)("step",.01)("ngModel",e.canvasService.config.intensity.factor)}}function WG(i,t){if(1&i){const e=te();D(0,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.bloom.factor=r})("change",function(){return I(e),M().canvasService.giveBloom()}),k()}if(2&i){const e=M();R("min",1)("max",200)("step",1)("ngModel",e.canvasService.config.bloom.factor)}}function GG(i,t){if(1&i){const e=te();D(0,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.outlines.factor=r})("change",function(){return I(e),M().canvasService.giveOutlines()}),k(),D(1,"div")(2,"mat-checkbox",85),F("ngModelChange",function(r){return I(e),M().canvasService.config.outlines.hasBg=r})("change",function(){return I(e),M().canvasService.giveOutlines()}),B(3,"Custom bg?"),k(),D(4,"app-picker-menu",91),F("onPickColor",function(r){return I(e),M().canvasService.config.outlines.bgColor=r.color}),k()()}if(2&i){const e=M();R("min",1)("max",50)("step",1)("ngModel",e.canvasService.config.outlines.factor),O(2),R("ngModel",e.canvasService.config.outlines.hasBg),O(2),R("icon","brush")("color",e.canvasService.config.outlines.bgColor)}}function UG(i,t){if(1&i){const e=te();D(0,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.water.factor=r})("change",function(){return I(e),M().canvasService.giveWater()}),k()}if(2&i){const e=M();R("min",1)("max",6)("step",1)("ngModel",e.canvasService.config.water.factor)}}function YG(i,t){if(1&i){const e=te();D(0,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.blocks.factor=r})("change",function(){return I(e),M().canvasService.giveBlocks()}),k()}if(2&i){const e=M();R("min",20)("max",290)("step",1)("ngModel",e.canvasService.config.blocks.factor)}}function qG(i,t){if(1&i){const e=te();D(0,"div"),B(1," Factor "),D(2,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.frames.factor=r})("change",function(){return I(e),M().canvasService.giveFrames()}),k()(),D(3,"div"),B(4," Stop "),D(5,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.frames.stop=r})("change",function(){return I(e),M().canvasService.giveFrames()}),Xr(6,"roundNum"),k()()}if(2&i){const e=M();O(2),R("min",1)("max",80)("step",1)("ngModel",e.canvasService.config.frames.factor),O(3),R("min",0)("max",$r(6,8,e.canvasService.width/e.canvasService.height*100))("step",1)("ngModel",e.canvasService.config.frames.stop)}}function XG(i,t){if(1&i){const e=te();D(0,"div"),B(1," Scale Factor "),D(2,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.rotatingFrames.scaleFactor=r})("change",function(){return I(e),M().canvasService.giveRotatingFrames()}),k()(),D(3,"div"),B(4," Degrees Stop "),D(5,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.rotatingFrames.degreesStop=r})("change",function(){return I(e),M().canvasService.giveRotatingFrames()}),k()(),D(6,"div"),B(7," Degrees Plus "),D(8,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.rotatingFrames.degreesPlus=r})("change",function(){return I(e),M().canvasService.giveRotatingFrames()}),k()()}if(2&i){const e=M();O(2),R("min",0)("max",1)("step",.1)("ngModel",e.canvasService.config.rotatingFrames.scaleFactor),O(3),R("min",1)("max",360)("step",1)("ngModel",e.canvasService.config.rotatingFrames.degreesStop),O(3),R("min",1)("max",15)("step",1)("ngModel",e.canvasService.config.rotatingFrames.degreesPlus)}}function $G(i,t){if(1&i){const e=te();D(0,"div",92)(1,"app-pallet-picker",93),F("onColorSelect",function(r){I(e);const o=M();return o.canvasService.config.cartoonColors=r,o.canvasService.giveCartoonColors()}),k()()}}function KG(i,t){if(1&i){const e=te();D(0,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.vinyl.factor=r})("change",function(){return I(e),M().canvasService.giveVinyl()}),k()}if(2&i){const e=M();R("min",.01)("max",.3)("step",.01)("ngModel",e.canvasService.config.vinyl.factor)}}function QG(i,t){if(1&i){const e=te();D(0,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.holyLight.factor=r})("change",function(){return I(e),M().canvasService.giveHolyLight()}),k()}if(2&i){const e=M();R("min",1)("max",10)("step",1)("ngModel",e.canvasService.config.holyLight.factor)}}function ZG(i,t){if(1&i){const e=te();D(0,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.fluffy.factor=r})("change",function(){return I(e),M().canvasService.giveFluffy()}),k()}if(2&i){const e=M();R("min",5)("max",50)("step",1)("ngModel",e.canvasService.config.fluffy.factor)}}function JG(i,t){if(1&i){const e=te();D(0,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.suck.factor=r})("change",function(){return I(e),M().canvasService.giveSuck()}),k()}if(2&i){const e=M();R("min",10)("max",100)("step",1)("ngModel",e.canvasService.config.suck.factor)}}function eU(i,t){if(1&i){const e=te();D(0,"div"),B(1," Control X "),D(2,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.spotlight.controlX=r})("change",function(){return I(e),M().canvasService.giveSpotlight()}),k()(),D(3,"div"),B(4," Control Y "),D(5,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.spotlight.controlY=r})("change",function(){return I(e),M().canvasService.giveSpotlight()}),k()(),D(6,"div"),B(7," Range X "),D(8,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.spotlight.rangeX=r})("change",function(){return I(e),M().canvasService.giveSpotlight()}),k()(),D(9,"div"),B(10," Range Y "),D(11,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.spotlight.rangeY=r})("change",function(){return I(e),M().canvasService.giveSpotlight()}),k()()}if(2&i){const e=M();O(2),R("min",0)("max",e.canvasService.width)("step",1)("ngModel",e.canvasService.config.spotlight.controlX),O(3),R("min",0)("max",e.canvasService.width)("step",1)("ngModel",e.canvasService.config.spotlight.controlY),O(3),R("min",0)("max",e.canvasService.width/2)("step",1)("ngModel",e.canvasService.config.spotlight.rangeX),O(3),R("min",0)("max",e.canvasService.width)("step",1)("ngModel",e.canvasService.config.spotlight.rangeY)}}function tU(i,t){if(1&i){const e=te();D(0,"div"),B(1," Frequency "),D(2,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.blinds.freq=r})("change",function(){return I(e),M().canvasService.giveBlinds()}),Xr(3,"roundNum"),k()(),D(4,"div"),B(5," Depth "),D(6,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.blinds.depth=r})("change",function(){return I(e),M().canvasService.giveBlinds()}),k()()}if(2&i){const e=M();O(2),R("min",10)("max",$r(3,8,e.canvasService.width/3))("step",1)("ngModel",e.canvasService.config.blinds.freq),O(4),R("min",.1)("max",1.5)("step",.01)("ngModel",e.canvasService.config.blinds.depth)}}function nU(i,t){if(1&i){const e=te();D(0,"div"),B(1," Period "),D(2,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.tremolo.period=r})("change",function(){return I(e),M().canvasService.giveTremolo()}),k()(),D(3,"div"),B(4," Pitch "),D(5,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.tremolo.pitch=r})("change",function(){return I(e),M().canvasService.giveTremolo()}),k()()}if(2&i){const e=M();O(2),R("min",.01)("max",.2)("step",.01)("ngModel",e.canvasService.config.tremolo.period),O(3),R("min",10)("max",100)("step",1)("ngModel",e.canvasService.config.tremolo.pitch)}}function iU(i,t){if(1&i){const e=te();D(0,"div"),B(1," Radius X "),D(2,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.ellipse.rx=r})("change",function(){return I(e),M().canvasService.giveEllipse()}),k()(),D(3,"div"),B(4," Radius Y "),D(5,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.ellipse.ry=r})("change",function(){return I(e),M().canvasService.giveEllipse()}),k()()}if(2&i){const e=M();O(2),R("min",.25*e.canvasService.width)("max",.75*e.canvasService.width)("step",1)("ngModel",e.canvasService.config.ellipse.rx),O(3),R("min",.25*e.canvasService.height)("max",.75*e.canvasService.height)("step",1)("ngModel",e.canvasService.config.ellipse.ry)}}function rU(i,t){if(1&i){const e=te();D(0,"div"),B(1," Size "),D(2,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.brokenWall.size=r})("change",function(){return I(e),M().canvasService.giveBrokenWall()}),k()(),D(3,"div"),B(4," Distance "),D(5,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.brokenWall.dist=r})("change",function(){return I(e),M().canvasService.giveBrokenWall()}),k()()}if(2&i){const e=M();O(2),R("min",1)("max",96)("step",1)("ngModel",e.canvasService.config.brokenWall.size),O(3),R("min",10)("max",200)("step",1)("ngModel",e.canvasService.config.brokenWall.dist)}}function oU(i,t){if(1&i){const e=te();D(0,"div"),B(1," Size "),D(2,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.klimt.size=r})("change",function(){return I(e),M().canvasService.giveKlimt()}),k()(),D(3,"div"),B(4," Randomness "),D(5,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.klimt.randomness=r})("change",function(){return I(e),M().canvasService.giveKlimt()}),k()()}if(2&i){const e=M();O(2),R("min",1)("max",40)("step",1)("ngModel",e.canvasService.config.klimt.size),O(3),R("min",40)("max",200)("step",1)("ngModel",e.canvasService.config.klimt.randomness)}}function sU(i,t){if(1&i){const e=te();D(0,"app-picker-menu",94),F("onPickColor",function(r){return I(e),M().canvasService.config.pourPaint.color=r.color}),k(),D(1,"div"),B(2," Range "),D(3,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.pourPaint.range=r})("change",function(){return I(e),M().canvasService.givePourPaint()}),k()(),D(4,"div"),B(5," Density "),D(6,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.pourPaint.density=r})("change",function(){return I(e),M().canvasService.givePourPaint()}),k()()}if(2&i){const e=M();R("color",e.canvasService.config.pourPaint.color),O(3),R("min",1)("max",20)("step",1)("ngModel",e.canvasService.config.pourPaint.range),O(3),R("min",1)("max",60)("step",1)("ngModel",e.canvasService.config.pourPaint.density)}}function aU(i,t){if(1&i){const e=te();D(0,"div")(1,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.colendar.factor=r})("change",function(){return I(e),M().canvasService.giveColendar()}),k()()}if(2&i){const e=M();O(1),R("min",3)("max",20)("step",1)("ngModel",e.canvasService.config.colendar.factor)}}function lU(i,t){if(1&i){const e=te();D(0,"div"),B(1," Size "),D(2,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.letters.size=r})("change",function(){return I(e),M().canvasService.giveLetters()}),k()(),D(3,"div"),B(4," Density "),D(5,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.letters.density=r})("change",function(){return I(e),M().canvasService.giveLetters()}),k()(),D(6,"mat-form-field",95)(7,"mat-label"),B(8,"Phrase"),k(),D(9,"input",96),F("ngModelChange",function(r){return I(e),M().canvasService.config.letters.phrase=r}),k()()}if(2&i){const e=M();O(2),R("min",6)("max",20)("step",1)("ngModel",e.canvasService.config.letters.size),O(3),R("min",.5)("max",2)("step",.1)("ngModel",e.canvasService.config.letters.density),O(4),R("ngModel",e.canvasService.config.letters.phrase)}}function cU(i,t){if(1&i){const e=te();D(0,"div"),B(1," Reverse"),D(2,"mat-slider",87),F("ngModelChange",function(r){return I(e),M().canvasService.config.comic.reverse=r})("change",function(){return I(e),M().canvasService.giveComic()}),k()(),D(3,"div"),B(4," Sum"),D(5,"mat-slider",87),F("ngModelChange",function(r){return I(e),M().canvasService.config.comic.sumFactor=r})("change",function(){return I(e),M().canvasService.giveComic()}),k()()}if(2&i){const e=M();O(2),R("min",20)("max",80)("ngModel",e.canvasService.config.comic.reverse),O(3),R("min",200)("max",400)("ngModel",e.canvasService.config.comic.sumFactor)}}function dU(i,t){if(1&i){const e=te();D(0,"div"),B(1," Deg Stop "),D(2,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.whirlpool.degreesStop=r})("change",function(){return I(e),M().canvasService.giveWhirlpool()}),k()(),D(3,"div"),B(4," Deg Plus "),D(5,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.whirlpool.degreesPlus=r})("change",function(){return I(e),M().canvasService.giveWhirlpool()}),k()()}if(2&i){const e=M();O(2),R("min",180)("max",720)("step",1)("ngModel",e.canvasService.config.whirlpool.degreesStop),O(3),R("min",.3)("max",1.5)("step",.1)("ngModel",e.canvasService.config.whirlpool.degreesPlus)}}function uU(i,t){if(1&i){const e=te();D(0,"small"),B(1,"The background will affect only transparent pixels!"),k(),D(2,"app-picker-menu",94),F("onPickColor",function(r){return I(e),M().canvasService.config.background.color=r.color}),D(3,"div",97)(4,"button",26),F("click",function(){return I(e),M().canvasService.giveBackground()}),B(5," Apply Background "),k()()()}if(2&i){const e=M();O(2),R("color",e.canvasService.config.background.color)}}function hU(i,t){if(1&i){const e=te();D(0,"button",100),F("click",function(){const o=I(e).$implicit,s=M(2);return s.canvasService.config.shadesOf.color=o.key,s.canvasService.giveShadesOf()}),B(1),k()}if(2&i){const e=t.$implicit,n=M(2);rt("transform","scale("+(e.key===n.canvasService.config.shadesOf.color?1.2:1)+")")("background",e.value[500]),O(1),Ct(" ",e.key," ")}}function fU(i,t){if(1&i&&(D(0,"div",98),G(1,hU,2,5,"button",99),Xr(2,"keyvalue"),k()),2&i){const e=M();O(1),R("ngForOf",$r(2,1,e.pallete.materialColors))}}function pU(i,t){if(1&i){const e=te();D(0,"div"),B(1," Factor "),D(2,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.dream.factor=r})("change",function(){return I(e),M().canvasService.giveDream()}),k()()}if(2&i){const e=M();O(2),R("min",20)("max",200)("step",1)("ngModel",e.canvasService.config.dream.factor)}}function mU(i,t){if(1&i){const e=te();D(0,"div"),B(1," Factor "),D(2,"mat-slider",90),F("ngModelChange",function(r){return I(e),M().canvasService.config.acrylicScratch.range=r})("change",function(){return I(e),M().canvasService.giveAcrylicScratch()}),k()()}if(2&i){const e=M();O(2),R("min",3)("max",30)("step",1)("ngModel",e.canvasService.config.acrylicScratch.range)}}function gU(i,t){if(1&i){const e=te();D(0,"div")(1,"button",111),F("click",function(){return I(e),M(2).giveEffectsSequence()}),B(2," Run Sequence "),k(),D(3,"button",75),F("click",function(){return I(e),M(2).effectsSequence=[]}),D(4,"mat-icon"),B(5,"refresh"),k()(),D(6,"button",112)(7,"mat-icon"),B(8,"save"),k()(),D(9,"mat-menu",null,113)(11,"div",114),F("click",function(r){return r.stopPropagation()}),D(12,"mat-form-field",95)(13,"mat-label"),B(14,"Name"),k(),D(15,"input",96),F("ngModelChange",function(r){return I(e),M(2).sequence.name=r}),k()(),D(16,"button",115),F("click",function(){return I(e),M(2).saveSequence()}),B(17," Save "),k()()()()}if(2&i){const e=Vt(10),n=M(2);O(1),R("disabled",n.sequence.isRunning),O(5),R("matMenuTriggerFor",e)("disabled",!n.effectsSequence.length),O(9),R("ngModel",n.sequence.name),O(1),R("disabled",!n.effectsSequence.length)}}function _U(i,t){if(1&i){const e=te();D(0,"div")(1,"button",26),F("click",function(){return I(e),M(2).giveRandomSequence()}),B(2," Random Sequence "),k(),D(3,"mat-form-field",116)(4,"mat-label"),B(5,"Effects Num"),k(),D(6,"input",117),F("ngModelChange",function(r){return I(e),M(2).sequence.effectsNum=r}),k()()()}if(2&i){const e=M(2);O(6),R("ngModel",e.sequence.effectsNum)}}function vU(i,t){if(1&i){const e=te();D(0,"button",119),F("click",function(){I(e);const r=M().$implicit;return M(2).effectsSequence.push(r)}),D(1,"mat-icon"),B(2,"add_circle"),k(),B(3),k()}if(2&i){const e=M().$implicit;rt("color",e.noParamsMethod?"red":""),O(3),Ct(" ",e.head," ")}}function bU(i,t){if(1&i&&(D(0,"div"),G(1,vU,4,3,"button",118),k()),2&i){const e=t.$implicit;O(1),R("ngIf",!e.hidden)}}function yU(i,t){if(1&i){const e=te();D(0,"div",102)(1,"button",120),F("click",function(){const o=I(e).index;return M(2).effectsSequence.splice(o,1)}),D(2,"mat-icon",121),B(3,"remove_circle"),k(),B(4),D(5,"mat-icon",114),F("click",function(r){const o=I(e),s=o.index,a=o.$implicit;return M(2).effectsSequence.splice(s,0,a),r.stopPropagation()}),B(6,"east"),k()()()}if(2&i){const e=t.$implicit,n=t.index,r=M(2);O(4),Ct(" ",e.head," "),O(1),rt("opacity",n!==r.effectsSequence.length-1?1:.5)}}function CU(i,t){if(1&i){const e=te();D(0,"div",101),G(1,gU,18,5,"div",18),G(2,_U,7,1,"div",18),k(),D(3,"div",102)(4,"div",103)(5,"div",104),G(6,bU,2,1,"div",15),k(),D(7,"button",105),B(8," Randomness "),Be(9,"mat-icon",106),k(),D(10,"mat-menu",null,107)(12,"div",108),F("click",function(r){return r.stopPropagation()}),D(13,"mat-checkbox",12),F("ngModelChange",function(r){return I(e),M().sequence.randomness.config=r}),B(14,"Effect Params"),k(),D(15,"mat-checkbox",85),F("ngModelChange",function(r){return I(e),M().sequence.randomness.rect=r})("change",function(){I(e);const r=M();return r.sequence.randomness.rect?r.sequence.randomness.poly=!1:""}),B(16,"Rect Selection"),k(),D(17,"mat-checkbox",85),F("ngModelChange",function(r){return I(e),M().sequence.randomness.poly=r})("change",function(){I(e);const r=M();return r.sequence.randomness.poly?r.sequence.randomness.rect=!1:""}),B(18,"Poly Selections"),k()()()(),D(19,"div",103)(20,"div",109),G(21,yU,7,3,"div",110),k()()()}if(2&i){const e=Vt(11),n=M();O(1),R("ngIf",n.effectsSequence.length),O(1),R("ngIf",!n.effectsSequence.length),O(4),R("ngForOf",n.effects),O(1),R("matMenuTriggerFor",e),O(6),R("ngModel",n.sequence.randomness.config),O(2),R("ngModel",n.sequence.randomness.rect),O(2),R("ngModel",n.sequence.randomness.poly),O(3),R("sortablejs",n.effectsSequence),O(1),R("ngForOf",n.effectsSequence)}}function xU(i,t){if(1&i&&(D(0,"mat-option",86),B(1),k()),2&i){const e=t.$implicit;rt("display",e.noParamsMethod?"none":"flex"),R("value",e.method),O(1),Ct(" ",e.head," ")}}function wU(i,t){if(1&i&&(D(0,"div",135)(1,"button",136),B(2),k()()),2&i){const e=t.$implicit,n=t.index;O(1),rt("color",e.color),O(1),Ct(" Pattern ",n," ")}}function DU(i,t){if(1&i){const e=te();D(0,"div",127)(1,"div",128),G(2,wU,3,3,"div",129),k(),D(3,"div",130)(4,"button",75),F("click",function(){return I(e),M(2).pattern.series=[]}),D(5,"mat-icon"),B(6,"refresh"),k()(),D(7,"button",131)(8,"mat-icon"),B(9,"save"),k()(),D(10,"mat-menu",null,132)(12,"div",133),F("click",function(r){return r.stopPropagation()}),D(13,"mat-form-field",95)(14,"mat-label"),B(15,"Series Name"),k(),D(16,"input",96),F("ngModelChange",function(r){return I(e),M(2).pattern.seriesName=r}),k()(),D(17,"button",134),F("click",function(){return I(e),M(2).savePattern()}),B(18," Save "),k()()(),D(19,"button",26),F("click",function(){return I(e),M(2).renderPatternSeries()}),B(20," Render Series "),k()()()}if(2&i){const e=Vt(11),n=M(2);O(2),R("ngForOf",n.pattern.series),O(5),R("matMenuTriggerFor",e),O(9),R("ngModel",n.pattern.seriesName)}}function SU(i,t){if(1&i){const e=te();D(0,"div",122)(1,"mat-checkbox",12),F("ngModelChange",function(r){return I(e),M().pattern.applyMethod=r}),B(2,"Run Method"),k(),D(3,"mat-form-field")(4,"mat-label"),B(5,"Select Effect"),k(),D(6,"mat-select",123),F("ngModelChange",function(r){return I(e),M().pattern.method=r}),G(7,xU,2,4,"mat-option",124),k()()(),D(8,"div",102)(9,"div",103),B(10," Inc X "),D(11,"mat-slider",78),F("ngModelChange",function(r){return I(e),M().pattern.xIncr=r}),k()(),D(12,"div",103),B(13," Inc Y "),D(14,"mat-slider",78),F("ngModelChange",function(r){return I(e),M().pattern.yIncr=r}),k()()(),G(15,DU,21,3,"div",125),D(16,"app-mini-fabric",126),F("onEmitPath",function(r){return I(e),M().onEmitPathPattern(r)}),D(17,"button",120),F("click",function(){return I(e),M().pattern.append=!0}),B(18," Add to Series "),k(),D(19,"button",26),F("click",function(){return I(e),M().pattern.append=!1}),B(20," Apply Pattern "),k()()}if(2&i){const e=M();O(1),R("ngModel",e.pattern.applyMethod),O(5),R("ngModel",e.pattern.method)("disabled",!e.pattern.applyMethod),O(1),R("ngForOf",e.effects),O(4),R("min",10)("max",300)("step",1)("ngModel",e.pattern.xIncr),O(3),R("min",10)("max",300)("step",1)("ngModel",e.pattern.yIncr),O(1),R("ngIf",e.pattern.series.length)}}function MU(i,t){if(1&i){const e=te();D(0,"div",147)(1,"button",119),F("click",function(){const o=I(e).$implicit;return M(3).giveEffectsFromSettings(o)}),B(2),k(),D(3,"mat-icon",148),F("click",function(){const o=I(e).index;return M(3).editor.sequence.splice(o,1)}),B(4,"remove_circle"),k()()}if(2&i){const e=t.$implicit;O(2),Ct(" ",e.name," ")}}function TU(i,t){if(1&i){const e=te();D(0,"div")(1,"div",141)(2,"div",142),B(3,"Effects Sequence"),k(),Be(4,"mat-icon",143),D(5,"button",144),F("click",function(){I(e);const r=M(2);return r.saveEditorSettings("sequence",r.editor.sequence)}),B(6," Save "),D(7,"mat-icon"),B(8,"save"),k()()(),D(9,"div",145),G(10,MU,5,1,"div",146),k()()}if(2&i){const e=M(2);O(10),R("ngForOf",e.editor.sequence)}}function EU(i,t){if(1&i){const e=te();D(0,"div",147)(1,"button",119),F("click",function(){const o=I(e).$implicit;return M(3).renderPatternSeries(o.series)}),B(2),k(),D(3,"mat-icon",148),F("click",function(){const o=I(e).index;return M(3).editor.patterns.splice(o,1)}),B(4,"remove_circle"),k()()}if(2&i){const e=t.$implicit;O(2),Ct(" ",e.name," ")}}function kU(i,t){if(1&i){const e=te();D(0,"div"),Be(1,"mat-divider",149),D(2,"div",141)(3,"div",142),B(4,"Patterns"),k(),Be(5,"mat-icon",150),D(6,"button",144),F("click",function(){I(e);const r=M(2);return r.saveEditorSettings("patterns",r.editor.patterns)}),B(7," Save "),D(8,"mat-icon"),B(9,"save"),k()()(),D(10,"div",145),G(11,EU,5,1,"div",146),k()()}if(2&i){const e=M(2);O(11),R("ngForOf",e.editor.patterns)}}function AU(i,t){if(1&i){const e=te();D(0,"button",137)(1,"mat-icon"),B(2,"settings"),k()(),D(3,"mat-menu",138,139)(5,"div",140),F("click",function(r){return r.stopPropagation()}),G(6,TU,11,1,"div",18),G(7,kU,12,1,"div",18),D(8,"div"),B(9," Effects Height "),D(10,"mat-slider",78),F("ngModelChange",function(r){return I(e),M().UI.effects.height=r}),k()()()()}if(2&i){const e=Vt(4),n=M();R("matMenuTriggerFor",e),O(6),R("ngIf",n.editor.sequence&&n.editor.sequence.length),O(1),R("ngIf",n.editor.patterns&&n.editor.patterns.length),O(3),R("min",50)("max",500)("step",1)("ngModel",n.UI.effects.height)}}function IU(i,t){if(1&i){const e=te();D(0,"div",158)(1,"button",26),F("click",function(){return I(e),M(4).addBlocksFromHistory()}),B(2),k(),D(3,"button",159),F("click",function(){return I(e),M(4).historySelected=[]}),D(4,"mat-icon"),B(5,"remove"),k()()()}if(2&i){const e=M(4);O(2),Ct(" Add Selected (",e.historySelected.length,") ")}}function PU(i,t){if(1&i){const e=te();D(0,"div",158)(1,"button",26),F("click",function(){return I(e),M(4).selectAllFromHistory()}),B(2," Selected All "),k(),D(3,"button",160),F("click",function(){return I(e),M(4).canvasService.history=[]}),B(4," Clear "),k()()}}function RU(i,t){if(1&i&&(D(0,"div",156),G(1,IU,6,1,"div",157),G(2,PU,5,0,"div",157),k()),2&i){const e=M(3);O(1),R("ngIf",e.historySelected.length),O(1),R("ngIf",!e.historySelected.length)}}function OU(i,t){if(1&i){const e=te();D(0,"div",167)(1,"button",168),F("click",function(){I(e);const r=M().index,o=M(4);return o.historySelected.splice(o.historySelected.indexOf(r),1)}),D(2,"mat-icon"),B(3,"check"),k()()()}}function FU(i,t){if(1&i){const e=te();D(0,"div",163),Be(1,"img",164),D(2,"div",165)(3,"button",75),F("click",function(){const o=I(e).index;return M(4).historySelected.push(o)}),D(4,"mat-icon"),B(5,"check"),k()(),D(6,"button",75),F("click",function(){const o=I(e).index;return M(4).canvasService.goToHistory(o)}),D(7,"mat-icon"),B(8,"visibility"),k()()(),G(9,OU,4,0,"div",166),k()}if(2&i){const e=t.$implicit,n=t.index,r=M(4);O(1),R("src",e,Zd),O(8),R("ngIf",r.historySelected.includes(n))}}function LU(i,t){if(1&i&&(D(0,"div",161),G(1,FU,10,2,"div",162),k()),2&i){const e=M(3);O(1),R("ngForOf",e.canvasService.history)}}function NU(i,t){if(1&i){const e=te();D(0,"div",152)(1,"div",153)(2,"button",119),F("click",function(){I(e);const r=M(2);return r.UI.history.show=!r.UI.history.show}),D(3,"mat-icon"),B(4),k()()(),G(5,RU,3,2,"div",154),G(6,LU,2,1,"div",155),k()}if(2&i){const e=M(2);O(4),Qn(e.UI.history.show?"expand_more":"expand_less"),O(1),R("ngIf",e.UI.history.show),O(1),R("ngIf",e.UI.history.show)}}function BU(i,t){1&i&&G(0,NU,7,3,"div",151),2&i&&R("ngIf",M().canvasService.history.length)}function VU(i,t){if(1&i){const e=te();D(0,"div",169)(1,"ngx-dropzone",170),F("change",function(r){return I(e),M().onDrop(r)}),D(2,"ngx-dropzone-label",171),B(3,"Add the image you want to edit"),k()(),D(4,"mat-checkbox",12),F("ngModelChange",function(r){return I(e),M().UI.resizeImage=r}),D(5,"em"),B(6,"Scale down the image if needed for better performance on the browser."),k()()()}if(2&i){const e=M();O(1),R("multiple",!1),O(3),R("ngModel",e.UI.resizeImage)}}function HU(i,t){if(1&i){const e=te();D(0,"div",172)(1,"div",173)(2,"button",4),F("click",function(){return I(e),M().coreService.closeDialogById("intro-dialog")}),B(3," Start editing "),k()(),D(4,"ngx-slick-carousel",174,175)(6,"div",176)(7,"div",177),B(8," Choose the effects to apply on your image. You can also apply sequences of effects! "),k(),D(9,"div",178),Be(10,"img",179)(11,"img",180)(12,"img",181)(13,"img",182),k()(),D(14,"div",176)(15,"div",177),B(16," Many effects have also lasso & rectangle tool to apply the effect on parts of the image! "),k(),D(17,"div",178),Be(18,"img",183)(19,"img",184),k()(),D(20,"div",185)(21,"div",177),B(22," Add colored or effect patterns! "),k(),D(23,"div",178),Be(24,"img",186)(25,"img",187)(26,"img",188),k()(),D(27,"div",176)(28,"div",177),B(29," Paint or write text on the upper layer, then merge both layers and continue editing! "),k(),D(30,"div",178),Be(31,"img",189)(32,"img",190),k()()()()}if(2&i){const e=M();O(4),R("config",e.slideConfig)}}let jU=(()=>{class i{constructor(e,n,r,o,s,a,l){this.canvasService=e,this.fabricService=n,this.apiService=r,this.coreService=o,this.geoHelpers=s,this.helpers=a,this.pallete=l,this.slideConfig={autoplay:1,adaptiveHeight:0,autoplaySpeed:5e3,arrows:1,centerMode:1,centerPadding:"0px",cssEase:"ease",dots:1,easing:"linear",infinite:1,initialSlide:0,mobileFirst:0,pauseOnFocus:1,slidesToShow:1,slidesToScroll:1,speed:300},this.canvasScale=1,this.selectedFile={path:"./assets/image-effects-editor/dogs.jpg"},this.UI={effects:{height:400},patterns:{expanded:!0},sequence:{expanded:!1},editorSettings:{expanded:!1},history:{show:!0},resizeImage:!0},this.effects=[],this.effectsSequence=[],this.editor={sequence:[],patterns:[]},this.sequence={isRunning:!1,effectsNum:3,randomness:{config:!1,rect:!1,poly:!1},name:"test",fromStorage:!1},this.state={},this.historySelected=[],this.pattern={method:"giveNegative",xIncr:200,yIncr:200,applyMethod:!1,color:"red",isRunning:!1,append:!1,series:[],seriesName:""}}ngOnInit(){this.getUIFromStorage(),this.initCanvas(),this.interval=setInterval(()=>{this.saveUIToStorage(),this.coreService.giveSnackbar("Autosaved...")},12e4),this.coreService.isProd&&setTimeout(()=>{this.openAddImageDialog(),this.coreService.openDialog({template:this.introDialogTmpl,headerText:"false",showClose:!1},{id:"intro-dialog"})})}ngOnDestroy(){clearInterval(this.interval)}openAddImageDialog(){this.coreService.openDialog({template:this.addImageDialogTmpl,headerText:"Add Image"})}initCanvas(){let n=document.getElementById("canvas-container").offsetWidth;this.canvasService.initCanvasWithImage("canvas-container",this.selectedFile.path,this.UI.resizeImage?n:0).subscribe(o=>{let s=Number((n/o.width).toFixed(2));this.canvasScale=s>1?1:s,this.initEffects(),this.initFabricCanvas(o.width,o.height),this.dummyCanvas=document.getElementById("dummy-canvas"),this.dummyCanvas.width=o.width,this.dummyCanvas.height=o.height,this.dummyCtx=this.dummyCanvas.getContext("2d")})}initEffects(){this.effects=[{head:"Confusion",method:"giveConfusion",tmpl:this.confusionTmpl},{head:"White Noise",method:"giveWhiteNoise",tmpl:this.whiteNoiseTmpl},{head:"Color Stops",method:"giveMultiColor",tmpl:this.colorStopsTmpl},{head:"Negatives",method:"giveNegative",tmpl:this.negativeTmpl},{head:"Pixelate",method:"givePixelate",tmpl:this.pixelateTmpl},{head:"Mosaic",method:"givePixelate2",tmpl:this.pixelateCircleTmpl},{head:"BNW",method:"giveBNW",tmpl:this.bnwTmpl},{head:"Polychrome Negative",method:"givePolychromeNegative",tmpl:this.polychromeNegativeTmpl},{head:"Paradise",method:"giveParadise",tmpl:this.paradiseTmpl},{head:"Exposure",method:"giveExposure",tmpl:this.exposureTmpl},{head:"Intensity",method:"giveIntensity",tmpl:this.intensityTmpl},{head:"Bloom",method:"giveBloom",tmpl:this.bloomTmpl},{head:"Outlines",method:"giveOutlines",tmpl:this.outlinesTmpl},{head:"Water",method:"giveWater",tmpl:this.waterTmpl},{head:"Blocks",method:"giveBlocks",noParamsMethod:!0,tmpl:this.blocksTmpl},{head:"Frames",method:"giveFrames",noParamsMethod:!0,tmpl:this.framesTmpl},{head:"Rotating Frames",method:"giveRotatingFrames",noParamsMethod:!0,tmpl:this.rotatingFramesTmpl},{head:"Cartoonize",method:"giveCartoonColors",tmpl:this.cartoonColorsTmpl},{head:"Vinyl",method:"giveVinyl",noParamsMethod:!0,tmpl:this.vinylTmpl},{head:"Holy Light",method:"giveHolyLight",noParamsMethod:!0,tmpl:this.holyLightTmpl},{head:"Fluffy",method:"giveFluffy",tmpl:this.fluffyTmpl},{head:"Spotlight",method:"giveSpotlight",tmpl:this.spotlightTmpl},{head:"Blinds",method:"giveBlinds",noParamsMethod:!0,tmpl:this.blindsTmpl},{head:"Ellipse",method:"giveEllipse",noParamsMethod:!0,tmpl:this.ellipseTmpl},{head:"Tremolo",method:"giveTremolo",noParamsMethod:!0,tmpl:this.tremoloTmpl},{head:"Broken Wall",method:"giveBrokenWall",noParamsMethod:!0,tmpl:this.brokenWallTmpl},{head:"Suck",method:"giveSuck",noParamsMethod:!0,tmpl:this.suckTmpl},{head:"Klimt",method:"giveKlimt",noParamsMethod:!0,tmpl:this.klimtTmpl},{head:"Pour Paint",method:"givePourPaint",noParamsMethod:!0,tmpl:this.pourPaintTmpl},{head:"Colendar",method:"giveColendar",tmpl:this.colendarTmpl},{head:"Letters",method:"giveLetters",tmpl:this.lettersTmpl},{head:"Comic",method:"giveComic",tmpl:this.comicTmpl},{head:"Whirlpool",method:"giveWhirlpool",noParamsMethod:!0,tmpl:this.whirlpoolTmpl},{head:"Background",method:"giveBackground",tmpl:this.backgroundTmpl},{head:"Shades Of",method:"giveShadesOf",tmpl:this.shadesOfTmpl},{head:"Dream",method:"giveDream",noParamsMethod:!0,tmpl:this.dreamTmpl},{head:"Acrylic Scratch",method:"giveAcrylicScratch",noParamsMethod:!0,tmpl:this.acrylicScratchTmpl}],this.effects.sort((e,n)=>e.head.localeCompare(n.head))}initFabricCanvas(e,n){this.fabricService.giveFabricCanvas("fabricCanvas",{width:e,height:n}).subscribe(r=>{this.fabricCanvas=r,this.fabricCanvas.appStatus="appStatus",this.fabricCanvas.preserveObjectStacking=!1,this.ctxFabric=this.fabricCanvas.getContext("2d"),this.attachFabricEvents(),this.getEditorSettings()})}onDrop(e){let r=document.getElementById("canvas-container").offsetWidth,o=this.UI.resizeImage?r:0;this.coreService.toBase64(e.addedFiles[0]).subscribe(s=>{var a;null===(a=document.getElementById("canvas-container"))||void 0===a||a.children[0].remove(),this.canvasService.initCanvasWithImage("canvas-container",s,o).subscribe(l=>{this.selectedFile.path=l.img;let p=o?1:Number((r/l.width).toFixed(2));this.canvasScale=p>1?1:p,this.fabricCanvas.clear(),this.fabricCanvas.setWidth(l.width),this.fabricCanvas.setHeight(l.height),this.dummyCanvas.width=l.width,this.dummyCanvas.height=l.height,this.coreService.closeAllDialogs()})})}attachFabricEvents(){let e={x:0,y:0},n={x:0,y:0};this.fabricCanvas.on("mouse:down",r=>{e.x=Math.round(r.pointer.x),e.y=Math.round(r.pointer.y)}),this.fabricCanvas.on("mouse:up",r=>{if(n.x=Math.round(r.pointer.x),n.y=Math.round(r.pointer.y),console.log("mouse up"),"selectPart"===this.fabricCanvas.appStatus||"selectAndRemovePart"===this.fabricCanvas.appStatus){let s=this.canvasService.getDataUrlForArea(e,n,"selectAndRemovePart"===this.fabricCanvas.appStatus);this.fabricService.giveImgObj(s,this.fabricCanvas,e),this.fabricCanvas.appStatus=""}else if("lassoRectangeEffect"===this.fabricCanvas.appStatus)this.giveLassoEffect(this.fabricCanvas.effectMethod,{x:e.x<n.x?e.x:n.x,y:e.y<n.y?e.y:n.y},{x:e.x>n.x?e.x:n.x,y:e.y>n.y?e.y:n.y});else if("cropRectange"===this.fabricCanvas.appStatus){let o=!1;this.fabricCanvas.appStatus="",this.lassoCrop(o)}}),this.fabricCanvas.on("path:created",r=>{if(console.log("path:created",r),"excludeCrop"===this.fabricCanvas.appStatus){let o="excludeCrop"===this.fabricCanvas.appStatus;this.fabricCanvas.appStatus="",this.lassoCrop(o)}else"lassoMethodEffect"===this.fabricCanvas.appStatus&&this.giveLassoEffect(this.fabricCanvas.effectMethod)}),this.fabricCanvas.on("before:selection:cleared",r=>{console.log("before:selection:cleared",r)}),this.fabricCanvas.on("selection:created",r=>{console.log("selection:created",r)})}giveLassoEffect(e,n,r){if(n)this.canvasService[e](n,r);else{let s=this.fabricCanvas._objects[this.fabricCanvas._objects.length-1],a=this.fabricService.getPolyInfoFromObj(s);this.canvasService[e](a.minPoint,a.maxPoint,a.poly),this.fabricCanvas.remove(s)}}lassoCrop(e=!0){let r=this.fabricCanvas._objects[this.fabricCanvas._objects.length-1],o=this.fabricService.getPolyInfoFromObj(r),s=o.minPoint,a=o.maxPoint,l=a.x-s.x,p=a.y-s.y,b=o.poly,w=this.dummyCtx.getImageData(0,0,this.canvasService.width,this.canvasService.height);this.canvasService.doSomethingInLoopInPolygogPoints((V,q,Z)=>{w.data[V]=this.canvasService.imageData.data[V],w.data[V+1]=this.canvasService.imageData.data[V+1],w.data[V+2]=this.canvasService.imageData.data[V+2],w.data[V+3]=this.canvasService.imageData.data[V+3],e&&(this.canvasService.imageData.data[V+3]=0)},!0,b,s,a),this.dummyCtx.putImageData(w,0,0);let A=this.dummyCtx.getImageData(s.x,s.y,l,p);this.dummyCtx.clearRect(0,0,this.canvasService.width,this.canvasService.height);let P=this.canvasService.tempCanvasDataUrl(A,l,p);this.fabricCanvas.isDrawingMode=!1,this.fabricCanvas.selection=!0,this.fabricService.giveImgObj(P,this.fabricCanvas,{x:s.x,y:s.y}),this.fabricCanvas.remove(r)}getEditorSettings(){}saveEditorSettings(e,n){}giveRecursiveRandomnness(){let e={startP:void 0,endP:void 0,poly:void 0};if(!this.canvasService.config.cartoonColors.length){let n=this.helpers.randNum(2,12);this.canvasService.config.cartoonColors=this.helpers.giveRandomColors(n)}if(this.sequence.randomness.config){this.canvasService.giveRandomConfig();let n=this.helpers.randNum(2,12);this.canvasService.config.cartoonColors=this.helpers.giveRandomColors(n)}if(this.sequence.randomness.rect){let n=this.geoHelpers.giveRandomRectPoints(this.canvasService.width,this.canvasService.height);e.startP=n[0],e.endP=n[1]}else if(this.sequence.randomness.poly){let n=this.geoHelpers.giveRandomPoly(45,this.canvasService.width,this.canvasService.height);e.poly=n.poly,e.startP=n.startP,e.endP=n.endP}return e}recursiveEffects(e=0){this.sequence.isRunning=!0;let n=0,r=this.effectsSequence[e];if(!r)return this.sequence.isRunning=!1,this.canvasService.applyEffectWithReInit=this.state.applyEffectWithReInit,void(this.sequence.fromStorage&&(this.canvasService.config=this.coreService.clone(this.state.config)));this.sequence.fromStorage&&(this.canvasService.config[r.configProp]=r.config);let o=this.giveRecursiveRandomnness();setTimeout(()=>{let s=(new Date).getTime();r.noParamsMethod?this.canvasService[r.method]():this.canvasService[r.method](o.startP,o.endP,o.poly),n=(new Date).getTime()-s,this.coreService.giveSnackbar(`${r.head} - ${n}ms`),this.recursiveEffects(e+=1)},1e3)}giveEffectsSequence(){this.state.applyEffectWithReInit=this.canvasService.applyEffectWithReInit,this.state.config=this.coreService.clone(this.canvasService.config),this.sequence.name=this.effectsSequence.map(e=>e.head).join("-"),this.canvasService.applyEffectWithReInit=!1,this.state.applyEffectWithReInit?this.canvasService.reInitImage().subscribe(()=>{this.recursiveEffects()}):this.recursiveEffects()}giveEffectsFromSettings(e){this.sequence.fromStorage=!0,this.effectsSequence=e.effects,this.giveEffectsSequence()}saveSequence(){let e=[];this.effectsSequence.forEach(r=>{let o=r.method.slice(4).replace(/([^a-zA-Z])/g,"").toLowerCase();e.push({head:r.head,method:r.method,noParamsMethod:r.noParamsMethod,hidden:r.hidden,config:this.canvasService.config[o],configProp:o})});let n=this.sequence.name;this.editor.sequence||(this.editor.sequence=[]),this.editor.sequence.push({name:n,effects:e}),this.saveEditorSettings("sequence",this.editor.sequence)}giveRandomSequence(){this.effectsSequence=[];let e=this.effects.length;for(let n=0;n<this.sequence.effectsNum;n+=1){let r=Math.floor(Math.random()*e);this.effectsSequence.push(this.effects[r])}this.giveEffectsSequence()}addPatternSeries(e){this.pattern.series.push({method:this.pattern.method,xIncr:this.pattern.xIncr,yIncr:this.pattern.yIncr,applyMethod:this.pattern.applyMethod,color:e.color,path:e.path})}onEmitPathPattern(e){this.pattern.append?e.forEach(n=>{this.addPatternSeries(n)}):(e.forEach(n=>{n.method=this.pattern.method,n.xIncr=this.pattern.xIncr,n.yIncr=this.pattern.yIncr,n.applyMethod=this.pattern.applyMethod}),this.canvasService.applyEffectWithReInit?this.canvasService.reInitImage().subscribe(n=>{this.renderPatternSeries(e)}):this.renderPatternSeries(e))}renderPattern(e,n){n.color=e.color;let r=n.xIncr,o=n.yIncr;if(this.canvasService.pattern.isRunning=!0,n.applyMethod){let s=n.method;this.state.applyEffectWithReInit=this.canvasService.applyEffectWithReInit,this.canvasService.applyEffectWithReInit=!1,this.canvasService[s]({x:0,y:0},{x:r,y:o},e.path);let a=this.helpers.getNextPointsSequence(e.path,this.canvasService.width,this.canvasService.height,r,o);for(this.canvasService[s](a.minPoint,a.maxPoint,a.poly);a.poly.length;)a=this.helpers.getNextPointsSequence(a.poly,this.canvasService.width,this.canvasService.height,r,o),this.canvasService[s](a.minPoint,a.maxPoint,a.poly);this.canvasService.applyEffectWithReInit=this.state.applyEffectWithReInit}else{this.helpers.drawFromPath(this.canvasService.ctx,e.path,n.color);let s=this.helpers.getNextPointsSequence(e.path,this.canvasService.width,this.canvasService.height,r,o);for(this.helpers.drawFromPath(this.canvasService.ctx,s.poly,n.color);s.poly.length;)s=this.helpers.getNextPointsSequence(s.poly,this.canvasService.width,this.canvasService.height,r,o),this.helpers.drawFromPath(this.canvasService.ctx,s.poly,n.color)}this.canvasService.pattern.isRunning=!1}renderPatternSeries(e){let n=e||this.pattern.series,r=(new Date).getTime();n.forEach(s=>{this.renderPattern({color:s.color,path:s.path},s)}),this.canvasService.getImageData(),this.canvasService.addToHistory(),this.canvasService.assignCanvasToImage();let o=(new Date).getTime();this.coreService.giveSnackbar(`Patterns ${o-r}ms`)}savePattern(){let r={name:this.pattern.seriesName,series:this.pattern.series};this.editor.patterns||(this.editor.patterns=[]),this.editor.patterns.push(r),this.saveEditorSettings("patterns",this.editor.patterns),this.pattern.seriesName=""}addBlocksFromHistory(){let s,a,e=this.historySelected.length,n={x:0,y:0},r=1/Math.sqrt(e),o=Math.floor(this.canvasService.width*r);for(let l=0;l<e;l+=1)a=n.x+o,s=this.canvasService.history[this.historySelected[l]],n.x&&a>this.canvasService.width&&(n.x=0,n.y+=this.canvasService.height*r),this.fabricService.giveImgObj(s,this.fabricCanvas,{x:n.x,y:n.y},r),n.x+=o;this.canvasService.clearCanvas(),this.historySelected=[]}selectAllFromHistory(){this.historySelected=[...Array(this.canvasService.history.length).keys()].map(e=>e)}saveUIToStorage(){this.coreService.updateStorageObj("editorUI",this.UI)}getUIFromStorage(){let e=this.coreService.getStorageObj("editorUI");e&&(this.UI=e)}mergeDataWithFabric(){let n=this.ctxFabric.getImageData(0,0,this.canvasService.width,this.canvasService.height).data;this.canvasService.doSomethingInLoop((r,o,s)=>{if(n[r+3]){let a=n[r+3]/255,p=this.canvasService.imageData.data[r+1]*(1-a)+n[r+1]*a,b=this.canvasService.imageData.data[r+2]*(1-a)+n[r+2]*a;this.canvasService.imageData.data[r]=Math.round(this.canvasService.imageData.data[r]*(1-a)+n[r]*a),this.canvasService.imageData.data[r+1]=Math.round(p),this.canvasService.imageData.data[r+2]=Math.round(b),this.canvasService.imageData.data[r+3]=255}},!0),this.fabricCanvas.clear(),this.canvasService.getImageData(),this.canvasService.assignCanvasToImage(!0)}mergeDataToDummy(){let n=this.canvasService.ctx.getImageData(0,0,this.canvasService.width,this.canvasService.height).data,o=this.ctxFabric.getImageData(0,0,this.canvasService.width,this.canvasService.height).data,s=this.dummyCtx.getImageData(0,0,this.canvasService.width,this.canvasService.height),a=s.data,l=-4,p=a.length;for(;(l+=4)<p;)o[l+4]?(a[l]=o[l],a[l+1]=o[l+1],a[l+2]=o[l+2],a[l+3]=o[l+3]):(a[l]=n[l],a[l+1]=n[l+1],a[l+2]=n[l+2],a[l+3]=n[l+3]);this.dummyCtx.putImageData(s,0,0)}downloadImage(e){this.mergeDataToDummy(),this.dummyCanvas.toBlob(n=>{(0,$_.saveAs)(n,`siteland-asset-bank.${e}`)})}}return i.\u0275fac=function(e){return new(e||i)(N(mM),N(al),N(Jo),N(no),N(fM),N(Oh),N(pM))},i.\u0275cmp=st({type:i,selectors:[["app-image-effects-canvas"]],viewQuery:function(e,n){if(1&e&&(xe(EW,7),xe(kW,7),xe(AW,7),xe(IW,7),xe(PW,7),xe(RW,7),xe(OW,7),xe(FW,7),xe(LW,7),xe(NW,7),xe(BW,7),xe(VW,7),xe(HW,7),xe(jW,7),xe(zW,7),xe(WW,7),xe(GW,7),xe(UW,7),xe(YW,7),xe(qW,7),xe(XW,7),xe($W,7),xe(KW,7),xe(QW,7),xe(ZW,7),xe(JW,7),xe(eG,7),xe(tG,7),xe(nG,7),xe(iG,7),xe(rG,7),xe(oG,7),xe(sG,7),xe(aG,7),xe(lG,7),xe(cG,7),xe(dG,7),xe(uG,7),xe(hG,7)),2&e){let r;oe(r=se())&&(n.confusionTmpl=r.first),oe(r=se())&&(n.whiteNoiseTmpl=r.first),oe(r=se())&&(n.colorStopsTmpl=r.first),oe(r=se())&&(n.negativeTmpl=r.first),oe(r=se())&&(n.pixelateTmpl=r.first),oe(r=se())&&(n.pixelateCircleTmpl=r.first),oe(r=se())&&(n.bnwTmpl=r.first),oe(r=se())&&(n.polychromeNegativeTmpl=r.first),oe(r=se())&&(n.paradiseTmpl=r.first),oe(r=se())&&(n.exposureTmpl=r.first),oe(r=se())&&(n.intensityTmpl=r.first),oe(r=se())&&(n.bloomTmpl=r.first),oe(r=se())&&(n.outlinesTmpl=r.first),oe(r=se())&&(n.waterTmpl=r.first),oe(r=se())&&(n.blocksTmpl=r.first),oe(r=se())&&(n.framesTmpl=r.first),oe(r=se())&&(n.rotatingFramesTmpl=r.first),oe(r=se())&&(n.cartoonColorsTmpl=r.first),oe(r=se())&&(n.vinylTmpl=r.first),oe(r=se())&&(n.holyLightTmpl=r.first),oe(r=se())&&(n.fluffyTmpl=r.first),oe(r=se())&&(n.spotlightTmpl=r.first),oe(r=se())&&(n.blindsTmpl=r.first),oe(r=se())&&(n.ellipseTmpl=r.first),oe(r=se())&&(n.tremoloTmpl=r.first),oe(r=se())&&(n.brokenWallTmpl=r.first),oe(r=se())&&(n.suckTmpl=r.first),oe(r=se())&&(n.klimtTmpl=r.first),oe(r=se())&&(n.pourPaintTmpl=r.first),oe(r=se())&&(n.colendarTmpl=r.first),oe(r=se())&&(n.lettersTmpl=r.first),oe(r=se())&&(n.comicTmpl=r.first),oe(r=se())&&(n.whirlpoolTmpl=r.first),oe(r=se())&&(n.backgroundTmpl=r.first),oe(r=se())&&(n.shadesOfTmpl=r.first),oe(r=se())&&(n.dreamTmpl=r.first),oe(r=se())&&(n.acrylicScratchTmpl=r.first),oe(r=se())&&(n.addImageDialogTmpl=r.first),oe(r=se())&&(n.introDialogTmpl=r.first)}},decls:149,vars:20,consts:[[1,"bg-black","min-h-screen","text-gray-300"],[1,"flex","flex-row","items-center","justify-between","pr-4"],[1,"hidden","sm:flex","text-xl"],[1,"flex","flex-row","gap-2"],["mat-raised-button","","color","primary",3,"click"],[1,"hidden","sm:flex"],[1,"container"],[1,"flex","flex-row","bg-black","relative","m-0"],[1,"w-0","md:w-1/3"],[1,"flex","flex-row","justify-start","items-center"],[1,"hidden","lg:flex"],[4,"ngTemplateOutlet"],[3,"ngModel","ngModelChange"],["mat-icon-button","","color","primary",3,"click"],[1,"my-scroll-dark","my-scroll-big","my-accordion"],[4,"ngFor","ngForOf"],[1,"mt-2"],[3,"expanded","expandedChange"],[4,"ngIf"],[1,"w-full","md:w-2/3"],[2,"position","relative","transform-origin","left top"],["id","dummy-canvas",2,"position","absolute","top","0","left","0","z-index","-1"],["id","canvas-container"],[2,"position","absolute","top","0","left","0"],["id","fabricCanvas"],[1,"relative",3,"fabricCanvas","ctxFabric","ctx"],["mat-raised-button","","color","accent",3,"click"],[1,"center-xs"],["confusionTmpl",""],["topColorsTmpl",""],["colorStopsTmpl",""],["brightnessTmpl",""],["pixelateTmpl",""],["pixelateCircleTmpl",""],["bnwTmpl",""],["negativeTmpl",""],["exposureTmpl",""],["polychromeNegativeTmpl",""],["whiteNoiseTmpl",""],["paradiseTmpl",""],["intensityTmpl",""],["bloomTmpl",""],["outlinesTmpl",""],["waterTmpl",""],["blocksTmpl",""],["framesTmpl",""],["rotatingFramesTmpl",""],["cartoonColorsTmpl",""],["vinylTmpl",""],["holyLightTmpl",""],["fluffyTmpl",""],["suckTmpl",""],["spotlightTmpl",""],["blindsTmpl",""],["tremoloTmpl",""],["ellipseTmpl",""],["brokenWallTmpl",""],["klimtTmpl",""],["pourPaintTmpl",""],["colendarTmpl",""],["lettersTmpl",""],["comicTmpl",""],["whirlpoolTmpl",""],["backgroundTmpl",""],["shadesOfTmpl",""],["dreamTmpl",""],["acrylicScratchTmpl",""],["sequenceTmpl",""],["patternsTmpl",""],["editorSettingsTmpl",""],["historyTmpl",""],["addImageDialogTmpl",""],["introDialogTmpl",""],["class","flex flex-row justify-end",4,"ngIf"],[1,"flex","flex-row","justify-end"],["mat-icon-button","","color","accent",3,"click"],["svgIcon","lasso"],["thumbLabel","",3,"min","max","ngModel","ngModelChange"],["thumbLabel","",3,"min","max","step","ngModel","ngModelChange"],[1,"flex","gap-3"],["value","1",3,"ngModel","ngModelChange"],["value","1",1,"mrgn-l-sm",3,"ngModel","ngModelChange"],["mat-icon-button","",3,"click"],[3,"label","color","onPickColor"],[3,"min","max","ngModel","ngModelChange"],[3,"ngModel","ngModelChange","change"],[3,"value"],["thumbLabel","",3,"min","max","ngModel","ngModelChange","change"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["thumbLabel","",3,"min","max","step","ngModel","ngModelChange","change"],[3,"icon","color","onPickColor"],[1,"row","around-xs"],[3,"onColorSelect"],["label","Color",3,"color","onPickColor"],["appearance","fill"],["matInput","","type","text",3,"ngModel","ngModelChange"],[1,"col","middle-xs","mrgn-t-sm"],[1,"row","middle-xs","mrgn-t-sm"],["mat-raised-button","",3,"transform","background","click",4,"ngFor","ngForOf"],["mat-raised-button","",3,"click"],[1,"row","middle-xs",2,"height","58px"],[1,"flex","flex-row"],[1,"w-1/2"],[1,"my-scroll","mat-grey","sequence-effects-con"],["mat-button","",3,"matMenuTriggerFor"],["svgIcon","random"],["seqRandomMenu","matMenu"],[1,"flex","flex-col","gap-2","p-3",3,"click"],[3,"sortablejs"],["class","flex flex-row",4,"ngFor","ngForOf"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-icon-button","",3,"matMenuTriggerFor","disabled"],["saveSeqMenu","matMenu"],[3,"click"],["mat-button","",3,"disabled","click"],[1,"ml-2",2,"width","50px"],["matInput","","type","number",3,"ngModel","ngModelChange"],["mat-button","",3,"color","click",4,"ngIf"],["mat-button","",3,"click"],["mat-button","","color","accent",3,"click"],["color","warn"],[1,"flex","flex-row","gap-2","items-center"],[3,"ngModel","disabled","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],["class","py-3",4,"ngIf"],[3,"onEmitPath"],[1,"py-3"],[1,"flex","flex-row","flex-wrap"],["class","inline-block middle-xs",4,"ngFor","ngForOf"],[1,"flex","flex-row","gap-3"],["mat-icon-button","","color","accent",3,"matMenuTriggerFor"],["saveSeriesMenu","matMenu"],[1,"pad-all-sm",3,"click"],["mat-button","","color","primary",3,"click"],[1,"inline-block","middle-xs"],["mat-button",""],["mat-icon-button","",3,"matMenuTriggerFor"],["hasBackdrop","false"],["personalSettingsMenu","matMenu"],[1,"p-4",3,"click"],[1,"row","middle-xs"],[1,"mrgn-l-sm"],["svgIcon","sequence",1,"mrgn-l-sm"],["mat-button","","color","primary",1,"align-right",3,"click"],[1,"my-scroll","pad-all-sm","mat-grey-300",2,"max-height","150px"],["class","row between-xs no-mrgn",4,"ngFor","ngForOf"],[1,"row","between-xs","no-mrgn"],["color","warn",1,"top-5",3,"click"],[1,"mrgn-t-sm","mrgn-b-sm"],["svgIcon","pattern",1,"mrgn-l-sm"],["style","position: fixed; bottom: 0px; left: 0px; width: 100%; right: 0; z-index: 9999;overflow-y: hidden;","class","my-scroll-dark bg-gray-900",4,"ngIf"],[1,"my-scroll-dark","bg-gray-900",2,"position","fixed","bottom","0px","left","0px","width","100%","right","0","z-index","9999","overflow-y","hidden"],[1,"flex","flex-row","justify-center"],["class","flex flex-row","style","flex-wrap: nowrap;",4,"ngIf"],["class","flex flex-row gap-2 p-4","style","flex-wrap: nowrap;",4,"ngIf"],[1,"flex","flex-row",2,"flex-wrap","nowrap"],["style","position: absolute;top: 4px;left: 7px;",4,"ngIf"],[2,"position","absolute","top","4px","left","7px"],["mat-raised-button","","color","warn",1,"mrgn-l-sm",3,"click"],["mat-button","","color","warn",1,"mrgn-l-sm",3,"click"],[1,"flex","flex-row","gap-2","p-4",2,"flex-wrap","nowrap"],["class","relative",4,"ngFor","ngForOf"],[1,"relative"],["width","100",3,"src"],[1,"history-card-overlay"],["class","history-card-overlay","style","opacity: 1",4,"ngIf"],[1,"history-card-overlay",2,"opacity","1"],["mat-icon-button","",1,"mat-green",3,"click"],[1,"pad-all-sm"],[3,"multiple","change"],[2,"outline","none"],[1,"bg-gray-900"],[1,"pt-3","animate-pulse"],[1,"carousel",3,"config"],["slickModal","slick-carousel"],["ngxSlickItem","",1,"slide","bg-gray-900","overflow-auto","max-h-screen"],[1,"text-xl","p-4","text-white"],[1,"flex","flex-row","flex-wrap","justify-evenly","py-4","gap-4"],["src","./assets/image-effects-editor/intro/effects-1.png",1,"max-w-fit"],["src","./assets/image-effects-editor/intro/effects-2.png",1,"max-w-fit"],["src","./assets/image-effects-editor/intro/effects-3.png",1,"max-w-fit"],["src","./assets/image-effects-editor/intro/effects-4.png",1,"max-w-fit"],["src","./assets/image-effects-editor/intro/lasso-1.png",1,"max-w-fit"],["src","./assets/image-effects-editor/intro/lasso-2.png",1,"max-w-fit"],["ngxSlickItem","",1,"slide","bg-gray-900","overflow-auto","max-h-screen","min-h-fit"],["src","./assets/image-effects-editor/intro/patterns-1.png",1,"max-w-fit"],["src","./assets/image-effects-editor/intro/patterns-2.png",1,"max-w-fit"],["src","./assets/image-effects-editor/intro/patterns-3.png",1,"max-w-fit"],["src","./assets/image-effects-editor/intro/upper-layer-1.png",1,"max-w-fit"],["src","./assets/image-effects-editor/intro/upper-layer-2.png",1,"max-w-fit"]],template:function(e,n){if(1&e&&(D(0,"div",0)(1,"app-header")(2,"div",1)(3,"div",2),B(4," Image Effects Editor "),k(),D(5,"div",3)(6,"button",4),F("click",function(){return n.openAddImageDialog()}),B(7," Add image"),D(8,"mat-icon"),B(9,"image"),k()(),D(10,"div",5)(11,"button",4),F("click",function(){return n.downloadImage("jpeg")}),B(12," JPEG"),D(13,"mat-icon"),B(14,"download"),k()()(),D(15,"button",4),F("click",function(){return n.downloadImage("png")}),B(16," PNG"),D(17,"mat-icon"),B(18,"download"),k()()()()(),D(19,"div",6)(20,"div",7)(21,"div",8)(22,"div",9)(23,"div",10),G(24,pG,1,0,null,11),k(),D(25,"div")(26,"mat-checkbox",12),F("ngModelChange",function(o){return n.canvasService.applyEffectWithReInit=o}),B(27," Restart On Effect Change "),k()(),D(28,"div")(29,"button",13),F("click",function(){return n.canvasService.refresh()}),D(30,"mat-icon"),B(31,"refresh"),k()()()(),D(32,"div",14)(33,"mat-accordion"),G(34,vG,6,3,"mat-expansion-panel",15),k()(),D(35,"div",16)(36,"mat-expansion-panel",17),F("expandedChange",function(o){return n.UI.sequence.expanded=o}),D(37,"mat-expansion-panel-header")(38,"mat-panel-title"),B(39," Effects Sequence "),k()(),G(40,yG,1,0,null,11),k()(),D(41,"div",16)(42,"mat-expansion-panel",17),F("expandedChange",function(o){return n.UI.patterns.expanded=o}),D(43,"mat-expansion-panel-header")(44,"mat-panel-title"),B(45," Patterns "),k()(),G(46,xG,1,0,null,11),k()(),G(47,wG,7,7,"div",18),k(),D(48,"div",19)(49,"div",20),Be(50,"canvas",21)(51,"div",22),D(52,"div",23),Be(53,"canvas",24),k()(),D(54,"app-fabric",25)(55,"button",26),F("click",function(){return n.mergeDataWithFabric()}),B(56," Merge Layers "),k()()()()(),D(57,"div",27),G(58,SG,1,0,null,11),k()(),G(59,MG,16,9,"ng-template",null,28,Ie),G(61,EG,1,1,"ng-template",null,29,Ie),G(63,AG,7,1,"ng-template",null,30,Ie),G(65,IG,0,0,"ng-template",null,31,Ie),G(67,PG,9,6,"ng-template",null,32,Ie),G(69,RG,9,6,"ng-template",null,33,Ie),G(71,LG,6,3,"ng-template",null,34,Ie),G(73,NG,1,3,"ng-template",null,35,Ie),G(75,BG,1,4,"ng-template",null,36,Ie),G(77,VG,6,8,"ng-template",null,37,Ie),G(79,HG,1,4,"ng-template",null,38,Ie),G(81,jG,1,4,"ng-template",null,39,Ie),G(83,zG,1,4,"ng-template",null,40,Ie),G(85,WG,1,4,"ng-template",null,41,Ie),G(87,GG,5,7,"ng-template",null,42,Ie),G(89,UG,1,4,"ng-template",null,43,Ie),G(91,YG,1,4,"ng-template",null,44,Ie),G(93,qG,7,10,"ng-template",null,45,Ie),G(95,XG,9,12,"ng-template",null,46,Ie),G(97,$G,2,0,"ng-template",null,47,Ie),G(99,KG,1,4,"ng-template",null,48,Ie),G(101,QG,1,4,"ng-template",null,49,Ie),G(103,ZG,1,4,"ng-template",null,50,Ie),G(105,JG,1,4,"ng-template",null,51,Ie),G(107,eU,12,16,"ng-template",null,52,Ie),G(109,tU,7,10,"ng-template",null,53,Ie),G(111,nU,6,8,"ng-template",null,54,Ie),G(113,iU,6,8,"ng-template",null,55,Ie),G(115,rU,6,8,"ng-template",null,56,Ie),G(117,oU,6,8,"ng-template",null,57,Ie),G(119,sU,7,9,"ng-template",null,58,Ie),G(121,aU,2,4,"ng-template",null,59,Ie),G(123,lU,10,9,"ng-template",null,60,Ie),G(125,cU,6,6,"ng-template",null,61,Ie),G(127,dU,6,8,"ng-template",null,62,Ie),G(129,uU,6,1,"ng-template",null,63,Ie),G(131,fU,3,3,"ng-template",null,64,Ie),G(133,pU,3,4,"ng-template",null,65,Ie),G(135,mU,3,4,"ng-template",null,66,Ie),G(137,CU,22,9,"ng-template",null,67,Ie),G(139,SU,21,13,"ng-template",null,68,Ie),G(141,AU,11,7,"ng-template",null,69,Ie),G(143,BU,1,1,"ng-template",null,70,Ie),G(145,VU,7,2,"ng-template",null,71,Ie),G(147,HU,33,1,"ng-template",null,72,Ie)),2&e){const r=Vt(138),o=Vt(140),s=Vt(142),a=Vt(144);O(24),R("ngTemplateOutlet",s),O(2),R("ngModel",n.canvasService.applyEffectWithReInit),O(6),rt("height",n.UI.effects.height+"px"),O(2),R("ngForOf",n.effects),O(2),R("expanded",n.UI.sequence.expanded),O(4),R("ngTemplateOutlet",r),O(2),R("expanded",n.UI.patterns.expanded),O(4),R("ngTemplateOutlet",o),O(1),R("ngIf",!n.coreService.isProd&&!1),O(1),rt("background","rgb("+n.canvasService.info.averageRgb.r+","+n.canvasService.info.averageRgb.g+","+n.canvasService.info.averageRgb.b+")"),O(1),rt("transform","scale("+n.canvasScale+")"),O(5),rt("top",n.canvasScale<1?-(n.canvasService.height-n.canvasService.height*n.canvasScale)+"px":"0px"),R("fabricCanvas",n.fabricCanvas)("ctxFabric",n.ctxFabric)("ctx",n.canvasService.ctx),O(4),R("ngTemplateOutlet",a)}},directives:[Uj,Rr,Or,wc,yv,cl,ul,Tv,Qr,Yh,qh,Mv,ni,Xc,Ov,Zc,Fv,Lv,Qh,ml,Pv,rl,uE,Nv,ll,pl,fl,Uh,vf,HE,Rv,CW,_W,zE,DW],pipes:[ob,PD],styles:[".my-accordion[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{white-space:nowrap}.history-card-overlay[_ngcontent-%COMP%]{inset:0;display:flex;align-items:center;justify-content:center;position:absolute;width:100%;background:rgba(255,255,255,.5);opacity:0;pointer-events:all;cursor:pointer}.history-card-overlay[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.9);opacity:1;pointer-events:all}.sequence-effects-con[_ngcontent-%COMP%]{font-size:10px;height:300px;overflow-x:hidden;border:1px dotted grey;border-radius:4px}.sequence-effects-con[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px}"]}),i})(),zU=(()=>{class i{constructor(e,n,r,o){this.coreService=e,this.apiService=n,this.matIconRegistry=r,this.domSanitizer=o,this.editors=[{type:"faceCanvas",verb:"Face"},{type:"imageEffects",verb:"Image Effects"}],this.UI={visibleEditor:"faceCanvas"},console.log("App constructor",this.apiService.token),this.matIconRegistry.addSvgIcon("lasso",this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/icons/laso.svg")),this.matIconRegistry.addSvgIcon("colorpicker",this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/icons/colorpicker.svg")),this.matIconRegistry.addSvgIcon("polygon",this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/icons/polygon.svg")),this.matIconRegistry.addSvgIcon("random",this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/icons/random.svg")),this.matIconRegistry.addSvgIcon("pattern",this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/icons/pattern.svg")),this.matIconRegistry.addSvgIcon("sequence",this.domSanitizer.bypassSecurityTrustResourceUrl("./assets/icons/sequence.svg"))}ngOnInit(){console.log("app init"),this.apiService.checkAccessToken()}addOrUpdateConfigEditorSettings(){}}return i.\u0275fac=function(e){return new(e||i)(N(no),N(Jo),N(zc),N(Go))},i.\u0275cmp=st({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(e,n){1&e&&Be(0,"app-image-effects-canvas")},directives:[jU],styles:[""]}),i})();const WU=["imageEditorDialog"],GU=["confusionTmpl"],UU=["whiteNoiseTmpl"],YU=["colorStopsTmpl"],qU=["negativeTmpl"],XU=["pixelateTmpl"],$U=["pixelateCircleTmpl"],KU=["bnwTmpl"],QU=["polychromeNegativeTmpl"],ZU=["paradiseTmpl"],JU=["exposureTmpl"],eY=["intensityTmpl"],tY=["bloomTmpl"],nY=["outlinesTmpl"],iY=["waterTmpl"],rY=["blocksTmpl"],oY=["framesTmpl"],sY=["rotatingFramesTmpl"],aY=["cartoonColorsTmpl"],lY=["vinylTmpl"],cY=["holyLightTmpl"],dY=["fluffyTmpl"],uY=["spotlightTmpl"],hY=["blindsTmpl"],fY=["ellipseTmpl"],pY=["tremoloTmpl"],mY=["brokenWallTmpl"],gY=["suckTmpl"],_Y=["klimtTmpl"],vY=["pourPaintTmpl"],bY=["colendarTmpl"],yY=["lettersTmpl"],CY=["comicTmpl"],xY=["whirlpoolTmpl"],wY=["backgroundTmpl"];function DY(i,t){}function SY(i,t){1&i&&G(0,DY,0,0,"ng-template")}function MY(i,t){}function TY(i,t){1&i&&G(0,MY,0,0,"ng-template")}function EY(i,t){if(1&i){const e=te();D(0,"div",64)(1,"button",65),F("click",function(){I(e);const r=M().$implicit,o=M();return o.fabricCanvas.isDrawingMode=!1,o.fabricCanvas.selection=!0,o.fabricCanvas.appStatus="lassoRectangeEffect",o.fabricCanvas.effectMethod=r.method}),D(2,"mat-icon"),B(3,"crop"),k()(),D(4,"button",65),F("click",function(){I(e);const r=M().$implicit,o=M();return o.fabricCanvas.isDrawingMode=!0,o.fabricCanvas.selection=!1,o.fabricCanvas.appStatus="lassoMethodEffect",o.fabricCanvas.effectMethod=r.method}),Be(5,"mat-icon",66),k()()}}function kY(i,t){if(1&i&&(D(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),B(3),k()(),G(4,TY,1,0,null,2),G(5,EY,6,0,"div",63),k()),2&i){const e=t.$implicit;O(3),Ct(" ",e.head," "),O(1),R("ngTemplateOutlet",e.tmpl),O(1),R("ngIf",!e.noParamsMethod)}}function AY(i,t){}function IY(i,t){1&i&&G(0,AY,0,0,"ng-template")}function PY(i,t){}function RY(i,t){1&i&&G(0,PY,0,0,"ng-template")}function OY(i,t){}function FY(i,t){1&i&&G(0,OY,0,0,"ng-template")}function LY(i,t){if(1&i){const e=te();D(0,"div"),B(1," R"),D(2,"mat-slider",67),F("ngModelChange",function(r){return I(e),M().scissorsTest.reverse=r}),k(),B(3," SF"),D(4,"mat-slider",68),F("ngModelChange",function(r){return I(e),M().scissorsTest.sumFactor=r}),k(),D(5,"button",21),F("click",function(){return I(e),M().scissors()}),B(6,"scissors()"),k(),B(7," @todo min max config and save state @save TRee On editor dialog @more timeouts fot brething in intensive tasks @resize images no more than 1000 * 1000? @create dynamically masks by click? @select history copy image "),k()}if(2&i){const e=M();O(2),R("min",360)("max",720)("ngModel",e.scissorsTest.reverse),O(2),R("min",.1)("max",5)("step",.1)("ngModel",e.scissorsTest.sumFactor)}}function NY(i,t){if(1&i){const e=te();D(0,"div",69)(1,"button",70),F("click",function(){return I(e),M().downloadImage("jpeg")}),B(2," JPEG"),D(3,"mat-icon"),B(4,"download"),k()(),D(5,"button",70),F("click",function(){return I(e),M().downloadImage("png")}),B(6," PNG"),D(7,"mat-icon"),B(8,"download"),k()(),D(9,"button",70),F("click",function(){return I(e),M().uploadImageToCat()}),B(10),k(),D(11,"button",70),F("click",function(){return I(e),M().uploadImageToCat(!0)}),B(12," Add and close "),k(),D(13,"button",71),F("click",function(){return I(e),M().removeAsset()}),B(14),k()()}if(2&i){const e=M();O(10),Ct(" Add To ",null==e.apiService.selectedCategory?null:e.apiService.selectedCategory.title," "),O(4),Ct(" Remove From ",null==e.apiService.selectedCategory?null:e.apiService.selectedCategory.title," ")}}function BY(i,t){if(1&i){const e=te();D(0,"div",69)(1,"button",70),F("click",function(){return I(e),M().downloadImage("jpeg")}),B(2," JPEG"),D(3,"mat-icon"),B(4,"download"),k()(),D(5,"button",70),F("click",function(){return I(e),M().downloadImage("png")}),B(6," PNG"),D(7,"mat-icon"),B(8,"download"),k()(),D(9,"button",70),F("click",function(){return I(e),M().uploadImage()}),B(10," Upload Image "),k()()}}function VY(i,t){if(1&i){const e=te();D(0,"div",77)(1,"button",21),F("click",function(){return I(e),M(3).addBlocksFromHistory()}),B(2),k(),D(3,"button",78),F("click",function(){return I(e),M(3).historySelected=[]}),D(4,"mat-icon"),B(5,"remove"),k()()()}if(2&i){const e=M(3);O(2),Ct(" Add Selected (",e.historySelected.length,") ")}}function HY(i,t){if(1&i){const e=te();D(0,"div",77)(1,"button",21),F("click",function(){return I(e),M(3).selectAllFromHistory()}),B(2," Selected All "),k(),D(3,"button",79),F("click",function(){return I(e),M(3).history=[]}),B(4," Clear "),k()()}}function jY(i,t){if(1&i&&(D(0,"div",75),G(1,VY,6,1,"div",76),G(2,HY,5,0,"div",76),k()),2&i){const e=M(2);O(1),R("ngIf",e.historySelected.length),O(1),R("ngIf",!e.historySelected.length)}}function zY(i,t){if(1&i){const e=te();D(0,"div",85)(1,"button",86),F("click",function(){I(e);const r=M().index,o=M(3);return o.historySelected.splice(o.historySelected.indexOf(r),1)}),D(2,"mat-icon"),B(3,"check"),k()()()}}function WY(i,t){if(1&i){const e=te();D(0,"div",81),Be(1,"img",82),D(2,"div",83)(3,"button",65),F("click",function(){const o=I(e).index;return M(3).historySelected.push(o)}),D(4,"mat-icon"),B(5,"check"),k()(),D(6,"button",65),F("click",function(){const o=I(e).index;return M(3).goToHistory(o)}),D(7,"mat-icon"),B(8,"visibility"),k()()(),G(9,zY,4,0,"div",84),k()}if(2&i){const e=t.$implicit,n=t.index,r=M(3);O(1),R("src",e,Zd),O(8),R("ngIf",r.historySelected.includes(n))}}function GY(i,t){if(1&i&&(D(0,"div",75),G(1,WY,10,2,"div",80),k()),2&i){const e=M(2);O(1),R("ngForOf",e.history)}}function UY(i,t){if(1&i){const e=te();D(0,"div",72)(1,"button",73),F("click",function(){I(e);const r=M();return r.historyShow=!r.historyShow}),D(2,"mat-icon"),B(3),k()(),G(4,jY,3,2,"div",74),G(5,GY,2,1,"div",74),k()}if(2&i){const e=M();O(3),Qn(e.historyShow?"expand_more":"expand_less"),O(1),R("ngIf",e.historyShow),O(1),R("ngIf",e.historyShow)}}function YY(i,t){if(1&i){const e=te();D(0,"div")(1,"div")(2,"mat-checkbox",87),F("ngModelChange",function(r){return I(e),M().config.confusion.colors[0]=r}),B(3,"R"),k(),D(4,"mat-checkbox",88),F("ngModelChange",function(r){return I(e),M().config.confusion.colors[1]=r}),B(5,"G"),k(),D(6,"mat-checkbox",88),F("ngModelChange",function(r){return I(e),M().config.confusion.colors[2]=r}),B(7,"B"),k()(),D(8,"div"),B(9," Start "),D(10,"mat-slider",67),F("ngModelChange",function(r){return I(e),M().config.confusion.start=r}),k()(),D(11,"div"),B(12," Randomness "),D(13,"mat-slider",67),F("ngModelChange",function(r){return I(e),M().config.confusion.randomness=r}),k()(),D(14,"button",21),F("click",function(){return I(e),M().giveConfusion()}),B(15," Add confusion "),k()()}if(2&i){const e=M();O(2),R("ngModel",e.config.confusion.colors[0]),O(2),R("ngModel",e.config.confusion.colors[1]),O(2),R("ngModel",e.config.confusion.colors[2]),O(4),R("min",0)("max",200)("ngModel",e.config.confusion.start),O(3),R("min",0)("max",50)("ngModel",e.config.confusion.randomness)}}function qY(i,t){if(1&i){const e=te();D(0,"span")(1,"app-picker-menu",89),F("onPickColor",function(r){const s=I(e).index;return M(2).replaceUIColor(r.color,s)}),k()()}if(2&i){const e=t.$implicit,n=t.index;O(1),Na("label",n+1),R("color","rgb("+e[0]+")")}}function XY(i,t){1&i&&G(0,qY,2,2,"span",10),2&i&&R("ngForOf",M().info.colors)}function $Y(i,t){if(1&i){const e=te();D(0,"div")(1,"app-picker-menu",89),F("onPickColor",function(r){return I(e).$implicit.color=r.color}),k(),D(2,"mat-slider",91),F("ngModelChange",function(r){return I(e).$implicit.stop=r}),k(),D(3,"button",90),F("click",function(){const o=I(e).index;return M(2).config.colorStops.splice(o,1)}),D(4,"mat-icon"),B(5,"remove_circle"),k()()()}if(2&i){const e=t.$implicit,n=t.index;O(1),Na("label",n+1),R("color",e.color),O(1),R("min",100)("max",800)("ngModel",e.stop)}}function KY(i,t){if(1&i){const e=te();G(0,$Y,6,5,"div",10),D(1,"button",90),F("click",function(){I(e);const r=M();return r.config.colorStops.push({color:"rgb(0,0,0)",stop:r.config.colorStops[r.config.colorStops.length-1].stop+100})}),D(2,"mat-icon"),B(3,"add_circle"),k()(),D(4,"div")(5,"button",21),F("click",function(){return I(e),M().giveMultiColor()}),B(6," Apply Stops "),k()()}2&i&&R("ngForOf",M().config.colorStops)}function QY(i,t){}function ZY(i,t){if(1&i){const e=te();D(0,"mat-radio-group",92),F("ngModelChange",function(r){return I(e),M().config.pixelate.outline=r})("change",function(){return I(e),M().givePixelate()}),B(1," Outline Style "),D(2,"mat-radio-button",93),B(3,"Y"),k(),D(4,"mat-radio-button",93),B(5,"N"),k()(),D(6,"div"),B(7," Factor "),D(8,"mat-slider",94),F("ngModelChange",function(r){return I(e),M().config.pixelate.factor=r})("change",function(){return I(e),M().givePixelate()}),k()()}if(2&i){const e=M();R("ngModel",e.config.pixelate.outline),O(2),R("value",!0),O(2),R("value",!1),O(4),R("min",2)("max",15)("ngModel",e.config.pixelate.factor)}}function JY(i,t){if(1&i){const e=te();D(0,"mat-radio-group",92),F("ngModelChange",function(r){return I(e),M().config.pixelate.circleOutline=r})("change",function(){return I(e),M().givePixelate2()}),B(1," Outline Style "),D(2,"mat-radio-button",93),B(3,"Y"),k(),D(4,"mat-radio-button",93),B(5,"N"),k()(),D(6,"div",95),B(7," Radius "),D(8,"mat-slider",94),F("ngModelChange",function(r){return I(e),M().config.pixelate.circleFactor=r})("change",function(){return I(e),M().givePixelate2()}),k()()}if(2&i){const e=M();R("ngModel",e.config.pixelate.circleOutline),O(2),R("value",!0),O(2),R("value",!1),O(4),R("min",2)("max",15)("ngModel",e.config.pixelate.circleFactor)}}function eq(i,t){if(1&i&&(D(0,"mat-option",93),B(1),k()),2&i){const e=t.$implicit;R("value",e),O(1),Ct(" ",e," ")}}const tq=function(){return["r","g","b"]};function nq(i,t){if(1&i){const e=te();D(0,"div")(1,"mat-form-field")(2,"mat-label"),B(3,"Type"),k(),D(4,"mat-select",96),F("ngModelChange",function(r){return I(e),M().config.bnw.rgb[0]=r})("selectionChange",function(){return I(e),M().giveBNW()}),G(5,eq,2,2,"mat-option",97),k()()()}if(2&i){const e=M();O(4),R("ngModel",e.config.bnw.rgb[0]),O(1),R("ngForOf",Cu(2,tq))}}function iq(i,t){if(1&i){const e=te();D(0,"mat-slider",94),F("ngModelChange",function(r){return I(e),M().config.negative.brightness=r})("change",function(){return I(e),M().giveNegative()}),k()}if(2&i){const e=M();R("min",70)("max",255)("ngModel",e.config.negative.brightness)}}function rq(i,t){if(1&i){const e=te();D(0,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.exposure.distance=r})("change",function(){return I(e),M().giveExposure()}),k()}if(2&i){const e=M();R("min",.1)("max",2)("step",.1)("ngModel",e.config.exposure.distance)}}function oq(i,t){if(1&i){const e=te();D(0,"div"),B(1," Middle "),D(2,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.polychromeNegative.middlePoint=r})("change",function(){return I(e),M().givePolychromeNegative()}),k()(),D(3,"div"),B(4," Reverse "),D(5,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.polychromeNegative.range=r})("change",function(){return I(e),M().givePolychromeNegative()}),k()()}if(2&i){const e=M();O(2),R("min",40)("max",225)("step",1)("ngModel",e.config.polychromeNegative.middlePoint),O(3),R("min",40)("max",225)("step",1)("ngModel",e.config.polychromeNegative.range)}}function sq(i,t){if(1&i){const e=te();D(0,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.whiteNoise.factor=r})("change",function(){return I(e),M().giveWhiteNoise()}),k()}if(2&i){const e=M();R("min",0)("max",205)("step",1)("ngModel",e.config.whiteNoise.factor)}}function aq(i,t){if(1&i){const e=te();D(0,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.paradise.factor=r})("change",function(){return I(e),M().giveParadise()}),k()}if(2&i){const e=M();R("min",.1)("max",1)("step",.1)("ngModel",e.config.paradise.factor)}}function lq(i,t){if(1&i){const e=te();D(0,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.intensity.factor=r})("change",function(){return I(e),M().giveIntensity()}),k()}if(2&i){const e=M();R("min",0)("max",1)("step",.01)("ngModel",e.config.intensity.factor)}}function cq(i,t){if(1&i){const e=te();D(0,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.bloom.factor=r})("change",function(){return I(e),M().giveBloom()}),k()}if(2&i){const e=M();R("min",1)("max",200)("step",1)("ngModel",e.config.bloom.factor)}}function dq(i,t){if(1&i){const e=te();D(0,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.outlines.factor=r})("change",function(){return I(e),M().giveOutlines()}),k(),D(1,"div")(2,"mat-checkbox",92),F("ngModelChange",function(r){return I(e),M().config.outlines.hasBg=r})("change",function(){return I(e),M().giveOutlines()}),B(3,"Custom bg?"),k(),D(4,"app-picker-menu",99),F("onPickColor",function(r){return I(e),M().config.outlines.bgColor=r.color}),k()()}if(2&i){const e=M();R("min",1)("max",50)("step",1)("ngModel",e.config.outlines.factor),O(2),R("ngModel",e.config.outlines.hasBg),O(2),R("icon","brush")("color",e.config.outlines.bgColor)}}function uq(i,t){if(1&i){const e=te();D(0,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.water.factor=r})("change",function(){return I(e),M().giveWater()}),k()}if(2&i){const e=M();R("min",1)("max",6)("step",1)("ngModel",e.config.water.factor)}}function hq(i,t){if(1&i){const e=te();D(0,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.blocks.factor=r})("change",function(){return I(e),M().giveBlocks()}),k()}if(2&i){const e=M();R("min",20)("max",290)("step",1)("ngModel",e.config.blocks.factor)}}function fq(i,t){if(1&i){const e=te();D(0,"div"),B(1," Factor "),D(2,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.frames.factor=r})("change",function(){return I(e),M().giveFrames()}),k()(),D(3,"div"),B(4," Stop "),D(5,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.frames.stop=r})("change",function(){return I(e),M().giveFrames()}),Xr(6,"roundNum"),k()()}if(2&i){const e=M();O(2),R("min",1)("max",80)("step",1)("ngModel",e.config.frames.factor),O(3),R("min",0)("max",$r(6,8,e.width/e.height*100))("step",1)("ngModel",e.config.frames.stop)}}function pq(i,t){if(1&i){const e=te();D(0,"div"),B(1," Scale Factor "),D(2,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.rotatingFrames.scaleFactor=r})("change",function(){return I(e),M().giveRotatingFrames()}),k()(),D(3,"div"),B(4," Degrees Stop "),D(5,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.rotatingFrames.degreesStop=r})("change",function(){return I(e),M().giveRotatingFrames()}),k()(),D(6,"div"),B(7," Degrees Plus "),D(8,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.rotatingFrames.degreesPlus=r})("change",function(){return I(e),M().giveRotatingFrames()}),k()()}if(2&i){const e=M();O(2),R("min",0)("max",1)("step",.1)("ngModel",e.config.rotatingFrames.scaleFactor),O(3),R("min",1)("max",360)("step",1)("ngModel",e.config.rotatingFrames.degreesStop),O(3),R("min",1)("max",15)("step",1)("ngModel",e.config.rotatingFrames.degreesPlus)}}function mq(i,t){if(1&i){const e=te();D(0,"div",6)(1,"app-pallet-picker",100),F("onColorSelect",function(r){I(e);const o=M();return o.config.cartoonColors=r,o.giveCartoonColors()}),k()()}}function gq(i,t){if(1&i){const e=te();D(0,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.vinyl.factor=r})("change",function(){return I(e),M().giveVinyl()}),k()}if(2&i){const e=M();R("min",.01)("max",.3)("step",.01)("ngModel",e.config.vinyl.factor)}}function _q(i,t){if(1&i){const e=te();D(0,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.holyLight.factor=r})("change",function(){return I(e),M().giveHolyLight()}),k()}if(2&i){const e=M();R("min",1)("max",10)("step",1)("ngModel",e.config.holyLight.factor)}}function vq(i,t){if(1&i){const e=te();D(0,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.fluffy.factor=r})("change",function(){return I(e),M().giveFluffy()}),k()}if(2&i){const e=M();R("min",5)("max",50)("step",1)("ngModel",e.config.fluffy.factor)}}function bq(i,t){if(1&i){const e=te();D(0,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.suck.factor=r})("change",function(){return I(e),M().giveSuck()}),k()}if(2&i){const e=M();R("min",10)("max",100)("step",1)("ngModel",e.config.suck.factor)}}function yq(i,t){if(1&i){const e=te();D(0,"div"),B(1," Control X "),D(2,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.spotlight.controlX=r})("change",function(){return I(e),M().giveSpotlight()}),k()(),D(3,"div"),B(4," Control Y "),D(5,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.spotlight.controlY=r})("change",function(){return I(e),M().giveSpotlight()}),k()(),D(6,"div"),B(7," Range X "),D(8,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.spotlight.rangeX=r})("change",function(){return I(e),M().giveSpotlight()}),k()(),D(9,"div"),B(10," Range Y "),D(11,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.spotlight.rangeY=r})("change",function(){return I(e),M().giveSpotlight()}),k()()}if(2&i){const e=M();O(2),R("min",0)("max",e.width)("step",1)("ngModel",e.config.spotlight.controlX),O(3),R("min",0)("max",e.width)("step",1)("ngModel",e.config.spotlight.controlY),O(3),R("min",0)("max",e.width/2)("step",1)("ngModel",e.config.spotlight.rangeX),O(3),R("min",0)("max",e.width)("step",1)("ngModel",e.config.spotlight.rangeY)}}function Cq(i,t){if(1&i){const e=te();D(0,"div"),B(1," Frequency "),D(2,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.blinds.freq=r})("change",function(){return I(e),M().giveBlinds()}),Xr(3,"roundNum"),k()(),D(4,"div"),B(5," Depth "),D(6,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.blinds.depth=r})("change",function(){return I(e),M().giveBlinds()}),k()()}if(2&i){const e=M();O(2),R("min",10)("max",$r(3,8,e.width/3))("step",1)("ngModel",e.config.blinds.freq),O(4),R("min",.1)("max",1.5)("step",.01)("ngModel",e.config.blinds.depth)}}function xq(i,t){if(1&i){const e=te();D(0,"div"),B(1," Period "),D(2,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.tremolo.period=r})("change",function(){return I(e),M().giveTremolo()}),k()(),D(3,"div"),B(4," Pitch "),D(5,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.tremolo.pitch=r})("change",function(){return I(e),M().giveTremolo()}),k()()}if(2&i){const e=M();O(2),R("min",.01)("max",.2)("step",.01)("ngModel",e.config.tremolo.period),O(3),R("min",10)("max",100)("step",1)("ngModel",e.config.tremolo.pitch)}}function wq(i,t){if(1&i){const e=te();D(0,"div"),B(1," Radius X "),D(2,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.ellipse.rx=r})("change",function(){return I(e),M().giveEllipse()}),k()(),D(3,"div"),B(4," Radius Y "),D(5,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.ellipse.ry=r})("change",function(){return I(e),M().giveEllipse()}),k()()}if(2&i){const e=M();O(2),R("min",.25*e.width)("max",.75*e.width)("step",1)("ngModel",e.config.ellipse.rx),O(3),R("min",.25*e.height)("max",.75*e.height)("step",1)("ngModel",e.config.ellipse.ry)}}function Dq(i,t){if(1&i){const e=te();D(0,"div"),B(1," Size "),D(2,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.brokenWall.size=r})("change",function(){return I(e),M().giveBrokenWall()}),k()(),D(3,"div"),B(4," Distance "),D(5,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.brokenWall.dist=r})("change",function(){return I(e),M().giveBrokenWall()}),k()()}if(2&i){const e=M();O(2),R("min",1)("max",96)("step",1)("ngModel",e.config.brokenWall.size),O(3),R("min",10)("max",200)("step",1)("ngModel",e.config.brokenWall.dist)}}function Sq(i,t){if(1&i){const e=te();D(0,"div"),B(1," Size "),D(2,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.klimt.size=r})("change",function(){return I(e),M().giveKlimt()}),k()(),D(3,"div"),B(4," Randomness "),D(5,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.klimt.randomness=r})("change",function(){return I(e),M().giveKlimt()}),k()()}if(2&i){const e=M();O(2),R("min",1)("max",40)("step",1)("ngModel",e.config.klimt.size),O(3),R("min",40)("max",200)("step",1)("ngModel",e.config.klimt.randomness)}}function Mq(i,t){if(1&i){const e=te();D(0,"app-picker-menu",101),F("onPickColor",function(r){return I(e),M().config.pourPaint.color=r.color}),k(),D(1,"div"),B(2," Range "),D(3,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.pourPaint.range=r})("change",function(){return I(e),M().givePourPaint()}),k()(),D(4,"div"),B(5," Density "),D(6,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.pourPaint.density=r})("change",function(){return I(e),M().givePourPaint()}),k()()}if(2&i){const e=M();R("color",e.config.pourPaint.color),O(3),R("min",1)("max",20)("step",1)("ngModel",e.config.pourPaint.range),O(3),R("min",1)("max",60)("step",1)("ngModel",e.config.pourPaint.density)}}function Tq(i,t){if(1&i){const e=te();D(0,"div")(1,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.colendar.factor=r})("change",function(){return I(e),M().giveColendar()}),k()()}if(2&i){const e=M();O(1),R("min",3)("max",20)("step",1)("ngModel",e.config.colendar.factor)}}function Eq(i,t){if(1&i){const e=te();D(0,"div"),B(1," Size "),D(2,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.letters.size=r})("change",function(){return I(e),M().giveLetters()}),k()(),D(3,"div"),B(4," Density "),D(5,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.letters.density=r})("change",function(){return I(e),M().giveLetters()}),k()(),D(6,"mat-form-field",102)(7,"mat-label"),B(8,"Phrase"),k(),D(9,"input",103),F("ngModelChange",function(r){return I(e),M().config.letters.phrase=r}),k()()}if(2&i){const e=M();O(2),R("min",6)("max",20)("step",1)("ngModel",e.config.letters.size),O(3),R("min",.5)("max",2)("step",.1)("ngModel",e.config.letters.density),O(4),R("ngModel",e.config.letters.phrase)}}function kq(i,t){if(1&i){const e=te();D(0,"div"),B(1," Reverse"),D(2,"mat-slider",94),F("ngModelChange",function(r){return I(e),M().config.comic.reverse=r})("change",function(){return I(e),M().giveComic()}),k()(),D(3,"div"),B(4," Sum"),D(5,"mat-slider",94),F("ngModelChange",function(r){return I(e),M().config.comic.sumFactor=r})("change",function(){return I(e),M().giveComic()}),k()()}if(2&i){const e=M();O(2),R("min",20)("max",80)("ngModel",e.config.comic.reverse),O(3),R("min",200)("max",400)("ngModel",e.config.comic.sumFactor)}}function Aq(i,t){if(1&i){const e=te();D(0,"div"),B(1," Deg Stop "),D(2,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.whirlpool.degreesStop=r})("change",function(){return I(e),M().giveWhirlpool()}),k()(),D(3,"div"),B(4," Deg Plus "),D(5,"mat-slider",98),F("ngModelChange",function(r){return I(e),M().config.whirlpool.degreesPlus=r})("change",function(){return I(e),M().giveWhirlpool()}),k()()}if(2&i){const e=M();O(2),R("min",180)("max",720)("step",1)("ngModel",e.config.whirlpool.degreesStop),O(3),R("min",.2)("max",1.5)("step",.1)("ngModel",e.config.whirlpool.degreesPlus)}}function Iq(i,t){if(1&i){const e=te();D(0,"small"),B(1,"The background will affect only transparent pixels!"),k(),D(2,"app-picker-menu",101),F("onPickColor",function(r){return I(e),M().background.color=r.color}),D(3,"div",104)(4,"button",21),F("click",function(){return I(e),M().giveBackground()}),B(5," Apply Background "),k()()()}if(2&i){const e=M();O(2),R("color",e.background.color)}}function Pq(i,t){if(1&i){const e=te();D(0,"div",113)(1,"button",73),F("click",function(){const o=I(e).$implicit;return M(3).giveEffectsFromSettings(o)}),B(2),k(),D(3,"mat-icon",114),F("click",function(){const o=I(e).index;return M(3).editor.sequence.splice(o,1)}),B(4,"remove_circle"),k()()}if(2&i){const e=t.$implicit;O(2),Ct(" ",e.name," ")}}function Rq(i,t){if(1&i){const e=te();D(0,"div")(1,"h4",109),B(2,"Effects Sequence"),k(),D(3,"div",110),G(4,Pq,5,1,"div",111),k(),D(5,"div",112)(6,"button",21),F("click",function(){I(e);const r=M(2);return r.saveEditorSettings("sequence",r.editor.sequence)}),B(7," Save "),D(8,"mat-icon"),B(9,"save"),k()()()()}if(2&i){const e=M(2);O(4),R("ngForOf",e.editor.sequence)}}function Oq(i,t){if(1&i){const e=te();D(0,"div",113)(1,"button",73),F("click",function(){const o=I(e).$implicit;return M(3).renderPatternSeries(o.series)}),B(2),k(),D(3,"mat-icon",114),F("click",function(){const o=I(e).index;return M(3).editor.patterns.splice(o,1)}),B(4,"remove_circle"),k()()}if(2&i){const e=t.$implicit;O(2),Ct(" ",e.name," ")}}function Fq(i,t){if(1&i){const e=te();D(0,"div"),Be(1,"mat-divider",115),D(2,"h4",109),B(3,"Patterns"),k(),D(4,"div",110),G(5,Oq,5,1,"div",111),k(),D(6,"div",112)(7,"button",21),F("click",function(){I(e);const r=M(2);return r.saveEditorSettings("patterns",r.editor.patterns)}),B(8," Save "),D(9,"mat-icon"),B(10,"save"),k()()()()}if(2&i){const e=M(2);O(5),R("ngForOf",e.editor.patterns)}}function Lq(i,t){if(1&i){const e=te();D(0,"button",105)(1,"mat-icon"),B(2,"settings"),k()(),D(3,"mat-menu",106,107)(5,"div",108),F("click",function(r){return r.stopPropagation()}),G(6,Rq,10,1,"div",13),G(7,Fq,11,1,"div",13),D(8,"div"),B(9," Effects Height "),D(10,"mat-slider",68),F("ngModelChange",function(r){return I(e),M().UI.effects.height=r}),k()()()()}if(2&i){const e=Vt(4),n=M();R("matMenuTriggerFor",e),O(6),R("ngIf",n.editor.sequence&&n.editor.sequence.length),O(1),R("ngIf",n.editor.patterns&&n.editor.patterns.length),O(3),R("min",50)("max",500)("step",1)("ngModel",n.UI.effects.height)}}function Nq(i,t){if(1&i){const e=te();D(0,"div")(1,"button",133),F("click",function(){return I(e),M(2).giveEffectsSequence()}),B(2," Run Sequence "),k(),D(3,"button",65),F("click",function(){return I(e),M(2).effectsSequence=[]}),D(4,"mat-icon"),B(5,"refresh"),k()()()}if(2&i){const e=M(2);O(1),R("disabled",e.sequence.isRunning)}}function Bq(i,t){if(1&i){const e=te();D(0,"div")(1,"button",21),F("click",function(){return I(e),M(2).giveRandomSequence()}),B(2," Random Sequence "),k(),D(3,"mat-form-field",134)(4,"mat-label"),B(5,"Effects Num"),k(),D(6,"input",135),F("ngModelChange",function(r){return I(e),M(2).sequence.effectsNum=r}),k()()()}if(2&i){const e=M(2);O(6),R("ngModel",e.sequence.effectsNum)}}function Vq(i,t){if(1&i){const e=te();D(0,"button",73),F("click",function(){I(e);const r=M().$implicit;return M(2).effectsSequence.push(r)}),D(1,"mat-icon"),B(2,"add_circle"),k(),B(3),k()}if(2&i){const e=M().$implicit;rt("color",e.noParamsMethod?"red":""),O(3),Ct(" ",e.head," ")}}function Hq(i,t){if(1&i&&(D(0,"div"),G(1,Vq,4,3,"button",136),k()),2&i){const e=t.$implicit;O(1),R("ngIf",!e.hidden)}}function jq(i,t){if(1&i){const e=te();D(0,"div",122)(1,"button",137),F("click",function(){const o=I(e).index;return M(2).effectsSequence.splice(o,1)}),D(2,"mat-icon",138),B(3,"remove_circle"),k(),B(4),D(5,"mat-icon",120),F("click",function(r){const o=I(e),s=o.index,a=o.$implicit;return M(2).effectsSequence.splice(s,0,a),r.stopPropagation()}),B(6,"east"),k()()()}if(2&i){const e=t.$implicit,n=t.index,r=M(2);O(4),Ct(" ",e.head," "),O(1),rt("opacity",n!==r.effectsSequence.length-1?1:.5)}}function zq(i,t){if(1&i){const e=te();D(0,"div",116),G(1,Nq,6,1,"div",13),G(2,Bq,7,1,"div",13),D(3,"div",117)(4,"button",118)(5,"mat-icon"),B(6,"save"),k()(),D(7,"mat-menu",null,119)(9,"div",120),F("click",function(r){return r.stopPropagation()}),D(10,"mat-form-field",102)(11,"mat-label"),B(12,"Name"),k(),D(13,"input",103),F("ngModelChange",function(r){return I(e),M().sequence.name=r}),k()(),D(14,"button",121),F("click",function(){return I(e),M().saveSequence()}),B(15," Save "),k()()()()(),D(16,"div",122)(17,"div",123)(18,"div",124),G(19,Hq,2,1,"div",10),k(),D(20,"button",125),B(21," Randomness "),Be(22,"mat-icon",126),k(),D(23,"mat-menu",null,127)(25,"div",128),F("click",function(r){return r.stopPropagation()}),D(26,"mat-checkbox",129),F("ngModelChange",function(r){return I(e),M().sequence.randomness.config=r}),B(27,"Effect Params"),k(),D(28,"mat-checkbox",92),F("ngModelChange",function(r){return I(e),M().sequence.randomness.rect=r})("change",function(){I(e);const r=M();return r.sequence.randomness.rect?r.sequence.randomness.poly=!1:""}),B(29,"Rect Selection"),k(),D(30,"mat-checkbox",92),F("ngModelChange",function(r){return I(e),M().sequence.randomness.poly=r})("change",function(){I(e);const r=M();return r.sequence.randomness.poly?r.sequence.randomness.rect=!1:""}),B(31,"Poly Selections"),k()()()(),D(32,"div",130)(33,"div",131),G(34,jq,7,3,"div",132),k()()()}if(2&i){const e=Vt(8),n=Vt(24),r=M();O(1),R("ngIf",r.effectsSequence.length),O(1),R("ngIf",!r.effectsSequence.length),O(2),R("matMenuTriggerFor",e)("disabled",!r.effectsSequence.length),O(9),R("ngModel",r.sequence.name),O(1),R("disabled",!r.effectsSequence.length),O(5),R("ngForOf",r.effects),O(1),R("matMenuTriggerFor",n),O(6),R("ngModel",r.sequence.randomness.config),O(2),R("ngModel",r.sequence.randomness.rect),O(2),R("ngModel",r.sequence.randomness.poly),O(3),R("sortablejs",r.effectsSequence),O(1),R("ngForOf",r.effectsSequence)}}function Wq(i,t){if(1&i&&(D(0,"mat-option",93),B(1),k()),2&i){const e=t.$implicit;rt("display",e.noParamsMethod?"none":"flex"),R("value",e.method),O(1),Ct(" ",e.head," ")}}function Gq(i,t){if(1&i&&(D(0,"div",153)(1,"button",154),B(2),D(3,"mat-icon"),B(4,"remove"),k()()()),2&i){const e=t.$implicit,n=t.index;O(1),rt("color",e.color),O(1),Ct(" Pattern ",n," ")}}function Uq(i,t){if(1&i){const e=te();D(0,"div",147)(1,"div",122),G(2,Gq,5,3,"div",148),k(),D(3,"div",6)(4,"button",65),F("click",function(){return I(e),M(2).pattern.series=[]}),D(5,"mat-icon"),B(6,"refresh"),k()(),D(7,"button",149)(8,"mat-icon"),B(9,"save"),k()(),D(10,"mat-menu",null,150)(12,"div",151),F("click",function(r){return r.stopPropagation()}),D(13,"mat-form-field",102)(14,"mat-label"),B(15,"Series Name"),k(),D(16,"input",103),F("ngModelChange",function(r){return I(e),M(2).pattern.seriesName=r}),k()(),D(17,"button",152),F("click",function(){return I(e),M(2).savePattern()}),B(18," Save "),k()()(),D(19,"button",21),F("click",function(){return I(e),M(2).renderPatternSeries()}),B(20," Render Series "),k()()()}if(2&i){const e=Vt(11),n=M(2);O(2),R("ngForOf",n.pattern.series),O(5),R("matMenuTriggerFor",e),O(9),R("ngModel",n.pattern.seriesName)}}function Yq(i,t){if(1&i){const e=te();D(0,"div",139)(1,"mat-checkbox",129),F("ngModelChange",function(r){return I(e),M().pattern.applyMethod=r}),B(2,"Run Method"),k(),D(3,"mat-form-field",140)(4,"mat-label"),B(5,"Select Effect"),k(),D(6,"mat-select",141),F("ngModelChange",function(r){return I(e),M().pattern.method=r}),G(7,Wq,2,4,"mat-option",142),k()()(),D(8,"div",122)(9,"div",130),B(10," Inc X "),D(11,"mat-slider",68),F("ngModelChange",function(r){return I(e),M().pattern.xIncr=r}),k()(),D(12,"div",130),B(13," Inc Y "),D(14,"mat-slider",68),F("ngModelChange",function(r){return I(e),M().pattern.yIncr=r}),k()()(),D(15,"app-mini-fabric",143),F("onEmitPath",function(r){return I(e),M().onEmitPathPattern(r)}),D(16,"button",144),F("click",function(){return I(e),M().pattern.append=!0}),B(17," Add to Series "),k(),D(18,"button",145),F("click",function(){return I(e),M().pattern.append=!1}),B(19," Apply Pattern "),k()(),G(20,Uq,21,3,"div",146)}if(2&i){const e=M();O(1),R("ngModel",e.pattern.applyMethod),O(5),R("ngModel",e.pattern.method)("disabled",!e.pattern.applyMethod),O(1),R("ngForOf",e.effects),O(4),R("min",10)("max",300)("step",1)("ngModel",e.pattern.xIncr),O(3),R("min",10)("max",300)("step",1)("ngModel",e.pattern.yIncr),O(6),R("ngIf",e.pattern.series.length)}}let qq=(()=>{class i{constructor(e,n,r,o,s){this.fabricService=e,this.coreService=n,this.apiService=r,this.helpers=o,this.canvasService=s,this.selectedFile={tags:[]},this.onRemoveFile=new Te,this.onAddFile=new Te,this.separatorKeysCodes=[13,188],this.showTags=!1,this.history=[],this.historyCurrent=0,this.historySelected=[],this.historyShow=!1,this.hasEvents=!1,this.width=0,this.height=0,this.center={x:0,y:0},this.maxHypo=0,this.canvasScale=1,this.applyEffectWithReInit=!0,this.state={},this.config={colorStops:[{color:"rgb(0,255,0)",stop:100},{color:"rgb(255,0,0)",stop:500},{color:"rgb(0,0,0)",stop:800}],confusion:{colors:[1,0,0],start:0,randomness:20},pixelate:{factor:3,outline:!1,circleFactor:5,circleOutline:!1},bnw:{rgb:["b","b","b"]},negative:{brightness:255},polychromeNegative:{middlePoint:127,range:100},exposure:{distance:1},whiteNoise:{factor:30},paradise:{factor:.1},intensity:{factor:.1},bloom:{factor:20},outlines:{factor:10,bgColor:"rgba(255,255,255,1)",hasBg:!1},water:{factor:200},blocks:{factor:50},frames:{factor:10,stop:300},rotatingFrames:{scaleFactor:.2,degreesStop:360,degreesPlus:1},cartoonColors:[],vinyl:{factor:.1},holyLight:{factor:1},fluffy:{factor:5},suck:{factor:10},spotlight:{controlX:100,controlY:200,rangeX:100,rangeY:200},blinds:{depth:1,freq:100},tremolo:{period:.1,pitch:10},ellipse:{rx:0,ry:0},brokenWall:{size:50,dist:100},klimt:{size:5,randomness:90},colendar:{factor:10},letters:{size:10,density:1.3,phrase:""},pourPaint:{color:"rgba(255,255,255,1)",range:10,density:10},comic:{reverse:80,sumFactor:382},whirlpool:{degreesStop:360,degreesPlus:.5}},this.info={averageRgb:{r:0,g:0,b:0},colors:[],colorCount:0},this.UI={effects:{height:200},patterns:{expanded:!1},sequence:{expanded:!1},editorSettings:{expanded:!1}},this.effects=[],this.effectsSequence=[],this.editor={sequence:[],patterns:[]},this.sequence={isRunning:!1,effectsNum:3,randomness:{config:!1,rect:!1,poly:!1},name:"test",fromStorage:!1},this.background={color:"rgba(100, 100, 100, .8)"},this.scissorsTest={reverse:360,sumFactor:.5},this.pattern={method:"giveNegative",xIncr:200,yIncr:200,applyMethod:!1,color:"red",isRunning:!1,append:!1,series:[],seriesName:""}}ngOnInit(){this.getUIFromStorage(),this.initEffects(),this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),this.initImageInfo(!0).subscribe(e=>{this.fabricService.giveFabricCanvas("fabricCanvas",{width:e.width,height:e.height}).subscribe(n=>{this.fabricCanvas=n,this.fabricCanvas.appStatus="appStatus",this.fabricCanvas.preserveObjectStacking=!1,this.ctxFabric=this.fabricCanvas.getContext("2d"),this.doScaleCanvas(e.width),this.hasEvents||(this.giveConstants(),this.attachFabricEvents(),this.getEditorSettings(),this.hasEvents=!0,this.selectedFile.tags?(this.selectedFile.tags=JSON.parse(this.selectedFile.tags),this.showTags=!0):(this.selectedFile.tags=[],this.apiService.getData(`/assetRow/${this.apiService.user.id}/${this.selectedFile.src}`).subscribe({next:r=>{r&&r.tags&&(this.selectedFile.tags=r.tags,this.showTags=!0)}})))})})}onListen(e){console.log(e),this.effects.filter(r=>r.head.toLowerCase()===e)}initEffects(){this.effects=[{head:"Confusion",method:"giveConfusion",tmpl:this.confusionTmpl},{head:"White Noise",method:"giveWhiteNoise",tmpl:this.whiteNoiseTmpl},{head:"Color Stops",method:"giveMultiColor",tmpl:this.colorStopsTmpl},{head:"Negatives",method:"giveNegative",tmpl:this.negativeTmpl},{head:"Pixelate",method:"givePixelate",tmpl:this.pixelateTmpl},{head:"Mosaic",method:"givePixelate2",tmpl:this.pixelateCircleTmpl},{head:"BNW",method:"giveBNW",tmpl:this.bnwTmpl},{head:"Polychrome Negative",method:"givePolychromeNegative",tmpl:this.polychromeNegativeTmpl},{head:"Paradise",method:"giveParadise",tmpl:this.paradiseTmpl},{head:"Exposure",method:"giveExposure",tmpl:this.exposureTmpl},{head:"Intensity",method:"giveIntensity",tmpl:this.intensityTmpl},{head:"Bloom",method:"giveBloom",tmpl:this.bloomTmpl},{head:"Outlines",method:"giveOutlines",tmpl:this.outlinesTmpl},{head:"Water",method:"giveWater",tmpl:this.waterTmpl},{head:"Blocks",method:"giveBlocks",noParamsMethod:!0,tmpl:this.blocksTmpl},{head:"Frames",method:"giveFrames",noParamsMethod:!0,tmpl:this.framesTmpl},{head:"Rotating Frames",method:"giveRotatingFrames",noParamsMethod:!0,tmpl:this.rotatingFramesTmpl},{head:"Cartoonize",method:"giveCartoonColors",tmpl:this.cartoonColorsTmpl},{head:"Vinyl",method:"giveVinyl",noParamsMethod:!0,tmpl:this.vinylTmpl},{head:"Holy Light",method:"giveHolyLight",noParamsMethod:!0,tmpl:this.holyLightTmpl},{head:"Fluffy",method:"giveFluffy",tmpl:this.fluffyTmpl},{head:"Spotlight",method:"giveSpotlight",tmpl:this.spotlightTmpl},{head:"Blinds",method:"giveBlinds",noParamsMethod:!0,tmpl:this.blindsTmpl},{head:"Ellipse",method:"giveEllipse",noParamsMethod:!0,tmpl:this.ellipseTmpl},{head:"Tremolo",method:"giveTremolo",noParamsMethod:!0,tmpl:this.tremoloTmpl},{head:"Broken Wall",method:"giveBrokenWall",noParamsMethod:!0,tmpl:this.brokenWallTmpl},{head:"Suck",method:"giveSuck",noParamsMethod:!0,tmpl:this.suckTmpl},{head:"Klimt",method:"giveKlimt",noParamsMethod:!0,tmpl:this.klimtTmpl},{head:"Pour Paint",method:"givePourPaint",noParamsMethod:!0,tmpl:this.pourPaintTmpl},{head:"Colendar",method:"giveColendar",tmpl:this.colendarTmpl},{head:"Letters",method:"giveLetters",tmpl:this.lettersTmpl},{head:"Comic",method:"giveComic",tmpl:this.comicTmpl},{head:"Whirlpool",method:"giveWhirlpool",noParamsMethod:!0,tmpl:this.whirlpoolTmpl},{head:"Background",method:"giveBackground",tmpl:this.backgroundTmpl}],this.effects.sort((e,n)=>e.head.localeCompare(n.head))}giveConstants(){this.center={x:Math.round(this.width/2),y:Math.round(this.height/2)},this.config.ellipse={rx:Math.round(this.width/2),ry:Math.round(this.height/2)},this.maxHypo=Math.round(Math.hypot(this.center.x-0,this.center.y-0))+1,this.config.cartoonColors=this.helpers.giveDefaultCartoonColors()}giveIndexFromPoint(e){return 4*(e.y*this.width+e.x)|0}endpointToSrc(){let e=this.selectedFile.path.split("/");return e[e.length-2]+"."+e[e.length-1]}getImageData(){this.imageData=this.ctx.getImageData(0,0,this.width,this.height)}clearCanvas(){this.ctx.clearRect(0,0,this.width,this.height)}tempCanvasDataUrl(e,n,r){let o=document.createElement("canvas");return o.width=n,o.height=r,o.getContext("2d").putImageData(e,0,0,0,0,n,r),setTimeout(()=>{o.remove()},5e3),o.toDataURL()}runWithReinit(e){this.applyEffectWithReInit?(this.image=this.imageProto,this.initImageInfo().subscribe(()=>{setTimeout(e(),1e3)})):(e(),setTimeout(()=>{this.assignCanvasToImage()},0)),this.pattern.isRunning||this.addToHistory()}doScaleCanvas(e=100){setTimeout(()=>{let r=document.getElementById("canvas-container").offsetWidth,o=Number((r/e).toFixed(2));this.canvasScale=o>1?1:o,this.dummyCanvas=document.getElementById("dummy-canvas"),this.dummyCtx=this.dummyCanvas.getContext("2d")},20)}initImageInfo(e=!1){return this.ctx.clearRect(0,0,this.width,this.height),new Me(this.image?n=>{this.ctx.drawImage(this.image,0,0,this.image.width,this.image.height),setTimeout(()=>{this.getImageData()},10),e&&setTimeout(()=>{this.info=this.helpers.getColorsInfo(this.imageData)},10),setTimeout(()=>{n.next(this.image)},30)}:n=>{this.loadImage().subscribe(r=>{this.ctx.drawImage(r,0,0,r.width,r.height),setTimeout(()=>{this.getImageData()},10),e&&setTimeout(()=>{this.info=this.helpers.getColorsInfo(this.imageData),console.log(this.info)},10),setTimeout(()=>{n.next(r)},30)})})}loadImage(){return new Me(e=>{const n=new Image;n.onload=()=>{this.width=n.width,this.height=n.height,setTimeout(()=>{this.image=n,this.imageProto=n,e.next(n)},0)},n.src=this.selectedFile.path,n.crossOrigin="Anonymous"})}refresh(){this.historyCurrent=this.history.length,this.loadImage().subscribe(e=>{this.clearCanvas(),this.ctx.drawImage(e,0,0,e.width,e.height),setTimeout(()=>{this.getImageData()},10)})}doSomethingInLoop(e,n=!0,r,o,s){if(s)return void this.doSomethingInLoopInPolygogPoints(e,n,s,r,o);if(r&&o)return void this.doSomethingInLoopBetweenPoints(e,n,r,o);let p,b,a=-4,l=this.imageData.data.length,w={x:Math.round(this.width/2),y:Math.round(this.height/2)};for(;(a+=4)<l;)p={x:a/4%this.width,y:Math.floor(a/4/this.width)},b={r:this.imageData.data[a],g:this.imageData.data[a+1],b:this.imageData.data[a+2],a:this.imageData.data[a+3]},e(a,p,b,w);n&&this.ctx.putImageData(this.imageData,0,0)}doSomethingInLoopBetween(e,n,r){let s,a,o=n-4,l={x:Math.round(this.width/2),y:Math.round(this.height/2)};for(;(o+=4)<=r;)s={x:o/4%this.width,y:Math.floor(o/4/this.width)},a={r:this.imageData.data[o],g:this.imageData.data[o+1],b:this.imageData.data[o+2],a:this.imageData.data[o+3]},e(o,s,a,l);this.ctx.putImageData(this.imageData,0,0)}doSomethingInLoopBetweenPoints(e,n=!0,r,o){let p,b,s=r?this.giveIndexFromPoint(r):0,a=this.giveIndexFromPoint(o||{x:this.width,y:this.height}),l=s-4,w={x:Math.round(this.width/2),y:Math.round(this.height/2)};for(;(l+=4)<=a;)p={x:l/4%this.width,y:Math.floor(l/4/this.width)},b={r:this.imageData.data[l],g:this.imageData.data[l+1],b:this.imageData.data[l+2],a:this.imageData.data[l+3]},p.x>=r.x&&p.x<=o.x&&p.y>=r.y&&p.y<=o.y&&e(l,p,b,w);n&&this.ctx.putImageData(this.imageData,0,0)}doSomethingInLoopInPolygogPoints(e,n=!0,r,o,s){let b,w,a=o?this.giveIndexFromPoint(o):0,l=this.giveIndexFromPoint(s||{x:this.width,y:this.height}),p=a-4,A={x:Math.round(this.width/2),y:Math.round(this.height/2)};for(;(p+=4)<=l;)b={x:p/4%this.width,y:Math.floor(p/4/this.width)},w={r:this.imageData.data[p],g:this.imageData.data[p+1],b:this.imageData.data[p+2],a:this.imageData.data[p+3]},b.x>=o.x&&b.x<=s.x&&b.y>=o.y&&b.y<=s.y&&this.helpers.inPolygon(b,r)&&e(p,b,w,A);n&&this.ctx.putImageData(this.imageData,0,0)}attachFabricEvents(){let e={x:0,y:0},n={x:0,y:0};this.fabricCanvas.on("mouse:down",r=>{e.x=Math.round(r.pointer.x),e.y=Math.round(r.pointer.y)}),this.fabricCanvas.on("mouse:up",r=>{if(n.x=Math.round(r.pointer.x),n.y=Math.round(r.pointer.y),"selectPart"===this.fabricCanvas.appStatus||"selectAndRemovePart"===this.fabricCanvas.appStatus){let s=this.getDataUrlForArea(e,n,"selectAndRemovePart"===this.fabricCanvas.appStatus);this.fabricService.giveImgObj(s,this.fabricCanvas,e),this.fabricCanvas.appStatus=""}else"lassoRectangeEffect"===this.fabricCanvas.appStatus&&this.giveLassoEffect(this.fabricCanvas.effectMethod,{x:e.x<n.x?e.x:n.x,y:e.y<n.y?e.y:n.y},{x:e.x>n.x?e.x:n.x,y:e.y>n.y?e.y:n.y})}),this.fabricCanvas.on("path:created",r=>{if("crop"===this.fabricCanvas.appStatus||"excludeCrop"===this.fabricCanvas.appStatus){let o="excludeCrop"===this.fabricCanvas.appStatus;this.fabricCanvas.appStatus="",this.lassoCrop(o)}else"lassoMethodEffect"===this.fabricCanvas.appStatus&&this.giveLassoEffect(this.fabricCanvas.effectMethod)}),this.fabricCanvas.on("before:selection:cleared",r=>{console.log("before:selection:cleared",r)}),this.fabricCanvas.on("selection:created",r=>{console.log("selection:created",r)})}giveLassoEffect(e,n,r){if(!n){let s=this.fabricCanvas._objects[this.fabricCanvas._objects.length-1];this.fabricService.getPolyInfoFromObj(s),this.fabricCanvas.remove(s)}}lassoCrop(e=!0){let r=this.fabricCanvas._objects[this.fabricCanvas._objects.length-1],o=this.fabricService.getPolyInfoFromObj(r),s=o.minPoint,a=o.maxPoint,l=a.x-s.x,p=a.y-s.y,b=o.poly,w=this.dummyCtx.getImageData(0,0,this.width,this.height);this.doSomethingInLoopInPolygogPoints((V,q,Z)=>{w.data[V]=this.imageData.data[V],w.data[V+1]=this.imageData.data[V+1],w.data[V+2]=this.imageData.data[V+2],w.data[V+3]=this.imageData.data[V+3],e&&(this.imageData.data[V+3]=0)},!0,b,s,a),this.dummyCtx.putImageData(w,0,0);let A=this.dummyCtx.getImageData(s.x,s.y,l,p);this.dummyCtx.clearRect(0,0,this.width,this.height);let P=this.tempCanvasDataUrl(A,l,p);this.fabricCanvas.isDrawingMode=!1,this.fabricCanvas.selection=!0,this.fabricService.giveImgObj(P,this.fabricCanvas,{x:s.x,y:s.y}),this.fabricCanvas.remove(r)}getDataUrlForArea(e,n,r){let o=e.x<n.x?e.x:n.x,s=e.y<n.y?e.y:n.y,a=Math.abs(e.x-n.x),l=Math.abs(e.y-n.y),p=this.ctx.getImageData(o,s,a,l);return r&&this.doSomethingInLoopBetweenPoints((P,V)=>{this.imageData.data[P+3]=0},!0,{x:o,y:s},{x:o+a,y:s+l-1}),this.tempCanvasDataUrl(p,a,l)}pixelEquals(e,n,r,o){this.imageData.data[e]=n,this.imageData.data[e+1]=r,this.imageData.data[e+2]=o}pixelAddEach(e,n,r,o){this.imageData.data[e]+=n,this.imageData.data[e+1]+=r,this.imageData.data[e+2]+=o}pixelNegative(e,n,r=255){this.imageData.data[e]=r-n.r,this.imageData.data[e+1]=r-n.g,this.imageData.data[e+2]=r-n.b}pixelWithAplhaEquals(e,n,r,o,s){this.imageData.data[e]=n,this.imageData.data[e+1]=r,this.imageData.data[e+2]=o,this.imageData.data[e+3]=s}replaceColor(e,n){let r=-4,o=this.imageData.data.length;for(;(r+=4)<o;)this.imageData.data[r]===e.r&&this.imageData.data[r+1]===e.g&&this.imageData.data[r+2]===e.b&&(this.imageData.data[r]=n.r,this.imageData.data[r+1]=n.g,this.imageData.data[r+2]=n.b);this.ctx.putImageData(this.imageData,0,0)}giveConfusion(e,n,r){this.runWithReinit(()=>{let o=this.config.confusion.start,s=this.config.confusion.randomness;this.doSomethingInLoop(a=>{this.config.confusion.colors[0]&&(this.imageData.data[a]=o+Math.floor(Math.round(Math.random()*s))),this.config.confusion.colors[1]&&(this.imageData.data[a+1]=o+Math.floor(Math.round(Math.random()*s))),this.config.confusion.colors[2]&&(this.imageData.data[a+2]=o+Math.floor(Math.round(Math.random()*s)))},!0,e,n,r)})}giveMultiColor(e,n,r){this.runWithReinit(()=>{let s=JSON.parse(JSON.stringify(this.config.colorStops)).map(a=>{let l=this.helpers.rgbStrToObj(a.color);return Object.assign(l,{stop:a.stop})});s[s.length-1].stop=800,this.doSomethingInLoop(a=>{let l=this.imageData.data[a]+this.imageData.data[a+1]+this.imageData.data[a+1],p=s.filter(b=>b.stop>l)[0];this.imageData.data[a]=p.r,this.imageData.data[a+1]=p.g,this.imageData.data[a+2]=p.b},!0,e,n,r)})}givePixelate(e,n,r){this.runWithReinit(()=>{let o=0,s=this.config.pixelate.factor,a=Math.round(s/2);this.doSomethingInLoop((l,p,b,w)=>{p.x%s*3||p.y%s*3?o=l:this.config.pixelate.outline?(this.ctx.beginPath(),this.ctx.strokeStyle=`rgba(${b.r},${b.g},${b.b},${b.a})`,this.ctx.strokeRect(p.x-a,p.y-a,s,s),this.ctx.stroke()):(this.ctx.beginPath(),this.ctx.fillStyle=`rgba(${b.r},${b.g},${b.b},${b.a})`,this.ctx.fillRect(p.x-a,p.y-a,s,s),this.ctx.stroke())},!1,e,n,r),this.getImageData()})}givePixelate2(e,n,r){this.runWithReinit(()=>{let o=this.config.pixelate.circleFactor,s=0;this.doSomethingInLoop((a,l,p,b)=>{l.x%o||l.y%o?s=a:this.config.pixelate.circleOutline?(this.ctx.beginPath(),this.ctx.strokeStyle=this.helpers.objToRgbString(p),this.ctx.arc(l.x,l.y,o/2+Math.round(o/7),0,2*Math.PI),this.ctx.stroke()):(this.ctx.beginPath(),this.ctx.fillStyle=this.helpers.objToRgbString(p),this.ctx.arc(l.x,l.y,o/2+Math.round(o/7),0,2*Math.PI),this.ctx.fill())},!1,e,n,r),this.getImageData()})}giveBNW(e,n,r){this.runWithReinit(()=>{this.doSomethingInLoop((o,s,a)=>{this.pixelEquals(o,a[this.config.bnw.rgb[0]],a[this.config.bnw.rgb[0]],a[this.config.bnw.rgb[0]])},!0,e,n,r)})}giveNegative(e,n,r){this.runWithReinit(()=>{this.doSomethingInLoop((o,s,a)=>{this.pixelNegative(o,a,this.config.negative.brightness)},!0,e,n,r)}),this.canvasService.giveNegative(this.config.negative.brightness)}giveExposure(e,n,r){this.runWithReinit(()=>{let o=this.config.exposure.distance;this.doSomethingInLoop((s,a,l)=>{this.pixelEquals(s,Math.round(l.r*o),Math.round(l.g*o),Math.round(l.b*o))},!0,e,n,r)})}givePolychromeNegative(e,n,r){this.runWithReinit(()=>{let o=this.config.polychromeNegative.range,s=this.config.polychromeNegative.middlePoint;this.doSomethingInLoop((a,l,p)=>{this.imageData.data[a]>s?this.imageData.data[a]-=o:this.imageData.data[a]+=o,this.imageData.data[a+1]>s?this.imageData.data[a+1]-=o:this.imageData.data[a+1]+=o,this.imageData.data[a+2]>s?this.imageData.data[a+2]-=o:this.imageData.data[a+2]+=o},!0,e,n,r)})}giveWhiteNoise(e,n,r){this.runWithReinit(()=>{let o;this.doSomethingInLoop((s,a,l)=>{o=-this.config.whiteNoise.factor+Math.ceil(Math.random()*(2*this.config.whiteNoise.factor)),this.pixelAddEach(s,o,o,o)},!0,e,n,r)})}giveParadise(e,n,r){this.runWithReinit(()=>{let s,a,o=this.config.paradise.factor;this.doSomethingInLoop((l,p,b,w)=>{a=Math.hypot(w.x-p.x,w.y-p.y),s=o*a,this.pixelAddEach(l,s,s,s)},!0,e,n,r)})}giveIntensity(e,n,r){this.runWithReinit(()=>{let s,a,l,o=this.config.intensity.factor;this.doSomethingInLoop((p,b,w,A)=>{s=this.imageData.data[p]-this.info.averageRgb.r,a=this.imageData.data[p+1]-this.info.averageRgb.g,l=this.imageData.data[p+2]-this.info.averageRgb.b,this.pixelAddEach(p,s*o,a*o,l*o)},!0,e,n,r)})}giveBloom(e,n,r){this.runWithReinit(()=>{let o=JSON.parse(JSON.stringify(this.imageData.data));this.doSomethingInLoop((s,a,l)=>{let p=Math.atan2(this.center.y-a.y,this.center.x-a.x),b=Math.round(a.x+Math.cos(p)*this.config.bloom.factor),A=4*((Math.round(a.y+Math.sin(p)*this.config.bloom.factor)-1)*this.width+b);this.pixelEquals(s,o[A],o[A+1],o[A+2])},!0,e,n,r)})}giveOutlines(e,n,r){this.runWithReinit(()=>{let a,o=JSON.parse(JSON.stringify(this.imageData.data)),s=50-this.config.outlines.factor;this.config.outlines.hasBg&&(a=this.helpers.rgbStrToObj(this.config.outlines.bgColor));let l=4*this.width;this.doSomethingInLoop((p,b,w,A)=>{a&&(this.imageData.data[p]=a.r,this.imageData.data[p+1]=a.g,this.imageData.data[p+2]=a.b),Math.abs(w.r-o[p+4])>s&&Math.abs(w.g-o[p+5])>s&&Math.abs(w.b-o[p+6])>s&&(this.imageData.data[p]=0,this.imageData.data[p+1]=0,this.imageData.data[p+2]=0),Math.abs(w.r-o[p+l])>s&&Math.abs(w.g-o[p+1+l])>s&&Math.abs(w.b-o[p+2+l])>s&&(this.imageData.data[p]=0,this.imageData.data[p+1]=0,this.imageData.data[p+2]=0)},!0,e,n,r)})}giveWater(e,n,r){this.runWithReinit(()=>{let o=JSON.parse(JSON.stringify(this.imageData.data)),s=0,a=!1,l=84+this.config.water.factor;this.doSomethingInLoop((p,b,w,A)=>{s>l?a=!1:s<-l&&(a=!0),a?s+=1:s-=1;let P=0===Math.round(Math.atan(s))?4*this.width:4*this.width*Math.round(Math.atan(s));this.imageData.data[p]=o[P+p],this.imageData.data[p+1]=o[P+p+1],this.imageData.data[p+2]=o[P+p+2],this.imageData.data[p+3]=o[P+p+3]},!0,e,n,r)})}giveFluffy(e,n,r){this.runWithReinit(()=>{this.doSomethingInLoop((o,s,a,l)=>{let p=-this.config.fluffy.factor+Math.ceil(2*Math.random()*this.config.fluffy.factor),b=-this.config.fluffy.factor+Math.ceil(2*Math.random()*this.config.fluffy.factor);this.ctx.beginPath(),this.ctx.strokeStyle=`rgba(${a.r},${a.g},${a.b},${a.a})`,this.ctx.moveTo(s.x,s.y),this.ctx.quadraticCurveTo(s.x-p/2,s.y-b/2,s.x+b,s.y+p),this.ctx.stroke()},!1,e,n,r),this.getImageData()})}giveSuck(e,n,r){this.runWithReinit(()=>{let s,a,l,p,b,w,A,o=JSON.parse(JSON.stringify(this.imageData.data));this.doSomethingInLoop((P,V,q,Z)=>{s=Math.round(Math.hypot(Z.x-V.x,Z.y-V.y)),a=Math.atan2(Z.y-V.y,Z.x-V.x),l=Math.cos(a)*this.config.suck.factor,p=Math.sin(a)*this.config.suck.factor,b=Math.round(V.x-l),w=Math.round(V.y-p),A=this.giveIndexFromPoint({x:b,y:w}),this.pixelEquals(P,o[A],o[A+1],o[A+2]),(V.x<this.config.suck.factor||this.width-V.x<this.config.suck.factor)&&(this.imageData.data[P+3]=0)},!0,e,n,r)})}giveSpotlight(e,n,r){this.runWithReinit(()=>{let o=[[this.config.spotlight.controlX-this.config.spotlight.rangeX,0],[this.config.spotlight.controlX+this.config.spotlight.rangeX,0],[this.config.spotlight.controlY+this.config.spotlight.rangeY,this.height],[this.config.spotlight.controlY-this.config.spotlight.rangeY,this.height]];this.doSomethingInLoop((s,a,l,p)=>{this.helpers.inPolygon(a,o)?this.pixelAddEach(s,30,30,30):this.pixelAddEach(s,-60,-60,-60)},!0,e,n,r)})}giveCartoonColors(e,n,r){this.runWithReinit(()=>{let o=this.config.cartoonColors.map(a=>this.helpers.rgbStrToObj(a)),s=this.config.cartoonColors.length;this.doSomethingInLoop((a,l,p,b)=>{let w=-1,A=765;for(let P=0;P<s;P+=1){let V=Math.abs(p.r-o[P].r)+Math.abs(p.g-o[P].g)+Math.abs(p.b-o[P].b);if(V<A&&(w=P,A=V,0===V))break}this.pixelEquals(a,o[w].r,o[w].g,o[w].b)},!0,e,n,r)})}giveColendar(e,n,r){this.runWithReinit(()=>{let o=this.config.colendar.factor;this.doSomethingInLoop((s,a,l,p)=>{if(!(a.x%o)&&!(a.y%o)||a.x+o>this.width||a.y+o>this.height){let b=Math.hypot(this.center.x-a.x,this.center.y-a.y),w=(1-Math.abs(b/this.maxHypo))*(o/2);this.ctx.clearRect(a.x-o/2,a.y-o/2,o,o),this.ctx.beginPath(),this.ctx.fillStyle=this.helpers.objToRgbString(l),this.ctx.arc(a.x,a.y,w,0,2*Math.PI),this.ctx.fill()}},!1,e,n,r),this.getImageData()})}giveLetters(e,n,r){this.runWithReinit(()=>{let o=this.config.letters.size,a=o*this.config.letters.density,l=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];this.config.letters.phrase&&(l=this.config.letters.phrase.split("")),this.doSomethingInLoop((p,b,w,A)=>{if(!(b.x%o||b.y%o)){let P=Math.floor(Math.random()*l.length);this.ctx.clearRect(b.x,b.y,o,o),this.ctx.font=`900 ${a}px Georgia`,this.ctx.beginPath(),this.ctx.fillStyle=this.helpers.objToRgbString(w),this.ctx.fillText(l[P],b.x,b.y+o)}},!1,e,n,r),this.getImageData()})}giveComic(e,n,r){this.runWithReinit(()=>{let o=this.config.comic.reverse,s=this.config.comic.sumFactor;this.doSomethingInLoop((a,l,p,b)=>{p.r+p.g+p.b<s?this.pixelEquals(a,p.r-o,p.g-o,p.b-o):this.pixelEquals(a,p.r+o,p.g+o,p.b+o)},!0,e,n,r)})}giveBackground(e,n,r){let o=this.helpers.rgbStrToObj(this.background.color);this.runWithReinit(()=>{this.doSomethingInLoop((s,a,l)=>{0===l.a&&this.pixelWithAplhaEquals(s,o.r,o.g,o.b,255)},!0,e,n,r)})}giveBlocks(){this.runWithReinit(()=>{let e=301-this.config.blocks.factor,n=e*(this.width/this.height),r=e*(this.height/this.width);for(let o=0;o<this.height;o+=r)for(let s=0;s<this.width;s+=n)this.ctx.drawImage(this.image,0,0,this.width,this.height,s,o,n,r);this.getImageData()})}giveFrames(){this.runWithReinit(()=>{let e=81-this.config.frames.factor,n=this.config.frames.stop;for(let r=0,o=0;r<this.center.x;r+=e,o+=e){let a=this.center.y-o;this.center.x-r>n&&a>n&&this.ctx.drawImage(this.image,0,0,this.width,this.height,r,o,this.width-2*r,this.height-2*o)}this.getImageData()})}giveRotatingFrames(){this.runWithReinit(()=>{let e=this.config.rotatingFrames.scaleFactor,n=this.config.rotatingFrames.degreesStop,r=this.config.rotatingFrames.degreesPlus,o=0,s=0,a=this.width/this.height,l=this.height/this.width,p=this.height/n,b=this.width/n;for(let w=0;w<n;w+=r)this.ctx.save(),this.ctx.translate(this.center.x,this.center.y),this.ctx.rotate(w*(Math.PI/180)),this.ctx.translate(-this.center.x,-this.center.y),this.ctx.drawImage(this.image,0,0,this.width,this.height,o/2,s/2,this.width-o,this.height-s),this.ctx.restore(),o+=p*a*e,s+=b*l*e;this.getImageData()})}giveVinyl(){this.runWithReinit(()=>{this.ctx.save(),this.ctx.globalAlpha=this.config.vinyl.factor;for(let o=180;o<360;o+=1)this.ctx.save(),this.ctx.translate(this.center.x,this.center.y),this.ctx.rotate(o*(Math.PI/180)),this.ctx.drawImage(this.image,0,0,this.width,this.height,-this.center.x,-this.center.y,this.width,this.height),this.ctx.restore();this.ctx.restore(),this.getImageData()})}giveHolyLight(){this.runWithReinit(()=>{let n=0,r=this.config.holyLight.factor;this.ctx.save(),this.ctx.globalCompositeOperation="lighter",this.ctx.globalAlpha=.01;for(let o=0;o<60;o+=1)this.ctx.drawImage(this.image,0,0,this.width,this.height,0-n,0-n,this.width+2*n,this.height+2*n),n+=r;this.ctx.restore(),this.getImageData()})}giveBlinds(){this.runWithReinit(()=>{let e=0;for(;e<this.height;){this.ctx.clearRect(0,e+1,this.width,this.height);let n=e%this.config.blinds.freq*this.config.blinds.depth;this.ctx.drawImage(this.image,0,e,this.width,this.height,Math.round(n/2),e,this.width-n,this.height),e+=1}this.getImageData()})}giveTremolo(){this.runWithReinit(()=>{let e=0;for(;e<this.height;){let n=Math.round(Math.cos(e*this.config.tremolo.period)*this.config.tremolo.pitch);this.ctx.drawImage(this.image,0,e,this.width,this.height,Math.round(n/2),e,this.width,this.height),e+=1}this.getImageData()})}giveEllipse(){this.runWithReinit(()=>{this.ctx.clearRect(0,0,this.width,this.height);for(var e=1.5*Math.PI;e<2.5*Math.PI;e+=.01){let n=this.center.x-this.config.ellipse.rx*Math.cos(e),r=this.center.y+this.config.ellipse.ry*Math.sin(e);this.ctx.clearRect(0,r,this.width,this.height),this.ctx.drawImage(this.image,0,r,this.width,this.height,n,r,2*(this.center.x-n),this.height)}this.getImageData()})}giveBrokenWall(){this.runWithReinit(()=>{let e=100-this.config.brokenWall.size,n=this.config.brokenWall.dist,r=Math.round(this.width/e),o=Math.round(this.height/e),s=Math.round(this.width%e/2),a=Math.round(this.height%e/2);this.clearCanvas();for(let l=s;l<this.width;l+=r)for(let p=a;p<this.height;p+=o){let b=Math.round(Math.hypot(this.center.x-l,this.center.y-p)),w=Math.atan2(this.center.y-p,this.center.x-l),A=Math.cos(w)*Math.sqrt(b/(this.maxHypo+n))*n,P=Math.sin(w)*Math.sqrt(b/(this.maxHypo+n))*n;this.ctx.drawImage(this.image,l,p,r,o,l-A,p-P,r,o)}this.getImageData()})}giveKlimt(){this.runWithReinit(()=>{let e=51-this.config.klimt.size,n=this.config.klimt.randomness,r=Math.round(this.width/e),o=Math.round(this.height/e);this.clearCanvas(),this.ctx.drawImage(this.image,0,0,this.width,this.height);for(let s=0;s<this.width;s+=r)for(let a=0;a<this.height;a+=o){let l=Math.ceil(Math.random()*n);this.ctx.save(),this.ctx.translate(s,a),this.ctx.rotate(l*(Math.PI/180)),this.ctx.translate(-s,-a),this.ctx.drawImage(this.image,s,a,r,o,s,a,r,o),this.ctx.restore()}this.getImageData()})}givePourPaint(){this.runWithReinit(()=>{let n,r,o,e=0,s=Math.round(this.width*this.height/1e4);this.ctx.save(),this.ctx.fillStyle=this.config.pourPaint.color;let a=this.config.pourPaint.density*s;for(;e<a;)n=Math.ceil(Math.random()*this.config.pourPaint.range),r=Math.floor(Math.random()*this.width),o=Math.floor(Math.random()*this.height),this.ctx.beginPath(),this.ctx.arc(r,o,n,0,2*Math.PI),this.ctx.fill(),e+=1;this.ctx.restore(),this.getImageData()})}giveWhirlpool(){this.runWithReinit(()=>{this.clearCanvas();let e=this.config.whirlpool.degreesStop,n=this.config.whirlpool.degreesPlus,r=0,o=0,l=this.center.x/e*(this.width/this.height),p=this.center.y/e*(this.height/this.width);this.ctx.save(),this.ctx.globalCompositeOperation="destination-over";for(let b=0;b<e;b+=n)this.ctx.save(),this.ctx.translate(this.center.x,this.center.y),this.ctx.rotate(b*(Math.PI/180)*this.config.whirlpool.sumFactor),this.ctx.translate(-this.center.x,-this.center.y),this.ctx.drawImage(this.image,this.center.x-r,this.center.y-o,2*r,2*o,this.center.x-r,this.center.y-o,2*r,2*o),this.ctx.restore(),r+=l,o+=p;this.ctx.restore(),this.getImageData()})}scissorhh(){this.runWithReinit(()=>{let e=100-this.config.brokenWall.size,r=Math.round(this.width/e),o=Math.round(this.height/e);Math.round(this.width%e/2),Math.round(this.height%e/2),this.ctx.clearRect(0,0,this.width,this.height);let l=0;for(let p=0;p<this.width;p+=r)for(let b=0;b<this.height;b+=o){this.ctx.save();let w=Math.atan2(this.center.y-b,this.center.x-p);p<this.center.x&&(this.ctx.translate(this.center.x,this.center.y),this.ctx.rotate(w),this.ctx.translate(-this.center.x,-this.center.y),this.ctx.drawImage(this.image,p,b,r,o,p,b,r,o)),this.ctx.restore(),l+=1}this.getImageData()})}scissors(e,n,r){this.runWithReinit(()=>{let p=100;this.doSomethingInLoop((b,w,A,P)=>{this.pixelEquals(b,A.r-p,A.g-p,A.b-p),this.pixelEquals(b,A.r+p,A.g+p,A.b+p)},!0,e,n,r)})}scissorsOmokentroiKykloi(e,n,r){this.runWithReinit(()=>{let o=100;this.doSomethingInLoop((s,a,l,p)=>{let b=Math.hypot(this.center.x-a.x,this.center.y-a.y);b%50>25*(1-Math.abs(b/this.maxHypo))?this.pixelEquals(s,l.r-o,l.g-o,l.b-o):this.pixelEquals(s,l.r+o,l.g+o,l.b+o)},!0,e,n,r)})}scissors5(){console.log(this.info);let r,s,e=-4,n=this.imageData.data.length,w=(Math.round(this.width/2),Math.round(this.height/2),JSON.parse(JSON.stringify(this.imageData.data)));console.log(w);let A=0,P=!1;for(;(e+=4)<n;){r={x:e/4%this.width,y:Math.floor(e/4/this.width)},s={r:this.imageData.data[e],g:this.imageData.data[e+1],b:this.imageData.data[e+2],a:this.imageData.data[e+3]},A>90?P=!1:A<-90&&(P=!0),P?A+=1:A-=1;let be=0===A?4*this.width:4*this.width*Math.round(Math.atan(A));this.imageData.data[e]=w[be+e],this.imageData.data[e+1]=w[be+e+1],this.imageData.data[e+2]=w[be+e+2],this.imageData.data[e+3]=w[be+e+3],e<this.width&&console.log(A)}this.ctx.putImageData(this.imageData,0,0)}randNum(e,n,r=!0){return r?e+Math.floor(Math.random()*(n-e)):e+Math.ceil(Math.random()*(n-e))}giveRandomStops(){let e=Math.ceil(5*Math.random()),n=50,r=[];for(let o=0;o<e;o+=1){let s=Math.floor(255*Math.random()),a=Math.floor(255*Math.random()),l=Math.floor(255*Math.random());r.push({color:`rgb(${s},${a},${l})`,stop:n}),n+=Math.floor(Math.random()*(765/e))}return r}giveRandomCartoonColors(){let e=2+Math.floor(10*Math.random()),n=[];for(let r=0;r<e;r+=1){let o=Math.floor(255*Math.random()),s=Math.floor(255*Math.random()),a=Math.floor(255*Math.random());n.push(`rgb(${o},${s},${a})`)}return n}giveRandomConfig(){this.config.colorStops=this.giveRandomStops(),this.config.cartoonColors=this.giveRandomCartoonColors(),this.config.confusion={colors:[[1,0,0],[0,1,0],[0,0,1],[1,1,0],[1,0,1],[0,1,1]][Math.floor(5*Math.random())],start:Math.floor(50*Math.random()),randomness:Math.floor(200*Math.random())},this.config.pixelate={factor:2+Math.floor(13*Math.random()),outline:!(Math.random()>.5),circleFactor:2+Math.floor(13*Math.random()),circleOutline:!(Math.random()>.5)},this.config.bnw={rgb:["b","b","b"]},this.config.negative={brightness:Math.floor(255*Math.random())},this.config.polychromeNegative={middlePoint:40+Math.floor(185*Math.random()),range:40+Math.floor(185*Math.random())},this.config.exposure={distance:.1+1.9*Math.random()},this.config.whiteNoise={factor:10+Math.floor(240*Math.random())},this.config.paradise={factor:Math.random()},this.config.intensity={factor:Math.random()},this.config.bloom={factor:Math.ceil(200*Math.random())},this.config.outlines={factor:Math.ceil(49*Math.random()),bgColor:"rgba(255,255,255,1)",hasBg:!(Math.random()>.5)},this.config.water={factor:Math.ceil(5*Math.random())},this.config.blocks={factor:20+Math.floor(260*Math.random())},this.config.frames={factor:Math.ceil(79*Math.random()),stop:Math.floor(Math.random()*(.7*this.width))},this.config.rotatingFrames={scaleFactor:Math.random(),degreesStop:Math.floor(360*Math.random()),degreesPlus:Math.ceil(14*Math.random())},this.config.vinyl={factor:.1+Math.floor(.2*Math.random())},this.config.holyLight={factor:1+Math.floor(9*Math.random())},this.config.fluffy={factor:5+Math.floor(45*Math.random())},this.config.suck={factor:10+Math.floor(90*Math.random())},this.config.spotlight={controlX:Math.floor(Math.random()*this.width),controlY:Math.floor(Math.random()*this.width),rangeX:Math.floor(Math.random()*(this.width/2)),rangeY:Math.floor(Math.random()*this.width)},this.config.blinds={depth:.1+1.4*Math.random(),freq:Math.floor(Math.random()*(this.width/3))},this.config.tremolo={period:.2*Math.random(),pitch:Math.floor(100*Math.random())},this.config.ellipse={rx:Math.floor(this.width/4)+Math.floor(Math.random()*(this.width/3)),ry:Math.floor(this.height/4)+Math.floor(Math.random()*(this.height/3))},this.config.brokenWall={size:Math.floor(100*Math.random()),dist:Math.floor(200*Math.random())},this.config.klimt={size:this.randNum(0,40),randomness:this.randNum(0,200)},this.config.pourPaint={color:this.helpers.giveRandomColorStr(),range:this.randNum(1,20),density:this.randNum(1,60)},this.config.colendar={factor:this.randNum(3,20)},this.config.letters={size:this.randNum(6,20),density:1,phrase:""}}giveRecursiveRandomnness(){let e={startP:void 0,endP:void 0,poly:void 0};if(this.config.cartoonColors.length||(this.config.cartoonColors=this.giveRandomCartoonColors()),this.sequence.randomness.config&&(this.giveRandomConfig(),this.config.cartoonColors=this.giveRandomCartoonColors()),this.sequence.randomness.rect){let n=this.helpers.giveRandomRectPoints(this.width,this.height);e.startP=n[0],e.endP=n[1]}else if(this.sequence.randomness.poly){let n=this.helpers.giveRandomPoly(45,this.width,this.height);e.poly=n.poly,e.startP=n.startP,e.endP=n.endP}return e}recursiveEffects(e=0){this.sequence.isRunning=!0;let n=0,r=this.effectsSequence[e];if(!r)return this.sequence.isRunning=!1,this.applyEffectWithReInit=this.state.applyEffectWithReInit,void(this.sequence.fromStorage&&(this.config=this.coreService.clone(this.state.config)));this.sequence.fromStorage&&(this.config[r.configProp]=r.config),this.giveRecursiveRandomnness(),setTimeout(()=>{let s=(new Date).getTime();n=(new Date).getTime()-s,this.coreService.giveSnackbar(`${r.head} - ${n}ms`),this.recursiveEffects(e+=1)},1e3)}giveEffectsSequence(){this.state.applyEffectWithReInit=this.applyEffectWithReInit,this.state.config=this.coreService.clone(this.config),this.sequence.name=this.effectsSequence.map(e=>e.head).join("-"),this.applyEffectWithReInit=!1,this.state.applyEffectWithReInit?this.loadImage().subscribe(e=>{this.ctx.drawImage(e,0,0,e.width,e.height),this.getImageData(),this.recursiveEffects()}):this.recursiveEffects()}giveEffectsFromSettings(e){this.sequence.fromStorage=!0,this.effectsSequence=e.effects,this.giveEffectsSequence()}saveSequence(){let e=[];this.effectsSequence.forEach(r=>{let o=r.method.slice(4).replace(/([^a-zA-Z])/g,"").toLowerCase();e.push({head:r.head,method:r.method,noParamsMethod:r.noParamsMethod,hidden:r.hidden,config:this.config[o],configProp:o})});let n=this.sequence.name;this.editor.sequence||(this.editor.sequence=[]),this.editor.sequence.push({name:n,effects:e}),this.saveEditorSettings("sequence",this.editor.sequence)}giveRandomSequence(){this.effectsSequence=[];let e=this.effects.length;for(let n=0;n<this.sequence.effectsNum;n+=1){let r=Math.floor(Math.random()*e);this.effectsSequence.push(this.effects[r])}this.giveEffectsSequence()}addPatternSeries(e){this.pattern.series.push({method:this.pattern.method,xIncr:this.pattern.xIncr,yIncr:this.pattern.yIncr,applyMethod:this.pattern.applyMethod,color:e.color,path:e.path})}onEmitPathPattern(e){this.pattern.append?e.forEach(n=>{this.addPatternSeries(n)}):(e.forEach(n=>{n.method=this.pattern.method,n.xIncr=this.pattern.xIncr,n.yIncr=this.pattern.yIncr,n.applyMethod=this.pattern.applyMethod}),this.applyEffectWithReInit?this.loadImage().subscribe(n=>{this.ctx.drawImage(n,0,0,n.width,n.height),this.getImageData(),this.renderPatternSeries(e)}):this.renderPatternSeries(e))}renderPattern(e,n){n.color=e.color;let r=n.xIncr,o=n.yIncr;if(n.applyMethod){let a=this.helpers.getNextPointsSequence(e.path,this.width,this.height,r,o);for(;a.poly.length;)a=this.helpers.getNextPointsSequence(a.poly,this.width,this.height,r,o)}else{this.helpers.drawFromPath(this.ctx,e.path,n.color);let s=this.helpers.getNextPointsSequence(e.path,this.width,this.height,r,o);for(this.helpers.drawFromPath(this.ctx,s.poly,n.color);s.poly.length;)s=this.helpers.getNextPointsSequence(s.poly,this.width,this.height,r,o),this.helpers.drawFromPath(this.ctx,s.poly,n.color)}}renderPatternSeries(e){let n=e||this.pattern.series;console.log(n);let r=(new Date).getTime();n.forEach(s=>{this.renderPattern({color:s.color,path:s.path},s)}),this.getImageData(),this.addToHistory(),this.assignCanvasToImage();let o=(new Date).getTime();this.coreService.giveSnackbar(`Patterns ${o-r}ms`)}savePattern(){let r={name:this.pattern.seriesName,series:this.pattern.series};this.editor.patterns||(this.editor.patterns=[]),this.editor.patterns.push(r),this.saveEditorSettings("patterns",this.editor.patterns),this.pattern.seriesName=""}addBlocksFromHistory(){let s,a,e=this.historySelected.length,n={x:0,y:0},r=1/Math.sqrt(e),o=Math.floor(this.width*r);for(let l=0;l<e;l+=1)a=n.x+o,s=this.history[this.historySelected[l]],n.x&&a>this.width&&(n.x=0,n.y+=this.height*r),this.fabricService.giveImgObj(s,this.fabricCanvas,{x:n.x,y:n.y},r),n.x+=o;this.clearCanvas(),this.historySelected=[]}selectAllFromHistory(){this.historySelected=[...Array(this.history.length).keys()].map(e=>e)}addToHistory(){let e=this.tempCanvasDataUrl(this.imageData,this.width,this.height);this.history.unshift(e),this.history.length>20&&this.history.pop(),this.historyCurrent=this.history.length}goToHistory(e){let n=this.history[e];const r=new Image;r.onload=()=>{this.ctx.clearRect(0,0,this.width,this.height),this.ctx.drawImage(r,0,0,r.width,r.height),this.getImageData()},r.src=n,r.crossOrigin="Anonymous"}replaceUIColor(e,n){let r=this.helpers.rgbStrToObj(e);this.replaceColor(this.helpers.rgbStrToObj(this.info.colors[n][0]),r),this.info.colors[n][0]=`${r.r}, ${r.g}, ${r.b}`}assignCanvasToImage(e=!1){this.canvas.toBlob(n=>{this.coreService.toBase64(n).subscribe(r=>{const o=new Image;o.onload=()=>{this.width=o.width,this.height=o.height,setTimeout(()=>{this.image=o,e&&(this.imageProto=o)},0)},o.src=r,o.crossOrigin="Anonymous"})})}removeAsset(){let e=this.endpointToSrc(),n=this.apiService.selectedCategory.files.indexOf(e);this.apiService.selectedCategory.files.splice(n,1),this.coreService.closeDialogById("imageEditorDialog"),this.onRemoveFile.emit(n)}mergeDataToDummy(){let n=this.ctx.getImageData(0,0,this.width,this.height).data,o=this.ctxFabric.getImageData(0,0,this.width,this.height).data,s=this.dummyCtx.getImageData(0,0,this.width,this.height),a=s.data,l=-4,p=a.length;for(;(l+=4)<p;)o[l+4]?(a[l]=o[l],a[l+1]=o[l+1],a[l+2]=o[l+2],a[l+3]=o[l+3]):(a[l]=n[l],a[l+1]=n[l+1],a[l+2]=n[l+2],a[l+3]=n[l+3]);this.dummyCtx.putImageData(s,0,0)}mergeDataWithFabric(){let n=this.ctxFabric.getImageData(0,0,this.width,this.height).data,r=-4,o=n.length;for(;(r+=4)<o;)if(n[r+3]){let s=n[r+3]/255,l=this.imageData.data[r+1]*(1-s)+n[r+1]*s,p=this.imageData.data[r+2]*(1-s)+n[r+2]*s;this.imageData.data[r]=Math.round(this.imageData.data[r]*(1-s)+n[r]*s),this.imageData.data[r+1]=Math.round(l),this.imageData.data[r+2]=Math.round(p),this.imageData.data[r+3]=255}this.ctx.putImageData(this.imageData,0,0),this.fabricCanvas.clear(),this.getImageData(),this.assignCanvasToImage(!0)}uploadImageToCat(e=!1){this.mergeDataToDummy();const n=this.dummyCanvas.toDataURL();let r=this.coreService.dataURLtoFile(n,"test.png");this.apiService.uploadAsset("/asset",r).subscribe({next:o=>{this.apiService.selectedCategory.files?this.apiService.selectedCategory.files.push(o.data):this.apiService.selectedCategory.files=[o.data],this.onAddFile.emit({src:o.data})},error:o=>{console.log(o),this.coreService.giveSnackbar(o.message,{duration:5e3,verticalPosition:"top"})},complete:()=>{this.coreService.giveSnackbar(`Asset added to ${this.apiService.selectedCategory.title}`),e&&this.coreService.closeDialogById("imageEditorDialog")}})}uploadImage(){this.mergeDataToDummy();const e=this.dummyCanvas.toDataURL();let n=this.coreService.dataURLtoFile(e,"test.png");this.apiService.uploadAsset("/asset",n).subscribe({next:r=>{this.coreService.giveSnackbar("Image Uplaoded")},error:r=>{console.log(r),this.coreService.giveSnackbar(r.message,{duration:5e3,verticalPosition:"top"})},complete:()=>{}})}downloadImage(e){this.mergeDataToDummy(),this.dummyCanvas.toBlob(n=>{(0,$_.saveAs)(n,`siteland-asset-bank.${e}`)})}addTag(e){const n=(e.value||"").trim();n&&this.selectedFile.tags.push(n),e.chipInput.clear()}removeTag(e){const n=this.selectedFile.tags.indexOf(e);n>=0&&this.selectedFile.tags.splice(n,1)}saveTags(){this.apiService.postAuthData("/assetTags",{accountId:this.apiService.user.id,tags:this.selectedFile.tags,src:this.selectedFile.src}).subscribe({error:e=>{this.coreService.giveSnackbar(e.message)}})}saveEditorSettings(e,n){this.apiService.postData("/editorSettings",{accountId:1,editorSettings:n,type:e}).subscribe({next:r=>{this.editor=r.data,this.coreService.giveSnackbar(`${e} setting saved!`)},error:r=>{console.log(r),this.coreService.giveSnackbar(null==r?void 0:r.message,{duration:5e3,verticalPosition:"top"})},complete:()=>{}})}getEditorSettings(){this.apiService.getData(`/accountSettings/${this.apiService.user.id}`).subscribe({next:e=>{e&&(this.editor=JSON.parse(e.editorSettings))},error:e=>{console.log(e),this.coreService.giveSnackbar(null==e?void 0:e.message,{duration:5e3,verticalPosition:"top"})},complete:()=>{this.coreService.updateStorageObjDeep("asset-bank",["editor"],this.editor)}})}saveUIToStorage(){this.coreService.updateStorageObj("editorUI",this.UI)}getUIFromStorage(){let e=this.coreService.getStorageObj("editorUI");e&&(this.UI=e)}}return i.\u0275fac=function(e){return new(e||i)(N(al),N(no),N(Jo),N(Oh),N(mM))},i.\u0275cmp=st({type:i,selectors:[["app-canvas"]],viewQuery:function(e,n){if(1&e&&(xe(WU,7),xe(GU,7),xe(UU,7),xe(YU,7),xe(qU,7),xe(XU,7),xe($U,7),xe(KU,7),xe(QU,7),xe(ZU,7),xe(JU,7),xe(eY,7),xe(tY,7),xe(nY,7),xe(iY,7),xe(rY,7),xe(oY,7),xe(sY,7),xe(aY,7),xe(lY,7),xe(cY,7),xe(dY,7),xe(uY,7),xe(hY,7),xe(fY,7),xe(pY,7),xe(mY,7),xe(gY,7),xe(_Y,7),xe(vY,7),xe(bY,7),xe(yY,7),xe(CY,7),xe(xY,7),xe(wY,7)),2&e){let r;oe(r=se())&&(n.imageEditorDialog=r.first),oe(r=se())&&(n.confusionTmpl=r.first),oe(r=se())&&(n.whiteNoiseTmpl=r.first),oe(r=se())&&(n.colorStopsTmpl=r.first),oe(r=se())&&(n.negativeTmpl=r.first),oe(r=se())&&(n.pixelateTmpl=r.first),oe(r=se())&&(n.pixelateCircleTmpl=r.first),oe(r=se())&&(n.bnwTmpl=r.first),oe(r=se())&&(n.polychromeNegativeTmpl=r.first),oe(r=se())&&(n.paradiseTmpl=r.first),oe(r=se())&&(n.exposureTmpl=r.first),oe(r=se())&&(n.intensityTmpl=r.first),oe(r=se())&&(n.bloomTmpl=r.first),oe(r=se())&&(n.outlinesTmpl=r.first),oe(r=se())&&(n.waterTmpl=r.first),oe(r=se())&&(n.blocksTmpl=r.first),oe(r=se())&&(n.framesTmpl=r.first),oe(r=se())&&(n.rotatingFramesTmpl=r.first),oe(r=se())&&(n.cartoonColorsTmpl=r.first),oe(r=se())&&(n.vinylTmpl=r.first),oe(r=se())&&(n.holyLightTmpl=r.first),oe(r=se())&&(n.fluffyTmpl=r.first),oe(r=se())&&(n.spotlightTmpl=r.first),oe(r=se())&&(n.blindsTmpl=r.first),oe(r=se())&&(n.ellipseTmpl=r.first),oe(r=se())&&(n.tremoloTmpl=r.first),oe(r=se())&&(n.brokenWallTmpl=r.first),oe(r=se())&&(n.suckTmpl=r.first),oe(r=se())&&(n.klimtTmpl=r.first),oe(r=se())&&(n.pourPaintTmpl=r.first),oe(r=se())&&(n.colendarTmpl=r.first),oe(r=se())&&(n.lettersTmpl=r.first),oe(r=se())&&(n.comicTmpl=r.first),oe(r=se())&&(n.whirlpoolTmpl=r.first),oe(r=se())&&(n.backgroundTmpl=r.first)}},inputs:{selectedFile:"selectedFile"},outputs:{onRemoveFile:"onRemoveFile",onAddFile:"onAddFile"},decls:125,vars:34,consts:[[1,"pos-rel"],["mat-dialog-close","",1,"my-close-dialog",3,"click"],[4,"ngTemplateOutlet"],[1,"mat-grey","pad-all-xs","pad-b-lg",2,"min-width","50vw","height","95vh"],[1,"row","mat-grey",2,"margin","0"],[1,"col-xs-12","col-md-3","col-lg-4"],[1,"row","around-xs"],[1,"mrgn-all-sm","d-xs-none",3,"ngModel","ngModelChange"],["mat-icon-button","","color","primary",1,"d-xs-none","d-sm-inline-block",3,"click"],[1,"my-scroll-dark","my-scroll-big","my-accordion","d-xs-none"],[4,"ngFor","ngForOf"],[1,"mrgn-t-xs"],[3,"expanded","expandedChange"],[4,"ngIf"],[1,"col-xs-12","col-md-9","col-lg-8"],["id","canvas-container",2,"position","relative","transform-origin","left top"],["id","dummy-canvas",2,"position","absolute","top","0","left","0","z-index","-1",3,"width","height"],["id","canvas",2,"position","absolute","top","0","left","0",3,"width","height"],[2,"position","absolute","top","0","left","0"],["id","fabricCanvas",3,"width","height"],[1,"pos-rel",3,"fabricCanvas","ctxFabric","ctx"],["mat-raised-button","","color","accent",3,"click"],["class","row center-xs pad-all-md space-between",4,"ngIf"],["style","width: 100%; position: fixed; bottom: 0px; left: 0px; z-index: 9999;overflow-y: hidden;","class","my-scroll-dark mat-grey-900",4,"ngIf"],["confusionTmpl",""],["topColorsTmpl",""],["colorStopsTmpl",""],["brightnessTmpl",""],["pixelateTmpl",""],["pixelateCircleTmpl",""],["bnwTmpl",""],["negativeTmpl",""],["exposureTmpl",""],["polychromeNegativeTmpl",""],["whiteNoiseTmpl",""],["paradiseTmpl",""],["intensityTmpl",""],["bloomTmpl",""],["outlinesTmpl",""],["waterTmpl",""],["blocksTmpl",""],["framesTmpl",""],["rotatingFramesTmpl",""],["cartoonColorsTmpl",""],["vinylTmpl",""],["holyLightTmpl",""],["fluffyTmpl",""],["suckTmpl",""],["spotlightTmpl",""],["blindsTmpl",""],["tremoloTmpl",""],["ellipseTmpl",""],["brokenWallTmpl",""],["klimtTmpl",""],["pourPaintTmpl",""],["colendarTmpl",""],["lettersTmpl",""],["comicTmpl",""],["whirlpoolTmpl",""],["backgroundTmpl",""],["editorSettingsTmpl",""],["sequenceTmpl",""],["patternsTmpl",""],["class","end-xs",4,"ngIf"],[1,"end-xs"],["mat-icon-button","","color","accent",3,"click"],["svgIcon","lasso"],["thumbLabel","",3,"min","max","ngModel","ngModelChange"],["thumbLabel","",3,"min","max","step","ngModel","ngModelChange"],[1,"row","center-xs","pad-all-md","space-between"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"my-scroll-dark","mat-grey-900",2,"width","100%","position","fixed","bottom","0px","left","0px","z-index","9999","overflow-y","hidden"],["mat-button","",3,"click"],["class","row","style","flex-wrap: nowrap;",4,"ngIf"],[1,"row",2,"flex-wrap","nowrap"],["style","position: absolute;top: 4px;left: 7px;",4,"ngIf"],[2,"position","absolute","top","4px","left","7px"],["mat-raised-button","","color","warn",1,"mrgn-l-sm",3,"click"],["mat-button","","color","warn",1,"mrgn-l-sm",3,"click"],["class","mrgn-all-xs","style","display: flex;position: relative;",4,"ngFor","ngForOf"],[1,"mrgn-all-xs",2,"display","flex","position","relative"],["width","100",3,"src"],[1,"history-card-overlay"],["class","history-card-overlay","style","opacity: 1",4,"ngIf"],[1,"history-card-overlay",2,"opacity","1"],["mat-icon-button","",1,"mat-green",3,"click"],["value","1",3,"ngModel","ngModelChange"],["value","1",1,"mrgn-l-sm",3,"ngModel","ngModelChange"],[3,"label","color","onPickColor"],["mat-icon-button","",3,"click"],[3,"min","max","ngModel","ngModelChange"],[3,"ngModel","ngModelChange","change"],[3,"value"],["thumbLabel","",3,"min","max","ngModel","ngModelChange","change"],[1,"mrgn-t-sm"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["thumbLabel","",3,"min","max","step","ngModel","ngModelChange","change"],[3,"icon","color","onPickColor"],[3,"onColorSelect"],["label","Color",3,"color","onPickColor"],["appearance","fill"],["matInput","","type","text",3,"ngModel","ngModelChange"],[1,"col","middle-xs","mrgn-t-sm"],["mat-icon-button","",2,"position","absolute","left","5px","top","5px",3,"matMenuTriggerFor"],["hasBackdrop","false"],["personalSettingsMenu","matMenu"],[1,"pad-all-sm","pad-r-md",3,"click"],[1,"pad-l-md"],[1,"my-scroll","pad-all-sm",2,"max-height","200px"],["class","row between-xs no-mrgn",4,"ngFor","ngForOf"],[1,"end-xs","mrgn-t-sm"],[1,"row","between-xs","no-mrgn"],["color","warn",1,"top-5",3,"click"],[1,"mrgn-t-sm","mrgn-b-sm"],[1,"row","middle-xs",2,"height","58px"],[1,"col-xs","end-xs"],["mat-icon-button","",3,"matMenuTriggerFor","disabled"],["saveSeqMenu","matMenu"],[3,"click"],["mat-button","",3,"disabled","click"],[1,"row"],[1,"col-xs-6","start-xs"],[1,"my-scroll","mat-grey","sequence-effects-con"],["mat-button","",3,"matMenuTriggerFor"],["svgIcon","random"],["seqRandomMenu","matMenu"],[1,"col","pad-all-sm",3,"click"],[3,"ngModel","ngModelChange"],[1,"col-xs-6"],[3,"sortablejs"],["class","row",4,"ngFor","ngForOf"],["mat-raised-button","","color","accent",3,"disabled","click"],[1,"mrgn-l-xs",2,"width","50px"],["matInput","","type","number",3,"ngModel","ngModelChange"],["mat-button","",3,"color","click",4,"ngIf"],["mat-button","","color","accent",3,"click"],["color","warn"],[1,"row","middle-xs","center-xs"],[1,"mrgn-l-sm"],[3,"ngModel","disabled","ngModelChange"],[3,"value","display",4,"ngFor","ngForOf"],[3,"onEmitPath"],["mat-button","","color","accent",1,"mrgn-all-xs",3,"click"],["mat-raised-button","","color","accent",1,"mrgn-all-xs",3,"click"],["class","mrgn-top-xs",4,"ngIf"],[1,"mrgn-top-xs"],["class","inline-block middle-xs",4,"ngFor","ngForOf"],["mat-icon-button","","color","accent",3,"matMenuTriggerFor"],["saveSeriesMenu","matMenu"],[1,"pad-all-sm",3,"click"],["mat-button","","color","primary",3,"click"],[1,"inline-block","middle-xs"],["mat-button",""]],template:function(e,n){if(1&e&&(D(0,"div",0)(1,"mat-icon",1),F("click",function(){return n.saveUIToStorage(),n.coreService.closeDialogById("imageEditorDialog")}),B(2," cancel "),k(),G(3,SY,1,0,null,2),D(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"mat-checkbox",7),F("ngModelChange",function(o){return n.applyEffectWithReInit=o}),B(9," Restart On Effect Change "),k(),D(10,"button",8),F("click",function(){return n.refresh()}),D(11,"mat-icon"),B(12,"refresh"),k()()(),D(13,"div",9)(14,"mat-accordion"),G(15,kY,6,3,"mat-expansion-panel",10),D(16,"mat-expansion-panel")(17,"mat-expansion-panel-header")(18,"mat-panel-title"),B(19),k()(),G(20,IY,1,0,null,2),k()()(),D(21,"div",11)(22,"mat-expansion-panel",12),F("expandedChange",function(o){return n.UI.sequence.expanded=o}),D(23,"mat-expansion-panel-header")(24,"mat-panel-title"),B(25," Effects Sequence "),k()(),G(26,RY,1,0,null,2),k()(),D(27,"div",11)(28,"mat-expansion-panel",12),F("expandedChange",function(o){return n.UI.patterns.expanded=o}),D(29,"mat-expansion-panel-header")(30,"mat-panel-title"),B(31," Patterns "),k()(),G(32,FY,1,0,null,2),k()(),G(33,LY,8,7,"div",13),k(),D(34,"div",14)(35,"div",15),Be(36,"div")(37,"canvas",16)(38,"canvas",17),D(39,"div",18),Be(40,"canvas",19),k()(),D(41,"app-fabric",20)(42,"button",21),F("click",function(){return n.mergeDataWithFabric()}),B(43," Merge Layers "),k()()()(),G(44,NY,15,2,"div",22),G(45,BY,11,0,"div",22),k(),G(46,UY,6,3,"div",23),k(),G(47,YY,16,9,"ng-template",null,24,Ie),G(49,XY,1,1,"ng-template",null,25,Ie),G(51,KY,7,1,"ng-template",null,26,Ie),G(53,QY,0,0,"ng-template",null,27,Ie),G(55,ZY,9,6,"ng-template",null,28,Ie),G(57,JY,9,6,"ng-template",null,29,Ie),G(59,nq,6,3,"ng-template",null,30,Ie),G(61,iq,1,3,"ng-template",null,31,Ie),G(63,rq,1,4,"ng-template",null,32,Ie),G(65,oq,6,8,"ng-template",null,33,Ie),G(67,sq,1,4,"ng-template",null,34,Ie),G(69,aq,1,4,"ng-template",null,35,Ie),G(71,lq,1,4,"ng-template",null,36,Ie),G(73,cq,1,4,"ng-template",null,37,Ie),G(75,dq,5,7,"ng-template",null,38,Ie),G(77,uq,1,4,"ng-template",null,39,Ie),G(79,hq,1,4,"ng-template",null,40,Ie),G(81,fq,7,10,"ng-template",null,41,Ie),G(83,pq,9,12,"ng-template",null,42,Ie),G(85,mq,2,0,"ng-template",null,43,Ie),G(87,gq,1,4,"ng-template",null,44,Ie),G(89,_q,1,4,"ng-template",null,45,Ie),G(91,vq,1,4,"ng-template",null,46,Ie),G(93,bq,1,4,"ng-template",null,47,Ie),G(95,yq,12,16,"ng-template",null,48,Ie),G(97,Cq,7,10,"ng-template",null,49,Ie),G(99,xq,6,8,"ng-template",null,50,Ie),G(101,wq,6,8,"ng-template",null,51,Ie),G(103,Dq,6,8,"ng-template",null,52,Ie),G(105,Sq,6,8,"ng-template",null,53,Ie),G(107,Mq,7,9,"ng-template",null,54,Ie),G(109,Tq,2,4,"ng-template",null,55,Ie),G(111,Eq,10,9,"ng-template",null,56,Ie),G(113,kq,6,6,"ng-template",null,57,Ie),G(115,Aq,6,8,"ng-template",null,58,Ie),G(117,Iq,6,1,"ng-template",null,59,Ie),G(119,Lq,11,7,"ng-template",null,60,Ie),G(121,zq,35,13,"ng-template",null,61,Ie),G(123,Yq,21,13,"ng-template",null,62,Ie)),2&e){const r=Vt(50),o=Vt(120),s=Vt(122),a=Vt(124);O(3),R("ngTemplateOutlet",o),O(5),R("ngModel",n.applyEffectWithReInit),O(5),rt("height",n.UI.effects.height+"px"),O(2),R("ngForOf",n.effects),O(4),Ct(" ","Top Colors ("+n.info.colorCount+")"," "),O(1),R("ngTemplateOutlet",r),O(2),R("expanded",n.UI.sequence.expanded),O(4),R("ngTemplateOutlet",s),O(2),R("expanded",n.UI.patterns.expanded),O(4),R("ngTemplateOutlet",a),O(1),R("ngIf",!n.coreService.isProd),O(1),rt("height",n.height*n.canvasScale+200+"px")("background","rgb("+n.info.averageRgb.r+","+n.info.averageRgb.g+","+n.info.averageRgb.b+")"),O(1),rt("transform","scale("+n.canvasScale+")"),O(1),rt("height",n.height+"px"),O(1),R("width",n.width)("height",n.height),O(1),R("width",n.width)("height",n.height),O(2),R("width",n.width)("height",n.height),O(1),rt("top",n.canvasScale<1?-(n.height-n.height*n.canvasScale)+"px":"0px"),R("fabricCanvas",n.fabricCanvas)("ctxFabric",n.ctxFabric)("ctx",n.ctx),O(3),R("ngIf",n.apiService.selectedCategory),O(1),R("ngIf",!n.apiService.selectedCategory),O(1),R("ngIf",n.history.length)}},directives:[Or,sM,wc,yv,cl,ul,Rr,Tv,Qr,Yh,qh,Mv,ni,Xc,Ov,Zc,Fv,Lv,Qh,ml,Pv,rl,uE,Nv,ll,pl,fl,Rv,Uh,vf,HE],pipes:[ob],styles:[".my-accordion[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{white-space:nowrap}.history-card-overlay[_ngcontent-%COMP%]{inset:0;display:flex;align-items:center;justify-content:center;position:absolute;width:100%;background:rgba(255,255,255,.5);opacity:0;pointer-events:all;cursor:pointer}.history-card-overlay[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.9);opacity:1;pointer-events:all}.sequence-effects-con[_ngcontent-%COMP%]{font-size:10px;height:300px;overflow-x:hidden;border:1px dotted grey;border-radius:4px}.sequence-effects-con[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:12px}"]}),i})();const Xq=["panel"];function $q(i,t){if(1&i&&(D(0,"div",0,1),St(2),k()),2&i){const e=t.id,n=M();R("id",n.id)("ngClass",n._classList),lt("aria-label",n.ariaLabel||null)("aria-labelledby",n._getPanelAriaLabelledby(e))}}const Kq=["*"];let Qq=0;class Zq{constructor(t,e){this.source=t,this.option=e}}const Jq=$o(class{}),UE=new _e("mat-autocomplete-default-options",{providedIn:"root",factory:function eX(){return{autoActiveFirstOption:!1}}});let tX=(()=>{class i extends Jq{constructor(e,n,r,o){super(),this._changeDetectorRef=e,this._elementRef=n,this._activeOptionChanges=mt.EMPTY,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new Te,this.opened=new Te,this.closed=new Te,this.optionActivated=new Te,this._classList={},this.id="mat-autocomplete-"+Qq++,this.inertGroups=(null==o?void 0:o.SAFARI)||!1,this._autoActiveFirstOption=!!r.autoActiveFirstOption}get isOpen(){return this._isOpen&&this.showPanel}get autoActiveFirstOption(){return this._autoActiveFirstOption}set autoActiveFirstOption(e){this._autoActiveFirstOption=Ke(e)}set classList(e){this._classList=e&&e.length?function kB(i,t=/\s+/){const e=[];if(null!=i){const n=Array.isArray(i)?i:`${i}`.split(t);for(const r of n){const o=`${r}`.trim();o&&e.push(o)}}return e}(e).reduce((n,r)=>(n[r]=!0,n),{}):{},this._setVisibilityClasses(this._classList),this._elementRef.nativeElement.className=""}ngAfterContentInit(){this._keyManager=new A1(this.options).withWrap(),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._setVisibilityClasses(this._classList),this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){const n=new Zq(this,e);this.optionSelected.emit(n)}_getPanelAriaLabelledby(e){return this.ariaLabel?null:this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_setVisibilityClasses(e){e[this._visibleClass]=this.showPanel,e[this._hiddenClass]=!this.showPanel}}return i.\u0275fac=function(e){return new(e||i)(N(Zt),N(Ze),N(UE),N(En))},i.\u0275dir=fe({type:i,viewQuery:function(e,n){if(1&e&&(xe(_n,7),xe(Xq,5)),2&e){let r;oe(r=se())&&(n.template=r.first),oe(r=se())&&(n.panel=r.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:"autoActiveFirstOption",panelWidth:"panelWidth",classList:["class","classList"]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},features:[Pe]}),i})(),nX=(()=>{class i extends tX{constructor(){super(...arguments),this._visibleClass="mat-autocomplete-visible",this._hiddenClass="mat-autocomplete-hidden"}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=It(i)))(n||i)}}(),i.\u0275cmp=st({type:i,selectors:[["mat-autocomplete"]],contentQueries:function(e,n,r){if(1&e&&(Ht(r,P_,5),Ht(r,rl,5)),2&e){let o;oe(o=se())&&(n.optionGroups=o),oe(o=se())&&(n.options=o)}},hostAttrs:[1,"mat-autocomplete"],inputs:{disableRipple:"disableRipple"},exportAs:["matAutocomplete"],features:[$e([{provide:I_,useExisting:i}]),Pe],ngContentSelectors:Kq,decls:1,vars:0,consts:[["role","listbox",1,"mat-autocomplete-panel",3,"id","ngClass"],["panel",""]],template:function(e,n){1&e&&(un(),G(0,$q,3,4,"ng-template"))},directives:[Ms],styles:[".mat-autocomplete-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;visibility:hidden;max-width:none;max-height:256px;position:relative;width:100%;border-bottom-left-radius:4px;border-bottom-right-radius:4px}.mat-autocomplete-panel.mat-autocomplete-visible{visibility:visible}.mat-autocomplete-panel.mat-autocomplete-hidden{visibility:hidden}.mat-autocomplete-panel-above .mat-autocomplete-panel{border-radius:0;border-top-left-radius:4px;border-top-right-radius:4px}.mat-autocomplete-panel .mat-divider-horizontal{margin-top:-1px}.cdk-high-contrast-active .mat-autocomplete-panel{outline:solid 1px}mat-autocomplete{display:none}\n"],encapsulation:2,changeDetection:0}),i})();const YE=new _e("mat-autocomplete-scroll-strategy"),rX={provide:YE,deps:[wi],useFactory:function iX(i){return()=>i.scrollStrategies.reposition()}},oX={provide:ri,useExisting:Gt(()=>qE),multi:!0};let sX=(()=>{class i{constructor(e,n,r,o,s,a,l,p,b,w,A){this._element=e,this._overlay=n,this._viewContainerRef=r,this._zone=o,this._changeDetectorRef=s,this._dir=l,this._formField=p,this._document=b,this._viewportRuler=w,this._defaults=A,this._componentDestroyed=!1,this._autocompleteDisabled=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=mt.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new W,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._overlayAttached=!1,this.optionSelections=W_(()=>{const P=this.autocomplete?this.autocomplete.options:null;return P?P.changes.pipe(di(P),Gs(()=>Yn(...P.map(V=>V.onSelectionChange)))):this._zone.onStable.pipe(an(1),Gs(()=>this.optionSelections))}),this._scrollStrategy=a}get autocompleteDisabled(){return this._autocompleteDisabled}set autocompleteDisabled(e){this._autocompleteDisabled=Ke(e)}ngAfterViewInit(){const e=this._getWindow();void 0!==e&&this._zone.runOutsideAngular(()=>e.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){const e=this._getWindow();void 0!==e&&e.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._attachOverlay(),this._floatLabel()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._isOpen=this._overlayAttached=!1,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._componentDestroyed||this._changeDetectorRef.detectChanges())}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return Yn(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(bn(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(bn(()=>this._overlayAttached)):Pi()).pipe(ae(e=>e instanceof OS?e:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return Yn(Uo(this._document,"click"),Uo(this._document,"auxclick"),Uo(this._document,"touchend")).pipe(bn(e=>{const n=ar(e),r=this._formField?this._formField._elementRef.nativeElement:null,o=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&n!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!r||!r.contains(n))&&(!o||!o.contains(n))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(n)}))}writeValue(e){Promise.resolve().then(()=>this._setTriggerValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){const n=e.keyCode,r=xi(e);if(27===n&&!r&&e.preventDefault(),this.activeOption&&13===n&&this.panelOpen&&!r)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){const o=this.autocomplete._keyManager.activeItem,s=38===n||40===n;9===n||s&&!r&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):s&&this._canOpen()&&this.openPanel(),(s||this.autocomplete._keyManager.activeItem!==o)&&this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0)}}_handleInput(e){let n=e.target,r=n.value;"number"===n.type&&(r=""==r?null:parseFloat(r)),this._previousValue!==r&&(this._previousValue=r,this._onChange(r),this._canOpen()&&this._document.activeElement===e.target&&this.openPanel())}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this.openPanel()}_floatLabel(e=!1){this._formField&&"auto"===this._formField.floatLabel&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField.floatLabel="auto",this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){return Yn(this._zone.onStable.pipe(an(1)),this.autocomplete.options.changes.pipe(Rc(()=>this._positionStrategy.reapplyLastPosition()),kv(0))).pipe(Gs(()=>(this._zone.run(()=>{const r=this.panelOpen;this._resetActiveItem(),this.autocomplete._setVisibility(),this._changeDetectorRef.detectChanges(),this.panelOpen&&(this._overlayRef.updatePosition(),r!==this.panelOpen&&this.autocomplete.opened.emit())}),this.panelClosingActions)),an(1)).subscribe(r=>this._setValueAndClose(r))}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_setTriggerValue(e){const n=this.autocomplete&&this.autocomplete.displayWith?this.autocomplete.displayWith(e):e,r=null!=n?n:"";this._formField?this._formField._control.value=r:this._element.nativeElement.value=r,this._previousValue=r}_setValueAndClose(e){const n=e&&e.source;n&&(this._clearPreviousSelectedOption(n),this._setTriggerValue(n.value),this._onChange(n.value),this.autocomplete._emitSelectEvent(n),this._element.nativeElement.focus()),this.closePanel()}_clearPreviousSelectedOption(e){this.autocomplete.options.forEach(n=>{n!==e&&n.selected&&n.deselect()})}_attachOverlay(){var e;let n=this._overlayRef;n?(this._positionStrategy.setOrigin(this._getConnectedElement()),n.updateSize({width:this._getPanelWidth()})):(this._portal=new ks(this.autocomplete.template,this._viewContainerRef,{id:null===(e=this._formField)||void 0===e?void 0:e.getLabelId()}),n=this._overlay.create(this._getOverlayConfig()),this._overlayRef=n,n.keydownEvents().subscribe(o=>{(27===o.keyCode&&!xi(o)||38===o.keyCode&&xi(o,"altKey"))&&(this._closeKeyEventStream.next(),this._resetActiveItem(),o.stopPropagation(),o.preventDefault())}),this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&n&&n.updateSize({width:this._getPanelWidth()})})),n&&!n.hasAttached()&&(n.attach(this._portal),this._closingActionsSubscription=this._subscribeToClosingActions());const r=this.panelOpen;this.autocomplete._setVisibility(),this.autocomplete._isOpen=this._overlayAttached=!0,this.panelOpen&&r!==this.panelOpen&&this.autocomplete.opened.emit()}_getOverlayConfig(){var e;return new Za({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir,panelClass:null===(e=this._defaults)||void 0===e?void 0:e.overlayPanelClass})}_getOverlayPosition(){const e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){const n=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],r=this._aboveClass,o=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:r},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:r}];let s;s="above"===this.position?o:"below"===this.position?n:[...n,...o],e.withPositions(s)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){const e=this.autocomplete;e.autoActiveFirstOption?e._keyManager.setFirstItemActive():e._keyManager.setActiveItem(-1)}_canOpen(){const e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this._autocompleteDisabled}_getWindow(){var e;return(null===(e=this._document)||void 0===e?void 0:e.defaultView)||window}_scrollToOption(e){const n=this.autocomplete,r=R_(e,n.options,n.optionGroups);if(0===e&&1===r)n._setScrollTop(0);else if(n.panel){const o=n.options.toArray()[e];if(o){const s=o._getHostElement(),a=FS(s.offsetTop,s.offsetHeight,n._getScrollTop(),n.panel.nativeElement.offsetHeight);n._setScrollTop(a)}}}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(wi),N(Tn),N(at),N(Zt),N(YE),N(lr,8),N(ed,9),N(ct,8),N(Es),N(UE,8))},i.\u0275dir=fe({type:i,inputs:{autocomplete:["matAutocomplete","autocomplete"],position:["matAutocompletePosition","position"],connectedTo:["matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:["autocomplete","autocompleteAttribute"],autocompleteDisabled:["matAutocompleteDisabled","autocompleteDisabled"]},features:[fn]}),i})(),qE=(()=>{class i extends sX{constructor(){super(...arguments),this._aboveClass="mat-autocomplete-panel-above"}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=It(i)))(n||i)}}(),i.\u0275dir=fe({type:i,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-autocomplete-trigger"],hostVars:7,hostBindings:function(e,n){1&e&&F("focusin",function(){return n._handleFocus()})("blur",function(){return n._onTouched()})("input",function(o){return n._handleInput(o)})("keydown",function(o){return n._handleKeydown(o)})("click",function(){return n._handleClick()}),2&e&&lt("autocomplete",n.autocompleteAttribute)("role",n.autocompleteDisabled?null:"combobox")("aria-autocomplete",n.autocompleteDisabled?null:"list")("aria-activedescendant",n.panelOpen&&n.activeOption?n.activeOption.id:null)("aria-expanded",n.autocompleteDisabled?null:n.panelOpen.toString())("aria-owns",n.autocompleteDisabled||!n.panelOpen||null==n.autocomplete?null:n.autocomplete.id)("aria-haspopup",n.autocompleteDisabled?null:"listbox")},exportAs:["matAutocompleteTrigger"],features:[$e([oX]),Pe]}),i})(),XE=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[rX],imports:[[Os,Mh,nt,Nn],Zr,Mh,nt]}),i})(),gX=(()=>{class i{constructor(){this.changes=new W,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year"}formatYearRange(e,n){return`${e} \u2013 ${n}`}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const bX={provide:new _e("mat-datepicker-scroll-strategy"),deps:[wi],useFactory:function vX(i){return()=>i.scrollStrategies.reposition()}};let ZE=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[gX,bX],imports:[[Nn,ol,Os,rh,As,nt],Zr]}),i})(),JE=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Nn,nt,Zr],Zr,nt]}),i})(),tk=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[ES,nt],ES,nt]}),i})(),TX=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Xa]]}),i})(),sb=(()=>{class i{constructor(){this.changes=new W,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const BX={provide:sb,deps:[[new ir,new Cr,sb]],useFactory:function NX(i){return i||new sb}};let ik=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[BX,il],imports:[[nt,Nn,As,ol,TX,Rh,to],nt]}),i})(),rk=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Nn,nt,As,to,Zu,rh],nt]}),i})(),ok=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[rh,nt],nt]}),i})();const WX=["*"],sk=new _e("MatChipRemove"),ak=new _e("MatChipAvatar"),lk=new _e("MatChipTrailingIcon");class GX{constructor(t){this._elementRef=t}}const UX=nl(yo($o(GX),"primary"),-1);let xf=(()=>{class i extends UX{constructor(e,n,r,o,s,a,l,p){super(e),this._ngZone=n,this._changeDetectorRef=s,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new W,this._onBlur=new W,this.selectionChange=new Te,this.destroyed=new Te,this.removed=new Te,this._addHostClassName(),this._chipRippleTarget=a.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new PS(this,n,this._chipRippleTarget,r),this._chipRipple.setupTriggerEvents(e),this.rippleConfig=o||{},this._animationsDisabled="NoopAnimations"===l,this.tabIndex=null!=p&&parseInt(p)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(e){const n=Ke(e);n!==this._selected&&(this._selected=n,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(e){this._value=e}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(e){this._selectable=Ke(e)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(e){this._disabled=Ke(e)}get removable(){return this._removable}set removable(e){this._removable=Ke(e)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const e="mat-basic-chip",n=this._elementRef.nativeElement;n.hasAttribute(e)||n.tagName.toLowerCase()===e?n.classList.add(e):n.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(e=!1){return this._selected=!this.selected,this._dispatchSelectionChange(e),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(e){this.disabled&&e.preventDefault()}_handleKeydown(e){if(!this.disabled)switch(e.keyCode){case 46:case 8:this.remove(),e.preventDefault();break;case 32:this.selectable&&this.toggleSelected(!0),e.preventDefault()}}_blur(){this._ngZone.onStable.pipe(an(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(e=!1){this.selectionChange.emit({source:this,isUserInput:e,selected:this._selected})}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(at),N(En),N(RS,8),N(Zt),N(ct),N(ii,8),tr("tabindex"))},i.\u0275dir=fe({type:i,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(e,n,r){if(1&e&&(Ht(r,ak,5),Ht(r,lk,5),Ht(r,sk,5)),2&e){let o;oe(o=se())&&(n.avatar=o.first),oe(o=se())&&(n.trailingIcon=o.first),oe(o=se())&&(n.removeIcon=o.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(e,n){1&e&&F("click",function(o){return n._handleClick(o)})("keydown",function(o){return n._handleKeydown(o)})("focus",function(){return n.focus()})("blur",function(){return n._blur()}),2&e&&(lt("tabindex",n.disabled?null:n.tabIndex)("disabled",n.disabled||null)("aria-disabled",n.disabled.toString())("aria-selected",n.ariaSelected),Ot("mat-chip-selected",n.selected)("mat-chip-with-avatar",n.avatar)("mat-chip-with-trailing-icon",n.trailingIcon||n.removeIcon)("mat-chip-disabled",n.disabled)("_mat-animation-noopable",n._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[Pe]}),i})(),ck=(()=>{class i{constructor(e,n){this._parentChip=e,"BUTTON"===n.nativeElement.nodeName&&n.nativeElement.setAttribute("type","button")}_handleClick(e){const n=this._parentChip;n.removable&&!n.disabled&&n.remove(),e.stopPropagation(),e.preventDefault()}}return i.\u0275fac=function(e){return new(e||i)(N(xf),N(Ze))},i.\u0275dir=fe({type:i,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(e,n){1&e&&F("click",function(o){return n._handleClick(o)})},features:[$e([{provide:sk,useExisting:i}])]}),i})();const dk=new _e("mat-chips-default-options"),KX=k_(class{constructor(i,t,e,n){this._defaultErrorStateMatcher=i,this._parentForm=t,this._parentFormGroup=e,this.ngControl=n}});let QX=0;class ZX{constructor(t,e){this.source=t,this.value=e}}let uk=(()=>{class i extends KX{constructor(e,n,r,o,s,a,l){super(a,o,s,l),this._elementRef=e,this._changeDetectorRef=n,this._dir=r,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new W,this._uid="mat-chip-list-"+QX++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(p,b)=>p===b,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new Te,this.valueChange=new Te,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){var e,n;return this.multiple?(null===(e=this._selectionModel)||void 0===e?void 0:e.selected)||[]:null===(n=this._selectionModel)||void 0===n?void 0:n.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(e){this._multiple=Ke(e),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this.writeValue(e),this._value=e}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){var e,n,r,o;return null!==(o=null!==(e=this._required)&&void 0!==e?e:null===(r=null===(n=this.ngControl)||void 0===n?void 0:n.control)||void 0===r?void 0:r.hasValidator(Fh.required))&&void 0!==o&&o}set required(e){this._required=Ke(e),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(e){this._disabled=Ke(e),this._syncChipsState()}get selectable(){return this._selectable}set selectable(e){this._selectable=Ke(e),this.chips&&this.chips.forEach(n=>n.chipListSelectable=this._selectable)}set tabIndex(e){this._userTabIndex=e,this._tabIndex=e}get chipSelectionChanges(){return Yn(...this.chips.map(e=>e.selectionChange))}get chipFocusChanges(){return Yn(...this.chips.map(e=>e._onFocus))}get chipBlurChanges(){return Yn(...this.chips.map(e=>e._onBlur))}get chipRemoveChanges(){return Yn(...this.chips.map(e=>e.destroyed))}ngAfterContentInit(){this._keyManager=new t_(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe(Ut(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e)),this._keyManager.tabOut.pipe(Ut(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe(di(null),Ut(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new xv(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(e){this._chipInput=e,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",e.id)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}writeValue(e){this.chips&&this._setSelectionByValue(e,!1)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this.stateChanges.next()}onContainerClick(e){this._originatesFromChip(e)||this.focus()}focus(e){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(e),this.stateChanges.next()))}_focusInput(e){this._chipInput&&this._chipInput.focus(e)}_keydown(e){const n=e.target;n&&n.classList.contains("mat-chip")&&(this._keyManager.onKeydown(e),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const e=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(e)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(e){return e>=0&&e<this.chips.length}_setSelectionByValue(e,n=!0){if(this._clearSelection(),this.chips.forEach(r=>r.deselect()),Array.isArray(e))e.forEach(r=>this._selectValue(r,n)),this._sortValues();else{const r=this._selectValue(e,n);r&&n&&this._keyManager.setActiveItem(r)}}_selectValue(e,n=!0){const r=this.chips.find(o=>null!=o.value&&this._compareWith(o.value,e));return r&&(n?r.selectViaInteraction():r.select(),this._selectionModel.select(r)),r}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(e){this._selectionModel.clear(),this.chips.forEach(n=>{n!==e&&n.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(e=>{e.selected&&this._selectionModel.select(e)}),this.stateChanges.next())}_propagateChanges(e){let n=null;n=Array.isArray(this.selected)?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=n,this.change.emit(new ZX(this,n)),this.valueChange.emit(n),this._onChange(n),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(e=>{e.source.selected?this._selectionModel.select(e.source):this._selectionModel.deselect(e.source),this.multiple||this.chips.forEach(n=>{!this._selectionModel.isSelected(n)&&n.selected&&n.deselect()}),e.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(e=>{let n=this.chips.toArray().indexOf(e.chip);this._isValidIndex(n)&&this._keyManager.updateActiveItem(n),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(e=>{const n=e.chip,r=this.chips.toArray().indexOf(e.chip);this._isValidIndex(r)&&n._hasFocus&&(this._lastDestroyedChipIndex=r)})}_originatesFromChip(e){let n=e.target;for(;n&&n!==this._elementRef.nativeElement;){if(n.classList.contains("mat-chip"))return!0;n=n.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(e=>e._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(e=>{e._chipListDisabled=this._disabled,e._chipListMultiple=this.multiple})}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(Zt),N(lr,8),N(zs,8),N(hl,8),N(il),N(Fr,10))},i.\u0275cmp=st({type:i,selectors:[["mat-chip-list"]],contentQueries:function(e,n,r){if(1&e&&Ht(r,xf,5),2&e){let o;oe(o=se())&&(n.chips=o)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(e,n){1&e&&F("focus",function(){return n.focus()})("blur",function(){return n._blur()})("keydown",function(o){return n._keydown(o)}),2&e&&(Er("id",n._uid),lt("tabindex",n.disabled?null:n._tabIndex)("aria-describedby",n._ariaDescribedby||null)("aria-required",n.role?n.required:null)("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-multiselectable",n.multiple)("role",n.role)("aria-orientation",n.ariaOrientation),Ot("mat-chip-list-disabled",n.disabled)("mat-chip-list-invalid",n.errorState)("mat-chip-list-required",n.required))},inputs:{errorStateMatcher:"errorStateMatcher",multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",ariaOrientation:["aria-orientation","ariaOrientation"],selectable:"selectable",tabIndex:"tabIndex"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[$e([{provide:Jc,useExisting:i}]),Pe],ngContentSelectors:WX,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(e,n){1&e&&(un(),D(0,"div",0),St(1),k())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove{border:none;-webkit-appearance:none;-moz-appearance:none;padding:0;background:none}.mat-standard-chip .mat-chip-remove.mat-icon,.mat-standard-chip .mat-chip-remove .mat-icon{width:18px;height:18px;font-size:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.cdk-high-contrast-active .mat-standard-chip.mat-chip-selected{outline-width:3px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden;transform:translateZ(0)}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),i})(),hk=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[il,{provide:dk,useValue:{separatorKeyCodes:[13]}}],imports:[[nt]]}),i})();function JX(i,t){if(1&i&&(Ro(),Be(0,"circle",4)),2&i){const e=M(),n=Vt(1);rt("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(n)),lt("r",e._getCircleRadius())}}function e$(i,t){if(1&i&&(Ro(),Be(0,"circle",4)),2&i){const e=M(),n=Vt(1);rt("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%")("transform-origin",e._getCircleTransformOrigin(n)),lt("r",e._getCircleRadius())}}const n$=yo(class{constructor(i){this._elementRef=i}},"primary"),i$=new _e("mat-progress-spinner-default-options",{providedIn:"root",factory:function r$(){return{diameter:100}}});class os extends n${constructor(t,e,n,r,o,s,a,l){super(t),this._document=n,this._diameter=100,this._value=0,this._resizeSubscription=mt.EMPTY,this.mode="determinate";const p=os._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),p.has(n.head)||p.set(n.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!o&&!o._forceAnimations,"mat-spinner"===t.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),o&&(o.diameter&&(this.diameter=o.diameter),o.strokeWidth&&(this.strokeWidth=o.strokeWidth)),e.isBrowser&&e.SAFARI&&a&&s&&l&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&l.run(()=>s.markForCheck())}))}get diameter(){return this._diameter}set diameter(t){this._diameter=Ci(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Ci(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Ci(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=Ku(t)||this._document.head,this._attachStyleNode(),t.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(t){var e;const n=50*(null!==(e=t.currentScale)&&void 0!==e?e:1);return`${n}% ${n}%`}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,n=os._diameters;let r=n.get(t);if(!r||!r.has(e)){const o=this._document.createElement("style");o.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),o.textContent=this._getAnimationText(),t.appendChild(o),r||(r=new Set,n.set(t,r)),r.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}os._diameters=new WeakMap,os.\u0275fac=function(t){return new(t||os)(N(Ze),N(En),N(ct,8),N(ii,8),N(i$),N(Zt),N(Es),N(at))},os.\u0275cmp=st({type:os,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(lt("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),rt("width",e.diameter,"px")("height",e.diameter,"px"),Ot("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[Pe],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(Ro(),D(0,"svg",0,1),G(2,JX,1,11,"circle",2),G(3,e$,1,9,"circle",3),k()),2&t&&(rt("width",e.diameter,"px")("height",e.diameter,"px"),R("ngSwitch","indeterminate"===e.mode),lt("viewBox",e._getViewBox()),O(2),R("ngSwitchCase",!0),O(1),R("ngSwitchCase",!1))},directives:[Ya,Vu],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}\n"],encapsulation:2,changeDetection:0});let lb=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[nt,Nn],nt]}),i})();const s$=["primaryValueBar"],a$=yo(class{constructor(i){this._elementRef=i}},"primary"),l$=new _e("mat-progress-bar-location",{providedIn:"root",factory:function c$(){const i=Ul(ct),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),d$=new _e("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");let u$=0,h$=(()=>{class i extends a${constructor(e,n,r,o,s,a){super(e),this._ngZone=n,this._animationMode=r,this._changeDetectorRef=a,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new Te,this._animationEndSubscription=mt.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+u$++;const l=o?o.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${l}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===r,s&&(s.color&&(this.color=this.defaultColor=s.color),this.mode=s.mode||this.mode)}get value(){return this._value}set value(e){var n;this._value=fk(Ci(e)||0),null===(n=this._changeDetectorRef)||void 0===n||n.markForCheck()}get bufferValue(){return this._bufferValue}set bufferValue(e){var n;this._bufferValue=fk(e||0),null===(n=this._changeDetectorRef)||void 0===n||n.markForCheck()}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const e=this._primaryValueBar.nativeElement;this._animationEndSubscription=Uo(e,"transitionend").pipe(bn(n=>n.target===e)).subscribe(()=>{0!==this.animationEnd.observers.length&&("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(N(Ze),N(at),N(ii,8),N(l$,8),N(d$,8),N(Zt))},i.\u0275cmp=st({type:i,selectors:[["mat-progress-bar"]],viewQuery:function(e,n){if(1&e&&xe(s$,5),2&e){let r;oe(r=se())&&(n._primaryValueBar=r.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(e,n){2&e&&(lt("aria-valuenow","indeterminate"===n.mode||"query"===n.mode?null:n.value)("mode",n.mode),Ot("_mat-animation-noopable",n._isNoopAnimation))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[Pe],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(e,n){1&e&&(D(0,"div",0),Ro(),D(1,"svg",1)(2,"defs")(3,"pattern",2),Be(4,"circle",3),k()(),Be(5,"rect",4),k(),dp(),Be(6,"div",5)(7,"div",6,7)(9,"div",8),k()),2&e&&(O(3),R("id",n.progressbarId),O(2),lt("fill",n._rectangleFillValue),O(1),R("ngStyle",n._bufferTransform()),O(1),R("ngStyle",n._primaryTransform()))},directives:[Sg],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),i})();function fk(i,t=0,e=100){return Math.max(t,Math.min(e,i))}let pk=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Nn,nt],nt]}),i})(),cb=(()=>{class i{constructor(){this.changes=new W}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const p$={provide:cb,deps:[[new ir,new Cr,cb]],useFactory:function f$(i){return i||new cb}};let mk=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[p$],imports:[[Nn,nt]]}),i})(),k$=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Yg]]}),i})(),Mk=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[k$,nt],nt]}),i})();function yb(i,t,e){for(let n in t)if(t.hasOwnProperty(n)){const r=t[n];r?i.setProperty(n,r,(null==e?void 0:e.has(n))?"important":""):i.removeProperty(n)}return i}function El(i,t){const e=t?"":"none";yb(i.style,{"touch-action":t?"":"none","-webkit-user-drag":t?"":"none","-webkit-tap-highlight-color":t?"":"transparent","user-select":e,"-ms-user-select":e,"-webkit-user-select":e,"-moz-user-select":e})}function Tk(i,t,e){yb(i.style,{position:t?"":"fixed",top:t?"":"0",opacity:t?"":"0",left:t?"":"-999em"},e)}function Pf(i,t){return t&&"none"!=t?i+" "+t:i}function Ek(i){const t=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*t}function Cb(i,t){return i.getPropertyValue(t).split(",").map(n=>n.trim())}function xb(i){const t=i.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}function wb(i,t,e){const{top:n,bottom:r,left:o,right:s}=i;return e>=n&&e<=r&&t>=o&&t<=s}function yd(i,t,e){i.top+=t,i.bottom=i.top+i.height,i.left+=e,i.right=i.left+i.width}function kk(i,t,e,n){const{top:r,right:o,bottom:s,left:a,width:l,height:p}=i,b=l*t,w=p*t;return n>r-w&&n<s+w&&e>a-b&&e<o+b}class Ak{constructor(t){this._document=t,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),t.forEach(e=>{this.positions.set(e,{scrollPosition:{top:e.scrollTop,left:e.scrollLeft},clientRect:xb(e)})})}handleScroll(t){const e=ar(t),n=this.positions.get(e);if(!n)return null;const r=n.scrollPosition;let o,s;if(e===this._document){const p=this.getViewportScrollPosition();o=p.top,s=p.left}else o=e.scrollTop,s=e.scrollLeft;const a=r.top-o,l=r.left-s;return this.positions.forEach((p,b)=>{p.clientRect&&e!==b&&e.contains(b)&&yd(p.clientRect,a,l)}),r.top=o,r.left=s,{top:a,left:l}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function Ik(i){const t=i.cloneNode(!0),e=t.querySelectorAll("[id]"),n=i.nodeName.toLowerCase();t.removeAttribute("id");for(let r=0;r<e.length;r++)e[r].removeAttribute("id");return"canvas"===n?Ok(i,t):("input"===n||"select"===n||"textarea"===n)&&Rk(i,t),Pk("canvas",i,t,Ok),Pk("input, textarea, select",i,t,Rk),t}function Pk(i,t,e,n){const r=t.querySelectorAll(i);if(r.length){const o=e.querySelectorAll(i);for(let s=0;s<r.length;s++)n(r[s],o[s])}}let $$=0;function Rk(i,t){"file"!==t.type&&(t.value=i.value),"radio"===t.type&&t.name&&(t.name=`mat-clone-${t.name}-${$$++}`)}function Ok(i,t){const e=t.getContext("2d");if(e)try{e.drawImage(i,0,0)}catch(n){}}const Fk=Pr({passive:!0}),Rf=Pr({passive:!1}),Db=new Set(["position"]);class Q${constructor(t,e,n,r,o,s){this._config=e,this._document=n,this._ngZone=r,this._viewportRuler=o,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new W,this._pointerMoveSubscription=mt.EMPTY,this._pointerUpSubscription=mt.EMPTY,this._scrollSubscription=mt.EMPTY,this._resizeSubscription=mt.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new W,this.started=new W,this.released=new W,this.ended=new W,this.entered=new W,this.exited=new W,this.dropped=new W,this.moved=this._moveEvents,this._pointerDown=a=>{if(this.beforeStarted.next(),this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&this._initializeDragSequence(l,a)}else this.disabled||this._initializeDragSequence(this._rootElement,a)},this._pointerMove=a=>{const l=this._getPointerPositionOnPage(a);if(!this._hasStartedDragging){if(Math.abs(l.x-this._pickupPositionOnPage.x)+Math.abs(l.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const P=Date.now()>=this._dragStartTime+this._getDragStartDelay(a),V=this._dropContainer;if(!P)return void this._endDragSequence(a);(!V||!V.isDragging()&&!V.isReceiving())&&(a.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(a)))}return}a.preventDefault();const p=this._getConstrainedPointerPosition(l);if(this._hasMoved=!0,this._lastKnownPointerPosition=l,this._updatePointerDirectionDelta(p),this._dropContainer)this._updateActiveDropContainer(p,l);else{const b=this._activeTransform;b.x=p.x-this._pickupPositionOnPage.x+this._passiveTransform.x,b.y=p.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(b.x,b.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:p,event:a,distance:this._getDragDistance(p),delta:this._pointerDirectionDelta})})},this._pointerUp=a=>{this._endDragSequence(a)},this._nativeDragStart=a=>{if(this._handles.length){const l=this._getTargetHandle(a);l&&!this._disabledHandles.has(l)&&!this.disabled&&a.preventDefault()}else this.disabled||a.preventDefault()},this.withRootElement(t).withParent(e.parentDragRef||null),this._parentPositions=new Ak(n),s.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=Ke(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions(),this._handles.forEach(n=>El(n,e)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){this._handles=t.map(n=>Bn(n)),this._handles.forEach(n=>El(n,this.disabled)),this._toggleNativeDragInteractions();const e=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&e.add(n)}),this._disabledHandles=e,this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=Bn(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,Rf),e.addEventListener("touchstart",this._pointerDown,Fk),e.addEventListener("dragstart",this._nativeDragStart,Rf)}),this._initialTransform=void 0,this._rootElement=e),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(t){return this._boundaryElement=t?Bn(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(t){return this._parentDragRef=t,this}dispose(){var t,e;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null===(t=this._rootElement)||void 0===t||t.remove()),null===(e=this._anchor)||void 0===e||e.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){!this._disabledHandles.has(t)&&this._handles.indexOf(t)>-1&&(this._disabledHandles.add(t),El(t,!0))}enableHandle(t){this._disabledHandles.has(t)&&(this._disabledHandles.delete(t),El(t,this.disabled))}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}withPreviewContainer(t){return this._previewContainer=t,this}_sortFromLastPointerPosition(){const t=this._lastKnownPointerPosition;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t),t)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var t,e;null===(t=this._preview)||void 0===t||t.remove(),null===(e=this._previewRef)||void 0===e||e.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var t,e;null===(t=this._placeholder)||void 0===t||t.remove(),null===(e=this._placeholderRef)||void 0===e||e.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const e=this._getPointerPositionOnPage(t);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(e),dropPoint:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(t){Cd(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const n=this._rootElement,r=n.parentNode,o=this._placeholder=this._createPlaceholderElement(),s=this._anchor=this._anchor||this._document.createComment(""),a=this._getShadowRoot();r.insertBefore(s,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),Tk(n,!1,Db),this._document.body.appendChild(r.replaceChild(o,n)),this._getPreviewInsertionPoint(r,a).appendChild(this._preview),this.started.next({source:this}),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){this._parentDragRef&&e.stopPropagation();const n=this.isDragging(),r=Cd(e),o=!r&&0!==e.button,s=this._rootElement,a=ar(e),l=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),p=r?nh(e):th(e);if(a&&a.draggable&&"mousedown"===e.type&&e.preventDefault(),n||o||l||p)return;if(this._handles.length){const A=s.style;this._rootElementTapHighlight=A.webkitTapHighlightColor||"",A.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(A=>this._updateOnScroll(A)),this._boundaryElement&&(this._boundaryRect=xb(this._boundaryElement));const b=this._previewTemplate;this._pickupPositionInElement=b&&b.template&&!b.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);const w=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:w.x,y:w.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){Tk(this._rootElement,!0,Db),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const e=this._dropContainer,n=e.getItemIndex(this),r=this._getPointerPositionOnPage(t),o=this._getDragDistance(r),s=e._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:o,dropPoint:r}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:o,dropPoint:r}),e.drop(this,n,this._initialIndex,this._initialContainer,s,o,r),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e},{x:n,y:r}){let o=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!o&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(o=this._initialContainer),o&&o!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=o,this._dropContainer.enter(this,t,e,o===this._initialContainer&&o.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:o,currentIndex:o.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,r),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this._applyPreviewTransform(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y))}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,n=t?t.template:null;let r;if(n&&t){const o=t.matchSize?this._rootElement.getBoundingClientRect():null,s=t.viewContainer.createEmbeddedView(n,t.context);s.detectChanges(),r=Nk(s,this._document),this._previewRef=s,t.matchSize?Bk(r,o):r.style.transform=Of(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const o=this._rootElement;r=Ik(o),Bk(r,o.getBoundingClientRect()),this._initialTransform&&(r.style.transform=this._initialTransform)}return yb(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},Db),El(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(o=>r.classList.add(o)):r.classList.add(e)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(t.left,t.top);const e=function X$(i){const t=getComputedStyle(i),e=Cb(t,"transition-property"),n=e.find(a=>"transform"===a||"all"===a);if(!n)return 0;const r=e.indexOf(n),o=Cb(t,"transition-duration"),s=Cb(t,"transition-delay");return Ek(o[r])+Ek(s[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const r=s=>{var a;(!s||ar(s)===this._preview&&"transform"===s.propertyName)&&(null===(a=this._preview)||void 0===a||a.removeEventListener("transitionend",r),n(),clearTimeout(o))},o=setTimeout(r,1.5*e);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let n;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),n=Nk(this._placeholderRef,this._document)):n=Ik(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(t,e){const n=this._rootElement.getBoundingClientRect(),r=t===this._rootElement?null:t,o=r?r.getBoundingClientRect():n,s=Cd(e)?e.targetTouches[0]:e,a=this._getViewportScrollPosition();return{x:o.left-n.left+(s.pageX-o.left-a.left),y:o.top-n.top+(s.pageY-o.top-a.top)}}_getPointerPositionOnPage(t){const e=this._getViewportScrollPosition(),n=Cd(t)?t.touches[0]||t.changedTouches[0]||{pageX:0,pageY:0}:t,r=n.pageX-e.left,o=n.pageY-e.top;if(this._ownerSVGElement){const s=this._ownerSVGElement.getScreenCTM();if(s){const a=this._ownerSVGElement.createSVGPoint();return a.x=r,a.y=o,a.matrixTransform(s.inverse())}}return{x:r,y:o}}_getConstrainedPointerPosition(t){const e=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:r}=this.constrainPosition?this.constrainPosition(t,this):t;if("x"===this.lockAxis||"x"===e?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===e)&&(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:o,y:s}=this._pickupPositionInElement,a=this._boundaryRect,{width:l,height:p}=this._getPreviewRect(),b=a.top+s,w=a.bottom-(p-s);n=Lk(n,a.left+o,a.right-(l-o)),r=Lk(r,b,w)}return{x:n,y:r}}_updatePointerDirectionDelta(t){const{x:e,y:n}=t,r=this._pointerDirectionDelta,o=this._pointerPositionAtLastDirectionChange,s=Math.abs(e-o.x),a=Math.abs(n-o.y);return s>this._config.pointerDirectionChangeThreshold&&(r.x=e>o.x?1:-1,o.x=e),a>this._config.pointerDirectionChangeThreshold&&(r.y=n>o.y?1:-1,o.y=n),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,El(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,Rf),t.removeEventListener("touchstart",this._pointerDown,Fk),t.removeEventListener("dragstart",this._nativeDragStart,Rf)}_applyRootElementTransform(t,e){const n=Of(t,e),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=Pf(n,this._initialTransform)}_applyPreviewTransform(t,e){var n;const r=(null===(n=this._previewTemplate)||void 0===n?void 0:n.template)?void 0:this._initialTransform,o=Of(t,e);this._preview.style.transform=Pf(o,r)}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const n=this._boundaryElement.getBoundingClientRect(),r=this._rootElement.getBoundingClientRect();if(0===n.width&&0===n.height||0===r.width&&0===r.height)return;const o=n.left-r.left,s=r.right-n.right,a=n.top-r.top,l=r.bottom-n.bottom;n.width>r.width?(o>0&&(t+=o),s>0&&(t-=s)):t=0,n.height>r.height?(a>0&&(e+=a),l>0&&(e-=l)):e=0,(t!==this._passiveTransform.x||e!==this._passiveTransform.y)&&this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:Cd(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);if(e){const n=ar(t);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&yd(this._boundaryRect,e.top,e.left),this._pickupPositionOnPage.x+=e.left,this._pickupPositionOnPage.y+=e.top,this._dropContainer||(this._activeTransform.x-=e.left,this._activeTransform.y-=e.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var t;return(null===(t=this._parentPositions.positions.get(this._document))||void 0===t?void 0:t.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=Ku(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(t,e){const n=this._previewContainer||"global";if("parent"===n)return t;if("global"===n){const r=this._document;return e||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return Bn(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(t){return this._handles.find(e=>t.target&&(t.target===e||e.contains(t.target)))}}function Of(i,t){return`translate3d(${Math.round(i)}px, ${Math.round(t)}px, 0)`}function Lk(i,t,e){return Math.max(t,Math.min(e,i))}function Cd(i){return"t"===i.type[0]}function Nk(i,t){const e=i.rootNodes;if(1===e.length&&e[0].nodeType===t.ELEMENT_NODE)return e[0];const n=t.createElement("div");return e.forEach(r=>n.appendChild(r)),n}function Bk(i,t){i.style.width=`${t.width}px`,i.style.height=`${t.height}px`,i.style.transform=Of(t.left,t.top)}function xd(i,t){return Math.max(0,Math.min(t,i))}class J${constructor(t,e,n,r,o){this._dragDropRegistry=e,this._ngZone=r,this._viewportRuler=o,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new W,this.entered=new W,this.exited=new W,this.dropped=new W,this.sorted=new W,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=mt.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new W,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function q$(i=0,t=Ec){return i<0&&(i=0),jg(i,i,t)}(0,JD).pipe(Ut(this._stopScrollTimers)).subscribe(()=>{const s=this._scrollNode,a=this.autoScrollStep;1===this._verticalScrollDirection?s.scrollBy(0,-a):2===this._verticalScrollDirection&&s.scrollBy(0,a),1===this._horizontalScrollDirection?s.scrollBy(-a,0):2===this._horizontalScrollDirection&&s.scrollBy(a,0)})},this.element=Bn(t),this._document=n,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new Ak(n)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(t,e,n,r){let o;this._draggingStarted(),null==r?(o=this.sortingDisabled?this._draggables.indexOf(t):-1,-1===o&&(o=this._getItemIndexFromPointerPosition(t,e,n))):o=r;const s=this._activeDraggables,a=s.indexOf(t),l=t.getPlaceholderElement();let p=s[o];if(p===t&&(p=s[o+1]),!p&&(null==o||-1===o||o<s.length-1)&&this._shouldEnterAsFirstChild(e,n)&&(p=s[0]),a>-1&&s.splice(a,1),p&&!this._dragDropRegistry.isDragging(p)){const b=p.getRootElement();b.parentElement.insertBefore(l,b),s.splice(o,0,t)}else Bn(this.element).appendChild(l),s.push(t);l.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,n,r,o,s,a){this._reset(),this.dropped.next({item:t,currentIndex:e,previousIndex:n,container:this,previousContainer:r,isPointerOverContainer:o,distance:s,dropPoint:a})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(e.filter(r=>r.isDragging()).every(r=>-1===t.indexOf(r))?this._reset():this._cacheItems()),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}withScrollableParents(t){const e=Bn(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,n,r){if(this.sortingDisabled||!this._clientRect||!kk(this._clientRect,.05,e,n))return;const o=this._itemPositions,s=this._getItemIndexFromPointerPosition(t,e,n,r);if(-1===s&&o.length>0)return;const a="horizontal"===this._orientation,l=o.findIndex(Z=>Z.drag===t),p=o[s],w=p.clientRect,A=l>s?1:-1,P=this._getItemOffsetPx(o[l].clientRect,w,A),V=this._getSiblingOffsetPx(l,o,A),q=o.slice();(function Z$(i,t,e){const n=xd(t,i.length-1),r=xd(e,i.length-1);if(n===r)return;const o=i[n],s=r<n?-1:1;for(let a=n;a!==r;a+=s)i[a]=i[a+s];i[r]=o})(o,l,s),this.sorted.next({previousIndex:l,currentIndex:s,container:this,item:t}),o.forEach((Z,re)=>{if(q[re]===Z)return;const J=Z.drag===t,ve=J?P:V,be=J?t.getPlaceholderElement():Z.drag.getRootElement();Z.offset+=ve,a?(be.style.transform=Pf(`translate3d(${Math.round(Z.offset)}px, 0, 0)`,Z.initialTransform),yd(Z.clientRect,0,ve)):(be.style.transform=Pf(`translate3d(0, ${Math.round(Z.offset)}px, 0)`,Z.initialTransform),yd(Z.clientRect,ve,0))}),this._previousSwap.overlaps=wb(w,e,n),this._previousSwap.drag=p.drag,this._previousSwap.delta=a?r.x:r.y}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let n,r=0,o=0;if(this._parentPositions.positions.forEach((s,a)=>{a===this._document||!s.clientRect||n||kk(s.clientRect,.05,t,e)&&([r,o]=function eK(i,t,e,n){const r=jk(t,n),o=zk(t,e);let s=0,a=0;if(r){const l=i.scrollTop;1===r?l>0&&(s=1):i.scrollHeight-l>i.clientHeight&&(s=2)}if(o){const l=i.scrollLeft;1===o?l>0&&(a=1):i.scrollWidth-l>i.clientWidth&&(a=2)}return[s,a]}(a,s.clientRect,t,e),(r||o)&&(n=a))}),!r&&!o){const{width:s,height:a}=this._viewportRuler.getViewportSize(),l={width:s,height:a,top:0,right:s,bottom:a,left:0};r=jk(l,e),o=zk(l,t),n=window}n&&(r!==this._verticalScrollDirection||o!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=o,this._scrollNode=n,(r||o)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const t=Bn(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const t=Bn(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_cacheItemPositions(){const t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(e=>{const n=e.getVisibleElement();return{drag:e,offset:0,initialTransform:n.style.transform||"",clientRect:xb(n)}}).sort((e,n)=>t?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top)}_reset(){this._isDragging=!1;const t=Bn(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(e=>{var n;const r=e.getRootElement();if(r){const o=null===(n=this._itemPositions.find(s=>s.drag===e))||void 0===n?void 0:n.initialTransform;r.style.transform=o||""}}),this._siblings.forEach(e=>e._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(t,e,n){const r="horizontal"===this._orientation,o=e[t].clientRect,s=e[t+-1*n];let a=o[r?"width":"height"]*n;if(s){const l=r?"left":"top",p=r?"right":"bottom";-1===n?a-=s.clientRect[l]-o[p]:a+=o[l]-s.clientRect[p]}return a}_getItemOffsetPx(t,e,n){const r="horizontal"===this._orientation;let o=r?e.left-t.left:e.top-t.top;return-1===n&&(o+=r?e.width-t.width:e.height-t.height),o}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,r="horizontal"===this._orientation;if(n[0].drag!==this._activeDraggables[0]){const s=n[n.length-1].clientRect;return r?t>=s.right:e>=s.bottom}{const s=n[0].clientRect;return r?t<=s.left:e<=s.top}}_getItemIndexFromPointerPosition(t,e,n,r){const o="horizontal"===this._orientation,s=this._itemPositions.findIndex(({drag:a,clientRect:l})=>{if(a===t)return!1;if(r){const p=o?r.x:r.y;if(a===this._previousSwap.drag&&this._previousSwap.overlaps&&p===this._previousSwap.delta)return!1}return o?e>=Math.floor(l.left)&&e<Math.floor(l.right):n>=Math.floor(l.top)&&n<Math.floor(l.bottom)});return-1!==s&&this.sortPredicate(s,t,this)?s:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(t,e){return null!=this._clientRect&&wb(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,n){return this._siblings.find(r=>r._canReceive(t,e,n))}_canReceive(t,e,n){if(!this._clientRect||!wb(this._clientRect,e,n)||!this.enterPredicate(t,this))return!1;const r=this._getShadowRoot().elementFromPoint(e,n);if(!r)return!1;const o=Bn(this.element);return r===o||o.contains(r)}_startReceiving(t,e){const n=this._activeSiblings;!n.has(t)&&e.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(n.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&(this._itemPositions.forEach(({clientRect:n})=>{yd(n,e.top,e.left)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=Ku(Bn(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const t=this._activeDraggables.filter(e=>e.isDragging());this._siblings.forEach(e=>e._startReceiving(this,t))}}function jk(i,t){const{top:e,bottom:n,height:r}=i,o=.05*r;return t>=e-o&&t<=e+o?1:t>=n-o&&t<=n+o?2:0}function zk(i,t){const{left:e,right:n,width:r}=i,o=.05*r;return t>=e-o&&t<=e+o?1:t>=n-o&&t<=n+o?2:0}const Ff=Pr({passive:!1,capture:!0});let tK=(()=>{class i{constructor(e,n){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new W,this.pointerUp=new W,this.scroll=new W,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=n}registerDropContainer(e){this._dropInstances.has(e)||this._dropInstances.add(e)}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,Ff)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,Ff)}startDragging(e,n){if(!(this._activeDragInstances.indexOf(e)>-1)&&(this._activeDragInstances.push(e),1===this._activeDragInstances.length)){const r=n.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:Ff}),r||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:Ff}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,s)=>{this._document.addEventListener(s,o.handler,o.options)})})}}stopDragging(e){const n=this._activeDragInstances.indexOf(e);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(e){return this._activeDragInstances.indexOf(e)>-1}scrolled(e){const n=[this.scroll];return e&&e!==this._document&&n.push(new Me(r=>this._ngZone.runOutsideAngular(()=>{const s=a=>{this._activeDragInstances.length&&r.next(a)};return e.addEventListener("scroll",s,!0),()=>{e.removeEventListener("scroll",s,!0)}}))),Yn(...n)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,n)=>{this._document.removeEventListener(n,e.handler,e.options)}),this._globalListeners.clear()}}return i.\u0275fac=function(e){return new(e||i)(ee(at),ee(ct))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const nK={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let iK=(()=>{class i{constructor(e,n,r,o){this._document=e,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=o}createDrag(e,n=nK){return new Q$(e,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(e){return new J$(e,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return i.\u0275fac=function(e){return new(e||i)(ee(ct),ee(at),ee(Es),ee(tK))},i.\u0275prov=Ae({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Wk=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({providers:[iK],imports:[Zr]}),i})();const rK=[td,Rh,mE,Mk,ol,xT,tk,oE,rE,mk,rk,dE,ZE,IT,pk,q_,XE,hk,to,ET,X_,FT,lb,QT,zT,ok,ik,JE,L_,Wk];let oK=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[rK],td,Rh,mE,Mk,ol,xT,tk,oE,rE,mk,rk,dE,ZE,IT,pk,q_,XE,hk,to,ET,X_,FT,lb,QT,zT,ok,ik,JE,L_,Wk]}),i})(),sK=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({imports:[[Nn,ol,q_,X_,lb,Rh]]}),i})(),aK=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i}),i.\u0275inj=Ye({}),i})();function lK(i,t){1&i&&Gi(0)}function cK(i,t){1&i&&Be(0,"mat-progress-bar",15)}function dK(i,t){1&i&&Gi(0)}const Gk=function(i,t){return{cats:i,parent:t}},Uk=function(i){return{$implicit:i}};function uK(i,t){if(1&i&&(Ho(0),G(1,dK,1,0,"ng-container",0),jo()),2&i){const e=M().$implicit;M(2);const n=Vt(2);O(1),R("ngTemplateOutlet",n)("ngTemplateOutletContext",pc(5,Uk,zm(2,Gk,e.childs,e)))}}function hK(i,t){if(1&i){const e=te();D(0,"mat-expansion-panel",4)(1,"mat-expansion-panel-header",5)(2,"mat-panel-title",5),Be(3,"span",6),D(4,"mat-icon",7),B(5),k(),D(6,"div",8)(7,"div",9)(8,"span",10),B(9),k()(),D(10,"div",11)(11,"button",12),F("click",function(r){const s=I(e).$implicit;return M(2).selectCategory(r,s)}),B(12,"Select"),k()()()()(),D(13,"mat-panel-description"),G(14,cK,1,0,"mat-progress-bar",13),k(),G(15,uK,2,7,"ng-container",14),k()}if(2&i){const e=t.$implicit;R("hideToggle",!e.childsNum)("disabled",!e.childsNum),O(3),R("ngClass",e.childsNum?"":"hidden-indicator"),O(2),Qn(e.icon),O(4),Ct(" ",e.title," "),O(5),R("ngIf",!e.childs),O(1),R("ngIf",e.childs)}}function fK(i,t){if(1&i&&(D(0,"mat-accordion",2),G(1,hK,16,7,"mat-expansion-panel",3),k()),2&i){const e=t.$implicit;O(1),R("ngForOf",e.cats)}}const pK=function(){return{}};let Yk=(()=>{class i{constructor(e){this.apiService=e,this.onSelectCategory=new Te,this.categories=[]}ngOnInit(){}selectCategory(e,n){e.stopPropagation(),this.onSelectCategory.emit(n)}}return i.\u0275fac=function(e){return new(e||i)(N(Jo))},i.\u0275cmp=st({type:i,selectors:[["app-mini-tree"]],outputs:{onSelectCategory:"onSelectCategory"},decls:3,vars:8,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],["categoryMiniTree",""],["displayMode","flat","multi","true",1,"categories-accordeon"],["togglePosition","before",3,"hideToggle","disabled",4,"ngFor","ngForOf"],["togglePosition","before",3,"hideToggle","disabled"],[2,"overflow","visible"],[3,"ngClass"],[1,"mrgn-r-sm"],[1,"row",2,"width","100%","overflow","visible"],[1,"col-xs-4","col-md-6"],[2,"white-space","nowrap"],[1,"col-xs-8","col-md-6","end-xs"],["mat-button","",3,"click"],["mode","indeterminate",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"]],template:function(e,n){1&e&&(G(0,lK,1,0,"ng-container",0),G(1,fK,2,1,"ng-template",null,1,Ie)),2&e&&R("ngTemplateOutlet",Vt(2))("ngTemplateOutletContext",pc(6,Uk,zm(3,Gk,n.apiService.categories,Cu(2,pK))))},directives:[wc,Tv,Qr,Yh,qh,Mv,Ms,Or,Rr,gz,ni,h$],styles:[""]}),i})();const mK=["miniTreeDialog"];function gK(i,t){if(1&i){const e=te();D(0,"div",19),F("click",function(){const o=I(e).index;return M(2).setActiveObject(o)}),B(1),Xr(2,"onlyNumber"),k()}if(2&i){const e=t.$implicit,n=M(2);rt("background",e.id===n.selectedObjId?"red":""),O(1),Ct(" ",e?$r(2,3,e.id):""," ")}}function _K(i,t){if(1&i&&(D(0,"div",17),G(1,gK,3,5,"div",18),k()),2&i){const e=M();R("sortablejs",e.images)("sortablejsOptions",e.sortablejsOptions),O(1),R("ngForOf",e.images)}}function vK(i,t){if(1&i){const e=te();D(0,"div",20)(1,"app-mini-tree",21),F("onSelectCategory",function(r){return I(e),M().onSelectCategory(r)}),k()()}}let bK=(()=>{class i{constructor(e,n,r){this.apiService=e,this.fabricService=n,this.coreService=r,this.width=0,this.height=0,this.selectedPaths=[],this.canvasScale=1,this.imgScale=.25,this.padding=20,this.outerPadding=10,this.background="rgba(255,255,255,1)",this.selectedObjId=""}ngOnInit(){let e=[...this.coreService.selectedAssets];this.selectedPaths=e.map(r=>this.apiService.srcApiPath(r));let n=document.getElementById("comic-canvas-container");this.width=n.offsetWidth-45,this.height=Math.round(1.5*this.width),this.renderComicCanvas(),this.sortablejsOptions={onUpdate:r=>{this.renderImages()}}}renderComicCanvas(){this.canvas&&this.canvas.clear(),this.fabricService.giveFabricCanvas("my-comic-canvas",{width:this.width,height:this.height,selection:!0}).subscribe(e=>{this.canvas=e,this.canvas.clear(),this.ctx=this.canvas.getContext("2d"),this.canvas.on("selection:created",n=>{this.selectedObjId=n.selected[0].id}),this.canvas.on("selection:updated",n=>{this.selectedObjId=n.selected[0].id}),this.fabricService.showImagesFromService(this.selectedPaths).subscribe({next:n=>{this.images=n,this.renderImages()},error:n=>{console.log(n)},complete:()=>{}})})}transform1(e,n){let r=e.x+n.width*this.imgScale+Math.round(this.outerPadding/2);e.x&&r>this.width&&(e.x=this.outerPadding,e.y+=e.maxH+this.padding,e.maxH=0),n.height*this.imgScale>=e.maxH&&(e.maxH=n.height*this.imgScale),n.set({scaleX:this.imgScale,scaleY:this.imgScale,left:e.x,top:e.y}),this.canvas.add(n),e.x+=n.width*this.imgScale+this.padding}renderImages(){this.canvas.clear(),this.canvas.backgroundColor=this.background;let e={x:this.outerPadding,y:this.outerPadding,maxH:0};this.images.forEach(n=>{this.transform1(e,n)}),this.height=e.y+e.maxH+this.padding,this.canvas.setHeight(this.height),this.canvas.preserveObjectStacking=!1,this.canvas.selectable=!0,this.canvas.renderAll(),this.coreService.selectedAssets=[]}shuffleImages(){this.selectedObjId="",this.images=this.coreService.shuffle(this.images),this.renderImages()}setActiveObject(e){this.canvas.setActiveObject(this.canvas._objects[e]),this.canvas.renderAll()}downloadImage(e){this.canvas.getElement().toBlob(n=>{(0,$_.saveAs)(n,`siteland-asset-bank.${e}`)})}openMiniTreeDialog(){this.coreService.openDialog({headerText:"Select Category",template:this.miniTreeDialog},{id:"miniTreeDialog"})}onSelectCategory(e){const n=this.canvas.toDataURL();let r=this.coreService.dataURLtoFile(n,"test.png");this.apiService.uploadAsset("/asset",r).subscribe({next:o=>{e.files?e.files.unshift(o.data):e.files=o.data,console.log(e)},error:o=>{console.log(o),this.coreService.giveSnackbar(o.message,{duration:5e3,verticalPosition:"top"})},complete:()=>{this.coreService.giveSnackbar(`Asset added to ${e.title}`),this.coreService.closeDialogById("miniTreeDialog"),this.saveTree()}})}saveTree(){this.apiService.postAuthData("/tree",{categories:this.apiService.categories}).subscribe({next:e=>{this.coreService.giveSnackbar("New tree version created")},error:e=>{console.log(e),this.coreService.selectedAssets=[],this.coreService.giveSnackbar(null==e?void 0:e.message,{duration:5e3,verticalPosition:"top"})},complete:()=>{this.coreService.selectedAssets=[]}})}pixelate(){this.canvas.renderAll()}}return i.\u0275fac=function(e){return new(e||i)(N(Jo),N(al),N(no))},i.\u0275cmp=st({type:i,selectors:[["app-comic"]],viewQuery:function(e,n){if(1&e&&xe(mK,7),2&e){let r;oe(r=se())&&(n.miniTreeDialog=r.first)}},decls:84,vars:28,consts:[[1,"comic-canvas-container"],[1,"row",2,"margin","0px"],["id","comic-canvas-container",1,"col-xs-12","col-md-8","col-lg-9"],[1,"my-scroll",2,"height","98vh"],[2,"transform-origin","left top"],["id","my-comic-canvas",2,"border","2px solid grey"],[1,"col-xs-12","col-md-4","col-lg-3","mat-grey","my-scroll",2,"height","97vh"],[1,"mrgn-b-xs","mrgn-t-md"],["mat-raised-button","","color","primary",3,"click"],["mat-icon-button","",3,"click"],[3,"icon","color","onPickColor"],["thumbLabel","",3,"min","max","step","ngModel","ngModelChange","change"],[3,"sortablejs","sortablejsOptions",4,"ngIf"],["mat-raised-button","","color","primary",1,"mrgn-t-sm",3,"click"],[1,"pos-rel",3,"fabricCanvas","images","view"],[2,"margin-top","10px","opacity","0"],["miniTreeDialog",""],[3,"sortablejs","sortablejsOptions"],["class","image-block",3,"background","click",4,"ngFor","ngForOf"],[1,"image-block",3,"click"],[1,"my-scroll",2,"height","95vh","margin-bottom","-5px","min-width","300px"],[3,"onSelectCategory"]],template:function(e,n){1&e&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),Be(5,"canvas",5),k()()(),D(6,"div",6)(7,"div",7)(8,"button",8),F("click",function(){return n.downloadImage("jpeg")}),B(9," JPEG"),D(10,"mat-icon"),B(11,"download"),k()(),D(12,"button",8),F("click",function(){return n.downloadImage("png")}),B(13," PNG"),D(14,"mat-icon"),B(15,"download"),k()()(),D(16,"div")(17,"button",9),F("click",function(){return n.canvasScale=n.canvasScale+.1}),D(18,"mat-icon"),B(19,"zoom_in"),k()(),D(20,"button",9),F("click",function(){return n.canvasScale=n.canvasScale-.1}),D(21,"mat-icon"),B(22,"zoom_out"),k()()(),D(23,"app-picker-menu",10),F("onPickColor",function(o){return n.background=o.color,n.renderImages()}),k(),D(24,"div"),B(25," Height "),D(26,"mat-slider",11),F("ngModelChange",function(o){return n.height=o})("change",function(){return n.canvas.setHeight(n.height)}),k()(),D(27,"div"),B(28," Width "),D(29,"mat-slider",11),F("ngModelChange",function(o){return n.width=o})("change",function(){return n.canvas.setWidth(n.width)}),k()(),D(30,"div"),B(31," Scale "),D(32,"mat-slider",11),F("ngModelChange",function(o){return n.imgScale=o})("change",function(){return n.renderImages()}),k()(),D(33,"div"),B(34," Inner Padding "),D(35,"mat-slider",11),F("ngModelChange",function(o){return n.padding=o})("change",function(){return n.renderImages()}),k()(),D(36,"div"),B(37," Outer Padding "),D(38,"mat-slider",11),F("ngModelChange",function(o){return n.outerPadding=o})("change",function(){return n.renderImages()}),k()(),G(39,_K,2,3,"div",12),D(40,"button",13),F("click",function(){return n.shuffleImages()}),B(41,"shuffle"),k(),Be(42,"app-fabric",14),D(43,"button",8),F("click",function(){return n.openMiniTreeDialog()}),B(44," Add to Category "),D(45,"mat-icon"),B(46,"save"),k()(),D(47,"div",15)(48,"button",8),F("click",function(){return n.renderComicCanvas()}),B(49,"text"),k(),D(50,"button",8),F("click",function(){return n.renderComicCanvas()}),B(51,"text"),k(),D(52,"button",8),F("click",function(){return n.renderComicCanvas()}),B(53,"text"),k(),D(54,"button",8),F("click",function(){return n.renderComicCanvas()}),B(55,"text"),k(),D(56,"button",8),F("click",function(){return n.renderComicCanvas()}),B(57,"text"),k(),D(58,"button",8),F("click",function(){return n.renderComicCanvas()}),B(59,"text"),k(),D(60,"button",8),F("click",function(){return n.renderComicCanvas()}),B(61,"text"),k(),D(62,"button",8),F("click",function(){return n.renderComicCanvas()}),B(63,"text"),k(),D(64,"button",8),F("click",function(){return n.renderComicCanvas()}),B(65,"text"),k(),D(66,"button",8),F("click",function(){return n.renderComicCanvas()}),B(67,"text"),k(),D(68,"button",8),F("click",function(){return n.renderComicCanvas()}),B(69,"text"),k(),D(70,"button",8),F("click",function(){return n.renderComicCanvas()}),B(71,"text"),k(),D(72,"button",8),F("click",function(){return n.renderComicCanvas()}),B(73,"text"),k(),D(74,"button",8),F("click",function(){return n.renderComicCanvas()}),B(75,"text"),k(),D(76,"button",8),F("click",function(){return n.renderComicCanvas()}),B(77,"text"),k(),D(78,"button",8),F("click",function(){return n.renderComicCanvas()}),B(79,"text"),k(),D(80,"button",8),F("click",function(){return n.openMiniTreeDialog()}),B(81,"text"),k()()()()(),G(82,vK,2,0,"ng-template",null,16,Ie)),2&e&&(O(4),rt("transform","scale("+n.canvasScale+")"),O(19),R("icon","format_paint")("color",n.background),O(3),R("min",200)("max",2e3)("step",1)("ngModel",n.height),O(3),R("min",200)("max",2e3)("step",1)("ngModel",n.width),O(3),R("min",.1)("max",2)("step",.01)("ngModel",n.imgScale),O(3),R("min",0)("max",50)("step",1)("ngModel",n.padding),O(3),R("min",0)("max",50)("step",1)("ngModel",n.outerPadding),O(1),R("ngIf",n.sortablejsOptions),O(3),R("fabricCanvas",n.canvas)("images",n.images)("view","comic"))},directives:[Rr,Or,Zc,Xc,cl,ul,ni,vf,Qr,Ov,Yk],pipes:[GE],styles:[".comic-canvas-container[_ngcontent-%COMP%]   .image-block[_ngcontent-%COMP%]{display:inline-block;width:40px;height:40px;cursor:pointer;text-align:center;line-height:40px;vertical-align:middle;border:2px solid grey}"]}),i})(),yK=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Xe({type:i,bootstrap:[zU]}),i.\u0275inj=Ye({providers:[],imports:[[qD,oH,xW,oK,sK,z8,W8,I6,aj,oW.forRoot({animation:150}),aK,SW]]}),i})();(function Kb(i,t,e){const n=i.\u0275cmp;n.directiveDefs=()=>t.map(Qb),n.pipeDefs=()=>e.map(Zb)})(sE,[ni,Qr,Rr,nT,jM,zs,Qh,ml,Nv,qE,ll,cl,fv,nX,rl,pl,fl,$h,Or,uk,xf,ck,vf,bK,qq,Yk],[Mg,WE]),function dN(){iD=!1}(),gB().bootstrapModule(yK).catch(i=>console.error(i))},621:(cs,ht,$i)=>{var C,m,v,g,d,h,S=S||{version:"5.2.4"};if(ht.fabric=S,"undefined"!=typeof document&&"undefined"!=typeof window)S.document=document instanceof("undefined"!=typeof HTMLDocument?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(""),S.window=window;else{var so=new($i(960).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;S.document=so.document,S.jsdomImplForWrapper=$i(759).implForWrapper,S.nodeCanvas=$i(272).Canvas,S.window=so,DOMParser=S.window.DOMParser}function mt(C,m){var v=C.canvas,g=m.targetCanvas,d=g.getContext("2d");d.translate(0,g.height),d.scale(1,-1),d.drawImage(v,0,v.height-g.height,g.width,g.height,0,0,g.width,g.height)}function pr(C,m){var g=m.targetCanvas.getContext("2d"),d=m.destinationWidth,h=m.destinationHeight,c=d*h*4,f=new Uint8Array(this.imageBuffer,0,c),_=new Uint8ClampedArray(this.imageBuffer,0,c);C.readPixels(0,0,d,h,C.RGBA,C.UNSIGNED_BYTE,f);var u=new ImageData(_,d,h);g.putImageData(u,0,0)}S.isTouchSupported="ontouchstart"in S.window||"ontouchstart"in S.document||S.window&&S.window.navigator&&S.window.navigator.maxTouchPoints>0,S.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,S.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],S.DPI=96,S.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",S.commaWsp="(?:\\s+,?\\s*|,\\s*)",S.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,S.reNonWord=/[ \n\.,;!\?\-]/,S.fontPaths={},S.iMatrix=[1,0,0,1,0,0],S.svgNS="http://www.w3.org/2000/svg",S.perfLimitSizeTotal=2097152,S.maxCacheSideLimit=4096,S.minCacheSideLimit=256,S.charWidthsCache={},S.textureSize=2048,S.disableStyleCopyPaste=!1,S.enableGLFiltering=!0,S.devicePixelRatio=S.window.devicePixelRatio||S.window.webkitDevicePixelRatio||S.window.mozDevicePixelRatio||1,S.browserShadowBlurConstant=1,S.arcToSegmentsCache={},S.boundsOfCurveCache={},S.cachesBoundsOfCurve=!0,S.forceGLPutImageData=!1,S.initFilterBackend=function(){return S.enableGLFiltering&&S.isWebglSupported&&S.isWebglSupported(S.textureSize)?(console.log("max texture size: "+S.maxTextureSize),new S.WebglFilterBackend({tileSize:S.textureSize})):S.Canvas2dFilterBackend?new S.Canvas2dFilterBackend:void 0},"undefined"!=typeof document&&"undefined"!=typeof window&&(window.fabric=S),function(){function C(c,f){if(this.__eventListeners[c]){var _=this.__eventListeners[c];f?_[_.indexOf(f)]=!1:S.util.array.fill(_,!1)}}function v(c,f){var _=function(){f.apply(this,arguments),this.off(c,_)}.bind(this);this.on(c,_)}S.Observable={fire:function h(c,f){if(!this.__eventListeners)return this;var _=this.__eventListeners[c];if(!_)return this;for(var u=0,y=_.length;u<y;u++)_[u]&&_[u].call(this,f||{});return this.__eventListeners[c]=_.filter(function(x){return!1!==x}),this},on:function m(c,f){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var _ in c)this.on(_,c[_]);else this.__eventListeners[c]||(this.__eventListeners[c]=[]),this.__eventListeners[c].push(f);return this},once:function g(c,f){if(1===arguments.length)for(var _ in c)v.call(this,_,c[_]);else v.call(this,c,f);return this},off:function d(c,f){if(!this.__eventListeners)return this;if(0===arguments.length)for(c in this.__eventListeners)C.call(this,c);else if(1===arguments.length&&"object"==typeof arguments[0])for(var _ in c)C.call(this,_,c[_]);else C.call(this,c,f);return this}}}(),S.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var C=0,m=arguments.length;C<m;C++)this._onObjectAdded(arguments[C]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(C,m,v){var g=this._objects;return v?g[m]=C:g.splice(m,0,C),this._onObjectAdded&&this._onObjectAdded(C),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var m,C=this._objects,v=!1,g=0,d=arguments.length;g<d;g++)-1!==(m=C.indexOf(arguments[g]))&&(v=!0,C.splice(m,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[g]));return this.renderOnAddRemove&&v&&this.requestRenderAll(),this},forEachObject:function(C,m){for(var v=this.getObjects(),g=0,d=v.length;g<d;g++)C.call(m,v[g],g,v);return this},getObjects:function(C){return void 0===C?this._objects.concat():this._objects.filter(function(m){return m.type===C})},item:function(C){return this._objects[C]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(C,m){return this._objects.indexOf(C)>-1||!!m&&this._objects.some(function(v){return"function"==typeof v.contains&&v.contains(C,!0)})},complexity:function(){return this._objects.reduce(function(C,m){return C+(m.complexity?m.complexity():0)},0)}},S.CommonMethods={_setOptions:function(C){for(var m in C)this.set(m,C[m])},_initGradient:function(C,m){C&&C.colorStops&&!(C instanceof S.Gradient)&&this.set(m,new S.Gradient(C))},_initPattern:function(C,m,v){!C||!C.source||C instanceof S.Pattern?v&&v():this.set(m,new S.Pattern(C,v))},_setObject:function(C){for(var m in C)this._set(m,C[m])},set:function(C,m){return"object"==typeof C?this._setObject(C):this._set(C,m),this},_set:function(C,m){this[C]=m},toggle:function(C){var m=this.get(C);return"boolean"==typeof m&&this.set(C,!m),this},get:function(C){return this[C]}},C=ht,m=Math.sqrt,v=Math.atan2,g=Math.pow,d=Math.PI/180,h=Math.PI/2,S.util={cos:function(c){if(0===c)return 1;switch(c<0&&(c=-c),c/h){case 1:case 3:return 0;case 2:return-1}return Math.cos(c)},sin:function(c){if(0===c)return 0;var _=1;switch(c<0&&(_=-1),c/h){case 1:return _;case 2:return 0;case 3:return-_}return Math.sin(c)},removeFromArray:function(c,f){var _=c.indexOf(f);return-1!==_&&c.splice(_,1),c},getRandomInt:function(c,f){return Math.floor(Math.random()*(f-c+1))+c},degreesToRadians:function(c){return c*d},radiansToDegrees:function(c){return c/d},rotatePoint:function(c,f,_){var u=new S.Point(c.x-f.x,c.y-f.y),y=S.util.rotateVector(u,_);return new S.Point(y.x,y.y).addEquals(f)},rotateVector:function(c,f){var _=S.util.sin(f),u=S.util.cos(f);return{x:c.x*u-c.y*_,y:c.x*_+c.y*u}},createVector:function(c,f){return new S.Point(f.x-c.x,f.y-c.y)},calcAngleBetweenVectors:function(c,f){return Math.acos((c.x*f.x+c.y*f.y)/(Math.hypot(c.x,c.y)*Math.hypot(f.x,f.y)))},getHatVector:function(c){return new S.Point(c.x,c.y).multiply(1/Math.hypot(c.x,c.y))},getBisector:function(c,f,_){var u=S.util.createVector(c,f),y=S.util.createVector(c,_),x=S.util.calcAngleBetweenVectors(u,y),T=S.util.calcAngleBetweenVectors(S.util.rotateVector(u,x),y);return{vector:S.util.getHatVector(S.util.rotateVector(u,x*(0===T?1:-1)/2)),angle:x}},projectStrokeOnPoints:function(c,f,_){var u=[],y=f.strokeWidth/2,x=f.strokeUniform?new S.Point(1/f.scaleX,1/f.scaleY):new S.Point(1,1),T=function(E){var L=y/Math.hypot(E.x,E.y);return new S.Point(E.x*L*x.x,E.y*L*x.y)};return c.length<=1||c.forEach(function(E,L){var U,Q,H=new S.Point(E.x,E.y);0===L?(Q=c[L+1],U=_?T(S.util.createVector(Q,H)).addEquals(H):c[c.length-1]):L===c.length-1?(U=c[L-1],Q=_?T(S.util.createVector(U,H)).addEquals(H):c[0]):(U=c[L-1],Q=c[L+1]);var Le,He,de=S.util.getBisector(H,U,Q),we=de.vector;if("miter"===f.strokeLineJoin&&(Le=-y/Math.sin(de.angle/2),He=new S.Point(we.x*Le*x.x,we.y*Le*x.y),Math.hypot(He.x,He.y)/y<=f.strokeMiterLimit))return u.push(H.add(He)),void u.push(H.subtract(He));Le=-y*Math.SQRT2,He=new S.Point(we.x*Le*x.x,we.y*Le*x.y),u.push(H.add(He)),u.push(H.subtract(He))}),u},transformPoint:function(c,f,_){return _?new S.Point(f[0]*c.x+f[2]*c.y,f[1]*c.x+f[3]*c.y):new S.Point(f[0]*c.x+f[2]*c.y+f[4],f[1]*c.x+f[3]*c.y+f[5])},makeBoundingBoxFromPoints:function(c,f){if(f)for(var _=0;_<c.length;_++)c[_]=S.util.transformPoint(c[_],f);var u=[c[0].x,c[1].x,c[2].x,c[3].x],y=S.util.array.min(u),T=S.util.array.max(u)-y,E=[c[0].y,c[1].y,c[2].y,c[3].y],L=S.util.array.min(E);return{left:y,top:L,width:T,height:S.util.array.max(E)-L}},invertTransform:function(c){var f=1/(c[0]*c[3]-c[1]*c[2]),_=[f*c[3],-f*c[1],-f*c[2],f*c[0]],u=S.util.transformPoint({x:c[4],y:c[5]},_,!0);return _[4]=-u.x,_[5]=-u.y,_},toFixed:function(c,f){return parseFloat(Number(c).toFixed(f))},parseUnit:function(c,f){var _=/\D{0,2}$/.exec(c),u=parseFloat(c);switch(f||(f=S.Text.DEFAULT_SVG_FONT_SIZE),_[0]){case"mm":return u*S.DPI/25.4;case"cm":return u*S.DPI/2.54;case"in":return u*S.DPI;case"pt":return u*S.DPI/72;case"pc":return u*S.DPI/72*12;case"em":return u*f;default:return u}},falseFunction:function(){return!1},getKlass:function(c,f){return c=S.util.string.camelize(c.charAt(0).toUpperCase()+c.slice(1)),S.util.resolveNamespace(f)[c]},getSvgAttributes:function(c){var f=["instantiated_by_use","style","id","class"];switch(c){case"linearGradient":f=f.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":f=f.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":f=f.concat(["offset","stop-color","stop-opacity"])}return f},resolveNamespace:function(c){if(!c)return S;var u,f=c.split("."),_=f.length,y=C||S.window;for(u=0;u<_;++u)y=y[f[u]];return y},loadImage:function(c,f,_,u){if(c){var y=S.util.createImage(),x=function(){f&&f.call(_,y,!1),y=y.onload=y.onerror=null};y.onload=x,y.onerror=function(){S.log("Error loading "+y.src),f&&f.call(_,null,!0),y=y.onload=y.onerror=null},0!==c.indexOf("data")&&null!=u&&(y.crossOrigin=u),"data:image/svg"===c.substring(0,14)&&(y.onload=null,S.util.loadImageInDom(y,x)),y.src=c}else f&&f.call(_,c)},loadImageInDom:function(c,f){var _=S.document.createElement("div");_.style.width=_.style.height="1px",_.style.left=_.style.top="-100%",_.style.position="absolute",_.appendChild(c),S.document.querySelector("body").appendChild(_),c.onload=function(){f(),_.parentNode.removeChild(_),_=null}},enlivenObjects:function(c,f,_,u){var y=[],x=0,T=(c=c||[]).length;function E(){++x===T&&f&&f(y.filter(function(L){return L}))}T?c.forEach(function(L,H){L&&L.type?S.util.getKlass(L.type,_).fromObject(L,function(Q,de){de||(y[H]=Q),u&&u(L,Q,de),E()}):E()}):f&&f(y)},enlivenObjectEnlivables:function(c,f,_){var u=S.Object.ENLIVEN_PROPS.filter(function(y){return!!c[y]});S.util.enlivenObjects(u.map(function(y){return c[y]}),function(y){var x={};u.forEach(function(T,E){x[T]=y[E],f&&(f[T]=y[E])}),_&&_(x)})},enlivenPatterns:function(c,f){function _(){++y===x&&f&&f(u)}var u=[],y=0,x=(c=c||[]).length;x?c.forEach(function(T,E){T&&T.source?new S.Pattern(T,function(L){u[E]=L,_()}):(u[E]=T,_())}):f&&f(u)},groupSVGElements:function(c,f,_){var u;return c&&1===c.length?(void 0!==_&&(c[0].sourcePath=_),c[0]):(f&&(f.width&&f.height?f.centerPoint={x:f.width/2,y:f.height/2}:(delete f.width,delete f.height)),u=new S.Group(c,f),void 0!==_&&(u.sourcePath=_),u)},populateWithProperties:function(c,f,_){if(_&&Array.isArray(_))for(var u=0,y=_.length;u<y;u++)_[u]in c&&(f[_[u]]=c[_[u]])},createCanvasElement:function(){return S.document.createElement("canvas")},copyCanvasElement:function(c){var f=S.util.createCanvasElement();return f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0),f},toDataURL:function(c,f,_){return c.toDataURL("image/"+f,_)},createImage:function(){return S.document.createElement("img")},multiplyTransformMatrices:function(c,f,_){return[c[0]*f[0]+c[2]*f[1],c[1]*f[0]+c[3]*f[1],c[0]*f[2]+c[2]*f[3],c[1]*f[2]+c[3]*f[3],_?0:c[0]*f[4]+c[2]*f[5]+c[4],_?0:c[1]*f[4]+c[3]*f[5]+c[5]]},qrDecompose:function(c){var f=v(c[1],c[0]),_=g(c[0],2)+g(c[1],2),u=m(_),y=(c[0]*c[3]-c[2]*c[1])/u,x=v(c[0]*c[2]+c[1]*c[3],_);return{angle:f/d,scaleX:u,scaleY:y,skewX:x/d,skewY:0,translateX:c[4],translateY:c[5]}},calcRotateMatrix:function(c){if(!c.angle)return S.iMatrix.concat();var f=S.util.degreesToRadians(c.angle),_=S.util.cos(f),u=S.util.sin(f);return[_,u,-u,_,0,0]},calcDimensionsMatrix:function(c){var f=void 0===c.scaleX?1:c.scaleX,_=void 0===c.scaleY?1:c.scaleY,u=[c.flipX?-f:f,0,0,c.flipY?-_:_,0,0],y=S.util.multiplyTransformMatrices,x=S.util.degreesToRadians;return c.skewX&&(u=y(u,[1,0,Math.tan(x(c.skewX)),1],!0)),c.skewY&&(u=y(u,[1,Math.tan(x(c.skewY)),0,1],!0)),u},composeMatrix:function(c){var f=[1,0,0,1,c.translateX||0,c.translateY||0],_=S.util.multiplyTransformMatrices;return c.angle&&(f=_(f,S.util.calcRotateMatrix(c))),(1!==c.scaleX||1!==c.scaleY||c.skewX||c.skewY||c.flipX||c.flipY)&&(f=_(f,S.util.calcDimensionsMatrix(c))),f},resetObjectTransform:function(c){c.scaleX=1,c.scaleY=1,c.skewX=0,c.skewY=0,c.flipX=!1,c.flipY=!1,c.rotate(0)},saveObjectTransform:function(c){return{scaleX:c.scaleX,scaleY:c.scaleY,skewX:c.skewX,skewY:c.skewY,angle:c.angle,left:c.left,flipX:c.flipX,flipY:c.flipY,top:c.top}},isTransparent:function(c,f,_,u){u>0&&(f>u?f-=u:f=0,_>u?_-=u:_=0);var x,y=!0,E=c.getImageData(f,_,2*u||1,2*u||1),L=E.data.length;for(x=3;x<L&&0!=(y=E.data[x]<=0);x+=4);return E=null,y},parsePreserveAspectRatioAttribute:function(c){var x,f="meet",y=c.split(" ");return y&&y.length&&("meet"!==(f=y.pop())&&"slice"!==f?(x=f,f="meet"):y.length&&(x=y.pop())),{meetOrSlice:f,alignX:"none"!==x?x.slice(1,4):"none",alignY:"none"!==x?x.slice(5,8):"none"}},clearFabricFontCache:function(c){(c=(c||"").toLowerCase())?S.charWidthsCache[c]&&delete S.charWidthsCache[c]:S.charWidthsCache={}},limitDimsByArea:function(c,f){var _=Math.sqrt(f*c),u=Math.floor(f/_);return{x:Math.floor(_),y:u}},capValue:function(c,f,_){return Math.max(c,Math.min(f,_))},findScaleToFit:function(c,f){return Math.min(f.width/c.width,f.height/c.height)},findScaleToCover:function(c,f){return Math.max(f.width/c.width,f.height/c.height)},matrixToSVG:function(c){return"matrix("+c.map(function(f){return S.util.toFixed(f,S.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(c,f){var _=S.util.invertTransform(f),u=S.util.multiplyTransformMatrices(_,c.calcOwnMatrix());S.util.applyTransformToObject(c,u)},addTransformToObject:function(c,f){S.util.applyTransformToObject(c,S.util.multiplyTransformMatrices(f,c.calcOwnMatrix()))},applyTransformToObject:function(c,f){var _=S.util.qrDecompose(f),u=new S.Point(_.translateX,_.translateY);c.flipX=!1,c.flipY=!1,c.set("scaleX",_.scaleX),c.set("scaleY",_.scaleY),c.skewX=_.skewX,c.skewY=_.skewY,c.angle=_.angle,c.setPositionByOrigin(u,"center","center")},sizeAfterTransform:function(c,f,_){var u=c/2,y=f/2,x=[{x:-u,y:-y},{x:u,y:-y},{x:-u,y},{x:u,y}],T=S.util.calcDimensionsMatrix(_),E=S.util.makeBoundingBoxFromPoints(x,T);return{x:E.width,y:E.height}},mergeClipPaths:function(c,f){var _=c,u=f;_.inverted&&!u.inverted&&(_=f,u=c),S.util.applyTransformToObject(u,S.util.multiplyTransformMatrices(S.util.invertTransform(_.calcTransformMatrix()),u.calcTransformMatrix()));var y=_.inverted&&u.inverted;return y&&(_.inverted=u.inverted=!1),new S.Group([_],{clipPath:u,inverted:y})},hasStyleChanged:function(c,f,_){return _=_||!1,c.fill!==f.fill||c.stroke!==f.stroke||c.strokeWidth!==f.strokeWidth||c.fontSize!==f.fontSize||c.fontFamily!==f.fontFamily||c.fontWeight!==f.fontWeight||c.fontStyle!==f.fontStyle||c.deltaY!==f.deltaY||_&&(c.overline!==f.overline||c.underline!==f.underline||c.linethrough!==f.linethrough)},stylesToArray:function(_,f){_=S.util.object.clone(_,!0);for(var u=f.split("\n"),y=-1,x={},T=[],E=0;E<u.length;E++)if(_[E])for(var L=0;L<u[E].length;L++){y++;var H=_[E][L];H&&(S.util.hasStyleChanged(x,H,!0)?T.push({start:y,end:y+1,style:H}):T[T.length-1].end++),x=H||{}}else y+=u[E].length;return T},stylesFromArray:function(c,f){if(!Array.isArray(c))return c;for(var _=f.split("\n"),u=-1,y=0,x={},T=0;T<_.length;T++)for(var E=0;E<_[T].length;E++)u++,c[y]&&c[y].start<=u&&u<c[y].end&&(x[T]=x[T]||{},x[T][E]=Object.assign({},c[y].style),u===c[y].end-1&&y++);return x}},function(){var C=Array.prototype.join,m={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},v={m:"l",M:"L"};function g(z,X,$,W,le,Y,j,K,ie,ae,ce){var Ce=S.util.cos(z),Se=S.util.sin(z),Fe=S.util.cos(X),ue=S.util.sin(X),ne=$*le*Fe-W*Y*ue+j,ge=W*le*Fe+$*Y*ue+K;return["C",ae+ie*(-$*le*Se-W*Y*Ce),ce+ie*(-W*le*Se+$*Y*Ce),ne+ie*($*le*ue+W*Y*Fe),ge+ie*(W*le*ue-$*Y*Fe),ne,ge]}function h(z,X,$,W){var le=Math.atan2(X,z),Y=Math.atan2(W,$);return Y>=le?Y-le:2*Math.PI-(le-Y)}function f(z,X,$){for(var ce=function d(z,X,$,W,le,Y,j){var K=Math.PI,ie=j*K/180,ae=S.util.sin(ie),ce=S.util.cos(ie),Ce=0,Se=0,Fe=-ce*z*.5-ae*X*.5,ue=-ce*X*.5+ae*z*.5,ne=($=Math.abs($))*$,ge=(W=Math.abs(W))*W,pe=ue*ue,he=Fe*Fe,ye=ne*ge-ne*pe-ge*he,Ne=0;if(ye<0){var pt=Math.sqrt(1-ye/(ne*ge));$*=pt,W*=pt}else Ne=(le===Y?-1:1)*Math.sqrt(ye/(ne*pe+ge*he));var tt=Ne*$*ue/W,me=-Ne*W*Fe/$,it=ce*tt-ae*me+.5*z,wt=ae*tt+ce*me+.5*X,Dt=h(1,0,(Fe-tt)/$,(ue-me)/W),rn=h((Fe-tt)/$,(ue-me)/W,(-Fe-tt)/$,(-ue-me)/W);0===Y&&rn>0?rn-=2*K:1===Y&&rn<0&&(rn+=2*K);for(var Kt=Math.ceil(Math.abs(rn/K*2)),ti=[],On=rn/Kt,ao=8/3*Math.sin(On/4)*Math.sin(On/4)/Math.sin(On/2),Js=Dt+On,mr=0;mr<Kt;mr++)ti[mr]=g(Dt,Js,ce,ae,$,W,it,wt,ao,Ce,Se),Ce=ti[mr][5],Se=ti[mr][6],Dt=Js,Js+=On;return ti}($[6]-z,$[7]-X,$[1],$[2],$[4],$[5],$[3]),Ce=0,Se=ce.length;Ce<Se;Ce++)ce[Ce][1]+=z,ce[Ce][2]+=X,ce[Ce][3]+=z,ce[Ce][4]+=X,ce[Ce][5]+=z,ce[Ce][6]+=X;return ce}function u(z,X,$,W){return Math.sqrt(($-z)*($-z)+(W-X)*(W-X))}function L(z,X,$,W,le,Y,j,K){return function(ie){var ae=function y(z){return z*z*z}(ie),ce=function x(z){return 3*z*z*(1-z)}(ie),Ce=function T(z){return 3*z*(1-z)*(1-z)}(ie),Se=function E(z){return(1-z)*(1-z)*(1-z)}(ie);return{x:j*ae+le*ce+$*Ce+z*Se,y:K*ae+Y*ce+W*Ce+X*Se}}}function H(z,X,$,W,le,Y,j,K){return function(ie){var ae=1-ie;return Math.atan2(3*ae*ae*(W-X)+6*ae*ie*(Y-W)+3*ie*ie*(K-Y),3*ae*ae*($-z)+6*ae*ie*(le-$)+3*ie*ie*(j-le))}}function we(z,X,$,W,le,Y){return function(j){var K=function U(z){return z*z}(j),ie=function Q(z){return 2*z*(1-z)}(j),ae=function de(z){return(1-z)*(1-z)}(j);return{x:le*K+$*ie+z*ae,y:Y*K+W*ie+X*ae}}}function Ee(z,X,$,W,le,Y){return function(j){var K=1-j;return Math.atan2(2*K*(W-X)+2*j*(Y-W),2*K*($-z)+2*j*(le-$))}}function Le(z,X,$){var le,j,W={x:X,y:$},Y=0;for(j=1;j<=100;j+=1)le=z(j/100),Y+=u(W.x,W.y,le.x,le.y),W=le;return Y}function ke(z){for(var W,ae,ce,Ce,X=0,$=z.length,le=0,Y=0,j=0,K=0,ie=[],Se=0;Se<$;Se++){switch(ce={x:le,y:Y,command:(W=z[Se])[0]},W[0]){case"M":ce.length=0,j=le=W[1],K=Y=W[2];break;case"L":ce.length=u(le,Y,W[1],W[2]),le=W[1],Y=W[2];break;case"C":ae=L(le,Y,W[1],W[2],W[3],W[4],W[5],W[6]),Ce=H(le,Y,W[1],W[2],W[3],W[4],W[5],W[6]),ce.iterator=ae,ce.angleFinder=Ce,ce.length=Le(ae,le,Y),le=W[5],Y=W[6];break;case"Q":ae=we(le,Y,W[1],W[2],W[3],W[4]),Ce=Ee(le,Y,W[1],W[2],W[3],W[4]),ce.iterator=ae,ce.angleFinder=Ce,ce.length=Le(ae,le,Y),le=W[3],Y=W[4];break;case"Z":case"z":ce.destX=j,ce.destY=K,ce.length=u(le,Y,j,K),le=j,Y=K}X+=ce.length,ie.push(ce)}return ie.push({length:X,x:le,y:Y}),ie}S.util.joinPath=function(z){return z.map(function(X){return X.join(" ")}).join(" ")},S.util.parsePath=function Ge(z){var W,le,Ce,Se,Fe,X=[],$=[],Y=S.rePathCommand,j="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",K="("+j+")"+S.commaWsp,ie="([01])"+S.commaWsp+"?",ce=new RegExp(K+"?"+K+"?"+K+ie+ie+K+"?("+j+")","g");if(!z||!z.match)return X;for(var ne,ue=0,ge=(Fe=z.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;ue<ge;ue++){Se=(W=Fe[ue]).slice(1).trim(),$.length=0;var pe=W.charAt(0);if(ne=[pe],"a"===pe.toLowerCase())for(var he;he=ce.exec(Se);)for(var ye=1;ye<he.length;ye++)$.push(he[ye]);else for(;Ce=Y.exec(Se);)$.push(Ce[0]);ye=0;for(var Ne=$.length;ye<Ne;ye++)le=parseFloat($[ye]),isNaN(le)||ne.push(le);var pt=m[pe.toLowerCase()],tt=v[pe]||pe;if(ne.length-1>pt)for(var me=1,it=ne.length;me<it;me+=pt)X.push([pe].concat(ne.slice(me,me+pt))),pe=tt;else X.push(ne)}return X},S.util.makePathSimpler=function _(z){var j,K,ie,ce,Ce,Se,X=0,$=0,W=z.length,le=0,Y=0,ae=[];for(K=0;K<W;++K){switch(ie=!1,(j=z[K].slice(0))[0]){case"l":j[0]="L",j[1]+=X,j[2]+=$;case"L":X=j[1],$=j[2];break;case"h":j[1]+=X;case"H":j[0]="L",j[2]=$,X=j[1];break;case"v":j[1]+=$;case"V":j[0]="L",$=j[1],j[1]=X,j[2]=$;break;case"m":j[0]="M",j[1]+=X,j[2]+=$;case"M":X=j[1],$=j[2],le=j[1],Y=j[2];break;case"c":j[0]="C",j[1]+=X,j[2]+=$,j[3]+=X,j[4]+=$,j[5]+=X,j[6]+=$;case"C":Ce=j[3],Se=j[4],X=j[5],$=j[6];break;case"s":j[0]="S",j[1]+=X,j[2]+=$,j[3]+=X,j[4]+=$;case"S":"C"===ce?(Ce=2*X-Ce,Se=2*$-Se):(Ce=X,Se=$),X=j[3],$=j[4],j[0]="C",j[5]=j[3],j[6]=j[4],j[3]=j[1],j[4]=j[2],j[1]=Ce,j[2]=Se,Ce=j[3],Se=j[4];break;case"q":j[0]="Q",j[1]+=X,j[2]+=$,j[3]+=X,j[4]+=$;case"Q":Ce=j[1],Se=j[2],X=j[3],$=j[4];break;case"t":j[0]="T",j[1]+=X,j[2]+=$;case"T":"Q"===ce?(Ce=2*X-Ce,Se=2*$-Se):(Ce=X,Se=$),j[0]="Q",X=j[1],$=j[2],j[1]=Ce,j[2]=Se,j[3]=X,j[4]=$;break;case"a":j[0]="A",j[6]+=X,j[7]+=$;case"A":ie=!0,ae=ae.concat(f(X,$,j)),X=j[6],$=j[7];break;case"z":case"Z":X=le,$=Y}ie||ae.push(j),ce=j[0]}return ae},S.util.getSmoothPathFromPoints=function Me(z,X){var W,$=[],le=new S.Point(z[0].x,z[0].y),Y=new S.Point(z[1].x,z[1].y),j=z.length,K=1,ie=0,ae=j>2;for(ae&&(K=z[2].x<Y.x?-1:z[2].x===Y.x?0:1,ie=z[2].y<Y.y?-1:z[2].y===Y.y?0:1),$.push(["M",le.x-K*(X=X||0),le.y-ie*X]),W=1;W<j;W++){if(!le.eq(Y)){var ce=le.midPointFrom(Y);$.push(["Q",le.x,le.y,ce.x,ce.y])}le=z[W],W+1<z.length&&(Y=z[W+1])}return ae&&(K=le.x>z[W-2].x?1:le.x===z[W-2].x?0:-1,ie=le.y>z[W-2].y?1:le.y===z[W-2].y?0:-1),$.push(["L",le.x+K*X,le.y+ie*X]),$},S.util.getPathSegmentsInfo=ke,S.util.getBoundsOfCurve=function c(z,X,$,W,le,Y,j,K){var ie;if(S.cachesBoundsOfCurve&&(ie=C.call(arguments),S.boundsOfCurveCache[ie]))return S.boundsOfCurveCache[ie];var ne,ge,pe,he,ye,Ne,pt,tt,ae=Math.sqrt,ce=Math.min,Ce=Math.max,Se=Math.abs,Fe=[],ue=[[],[]];ge=6*z-12*$+6*le,ne=-3*z+9*$-9*le+3*j,pe=3*$-3*z;for(var me=0;me<2;++me)if(me>0&&(ge=6*X-12*W+6*Y,ne=-3*X+9*W-9*Y+3*K,pe=3*W-3*X),Se(ne)<1e-12){if(Se(ge)<1e-12)continue;0<(he=-pe/ge)&&he<1&&Fe.push(he)}else!((pt=ge*ge-4*pe*ne)<0)&&(0<(ye=(-ge+(tt=ae(pt)))/(2*ne))&&ye<1&&Fe.push(ye),0<(Ne=(-ge-tt)/(2*ne))&&Ne<1&&Fe.push(Ne));for(var Kt,Dt=Fe.length,rn=Dt;Dt--;)ue[0][Dt]=(Kt=1-(he=Fe[Dt]))*Kt*Kt*z+3*Kt*Kt*he*$+3*Kt*he*he*le+he*he*he*j,ue[1][Dt]=Kt*Kt*Kt*X+3*Kt*Kt*he*W+3*Kt*he*he*Y+he*he*he*K;ue[0][rn]=z,ue[1][rn]=X,ue[0][rn+1]=j,ue[1][rn+1]=K;var ti=[{x:ce.apply(null,ue[0]),y:ce.apply(null,ue[1])},{x:Ce.apply(null,ue[0]),y:Ce.apply(null,ue[1])}];return S.cachesBoundsOfCurve&&(S.boundsOfCurveCache[ie]=ti),ti},S.util.getPointOnPath=function Re(z,X,$){$||($=ke(z));for(var W=0;X-$[W].length>0&&W<$.length-2;)X-=$[W].length,W++;var ie,le=$[W],Y=X/le.length,K=z[W];switch(le.command){case"M":return{x:le.x,y:le.y,angle:0};case"Z":case"z":return(ie=new S.Point(le.x,le.y).lerp(new S.Point(le.destX,le.destY),Y)).angle=Math.atan2(le.destY-le.y,le.destX-le.x),ie;case"L":return(ie=new S.Point(le.x,le.y).lerp(new S.Point(K[1],K[2]),Y)).angle=Math.atan2(K[2]-le.y,K[1]-le.x),ie;case"C":case"Q":return function He(z,X){for(var j,K,ce,$=0,W=0,le=z.iterator,Y={x:z.x,y:z.y},ie=.01,ae=z.angleFinder;W<X&&ie>1e-4;)j=le($),ce=$,(K=u(Y.x,Y.y,j.x,j.y))+W>X?($-=ie,ie/=2):(Y=j,$+=ie,W+=K);return j.angle=ae(ce),j}(le,X)}},S.util.transformPath=function qe(z,X,$){return $&&(X=S.util.multiplyTransformMatrices(X,[1,0,0,1,-$.x,-$.y])),z.map(function(W){for(var le=W.slice(0),Y={},j=1;j<W.length-1;j+=2)Y.x=W[j],Y.y=W[j+1],Y=S.util.transformPoint(Y,X),le[j]=Y.x,le[j+1]=Y.y;return le})}}(),function(){var C=Array.prototype.slice;function h(c,f,_){if(c&&0!==c.length){var u=c.length-1,y=f?c[u][f]:c[u];if(f)for(;u--;)_(c[u][f],y)&&(y=c[u][f]);else for(;u--;)_(c[u],y)&&(y=c[u]);return y}}S.util.array={fill:function d(c,f){for(var _=c.length;_--;)c[_]=f;return c},invoke:function m(c,f){for(var _=C.call(arguments,2),u=[],y=0,x=c.length;y<x;y++)u[y]=_.length?c[y][f].apply(c[y],_):c[y][f].call(c[y]);return u},min:function g(c,f){return h(c,f,function(_,u){return _<u})},max:function v(c,f){return h(c,f,function(_,u){return _>=u})}}}(),function(){function C(v,g,d){if(d)if(!S.isLikelyNode&&g instanceof Element)v=g;else if(g instanceof Array){v=[];for(var h=0,c=g.length;h<c;h++)v[h]=C({},g[h],d)}else if(g&&"object"==typeof g)for(var f in g)"canvas"===f||"group"===f?v[f]=null:g.hasOwnProperty(f)&&(v[f]=C({},g[f],d));else v=g;else for(var f in g)v[f]=g[f];return v}S.util.object={extend:C,clone:function m(v,g){return C({},v,g)}},S.util.object.extend(S.util,S.Observable)}(),function(){function d(h,c){var f=h.charCodeAt(c);if(isNaN(f))return"";if(f<55296||f>57343)return h.charAt(c);if(55296<=f&&f<=56319){if(h.length<=c+1)throw"High surrogate without following low surrogate";var _=h.charCodeAt(c+1);if(56320>_||_>57343)throw"High surrogate without following low surrogate";return h.charAt(c)+h.charAt(c+1)}if(0===c)throw"Low surrogate without preceding high surrogate";var u=h.charCodeAt(c-1);if(55296>u||u>56319)throw"Low surrogate without preceding high surrogate";return!1}S.util.string={camelize:function C(h){return h.replace(/-+(.)?/g,function(c,f){return f?f.toUpperCase():""})},capitalize:function m(h,c){return h.charAt(0).toUpperCase()+(c?h.slice(1):h.slice(1).toLowerCase())},escapeXml:function v(h){return h.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function g(h){var f,c=0,_=[];for(c=0;c<h.length;c++)!1!==(f=d(h,c))&&_.push(f);return _}}}(),function(){var C=Array.prototype.slice,m=function(){},v=function(){for(var f in{toString:1})if("toString"===f)return!1;return!0}(),g=function(f,_,u){for(var y in _)f.prototype[y]=y in f.prototype&&"function"==typeof f.prototype[y]&&(_[y]+"").indexOf("callSuper")>-1?function(x){return function(){var T=this.constructor.superclass;this.constructor.superclass=u;var E=_[x].apply(this,arguments);if(this.constructor.superclass=T,"initialize"!==x)return E}}(y):_[y],v&&(_.toString!==Object.prototype.toString&&(f.prototype.toString=_.toString),_.valueOf!==Object.prototype.valueOf&&(f.prototype.valueOf=_.valueOf))};function d(){}function h(f){for(var _=null,u=this;u.constructor.superclass;){var y=u.constructor.superclass.prototype[f];if(u[f]!==y){_=y;break}u=u.constructor.superclass.prototype}return _?arguments.length>1?_.apply(this,C.call(arguments,1)):_.call(this):console.log("tried to callSuper "+f+", method not found in prototype chain",this)}S.util.createClass=function c(){var f=null,_=C.call(arguments,0);function u(){this.initialize.apply(this,arguments)}"function"==typeof _[0]&&(f=_.shift()),u.superclass=f,u.subclasses=[],f&&(d.prototype=f.prototype,u.prototype=new d,f.subclasses.push(u));for(var y=0,x=_.length;y<x;y++)g(u,_[y],f);return u.prototype.initialize||(u.prototype.initialize=m),u.prototype.constructor=u,u.prototype.callSuper=h,u}}(),function(){var C=!!S.document.createElement("div").attachEvent,m=["touchstart","touchmove","touchend"];S.util.addListener=function(g,d,h,c){g&&g.addEventListener(d,h,!C&&c)},S.util.removeListener=function(g,d,h,c){g&&g.removeEventListener(d,h,!C&&c)},S.util.getPointer=function(g){var h=S.util.getScrollLeftTop(g.target),c=function v(g){var d=g.changedTouches;return d&&d[0]?d[0]:g}(g);return{x:c.clientX+h.left,y:c.clientY+h.top}},S.util.isTouchEvent=function(g){return m.indexOf(g.type)>-1||"touch"===g.pointerType}}(),function(){var m=S.document.createElement("div"),d=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,h=function(c){return c};"string"==typeof m.style.opacity?h=function(c,f){return c.style.opacity=f,c}:"string"==typeof m.style.filter&&(h=function(c,f){var _=c.style;return c.currentStyle&&!c.currentStyle.hasLayout&&(_.zoom=1),d.test(_.filter)?_.filter=_.filter.replace(d,f=f>=.9999?"":"alpha(opacity="+100*f+")"):_.filter+=" alpha(opacity="+100*f+")",c}),S.util.setStyle=function C(c,f){var _=c.style;if(!_)return c;if("string"==typeof f)return c.style.cssText+=";"+f,f.indexOf("opacity")>-1?h(c,f.match(/opacity:\s*(\d?\.?\d*)/)[1]):c;for(var u in f)"opacity"===u?h(c,f[u]):_.setProperty("float"===u||"cssFloat"===u?void 0===_.styleFloat?"cssFloat":"styleFloat":u,f[u]);return c}}(),function(){var v,u,E,L,C=Array.prototype.slice,g=function(E){return C.call(E,0)};try{v=g(S.document.childNodes)instanceof Array}catch(E){}function d(E,L){var H=S.document.createElement(E);for(var U in L)"class"===U?H.className=L[U]:"for"===U?H.htmlFor=L[U]:H.setAttribute(U,L[U]);return H}function f(E){for(var L=0,H=0,U=S.document.documentElement,Q=S.document.body||{scrollLeft:0,scrollTop:0};E&&(E.parentNode||E.host)&&((E=E.parentNode||E.host)===S.document?(L=Q.scrollLeft||U.scrollLeft||0,H=Q.scrollTop||U.scrollTop||0):(L+=E.scrollLeft||0,H+=E.scrollTop||0),1!==E.nodeType||"fixed"!==E.style.position););return{left:L,top:H}}v||(g=function(E){for(var L=new Array(E.length),H=E.length;H--;)L[H]=E[H];return L}),u=S.document.defaultView&&S.document.defaultView.getComputedStyle?function(E,L){var H=S.document.defaultView.getComputedStyle(E,null);return H?H[L]:void 0}:function(E,L){var H=E.style[L];return!H&&E.currentStyle&&(H=E.currentStyle[L]),H},L="userSelect"in(E=S.document.documentElement.style)?"userSelect":"MozUserSelect"in E?"MozUserSelect":"WebkitUserSelect"in E?"WebkitUserSelect":"KhtmlUserSelect"in E?"KhtmlUserSelect":"",S.util.makeElementUnselectable=function H(Q){return void 0!==Q.onselectstart&&(Q.onselectstart=S.util.falseFunction),L?Q.style[L]="none":"string"==typeof Q.unselectable&&(Q.unselectable="on"),Q},S.util.makeElementSelectable=function U(Q){return void 0!==Q.onselectstart&&(Q.onselectstart=null),L?Q.style[L]="":"string"==typeof Q.unselectable&&(Q.unselectable=""),Q},S.util.setImageSmoothing=function T(E,L){E.imageSmoothingEnabled=E.imageSmoothingEnabled||E.webkitImageSmoothingEnabled||E.mozImageSmoothingEnabled||E.msImageSmoothingEnabled||E.oImageSmoothingEnabled,E.imageSmoothingEnabled=L},S.util.getById=function m(E){return"string"==typeof E?S.document.getElementById(E):E},S.util.toArray=g,S.util.addClass=function h(E,L){E&&-1===(" "+E.className+" ").indexOf(" "+L+" ")&&(E.className+=(E.className?" ":"")+L)},S.util.makeElement=d,S.util.wrapElement=function c(E,L,H){return"string"==typeof L&&(L=d(L,H)),E.parentNode&&E.parentNode.replaceChild(L,E),L.appendChild(E),L},S.util.getScrollLeftTop=f,S.util.getElementOffset=function _(E){var L,de,H=E&&E.ownerDocument,U={left:0,top:0},Q={left:0,top:0},we={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!H)return Q;for(var Ee in we)Q[we[Ee]]+=parseInt(u(E,Ee),10)||0;return L=H.documentElement,void 0!==E.getBoundingClientRect&&(U=E.getBoundingClientRect()),de=f(E),{left:U.left+de.left-(L.clientLeft||0)+Q.left,top:U.top+de.top-(L.clientTop||0)+Q.top}},S.util.getNodeCanvas=function y(E){var L=S.jsdomImplForWrapper(E);return L._canvas||L._image},S.util.cleanUpJsdomNode=function x(E){if(S.isLikelyNode){var L=S.jsdomImplForWrapper(E);L&&(L._image=null,L._canvas=null,L._currentSrc=null,L._attributes=null,L._classList=null)}}}(),function(){function m(){}S.util.request=function v(g,d){d||(d={});var h=d.method?d.method.toUpperCase():"GET",c=d.onComplete||function(){},f=new S.window.XMLHttpRequest,_=d.body||d.parameters;return f.onreadystatechange=function(){4===f.readyState&&(c(f),f.onreadystatechange=m)},"GET"===h&&(_=null,"string"==typeof d.parameters&&(g=function C(g,d){return g+(/\?/.test(g)?"&":"?")+d}(g,d.parameters))),f.open(h,g,!0),("POST"===h||"PUT"===h)&&f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(_),f}}(),S.log=console.log,S.warn=console.warn,function(){var C=S.util.object.extend,m=S.util.object.clone,v=[];function g(){return!1}function d(y,x,T,E){return-T*Math.cos(y/E*(Math.PI/2))+T+x}S.util.object.extend(v,{cancelAll:function(){var y=this.splice(0);return y.forEach(function(x){x.cancel()}),y},cancelByCanvas:function(y){if(!y)return[];var x=this.filter(function(T){return"object"==typeof T.target&&T.target.canvas===y});return x.forEach(function(T){T.cancel()}),x},cancelByTarget:function(y){var x=this.findAnimationsByTarget(y);return x.forEach(function(T){T.cancel()}),x},findAnimationIndex:function(y){return this.indexOf(this.findAnimation(y))},findAnimation:function(y){return this.find(function(x){return x.cancel===y})},findAnimationsByTarget:function(y){return y?this.filter(function(x){return x.target===y}):[]}});var c=S.window.requestAnimationFrame||S.window.webkitRequestAnimationFrame||S.window.mozRequestAnimationFrame||S.window.oRequestAnimationFrame||S.window.msRequestAnimationFrame||function(y){return S.window.setTimeout(y,1e3/60)},f=S.window.cancelAnimationFrame||S.window.clearTimeout;function _(){return c.apply(S.window,arguments)}S.util.animate=function h(y){y||(y={});var T,x=!1,E=function(){var L=S.runningAnimations.indexOf(T);return L>-1&&S.runningAnimations.splice(L,1)[0]};return T=C(m(y),{cancel:function(){return x=!0,E()},currentValue:"startValue"in y?y.startValue:0,completionRate:0,durationRate:0}),S.runningAnimations.push(T),_(function(L){var de,H=L||+new Date,U=y.duration||500,Q=H+U,we=y.onChange||g,Ee=y.abort||g,Le=y.onComplete||g,He=y.easing||d,ke="startValue"in y&&y.startValue.length>0,Re="startValue"in y?y.startValue:0,Ge="endValue"in y?y.endValue:100,Me=y.byValue||(ke?Re.map(function(qe,z){return Ge[z]-Re[z]}):Ge-Re);y.onStart&&y.onStart(),function qe(z){var X=(de=z||+new Date)>Q?U:de-H,$=X/U,W=ke?Re.map(function(Y,j){return He(X,Re[j],Me[j],U)}):He(X,Re,Me,U),le=Math.abs(ke?(W[0]-Re[0])/Me[0]:(W-Re)/Me);if(T.currentValue=ke?W.slice():W,T.completionRate=le,T.durationRate=$,!x){if(Ee(W,le,$))return void E();if(de>Q)return T.currentValue=ke?Ge.slice():Ge,T.completionRate=1,T.durationRate=1,we(ke?Ge.slice():Ge,1,1),Le(Ge,1,1),void E();we(W,le,$),_(qe)}}(H)}),T.cancel},S.util.requestAnimFrame=_,S.util.cancelAnimFrame=function u(){return f.apply(S.window,arguments)},S.runningAnimations=v}(),function(){function C(v,g,d){var h="rgba("+parseInt(v[0]+d*(g[0]-v[0]),10)+","+parseInt(v[1]+d*(g[1]-v[1]),10)+","+parseInt(v[2]+d*(g[2]-v[2]),10);return(h+=","+(v&&g?parseFloat(v[3]+d*(g[3]-v[3])):1))+")"}S.util.animateColor=function m(v,g,d,h){var c=new S.Color(v).getSource(),f=new S.Color(g).getSource(),_=h.onComplete,u=h.onChange;return S.util.animate(S.util.object.extend(h=h||{},{duration:d||500,startValue:c,endValue:f,byValue:f,easing:function(y,x,T,E){return C(x,T,h.colorEasing?h.colorEasing(y,E):1-Math.cos(y/E*(Math.PI/2)))},onComplete:function(y,x,T){if(_)return _(C(f,f,0),x,T)},onChange:function(y,x,T){if(u){if(Array.isArray(y))return u(C(y,y,0),x,T);u(y,x,T)}}}))}}(),function(){function C(z,X,$,W){return z<Math.abs(X)?(z=X,W=$/4):W=0===X&&0===z?$/(2*Math.PI)*Math.asin(1):$/(2*Math.PI)*Math.asin(X/z),{a:z,c:X,p:$,s:W}}function m(z,X,$){return z.a*Math.pow(2,10*(X-=1))*Math.sin((X*$-z.s)*(2*Math.PI)/z.p)}function Ge(z,X,$,W){return $-Me(W-z,0,$,W)+X}function Me(z,X,$,W){return(z/=W)<1/2.75?$*(7.5625*z*z)+X:z<2/2.75?$*(7.5625*(z-=1.5/2.75)*z+.75)+X:z<2.5/2.75?$*(7.5625*(z-=2.25/2.75)*z+.9375)+X:$*(7.5625*(z-=2.625/2.75)*z+.984375)+X}S.util.ease={easeInQuad:function(z,X,$,W){return $*(z/=W)*z+X},easeOutQuad:function(z,X,$,W){return-$*(z/=W)*(z-2)+X},easeInOutQuad:function(z,X,$,W){return(z/=W/2)<1?$/2*z*z+X:-$/2*(--z*(z-2)-1)+X},easeInCubic:function(z,X,$,W){return $*(z/=W)*z*z+X},easeOutCubic:function v(z,X,$,W){return $*((z=z/W-1)*z*z+1)+X},easeInOutCubic:function g(z,X,$,W){return(z/=W/2)<1?$/2*z*z*z+X:$/2*((z-=2)*z*z+2)+X},easeInQuart:function d(z,X,$,W){return $*(z/=W)*z*z*z+X},easeOutQuart:function h(z,X,$,W){return-$*((z=z/W-1)*z*z*z-1)+X},easeInOutQuart:function c(z,X,$,W){return(z/=W/2)<1?$/2*z*z*z*z+X:-$/2*((z-=2)*z*z*z-2)+X},easeInQuint:function f(z,X,$,W){return $*(z/=W)*z*z*z*z+X},easeOutQuint:function _(z,X,$,W){return $*((z=z/W-1)*z*z*z*z+1)+X},easeInOutQuint:function u(z,X,$,W){return(z/=W/2)<1?$/2*z*z*z*z*z+X:$/2*((z-=2)*z*z*z*z+2)+X},easeInSine:function y(z,X,$,W){return-$*Math.cos(z/W*(Math.PI/2))+$+X},easeOutSine:function x(z,X,$,W){return $*Math.sin(z/W*(Math.PI/2))+X},easeInOutSine:function T(z,X,$,W){return-$/2*(Math.cos(Math.PI*z/W)-1)+X},easeInExpo:function E(z,X,$,W){return 0===z?X:$*Math.pow(2,10*(z/W-1))+X},easeOutExpo:function L(z,X,$,W){return z===W?X+$:$*(1-Math.pow(2,-10*z/W))+X},easeInOutExpo:function H(z,X,$,W){return 0===z?X:z===W?X+$:(z/=W/2)<1?$/2*Math.pow(2,10*(z-1))+X:$/2*(2-Math.pow(2,-10*--z))+X},easeInCirc:function U(z,X,$,W){return-$*(Math.sqrt(1-(z/=W)*z)-1)+X},easeOutCirc:function Q(z,X,$,W){return $*Math.sqrt(1-(z=z/W-1)*z)+X},easeInOutCirc:function de(z,X,$,W){return(z/=W/2)<1?-$/2*(Math.sqrt(1-z*z)-1)+X:$/2*(Math.sqrt(1-(z-=2)*z)+1)+X},easeInElastic:function we(z,X,$,W){var Y=0;return 0===z?X:1==(z/=W)?X+$:(Y||(Y=.3*W),-m(C($,$,Y,1.70158),z,W)+X)},easeOutElastic:function Ee(z,X,$,W){var Y=0;if(0===z)return X;if(1==(z/=W))return X+$;Y||(Y=.3*W);var K=C($,$,Y,1.70158);return K.a*Math.pow(2,-10*z)*Math.sin((z*W-K.s)*(2*Math.PI)/K.p)+K.c+X},easeInOutElastic:function Le(z,X,$,W){var Y=0;if(0===z)return X;if(2==(z/=W/2))return X+$;Y||(Y=W*(.3*1.5));var K=C($,$,Y,1.70158);return z<1?-.5*m(K,z,W)+X:K.a*Math.pow(2,-10*(z-=1))*Math.sin((z*W-K.s)*(2*Math.PI)/K.p)*.5+K.c+X},easeInBack:function He(z,X,$,W,le){return void 0===le&&(le=1.70158),$*(z/=W)*z*((le+1)*z-le)+X},easeOutBack:function ke(z,X,$,W,le){return void 0===le&&(le=1.70158),$*((z=z/W-1)*z*((le+1)*z+le)+1)+X},easeInOutBack:function Re(z,X,$,W,le){return void 0===le&&(le=1.70158),(z/=W/2)<1?$/2*(z*z*((1+(le*=1.525))*z-le))+X:$/2*((z-=2)*z*((1+(le*=1.525))*z+le)+2)+X},easeInBounce:Ge,easeOutBounce:Me,easeInOutBounce:function qe(z,X,$,W){return z<W/2?.5*Ge(2*z,0,$,W)+X:.5*Me(2*z-W,0,$,W)+.5*$+X}}}(),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.object.extend,g=m.util.object.clone,d=m.util.toFixed,h=m.util.parseUnit,c=m.util.multiplyTransformMatrices,x={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},T={stroke:"strokeOpacity",fill:"fillOpacity"},E="font-size",L="clip-path";function H(Y){return Y in x?x[Y]:Y}function U(Y,j,K,ie){var ce,ae=Array.isArray(j);if("fill"!==Y&&"stroke"!==Y||"none"!==j){if("strokeUniform"===Y)return"non-scaling-stroke"===j;if("strokeDashArray"===Y)j="none"===j?null:j.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===Y)j=K&&K.transformMatrix?c(K.transformMatrix,m.parseTransformAttribute(j)):m.parseTransformAttribute(j);else if("visible"===Y)j="none"!==j&&"hidden"!==j,K&&!1===K.visible&&(j=!1);else if("opacity"===Y)j=parseFloat(j),K&&void 0!==K.opacity&&(j*=K.opacity);else if("textAnchor"===Y)j="start"===j?"left":"end"===j?"right":"center";else if("charSpacing"===Y)ce=h(j,ie)/ie*1e3;else if("paintFirst"===Y){var Ce=j.indexOf("fill"),Se=j.indexOf("stroke");j="fill",(Ce>-1&&Se>-1&&Se<Ce||-1===Ce&&Se>-1)&&(j="stroke")}else{if("href"===Y||"xlink:href"===Y||"font"===Y)return j;if("imageSmoothing"===Y)return"optimizeQuality"===j;ce=ae?j.map(h):h(j,ie)}}else j="";return!ae&&isNaN(ce)?j:ce}function Q(Y){return new RegExp("^("+Y.join("|")+")\\b","i")}function we(Y,j){var ae,ce,Ce,ie=[];for(ce=0,Ce=j.length;ce<Ce;ce++)ae=Y.getElementsByTagName(j[ce]),ie=ie.concat(Array.prototype.slice.call(ae));return ie}function ke(Y,j){var K,ie=!0;return(K=Ge(Y,j.pop()))&&j.length&&(ie=function Re(Y,j){for(var K,ie=!0;Y.parentNode&&1===Y.parentNode.nodeType&&j.length;)ie&&(K=j.pop()),ie=Ge(Y=Y.parentNode,K);return 0===j.length}(Y,j)),K&&ie&&0===j.length}function Ge(Y,j){var ce,Ce,K=Y.nodeName,ie=Y.getAttribute("class"),ae=Y.getAttribute("id");if(ce=new RegExp("^"+K,"i"),j=j.replace(ce,""),ae&&j.length&&(ce=new RegExp("#"+ae+"(?![a-zA-Z\\-]+)","i"),j=j.replace(ce,"")),ie&&j.length)for(Ce=(ie=ie.split(" ")).length;Ce--;)ce=new RegExp("\\."+ie[Ce]+"(?![a-zA-Z\\-]+)","i"),j=j.replace(ce,"");return 0===j.length}function Me(Y,j){var K;if(Y.getElementById&&(K=Y.getElementById(j)),K)return K;var ie,ae,ce,Ce=Y.getElementsByTagName("*");for(ae=0,ce=Ce.length;ae<ce;ae++)if(j===(ie=Ce[ae]).getAttribute("id"))return ie}m.svgValidTagNamesRegEx=Q(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),m.svgViewBoxElementsRegEx=Q(["symbol","image","marker","pattern","view","svg"]),m.svgInvalidAncestorsRegEx=Q(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),m.svgValidParentsRegEx=Q(["symbol","g","a","svg","clipPath","defs"]),m.cssRules={},m.gradientDefs={},m.clipPaths={},m.parseTransformAttribute=function(){function K(me,it,wt){me[wt]=Math.tan(m.util.degreesToRadians(it[0]))}var ae=m.iMatrix,ce=m.reNum,Ce=m.commaWsp,he="(?:(?:(matrix)\\s*\\(\\s*("+ce+")"+Ce+"("+ce+")"+Ce+"("+ce+")"+Ce+"("+ce+")"+Ce+"("+ce+")"+Ce+"("+ce+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+ce+")(?:"+Ce+"("+ce+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+ce+")(?:"+Ce+"("+ce+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+ce+")(?:"+Ce+"("+ce+")"+Ce+"("+ce+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+ce+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+ce+")\\s*\\)))",pt=new RegExp("^\\s*(?:(?:"+he+"(?:"+Ce+"*"+he+")*)?)\\s*$"),tt=new RegExp(he,"g");return function(me){var it=ae.concat(),wt=[];if(!me||me&&!pt.test(me))return it;me.replace(tt,function(rn){var Kt=new RegExp(he).exec(rn).filter(function(ao){return!!ao}),ti=Kt[1],On=Kt.slice(2).map(parseFloat);switch(ti){case"translate":!function ie(me,it){me[4]=it[0],2===it.length&&(me[5]=it[1])}(it,On);break;case"rotate":On[0]=m.util.degreesToRadians(On[0]),function Y(me,it){var wt=m.util.cos(it[0]),Dt=m.util.sin(it[0]),rn=0,Kt=0;3===it.length&&(rn=it[1],Kt=it[2]),me[0]=wt,me[1]=Dt,me[2]=-Dt,me[3]=wt,me[4]=rn-(wt*rn-Dt*Kt),me[5]=Kt-(Dt*rn+wt*Kt)}(it,On);break;case"scale":!function j(me,it){var Dt=2===it.length?it[1]:it[0];me[0]=it[0],me[3]=Dt}(it,On);break;case"skewX":K(it,On,2);break;case"skewY":K(it,On,1);break;case"matrix":it=On}wt.push(it.concat()),it=ae.concat()});for(var Dt=wt[0];wt.length>1;)wt.shift(),Dt=m.util.multiplyTransformMatrices(Dt,wt[0]);return Dt}}();var z=new RegExp("^\\s*("+m.reNum+"+)\\s*,?\\s*("+m.reNum+"+)\\s*,?\\s*("+m.reNum+"+)\\s*,?\\s*("+m.reNum+"+)\\s*$");function X(Y){if(!m.svgViewBoxElementsRegEx.test(Y.nodeName))return{};var ae,ce,Ce,Se,Fe,ue,j=Y.getAttribute("viewBox"),K=1,ie=1,ne=Y.getAttribute("width"),ge=Y.getAttribute("height"),pe=Y.getAttribute("x")||0,he=Y.getAttribute("y")||0,ye=Y.getAttribute("preserveAspectRatio")||"",Ne=!j||!(j=j.match(z)),pt=!ne||!ge||"100%"===ne||"100%"===ge,tt=Ne&&pt,me={},it="",wt=0,Dt=0;if(me.width=0,me.height=0,me.toBeParsed=tt,Ne&&(pe||he)&&Y.parentNode&&"#document"!==Y.parentNode.nodeName&&(it=" translate("+h(pe)+" "+h(he)+") ",Fe=(Y.getAttribute("transform")||"")+it,Y.setAttribute("transform",Fe),Y.removeAttribute("x"),Y.removeAttribute("y")),tt)return me;if(Ne)return me.width=h(ne),me.height=h(ge),me;if(ae=-parseFloat(j[1]),ce=-parseFloat(j[2]),Ce=parseFloat(j[3]),Se=parseFloat(j[4]),me.minX=ae,me.minY=ce,me.viewBoxWidth=Ce,me.viewBoxHeight=Se,pt?(me.width=Ce,me.height=Se):(me.width=h(ne),me.height=h(ge),K=me.width/Ce,ie=me.height/Se),"none"!==(ye=m.util.parsePreserveAspectRatioAttribute(ye)).alignX&&("meet"===ye.meetOrSlice&&(ie=K=K>ie?ie:K),"slice"===ye.meetOrSlice&&(ie=K=K>ie?K:ie),wt=me.width-Ce*K,Dt=me.height-Se*K,"Mid"===ye.alignX&&(wt/=2),"Mid"===ye.alignY&&(Dt/=2),"Min"===ye.alignX&&(wt=0),"Min"===ye.alignY&&(Dt=0)),1===K&&1===ie&&0===ae&&0===ce&&0===pe&&0===he)return me;if((pe||he)&&"#document"!==Y.parentNode.nodeName&&(it=" translate("+h(pe)+" "+h(he)+") "),Fe=it+" matrix("+K+" 0 0 "+ie+" "+(ae*K+wt)+" "+(ce*ie+Dt)+") ","svg"===Y.nodeName){for(ue=Y.ownerDocument.createElementNS(m.svgNS,"g");Y.firstChild;)ue.appendChild(Y.firstChild);Y.appendChild(ue)}else(ue=Y).removeAttribute("x"),ue.removeAttribute("y"),Fe=ue.getAttribute("transform")+Fe;return ue.setAttribute("transform",Fe),me}function W(Y,j){var ie="xlink:href",ce=Me(Y,j.getAttribute(ie).slice(1));if(ce&&ce.getAttribute(ie)&&W(Y,ce),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(Se){ce&&!j.hasAttribute(Se)&&ce.hasAttribute(Se)&&j.setAttribute(Se,ce.getAttribute(Se))}),!j.children.length)for(var Ce=ce.cloneNode(!0);Ce.firstChild;)j.appendChild(Ce.firstChild);j.removeAttribute(ie)}m.parseSVGDocument=function(Y,j,K,ie){if(Y){!function qe(Y){for(var j=we(Y,["use","svg:use"]),K=0;j.length&&K<j.length;){var ie=j[K],ae=ie.getAttribute("xlink:href")||ie.getAttribute("href");if(null===ae)return;var pe,he,ye,Ne,ce=ae.slice(1),Ce=ie.getAttribute("x")||0,Se=ie.getAttribute("y")||0,Fe=Me(Y,ce).cloneNode(!0),ue=(Fe.getAttribute("transform")||"")+" translate("+Ce+", "+Se+")",ge=j.length,pt=m.svgNS;if(X(Fe),/^svg$/i.test(Fe.nodeName)){var tt=Fe.ownerDocument.createElementNS(pt,"g");for(he=0,Ne=(ye=Fe.attributes).length;he<Ne;he++)pe=ye.item(he),tt.setAttributeNS(pt,pe.nodeName,pe.nodeValue);for(;Fe.firstChild;)tt.appendChild(Fe.firstChild);Fe=tt}for(he=0,Ne=(ye=ie.attributes).length;he<Ne;he++)"x"!==(pe=ye.item(he)).nodeName&&"y"!==pe.nodeName&&"xlink:href"!==pe.nodeName&&"href"!==pe.nodeName&&("transform"===pe.nodeName?ue=pe.nodeValue+" "+ue:Fe.setAttribute(pe.nodeName,pe.nodeValue));Fe.setAttribute("transform",ue),Fe.setAttribute("instantiated_by_use","1"),Fe.removeAttribute("id"),ie.parentNode.replaceChild(Fe,ie),j.length===ge&&K++}}(Y);var ce,Ce,ae=m.Object.__uid++,Se=X(Y),Fe=m.util.toArray(Y.getElementsByTagName("*"));if(Se.crossOrigin=ie&&ie.crossOrigin,Se.svgUid=ae,0===Fe.length&&m.isLikelyNode){var ue=[];for(ce=0,Ce=(Fe=Y.selectNodes('//*[name(.)!="svg"]')).length;ce<Ce;ce++)ue[ce]=Fe[ce];Fe=ue}var ne=Fe.filter(function(pe){return X(pe),m.svgValidTagNamesRegEx.test(pe.nodeName.replace("svg:",""))&&!function $(Y,j){for(;Y&&(Y=Y.parentNode);)if(Y.nodeName&&j.test(Y.nodeName.replace("svg:",""))&&!Y.getAttribute("instantiated_by_use"))return!0;return!1}(pe,m.svgInvalidAncestorsRegEx)});if(!ne||ne&&!ne.length)return void(j&&j([],{}));var ge={};Fe.filter(function(pe){return"clipPath"===pe.nodeName.replace("svg:","")}).forEach(function(pe){var he=pe.getAttribute("id");ge[he]=m.util.toArray(pe.getElementsByTagName("*")).filter(function(ye){return m.svgValidTagNamesRegEx.test(ye.nodeName.replace("svg:",""))})}),m.gradientDefs[ae]=m.getGradientDefs(Y),m.cssRules[ae]=m.getCSSRules(Y),m.clipPaths[ae]=ge,m.parseElements(ne,function(pe,he){j&&(j(pe,Se,he,Fe),delete m.gradientDefs[ae],delete m.cssRules[ae],delete m.clipPaths[ae])},g(Se),K,ie)}};var le=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+m.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+m.reNum+"))?\\s+(.*)");v(m,{parseFontDeclaration:function(Y,j){var K=Y.match(le);if(K){var ie=K[1],ae=K[3],ce=K[4],Ce=K[5],Se=K[6];ie&&(j.fontStyle=ie),ae&&(j.fontWeight=isNaN(parseFloat(ae))?ae:parseFloat(ae)),ce&&(j.fontSize=h(ce)),Se&&(j.fontFamily=Se),Ce&&(j.lineHeight="normal"===Ce?1:Ce)}},getGradientDefs:function(Y){var ie,K=we(Y,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),ae=0,ce={};for(ae=K.length;ae--;)(ie=K[ae]).getAttribute("xlink:href")&&W(Y,ie),ce[ie.getAttribute("id")]=ie;return ce},parseAttributes:function(Y,j,K){if(Y){var ie,ce,Ce,ae={};void 0===K&&(K=Y.getAttribute("svgUid")),Y.parentNode&&m.svgValidParentsRegEx.test(Y.parentNode.nodeName)&&(ae=m.parseAttributes(Y.parentNode,j,K));var Se=j.reduce(function(ye,Ne){return(ie=Y.getAttribute(Ne))&&(ye[Ne]=ie),ye},{}),Fe=v(function He(Y,j){var K={};for(var ie in m.cssRules[j])if(ke(Y,ie.split(" ")))for(var ae in m.cssRules[j][ie])K[ae]=m.cssRules[j][ie][ae];return K}(Y,K),m.parseStyleAttribute(Y));Se=v(Se,Fe),Fe[L]&&Y.setAttribute(L,Fe[L]),ce=Ce=ae.fontSize||m.Text.DEFAULT_SVG_FONT_SIZE,Se[E]&&(Se[E]=ce=h(Se[E],Ce));var ue,ne,ge={};for(var pe in Se)ne=U(ue=H(pe),Se[pe],ae,ce),ge[ue]=ne;ge&&ge.font&&m.parseFontDeclaration(ge.font,ge);var he=v(ae,ge);return m.svgValidParentsRegEx.test(Y.nodeName)?he:function de(Y){for(var j in T)if(void 0!==Y[T[j]]&&""!==Y[j]){if(void 0===Y[j]){if(!m.Object.prototype[j])continue;Y[j]=m.Object.prototype[j]}if(0!==Y[j].indexOf("url(")){var K=new m.Color(Y[j]);Y[j]=K.setAlpha(d(K.getAlpha()*Y[T[j]],2)).toRgba()}}return Y}(he)}},parseElements:function(Y,j,K,ie,ae){new m.ElementsParser(Y,j,K,ie,ae).parse()},parseStyleAttribute:function(Y){var j={},K=Y.getAttribute("style");return K&&("string"==typeof K?function Ee(Y,j){var K,ie;Y.replace(/;\s*$/,"").split(";").forEach(function(ae){var ce=ae.split(":");K=ce[0].trim().toLowerCase(),ie=ce[1].trim(),j[K]=ie})}(K,j):function Le(Y,j){for(var ae in Y)void 0!==Y[ae]&&(j[ae.toLowerCase()]=Y[ae])}(K,j)),j},parsePointsAttribute:function(Y){if(!Y)return null;var K,ie,j=[];for(K=0,ie=(Y=(Y=Y.replace(/,/g," ").trim()).split(/\s+/)).length;K<ie;K+=2)j.push({x:parseFloat(Y[K]),y:parseFloat(Y[K+1])});return j},getCSSRules:function(Y){var K,ie,j=Y.getElementsByTagName("style"),ae={};for(K=0,ie=j.length;K<ie;K++){var Ce=j[K].textContent;""!==(Ce=Ce.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&Ce.split("}").filter(function(Se){return Se.trim()}).forEach(function(Se){var Fe=Se.split("{"),ue={},ge=Fe[1].trim().split(";").filter(function(Ne){return Ne.trim()});for(K=0,ie=ge.length;K<ie;K++){var pe=ge[K].split(":"),he=pe[0].trim(),ye=pe[1].trim();ue[he]=ye}(Se=Fe[0].trim()).split(",").forEach(function(Ne){""!==(Ne=Ne.replace(/^svg/i,"").trim())&&(ae[Ne]?m.util.object.extend(ae[Ne],ue):ae[Ne]=m.util.object.clone(ue))})})}return ae},loadSVGFromURL:function(Y,j,K,ie){Y=Y.replace(/^\n\s*/,"").trim(),new m.util.request(Y,{method:"get",onComplete:function ae(ce){var Ce=ce.responseXML;if(!Ce||!Ce.documentElement)return j&&j(null),!1;m.parseSVGDocument(Ce.documentElement,function(Se,Fe,ue,ne){j&&j(Se,Fe,ue,ne)},K,ie)}})},loadSVGFromString:function(Y,j,K,ie){var ce=(new m.window.DOMParser).parseFromString(Y.trim(),"text/xml");m.parseSVGDocument(ce.documentElement,function(Ce,Se,Fe,ue){j(Ce,Se,Fe,ue)},K,ie)}})}(ht),S.ElementsParser=function(C,m,v,g,d,h){this.elements=C,this.callback=m,this.options=v,this.reviver=g,this.svgUid=v&&v.svgUid||0,this.parsingOptions=d,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=h},function(C){C.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},C.createObjects=function(){var m=this;this.elements.forEach(function(v,g){v.setAttribute("svgUid",m.svgUid),m.createObject(v,g)})},C.findTag=function(m){return S[S.util.string.capitalize(m.tagName.replace("svg:",""))]},C.createObject=function(m,v){var g=this.findTag(m);if(g&&g.fromElement)try{g.fromElement(m,this.createCallback(v,m),this.options)}catch(d){S.log(d)}else this.checkIfDone()},C.createCallback=function(m,v){var g=this;return function(d){var h;g.resolveGradient(d,v,"fill"),g.resolveGradient(d,v,"stroke"),d instanceof S.Image&&d._originalElement&&(h=d.parsePreserveAspectRatioAttribute(v)),d._removeTransformMatrix(h),g.resolveClipPath(d,v),g.reviver&&g.reviver(v,d),g.instances[m]=d,g.checkIfDone()}},C.extractPropertyDefinition=function(m,v,g){var d=m[v],h=this.regexUrl;if(h.test(d)){h.lastIndex=0;var c=h.exec(d)[1];return h.lastIndex=0,S[g][this.svgUid][c]}},C.resolveGradient=function(m,v,g){var d=this.extractPropertyDefinition(m,g,"gradientDefs");if(d){var h=v.getAttribute(g+"-opacity"),c=S.Gradient.fromElement(d,m,h,this.options);m.set(g,c)}},C.createClipPathCallback=function(m,v){return function(g){g._removeTransformMatrix(),g.fillRule=g.clipRule,v.push(g)}},C.resolveClipPath=function(m,v){var d,c,f,_,g=this.extractPropertyDefinition(m,"clipPath","clipPaths");if(g){f=[],c=S.util.invertTransform(m.calcTransformMatrix());for(var y=g[0].parentNode,x=v;x.parentNode&&x.getAttribute("clip-path")!==m.clipPath;)x=x.parentNode;x.parentNode.appendChild(y);for(var T=0;T<g.length;T++)this.findTag(d=g[T]).fromElement(d,this.createClipPathCallback(m,f),this.options);g=1===f.length?f[0]:new S.Group(f),_=S.util.multiplyTransformMatrices(c,g.calcTransformMatrix()),g.clipPath&&this.resolveClipPath(g,x);var u=S.util.qrDecompose(_);g.flipX=!1,g.flipY=!1,g.set("scaleX",u.scaleX),g.set("scaleY",u.scaleY),g.angle=u.angle,g.skewX=u.skewX,g.skewY=0,g.setPositionByOrigin({x:u.translateX,y:u.translateY},"center","center"),m.clipPath=g}else delete m.clipPath},C.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(m){return null!=m}),this.callback(this.instances,this.elements))}}(S.ElementsParser.prototype),function(C){"use strict";var m=C.fabric||(C.fabric={});function v(g,d){this.x=g,this.y=d}m.Point?m.warn("fabric.Point is already defined"):(m.Point=v,v.prototype={type:"point",constructor:v,add:function(g){return new v(this.x+g.x,this.y+g.y)},addEquals:function(g){return this.x+=g.x,this.y+=g.y,this},scalarAdd:function(g){return new v(this.x+g,this.y+g)},scalarAddEquals:function(g){return this.x+=g,this.y+=g,this},subtract:function(g){return new v(this.x-g.x,this.y-g.y)},subtractEquals:function(g){return this.x-=g.x,this.y-=g.y,this},scalarSubtract:function(g){return new v(this.x-g,this.y-g)},scalarSubtractEquals:function(g){return this.x-=g,this.y-=g,this},multiply:function(g){return new v(this.x*g,this.y*g)},multiplyEquals:function(g){return this.x*=g,this.y*=g,this},divide:function(g){return new v(this.x/g,this.y/g)},divideEquals:function(g){return this.x/=g,this.y/=g,this},eq:function(g){return this.x===g.x&&this.y===g.y},lt:function(g){return this.x<g.x&&this.y<g.y},lte:function(g){return this.x<=g.x&&this.y<=g.y},gt:function(g){return this.x>g.x&&this.y>g.y},gte:function(g){return this.x>=g.x&&this.y>=g.y},lerp:function(g,d){return void 0===d&&(d=.5),d=Math.max(Math.min(1,d),0),new v(this.x+(g.x-this.x)*d,this.y+(g.y-this.y)*d)},distanceFrom:function(g){var d=this.x-g.x,h=this.y-g.y;return Math.sqrt(d*d+h*h)},midPointFrom:function(g){return this.lerp(g)},min:function(g){return new v(Math.min(this.x,g.x),Math.min(this.y,g.y))},max:function(g){return new v(Math.max(this.x,g.x),Math.max(this.y,g.y))},toString:function(){return this.x+","+this.y},setXY:function(g,d){return this.x=g,this.y=d,this},setX:function(g){return this.x=g,this},setY:function(g){return this.y=g,this},setFromPoint:function(g){return this.x=g.x,this.y=g.y,this},swap:function(g){var d=this.x,h=this.y;this.x=g.x,this.y=g.y,g.x=d,g.y=h},clone:function(){return new v(this.x,this.y)}})}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={});function v(g){this.status=g,this.points=[]}m.Intersection?m.warn("fabric.Intersection is already defined"):(m.Intersection=v,m.Intersection.prototype={constructor:v,appendPoint:function(g){return this.points.push(g),this},appendPoints:function(g){return this.points=this.points.concat(g),this}},m.Intersection.intersectLineLine=function(g,d,h,c){var f,_=(c.x-h.x)*(g.y-h.y)-(c.y-h.y)*(g.x-h.x),u=(d.x-g.x)*(g.y-h.y)-(d.y-g.y)*(g.x-h.x),y=(c.y-h.y)*(d.x-g.x)-(c.x-h.x)*(d.y-g.y);if(0!==y){var x=_/y,T=u/y;0<=x&&x<=1&&0<=T&&T<=1?(f=new v("Intersection")).appendPoint(new m.Point(g.x+x*(d.x-g.x),g.y+x*(d.y-g.y))):f=new v}else f=new v(0===_||0===u?"Coincident":"Parallel");return f},m.Intersection.intersectLinePolygon=function(g,d,h){var y,x,c=new v,f=h.length;for(x=0;x<f;x++)y=v.intersectLineLine(g,d,h[x],h[(x+1)%f]),c.appendPoints(y.points);return c.points.length>0&&(c.status="Intersection"),c},m.Intersection.intersectPolygonPolygon=function(g,d){var f,h=new v,c=g.length;for(f=0;f<c;f++){var y=v.intersectLinePolygon(g[f],g[(f+1)%c],d);h.appendPoints(y.points)}return h.points.length>0&&(h.status="Intersection"),h},m.Intersection.intersectPolygonRectangle=function(g,d,h){var c=d.min(h),f=d.max(h),_=new m.Point(f.x,c.y),u=new m.Point(c.x,f.y),y=v.intersectLinePolygon(c,_,g),x=v.intersectLinePolygon(_,f,g),T=v.intersectLinePolygon(f,u,g),E=v.intersectLinePolygon(u,c,g),L=new v;return L.appendPoints(y.points),L.appendPoints(x.points),L.appendPoints(T.points),L.appendPoints(E.points),L.points.length>0&&(L.status="Intersection"),L})}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={});function v(d){d?this._tryParsingColor(d):this.setSource([0,0,0,1])}function g(d,h,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?d+6*(h-d)*c:c<.5?h:c<2/3?d+(h-d)*(2/3-c)*6:d}m.Color?m.warn("fabric.Color is already defined."):(m.Color=v,m.Color.prototype={_tryParsingColor:function(d){var h;d in v.colorNameMap&&(d=v.colorNameMap[d]),"transparent"===d&&(h=[255,255,255,0]),h||(h=v.sourceFromHex(d)),h||(h=v.sourceFromRgb(d)),h||(h=v.sourceFromHsl(d)),h||(h=[0,0,0,1]),h&&this.setSource(h)},_rgbToHsl:function(d,h,c){var f,_,u,y=m.util.array.max([d/=255,h/=255,c/=255]),x=m.util.array.min([d,h,c]);if(u=(y+x)/2,y===x)f=_=0;else{var T=y-x;switch(_=u>.5?T/(2-y-x):T/(y+x),y){case d:f=(h-c)/T+(h<c?6:0);break;case h:f=(c-d)/T+2;break;case c:f=(d-h)/T+4}f/=6}return[Math.round(360*f),Math.round(100*_),Math.round(100*u)]},getSource:function(){return this._source},setSource:function(d){this._source=d},toRgb:function(){var d=this.getSource();return"rgb("+d[0]+","+d[1]+","+d[2]+")"},toRgba:function(){var d=this.getSource();return"rgba("+d[0]+","+d[1]+","+d[2]+","+d[3]+")"},toHsl:function(){var d=this.getSource(),h=this._rgbToHsl(d[0],d[1],d[2]);return"hsl("+h[0]+","+h[1]+"%,"+h[2]+"%)"},toHsla:function(){var d=this.getSource(),h=this._rgbToHsl(d[0],d[1],d[2]);return"hsla("+h[0]+","+h[1]+"%,"+h[2]+"%,"+d[3]+")"},toHex:function(){var h,c,f,d=this.getSource();return h=1===(h=d[0].toString(16)).length?"0"+h:h,c=1===(c=d[1].toString(16)).length?"0"+c:c,f=1===(f=d[2].toString(16)).length?"0"+f:f,h.toUpperCase()+c.toUpperCase()+f.toUpperCase()},toHexa:function(){var h,d=this.getSource();return h=1===(h=(h=Math.round(255*d[3])).toString(16)).length?"0"+h:h,this.toHex()+h.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(d){var h=this.getSource();return h[3]=d,this.setSource(h),this},toGrayscale:function(){var d=this.getSource(),h=parseInt((.3*d[0]+.59*d[1]+.11*d[2]).toFixed(0),10);return this.setSource([h,h,h,d[3]]),this},toBlackWhite:function(d){var h=this.getSource(),c=(.3*h[0]+.59*h[1]+.11*h[2]).toFixed(0),f=h[3];return d=d||127,c=Number(c)<Number(d)?0:255,this.setSource([c,c,c,f]),this},overlayWith:function(d){d instanceof v||(d=new v(d));var y,h=[],c=this.getAlpha(),_=this.getSource(),u=d.getSource();for(y=0;y<3;y++)h.push(Math.round(.5*_[y]+.5*u[y]));return h[3]=c,this.setSource(h),this}},m.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,m.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,m.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,m.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},m.Color.fromRgb=function(d){return v.fromSource(v.sourceFromRgb(d))},m.Color.sourceFromRgb=function(d){var h=d.match(v.reRGBa);if(h){var c=parseInt(h[1],10)/(/%$/.test(h[1])?100:1)*(/%$/.test(h[1])?255:1),f=parseInt(h[2],10)/(/%$/.test(h[2])?100:1)*(/%$/.test(h[2])?255:1),_=parseInt(h[3],10)/(/%$/.test(h[3])?100:1)*(/%$/.test(h[3])?255:1);return[parseInt(c,10),parseInt(f,10),parseInt(_,10),h[4]?parseFloat(h[4]):1]}},m.Color.fromRgba=v.fromRgb,m.Color.fromHsl=function(d){return v.fromSource(v.sourceFromHsl(d))},m.Color.sourceFromHsl=function(d){var h=d.match(v.reHSLa);if(h){var u,y,x,c=(parseFloat(h[1])%360+360)%360/360,f=parseFloat(h[2])/(/%$/.test(h[2])?100:1),_=parseFloat(h[3])/(/%$/.test(h[3])?100:1);if(0===f)u=y=x=_;else{var T=_<=.5?_*(f+1):_+f-_*f,E=2*_-T;u=g(E,T,c+1/3),y=g(E,T,c),x=g(E,T,c-1/3)}return[Math.round(255*u),Math.round(255*y),Math.round(255*x),h[4]?parseFloat(h[4]):1]}},m.Color.fromHsla=v.fromHsl,m.Color.fromHex=function(d){return v.fromSource(v.sourceFromHex(d))},m.Color.sourceFromHex=function(d){if(d.match(v.reHex)){var h=d.slice(d.indexOf("#")+1),c=3===h.length||4===h.length,f=8===h.length||4===h.length,_=c?h.charAt(0)+h.charAt(0):h.substring(0,2),u=c?h.charAt(1)+h.charAt(1):h.substring(2,4),y=c?h.charAt(2)+h.charAt(2):h.substring(4,6),x=f?c?h.charAt(3)+h.charAt(3):h.substring(6,8):"FF";return[parseInt(_,16),parseInt(u,16),parseInt(y,16),parseFloat((parseInt(x,16)/255).toFixed(2))]}},m.Color.fromSource=function(d){var h=new v;return h.setSource(d),h})}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=["e","se","s","sw","w","nw","n","ne","e"],g=["ns","nesw","ew","nwse"],d={},h="left",c="top",f="right",_="bottom",u="center",y={top:_,bottom:c,left:f,right:h,center:u},x=m.util.radiansToDegrees,T=Math.sign||function(ue){return(ue>0)-(ue<0)||+ue};function E(ue,ne){var ge=ue.angle+x(Math.atan2(ne.y,ne.x))+360;return Math.round(ge%360/45)}function L(ue,ne){var ge=ne.transform.target,pe=ge.canvas,he=m.util.object.clone(ne);he.target=ge,pe&&pe.fire("object:"+ue,he),ge.fire(ue,ne)}function H(ue,ne){var ge=ne.canvas,he=ue[ge.uniScaleKey];return ge.uniformScaling&&!he||!ge.uniformScaling&&he}function U(ue){return ue.originX===u&&ue.originY===u}function Q(ue,ne,ge){var pe=ue.lockScalingX,he=ue.lockScalingY;return!!(pe&&he||!ne&&(pe||he)&&ge||pe&&"x"===ne||he&&"y"===ne)}function ke(ue,ne,ge,pe){return{e:ue,transform:ne,pointer:{x:ge,y:pe}}}function Re(ue){return function(ne,ge,pe,he){var ye=ge.target,Ne=ye.getCenterPoint(),pt=ye.translateToOriginPoint(Ne,ge.originX,ge.originY),tt=ue(ne,ge,pe,he);return ye.setPositionByOrigin(pt,ge.originX,ge.originY),tt}}function Ge(ue,ne){return function(ge,pe,he,ye){var Ne=ne(ge,pe,he,ye);return Ne&&L(ue,ke(ge,pe,he,ye)),Ne}}function Me(ue,ne,ge,pe,he){var ye=ue.target,Ne=ye.controls[ue.corner],pt=ye.canvas.getZoom(),tt=ye.padding/pt,me=ye.toLocalPoint(new m.Point(pe,he),ne,ge);return me.x>=tt&&(me.x-=tt),me.x<=-tt&&(me.x+=tt),me.y>=tt&&(me.y-=tt),me.y<=tt&&(me.y+=tt),me.x-=Ne.offsetX,me.y-=Ne.offsetY,me}function qe(ue){return ue.flipX!==ue.flipY}function z(ue,ne,ge,pe,he){if(0!==ue[ne]){var ye=ue._getTransformedDimensions()[pe];ue.set(ge,he/ye*ue[ge])}}function X(ue,ne,ge,pe){var me,he=ne.target,ye=he._getTransformedDimensions(0,he.skewY),Ne=Me(ne,ne.originX,ne.originY,ge,pe),pt=Math.abs(2*Ne.x)-ye.x,tt=he.skewX;pt<2?me=0:(me=x(Math.atan2(pt/he.scaleX,ye.y/he.scaleY)),ne.originX===h&&ne.originY===_&&(me=-me),ne.originX===f&&ne.originY===c&&(me=-me),qe(he)&&(me=-me));var it=tt!==me;if(it){var wt=he._getTransformedDimensions().y;he.set("skewX",me),z(he,"skewY","scaleY","y",wt)}return it}function $(ue,ne,ge,pe){var me,he=ne.target,ye=he._getTransformedDimensions(he.skewX,0),Ne=Me(ne,ne.originX,ne.originY,ge,pe),pt=Math.abs(2*Ne.y)-ye.y,tt=he.skewY;pt<2?me=0:(me=x(Math.atan2(pt/he.scaleY,ye.x/he.scaleX)),ne.originX===h&&ne.originY===_&&(me=-me),ne.originX===f&&ne.originY===c&&(me=-me),qe(he)&&(me=-me));var it=tt!==me;if(it){var wt=he._getTransformedDimensions().x;he.set("skewY",me),z(he,"skewX","scaleX","x",wt)}return it}function j(ue,ne,ge,pe,he){var me,it,wt,Dt,ti,On,ye=ne.target,Ne=ye.lockScalingX,pt=ye.lockScalingY,tt=(he=he||{}).by,rn=H(ue,ye),Kt=Q(ye,tt,rn),ao=ne.gestureScale;if(Kt)return!1;if(ao)it=ne.scaleX*ao,wt=ne.scaleY*ao;else{if(me=Me(ne,ne.originX,ne.originY,ge,pe),ti="y"!==tt?T(me.x):1,On="x"!==tt?T(me.y):1,ne.signX||(ne.signX=ti),ne.signY||(ne.signY=On),ye.lockScalingFlip&&(ne.signX!==ti||ne.signY!==On))return!1;if(Dt=ye._getTransformedDimensions(),rn&&!tt){var Js=Math.abs(me.x)+Math.abs(me.y),mr=ne.original,Lf=Js/(Math.abs(Dt.x*mr.scaleX/ye.scaleX)+Math.abs(Dt.y*mr.scaleY/ye.scaleY));it=mr.scaleX*Lf,wt=mr.scaleY*Lf}else it=Math.abs(me.x*ye.scaleX/Dt.x),wt=Math.abs(me.y*ye.scaleY/Dt.y);U(ne)&&(it*=2,wt*=2),ne.signX!==ti&&"y"!==tt&&(ne.originX=y[ne.originX],it*=-1,ne.signX=ti),ne.signY!==On&&"x"!==tt&&(ne.originY=y[ne.originY],wt*=-1,ne.signY=On)}var Tb=ye.scaleX,kl=ye.scaleY;return tt?("x"===tt&&ye.set("scaleX",it),"y"===tt&&ye.set("scaleY",wt)):(!Ne&&ye.set("scaleX",it),!pt&&ye.set("scaleY",wt)),Tb!==ye.scaleX||kl!==ye.scaleY}d.scaleCursorStyleHandler=function de(ue,ne,ge){var he=H(ue,ge),ye="";if(0!==ne.x&&0===ne.y?ye="x":0===ne.x&&0!==ne.y&&(ye="y"),Q(ge,ye,he))return"not-allowed";var Ne=E(ge,ne);return v[Ne]+"-resize"},d.skewCursorStyleHandler=function we(ue,ne,ge){if(0!==ne.x&&ge.lockSkewingY||0!==ne.y&&ge.lockSkewingX)return"not-allowed";var he=E(ge,ne)%4;return g[he]+"-resize"},d.scaleSkewCursorStyleHandler=function Ee(ue,ne,ge){return ue[ge.canvas.altActionKey]?d.skewCursorStyleHandler(ue,ne,ge):d.scaleCursorStyleHandler(ue,ne,ge)},d.rotationWithSnapping=Ge("rotating",Re(function Y(ue,ne,ge,pe){var he=ne,ye=he.target,Ne=ye.translateToOriginPoint(ye.getCenterPoint(),he.originX,he.originY);if(ye.lockRotation)return!1;var it,pt=Math.atan2(he.ey-Ne.y,he.ex-Ne.x),tt=Math.atan2(pe-Ne.y,ge-Ne.x),me=x(tt-pt+he.theta);if(ye.snapAngle>0){var wt=ye.snapAngle,Dt=ye.snapThreshold||wt,rn=Math.ceil(me/wt)*wt,Kt=Math.floor(me/wt)*wt;Math.abs(me-Kt)<Dt?me=Kt:Math.abs(me-rn)<Dt&&(me=rn)}return me<0&&(me=360+me),it=ye.angle!==(me%=360),ye.angle=me,it})),d.scalingEqually=Ge("scaling",Re(function K(ue,ne,ge,pe){return j(ue,ne,ge,pe)})),d.scalingX=Ge("scaling",Re(function ie(ue,ne,ge,pe){return j(ue,ne,ge,pe,{by:"x"})})),d.scalingY=Ge("scaling",Re(function ae(ue,ne,ge,pe){return j(ue,ne,ge,pe,{by:"y"})})),d.scalingYOrSkewingX=function ce(ue,ne,ge,pe){return ue[ne.target.canvas.altActionKey]?d.skewHandlerX(ue,ne,ge,pe):d.scalingY(ue,ne,ge,pe)},d.scalingXOrSkewingY=function Ce(ue,ne,ge,pe){return ue[ne.target.canvas.altActionKey]?d.skewHandlerY(ue,ne,ge,pe):d.scalingX(ue,ne,ge,pe)},d.changeWidth=Ge("resizing",Re(function Se(ue,ne,ge,pe){var he=ne.target,ye=Me(ne,ne.originX,ne.originY,ge,pe),Ne=he.strokeWidth/(he.strokeUniform?he.scaleX:1),pt=U(ne)?2:1,tt=he.width,me=Math.abs(ye.x*pt/he.scaleX)-Ne;return he.set("width",Math.max(me,0)),tt!==me})),d.skewHandlerX=function W(ue,ne,ge,pe){var Ne,he=ne.target,ye=he.skewX,pt=ne.originY;return!he.lockSkewingX&&(0===ye?Ne=Me(ne,u,u,ge,pe).x>0?h:f:(ye>0&&(Ne=pt===c?h:f),ye<0&&(Ne=pt===c?f:h),qe(he)&&(Ne=Ne===h?f:h)),ne.originX=Ne,Ge("skewing",Re(X))(ue,ne,ge,pe))},d.skewHandlerY=function le(ue,ne,ge,pe){var Ne,he=ne.target,ye=he.skewY,pt=ne.originX;return!he.lockSkewingY&&(0===ye?Ne=Me(ne,u,u,ge,pe).y>0?c:_:(ye>0&&(Ne=pt===h?c:_),ye<0&&(Ne=pt===h?_:c),qe(he)&&(Ne=Ne===c?_:c)),ne.originY=Ne,Ge("skewing",Re($))(ue,ne,ge,pe))},d.dragHandler=function Fe(ue,ne,ge,pe){var he=ne.target,ye=ge-ne.offsetX,Ne=pe-ne.offsetY,pt=!he.get("lockMovementX")&&he.left!==ye,tt=!he.get("lockMovementY")&&he.top!==Ne;return pt&&he.set("left",ye),tt&&he.set("top",Ne),(pt||tt)&&L("moving",ke(ue,ne,ge,pe)),pt||tt},d.scaleOrSkewActionName=function Le(ue,ne,ge){var pe=ue[ge.canvas.altActionKey];return 0===ne.x?pe?"skewX":"scaleY":0===ne.y?pe?"skewY":"scaleX":void 0},d.rotationStyleHandler=function He(ue,ne,ge){return ge.lockRotation?"not-allowed":ne.cursorStyle},d.fireEvent=L,d.wrapWithFixedAnchor=Re,d.wrapWithFireEvent=Ge,d.getLocalPoint=Me,m.controlsUtils=d}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.degreesToRadians,g=m.controlsUtils;g.renderCircleControl=function d(c,f,_,u,y){u=u||{};var de,x=this.sizeX||u.cornerSize||y.cornerSize,T=this.sizeY||u.cornerSize||y.cornerSize,E=void 0!==u.transparentCorners?u.transparentCorners:y.transparentCorners,L=E?"stroke":"fill",H=!E&&(u.cornerStrokeColor||y.cornerStrokeColor),U=f,Q=_;c.save(),c.fillStyle=u.cornerColor||y.cornerColor,c.strokeStyle=u.cornerStrokeColor||y.cornerStrokeColor,x>T?(de=x,c.scale(1,T/x),Q=_*x/T):T>x?(de=T,c.scale(x/T,1),U=f*T/x):de=x,c.lineWidth=1,c.beginPath(),c.arc(U,Q,de/2,0,2*Math.PI,!1),c[L](),H&&c.stroke(),c.restore()},g.renderSquareControl=function h(c,f,_,u,y){u=u||{};var x=this.sizeX||u.cornerSize||y.cornerSize,T=this.sizeY||u.cornerSize||y.cornerSize,E=void 0!==u.transparentCorners?u.transparentCorners:y.transparentCorners,L=E?"stroke":"fill",H=!E&&(u.cornerStrokeColor||y.cornerStrokeColor),U=x/2,Q=T/2;c.save(),c.fillStyle=u.cornerColor||y.cornerColor,c.strokeStyle=u.cornerStrokeColor||y.cornerStrokeColor,c.lineWidth=1,c.translate(f,_),c.rotate(v(y.angle)),c[L+"Rect"](-U,-Q,x,T),H&&c.strokeRect(-U,-Q,x,T),c.restore()}}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={});m.Control=function v(g){for(var d in g)this[d]=g[d]},m.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(g,d){return d.cursorStyle},getActionName:function(g,d){return d.actionName},getVisibility:function(g,d){var h=g._controlsVisibility;return h&&void 0!==h[d]?h[d]:this.visible},setVisibility:function(g){this.visible=g},positionHandler:function(g,d){return m.util.transformPoint({x:this.x*g.x+this.offsetX,y:this.y*g.y+this.offsetY},d)},calcCornerCoords:function(g,d,h,c,f){var _,u,y,x,T=f?this.touchSizeX:this.sizeX,E=f?this.touchSizeY:this.sizeY;if(T&&E&&T!==E){var L=Math.atan2(E,T),H=Math.sqrt(T*T+E*E)/2,U=L-m.util.degreesToRadians(g),Q=Math.PI/2-L-m.util.degreesToRadians(g);_=H*m.util.cos(U),u=H*m.util.sin(U),y=H*m.util.cos(Q),x=H*m.util.sin(Q)}else H=.7071067812*(T&&E?T:d),U=m.util.degreesToRadians(45-g),_=y=H*m.util.cos(U),u=x=H*m.util.sin(U);return{tl:{x:h-x,y:c-y},tr:{x:h+_,y:c-u},bl:{x:h-_,y:c+u},br:{x:h+x,y:c+y}}},render:function(g,d,h,c,f){"circle"===((c=c||{}).cornerStyle||f.cornerStyle)?m.controlsUtils.renderCircleControl.call(this,g,d,h,c,f):m.controlsUtils.renderSquareControl.call(this,g,d,h,c,f)}}}(ht),function(){function C(h,c){var u,y,x,T,f=h.getAttribute("style"),_=h.getAttribute("offset")||0;if(_=(_=parseFloat(_)/(/%$/.test(_)?100:1))<0?0:_>1?1:_,f){var E=f.split(/\s*;\s*/);for(""===E[E.length-1]&&E.pop(),T=E.length;T--;){var L=E[T].split(/\s*:\s*/),H=L[0].trim(),U=L[1].trim();"stop-color"===H?u=U:"stop-opacity"===H&&(x=U)}}return u||(u=h.getAttribute("stop-color")||"rgb(0,0,0)"),x||(x=h.getAttribute("stop-opacity")),y=(u=new S.Color(u)).getAlpha(),x=isNaN(parseFloat(x))?1:parseFloat(x),x*=y*c,{offset:_,color:u.toRgb(),opacity:x}}var g=S.util.object.clone;S.Gradient=S.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(h){h||(h={}),h.coords||(h.coords={});var c,f=this;Object.keys(h).forEach(function(_){f[_]=h[_]}),this.id?this.id+="_"+S.Object.__uid++:this.id=S.Object.__uid++,c={x1:h.coords.x1||0,y1:h.coords.y1||0,x2:h.coords.x2||0,y2:h.coords.y2||0},"radial"===this.type&&(c.r1=h.coords.r1||0,c.r2=h.coords.r2||0),this.coords=c,this.colorStops=h.colorStops.slice()},addColorStop:function(h){for(var c in h){var f=new S.Color(h[c]);this.colorStops.push({offset:parseFloat(c),color:f.toRgb(),opacity:f.getAlpha()})}return this},toObject:function(h){var c={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return S.util.populateWithProperties(this,c,h),c},toSVG:function(h,y){var _,u,x,T,f=g(this.coords,!0),E=(y=y||{},g(this.colorStops,!0)),L=f.r1>f.r2,H=this.gradientTransform?this.gradientTransform.concat():S.iMatrix.concat(),U=-this.offsetX,Q=-this.offsetY,de=!!y.additionalTransform,we="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(E.sort(function(Re,Ge){return Re.offset-Ge.offset}),"objectBoundingBox"===we?(U/=h.width,Q/=h.height):(U+=h.width/2,Q+=h.height/2),"path"===h.type&&"percentage"!==this.gradientUnits&&(U-=h.pathOffset.x,Q-=h.pathOffset.y),H[4]-=U,H[5]-=Q,T='id="SVGID_'+this.id+'" gradientUnits="'+we+'"',T+=' gradientTransform="'+(de?y.additionalTransform+" ":"")+S.util.matrixToSVG(H)+'" ',"linear"===this.type?x=["<linearGradient ",T,' x1="',f.x1,'" y1="',f.y1,'" x2="',f.x2,'" y2="',f.y2,'">\n']:"radial"===this.type&&(x=["<radialGradient ",T,' cx="',L?f.x1:f.x2,'" cy="',L?f.y1:f.y2,'" r="',L?f.r1:f.r2,'" fx="',L?f.x2:f.x1,'" fy="',L?f.y2:f.y1,'">\n']),"radial"===this.type){if(L)for((E=E.concat()).reverse(),_=0,u=E.length;_<u;_++)E[_].offset=1-E[_].offset;var Ee=Math.min(f.r1,f.r2);if(Ee>0){var He=Ee/Math.max(f.r1,f.r2);for(_=0,u=E.length;_<u;_++)E[_].offset+=He*(1-E[_].offset)}}for(_=0,u=E.length;_<u;_++){var ke=E[_];x.push("<stop ",'offset="',100*ke.offset+"%",'" style="stop-color:',ke.color,void 0!==ke.opacity?";stop-opacity: "+ke.opacity:";",'"/>\n')}return x.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),x.join("")},toLive:function(h){var c,_,u,f=S.util.object.clone(this.coords);if(this.type){for("linear"===this.type?c=h.createLinearGradient(f.x1,f.y1,f.x2,f.y2):"radial"===this.type&&(c=h.createRadialGradient(f.x1,f.y1,f.r1,f.x2,f.y2,f.r2)),_=0,u=this.colorStops.length;_<u;_++){var y=this.colorStops[_].color,x=this.colorStops[_].opacity,T=this.colorStops[_].offset;void 0!==x&&(y=new S.Color(y).setAlpha(x).toRgba()),c.addColorStop(T,y)}return c}}}),S.util.object.extend(S.Gradient,{fromElement:function(h,c,f,_){var u=parseFloat(f)/(/%$/.test(f)?100:1);u=u<0?0:u>1?1:u,isNaN(u)&&(u=1);var x,H,U,we,y=h.getElementsByTagName("stop"),T="userSpaceOnUse"===h.getAttribute("gradientUnits")?"pixels":"percentage",E=h.getAttribute("gradientTransform")||"",L=[],Q=0,de=0;for("linearGradient"===h.nodeName||"LINEARGRADIENT"===h.nodeName?(x="linear",H=function m(h){return{x1:h.getAttribute("x1")||0,y1:h.getAttribute("y1")||0,x2:h.getAttribute("x2")||"100%",y2:h.getAttribute("y2")||0}}(h)):(x="radial",H=function v(h){return{x1:h.getAttribute("fx")||h.getAttribute("cx")||"50%",y1:h.getAttribute("fy")||h.getAttribute("cy")||"50%",r1:0,x2:h.getAttribute("cx")||"50%",y2:h.getAttribute("cy")||"50%",r2:h.getAttribute("r")||"50%"}}(h)),U=y.length;U--;)L.push(C(y[U],u));return we=S.parseTransformAttribute(E),function d(h,c,f,_){var u,y;Object.keys(c).forEach(function(x){"Infinity"===(u=c[x])?y=1:"-Infinity"===u?y=0:(y=parseFloat(c[x],10),"string"==typeof u&&/^(\d+\.\d+)%|(\d+)%$/.test(u)&&(y*=.01,"pixels"===_&&(("x1"===x||"x2"===x||"r2"===x)&&(y*=f.viewBoxWidth||f.width),("y1"===x||"y2"===x)&&(y*=f.viewBoxHeight||f.height)))),c[x]=y})}(0,H,_,T),"pixels"===T&&(Q=-c.left,de=-c.top),new S.Gradient({id:h.getAttribute("id"),type:x,coords:H,colorStops:L,gradientUnits:T,gradientTransform:we,offsetX:Q,offsetY:de})}})}(),function(){"use strict";var C=S.util.toFixed;S.Pattern=S.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(m,v){if(m||(m={}),this.id=S.Object.__uid++,this.setOptions(m),!m.source||m.source&&"string"!=typeof m.source)v&&v(this);else{var g=this;this.source=S.util.createImage(),S.util.loadImage(m.source,function(d,h){g.source=d,v&&v(g,h)},null,this.crossOrigin)}},toObject:function(m){var g,d,v=S.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?g=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(g=this.source.toDataURL()),d={type:"pattern",source:g,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:C(this.offsetX,v),offsetY:C(this.offsetY,v),patternTransform:this.patternTransform?this.patternTransform.concat():null},S.util.populateWithProperties(this,d,m),d},toSVG:function(m){var v="function"==typeof this.source?this.source():this.source,g=v.width/m.width,d=v.height/m.height,h=this.offsetX/m.width,c=this.offsetY/m.height,f="";return("repeat-x"===this.repeat||"no-repeat"===this.repeat)&&(d=1,c&&(d+=Math.abs(c))),("repeat-y"===this.repeat||"no-repeat"===this.repeat)&&(g=1,h&&(g+=Math.abs(h))),v.src?f=v.src:v.toDataURL&&(f=v.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+h+'" y="'+c+'" width="'+g+'" height="'+d+'">\n<image x="0" y="0" width="'+v.width+'" height="'+v.height+'" xlink:href="'+f+'"></image>\n</pattern>\n'},setOptions:function(m){for(var v in m)this[v]=m[v]},toLive:function(m){var v=this.source;return v&&(void 0===v.src||v.complete&&0!==v.naturalWidth&&0!==v.naturalHeight)?m.createPattern(v,this.repeat):""}})}(),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.toFixed;m.Shadow?m.warn("fabric.Shadow is already defined."):(m.Shadow=m.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(g){for(var d in"string"==typeof g&&(g=this._parseShadow(g)),g)this[d]=g[d];this.id=m.Object.__uid++},_parseShadow:function(g){var d=g.trim(),h=m.Shadow.reOffsetsAndBlur.exec(d)||[];return{color:(d.replace(m.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(h[1],10)||0,offsetY:parseFloat(h[2],10)||0,blur:parseFloat(h[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(g){var d=40,h=40,c=m.Object.NUM_FRACTION_DIGITS,f=m.util.rotateVector({x:this.offsetX,y:this.offsetY},m.util.degreesToRadians(-g.angle)),u=new m.Color(this.color);return g.width&&g.height&&(d=100*v((Math.abs(f.x)+this.blur)/g.width,c)+20,h=100*v((Math.abs(f.y)+this.blur)/g.height,c)+20),g.flipX&&(f.x*=-1),g.flipY&&(f.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+h+'%" height="'+(100+2*h)+'%" x="-'+d+'%" width="'+(100+2*d)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+v(this.blur?this.blur/2:0,c)+'"></feGaussianBlur>\n\t<feOffset dx="'+v(f.x,c)+'" dy="'+v(f.y,c)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+u.toRgb()+'" flood-opacity="'+u.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var g={},d=m.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(h){this[h]!==d[h]&&(g[h]=this[h])},this),g}}),m.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(ht),function(){"use strict";if(S.StaticCanvas)S.warn("fabric.StaticCanvas is already defined.");else{var C=S.util.object.extend,m=S.util.getElementOffset,v=S.util.removeFromArray,g=S.util.toFixed,d=S.util.transformPoint,h=S.util.invertTransform,c=S.util.getNodeCanvas,f=S.util.createCanvasElement,_=new Error("Could not initialize `canvas` element");S.StaticCanvas=S.util.createClass(S.CommonMethods,{initialize:function(u,y){y||(y={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(u,y)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:S.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(u,y){var x=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(u),this._initOptions(y),this.interactive||this._initRetinaScaling(),y.overlayImage&&this.setOverlayImage(y.overlayImage,x),y.backgroundImage&&this.setBackgroundImage(y.backgroundImage,x),y.backgroundColor&&this.setBackgroundColor(y.backgroundColor,x),y.overlayColor&&this.setOverlayColor(y.overlayColor,x),this.calcOffset()},_isRetinaScaling:function(){return S.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,S.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var u=S.devicePixelRatio;this.__initRetinaScaling(u,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(u,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(u,y,x){y.setAttribute("width",this.width*u),y.setAttribute("height",this.height*u),x.scale(u,u)},calcOffset:function(){return this._offset=m(this.lowerCanvasEl),this},setOverlayImage:function(u,y,x){return this.__setBgOverlayImage("overlayImage",u,y,x)},setBackgroundImage:function(u,y,x){return this.__setBgOverlayImage("backgroundImage",u,y,x)},setOverlayColor:function(u,y){return this.__setBgOverlayColor("overlayColor",u,y)},setBackgroundColor:function(u,y){return this.__setBgOverlayColor("backgroundColor",u,y)},__setBgOverlayImage:function(u,y,x,T){return"string"==typeof y?S.util.loadImage(y,function(E,L){if(E){var H=new S.Image(E,T);this[u]=H,H.canvas=this}x&&x(E,L)},this,T&&T.crossOrigin):(T&&y.setOptions(T),this[u]=y,y&&(y.canvas=this),x&&x(y,!1)),this},__setBgOverlayColor:function(u,y,x){return this[u]=y,this._initGradient(y,u),this._initPattern(y,u,x),this},_createCanvasElement:function(){var u=f();if(!u||(u.style||(u.style={}),void 0===u.getContext))throw _;return u},_initOptions:function(u){var y=this.lowerCanvasEl;this._setOptions(u),this.width=this.width||parseInt(y.width,10)||0,this.height=this.height||parseInt(y.height,10)||0,this.lowerCanvasEl.style&&(y.width=this.width,y.height=this.height,y.style.width=this.width+"px",y.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(u){this.lowerCanvasEl=u&&u.getContext?u:S.util.getById(u)||this._createCanvasElement(),S.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(u,y){return this.setDimensions({width:u},y)},setHeight:function(u,y){return this.setDimensions({height:u},y)},setDimensions:function(u,y){var x;for(var T in y=y||{},u)x=u[T],y.cssOnly||(this._setBackstoreDimension(T,u[T]),x+="px",this.hasLostContext=!0),y.backstoreOnly||this._setCssDimension(T,x);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),y.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(u,y){return this.lowerCanvasEl[u]=y,this.upperCanvasEl&&(this.upperCanvasEl[u]=y),this.cacheCanvasEl&&(this.cacheCanvasEl[u]=y),this[u]=y,this},_setCssDimension:function(u,y){return this.lowerCanvasEl.style[u]=y,this.upperCanvasEl&&(this.upperCanvasEl.style[u]=y),this.wrapperEl&&(this.wrapperEl.style[u]=y),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(u){var E,L,H,y=this._activeObject,x=this.backgroundImage,T=this.overlayImage;for(this.viewportTransform=u,L=0,H=this._objects.length;L<H;L++)(E=this._objects[L]).group||E.setCoords(!0);return y&&y.setCoords(),x&&x.setCoords(!0),T&&T.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(u,y){var x=u,T=this.viewportTransform.slice(0);u=d(u,h(this.viewportTransform)),T[0]=y,T[3]=y;var E=d(u,T);return T[4]+=x.x-E.x,T[5]+=x.y-E.y,this.setViewportTransform(T)},setZoom:function(u){return this.zoomToPoint(new S.Point(0,0),u),this},absolutePan:function(u){var y=this.viewportTransform.slice(0);return y[4]=-u.x,y[5]=-u.y,this.setViewportTransform(y)},relativePan:function(u){return this.absolutePan(new S.Point(-u.x-this.viewportTransform[4],-u.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(u){this.stateful&&u.setupState(),u._set("canvas",this),u.setCoords(),this.fire("object:added",{target:u}),u.fire("added")},_onObjectRemoved:function(u){this.fire("object:removed",{target:u}),u.fire("removed"),delete u.canvas},clearContext:function(u){return u.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){return this.renderCanvas(this.contextContainer,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=S.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var u={},y=this.width,x=this.height,T=h(this.viewportTransform);return u.tl=d({x:0,y:0},T),u.br=d({x:y,y:x},T),u.tr=new S.Point(u.br.x,u.tl.y),u.bl=new S.Point(u.tl.x,u.br.y),this.vptCoords=u,u},cancelRequestedRender:function(){this.isRendering&&(S.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(u,y){var x=this.viewportTransform,T=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(u),S.util.setImageSmoothing(u,this.imageSmoothingEnabled),this.fire("before:render",{ctx:u}),this._renderBackground(u),u.save(),u.transform(x[0],x[1],x[2],x[3],x[4],x[5]),this._renderObjects(u,y),u.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(u),T&&(T.canvas=this,T.shouldCache(),T._transformDone=!0,T.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(u)),this._renderOverlay(u),this.controlsAboveOverlay&&this.interactive&&this.drawControls(u),this.fire("after:render",{ctx:u})},drawClipPathOnCanvas:function(u){var y=this.viewportTransform,x=this.clipPath;u.save(),u.transform(y[0],y[1],y[2],y[3],y[4],y[5]),u.globalCompositeOperation="destination-in",x.transform(u),u.scale(1/x.zoomX,1/x.zoomY),u.drawImage(x._cacheCanvas,-x.cacheTranslationX,-x.cacheTranslationY),u.restore()},_renderObjects:function(u,y){var x,T;for(x=0,T=y.length;x<T;++x)y[x]&&y[x].render(u)},_renderBackgroundOrOverlay:function(u,y){var x=this[y+"Color"],T=this[y+"Image"],E=this.viewportTransform,L=this[y+"Vpt"];if(x||T){if(x){u.save(),u.beginPath(),u.moveTo(0,0),u.lineTo(this.width,0),u.lineTo(this.width,this.height),u.lineTo(0,this.height),u.closePath(),u.fillStyle=x.toLive?x.toLive(u,this):x,L&&u.transform(E[0],E[1],E[2],E[3],E[4],E[5]),u.transform(1,0,0,1,x.offsetX||0,x.offsetY||0);var H=x.gradientTransform||x.patternTransform;H&&u.transform(H[0],H[1],H[2],H[3],H[4],H[5]),u.fill(),u.restore()}T&&(u.save(),L&&u.transform(E[0],E[1],E[2],E[3],E[4],E[5]),T.render(u),u.restore())}},_renderBackground:function(u){this._renderBackgroundOrOverlay(u,"background")},_renderOverlay:function(u){this._renderBackgroundOrOverlay(u,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new S.Point(this.width/2,this.height/2)},centerObjectH:function(u){return this._centerObject(u,new S.Point(this.getCenterPoint().x,u.getCenterPoint().y))},centerObjectV:function(u){return this._centerObject(u,new S.Point(u.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(u){var y=this.getCenterPoint();return this._centerObject(u,y)},viewportCenterObject:function(u){var y=this.getVpCenter();return this._centerObject(u,y)},viewportCenterObjectH:function(u){var y=this.getVpCenter();return this._centerObject(u,new S.Point(y.x,u.getCenterPoint().y)),this},viewportCenterObjectV:function(u){var y=this.getVpCenter();return this._centerObject(u,new S.Point(u.getCenterPoint().x,y.y))},getVpCenter:function(){var u=this.getCenterPoint(),y=h(this.viewportTransform);return d(u,y)},_centerObject:function(u,y){return u.setPositionByOrigin(y,"center","center"),u.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(u){return this.toDatalessObject(u)},toObject:function(u){return this._toObjectMethod("toObject",u)},toDatalessObject:function(u){return this._toObjectMethod("toDatalessObject",u)},_toObjectMethod:function(u,y){var x=this.clipPath,T={version:S.version,objects:this._toObjects(u,y)};return x&&!x.excludeFromExport&&(T.clipPath=this._toObject(this.clipPath,u,y)),C(T,this.__serializeBgOverlay(u,y)),S.util.populateWithProperties(this,T,y),T},_toObjects:function(u,y){return this._objects.filter(function(x){return!x.excludeFromExport}).map(function(x){return this._toObject(x,u,y)},this)},_toObject:function(u,y,x){var T;this.includeDefaultValues||(T=u.includeDefaultValues,u.includeDefaultValues=!1);var E=u[y](x);return this.includeDefaultValues||(u.includeDefaultValues=T),E},__serializeBgOverlay:function(u,y){var x={},T=this.backgroundImage,E=this.overlayImage,L=this.backgroundColor,H=this.overlayColor;return L&&L.toObject?L.excludeFromExport||(x.background=L.toObject(y)):L&&(x.background=L),H&&H.toObject?H.excludeFromExport||(x.overlay=H.toObject(y)):H&&(x.overlay=H),T&&!T.excludeFromExport&&(x.backgroundImage=this._toObject(T,u,y)),E&&!E.excludeFromExport&&(x.overlayImage=this._toObject(E,u,y)),x},svgViewportTransformation:!0,toSVG:function(u,y){u||(u={}),u.reviver=y;var x=[];return this._setSVGPreamble(x,u),this._setSVGHeader(x,u),this.clipPath&&x.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(x,"background"),this._setSVGBgOverlayImage(x,"backgroundImage",y),this._setSVGObjects(x,y),this.clipPath&&x.push("</g>\n"),this._setSVGBgOverlayColor(x,"overlay"),this._setSVGBgOverlayImage(x,"overlayImage",y),x.push("</svg>"),x.join("")},_setSVGPreamble:function(u,y){y.suppressPreamble||u.push('<?xml version="1.0" encoding="',y.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(u,y){var E,x=y.width||this.width,T=y.height||this.height,L='viewBox="0 0 '+this.width+" "+this.height+'" ',H=S.Object.NUM_FRACTION_DIGITS;y.viewBox?L='viewBox="'+y.viewBox.x+" "+y.viewBox.y+" "+y.viewBox.width+" "+y.viewBox.height+'" ':this.svgViewportTransformation&&(L='viewBox="'+g(-(E=this.viewportTransform)[4]/E[0],H)+" "+g(-E[5]/E[3],H)+" "+g(this.width/E[0],H)+" "+g(this.height/E[3],H)+'" '),u.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',x,'" ','height="',T,'" ',L,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",S.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(y),"</defs>\n")},createSVGClipPathMarkup:function(u){var y=this.clipPath;return y?(y.clipPathId="CLIPPATH_"+S.Object.__uid++,'<clipPath id="'+y.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(u.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var u=this;return["background","overlay"].map(function(x){var T=u[x+"Color"];if(T&&T.toLive){var E=u[x+"Vpt"],L=u.viewportTransform;return T.toSVG({width:u.width/(E?L[0]:1),height:u.height/(E?L[3]:1)},{additionalTransform:E?S.util.matrixToSVG(L):""})}}).join("")},createSVGFontFacesMarkup:function(){var x,T,E,L,H,Q,de,we,u="",y={},Ee=S.fontPaths,Le=[];for(this._objects.forEach(function ke(Re){Le.push(Re),Re._objects&&Re._objects.forEach(ke)}),de=0,we=Le.length;de<we;de++)if(T=(x=Le[de]).fontFamily,-1!==x.type.indexOf("text")&&!y[T]&&Ee[T]&&(y[T]=!0,x.styles))for(H in E=x.styles)for(Q in L=E[H])!y[T=L[Q].fontFamily]&&Ee[T]&&(y[T]=!0);for(var He in y)u+=["\t\t@font-face {\n","\t\t\tfont-family: '",He,"';\n","\t\t\tsrc: url('",Ee[He],"');\n","\t\t}\n"].join("");return u&&(u=['\t<style type="text/css">',"<![CDATA[\n",u,"]]>","</style>\n"].join("")),u},_setSVGObjects:function(u,y){var x,T,E,L=this._objects;for(T=0,E=L.length;T<E;T++)!(x=L[T]).excludeFromExport&&this._setSVGObject(u,x,y)},_setSVGObject:function(u,y,x){u.push(y.toSVG(x))},_setSVGBgOverlayImage:function(u,y,x){this[y]&&!this[y].excludeFromExport&&this[y].toSVG&&u.push(this[y].toSVG(x))},_setSVGBgOverlayColor:function(u,y){var x=this[y+"Color"],E=this.width,L=this.height;if(x)if(x.toLive){var H=x.repeat,U=S.util.invertTransform(this.viewportTransform),de=this[y+"Vpt"]?S.util.matrixToSVG(U):"";u.push('<rect transform="'+de+" translate(",E/2,",",L/2,')"',' x="',x.offsetX-E/2,'" y="',x.offsetY-L/2,'" ','width="',"repeat-y"===H||"no-repeat"===H?x.source.width:E,'" height="',"repeat-x"===H||"no-repeat"===H?x.source.height:L,'" fill="url(#SVGID_'+x.id+')"',"></rect>\n")}else u.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',x,'"',"></rect>\n")},sendToBack:function(u){if(!u)return this;var x,T,E,y=this._activeObject;if(u===y&&"activeSelection"===u.type)for(x=(E=y._objects).length;x--;)v(this._objects,T=E[x]),this._objects.unshift(T);else v(this._objects,u),this._objects.unshift(u);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(u){if(!u)return this;var x,T,E,y=this._activeObject;if(u===y&&"activeSelection"===u.type)for(E=y._objects,x=0;x<E.length;x++)v(this._objects,T=E[x]),this._objects.push(T);else v(this._objects,u),this._objects.push(u);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(u,y){if(!u)return this;var T,E,L,H,U,x=this._activeObject,Q=0;if(u===x&&"activeSelection"===u.type)for(U=x._objects,T=0;T<U.length;T++)(L=this._objects.indexOf(E=U[T]))>0+Q&&(H=L-1,v(this._objects,E),this._objects.splice(H,0,E)),Q++;else 0!==(L=this._objects.indexOf(u))&&(H=this._findNewLowerIndex(u,L,y),v(this._objects,u),this._objects.splice(H,0,u));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(u,y,x){var T,E;if(x){for(T=y,E=y-1;E>=0;--E)if(u.intersectsWithObject(this._objects[E])||u.isContainedWithinObject(this._objects[E])||this._objects[E].isContainedWithinObject(u)){T=E;break}}else T=y-1;return T},bringForward:function(u,y){if(!u)return this;var T,E,L,H,U,x=this._activeObject,Q=0;if(u===x&&"activeSelection"===u.type)for(T=(U=x._objects).length;T--;)(L=this._objects.indexOf(E=U[T]))<this._objects.length-1-Q&&(H=L+1,v(this._objects,E),this._objects.splice(H,0,E)),Q++;else(L=this._objects.indexOf(u))!==this._objects.length-1&&(H=this._findNewUpperIndex(u,L,y),v(this._objects,u),this._objects.splice(H,0,u));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(u,y,x){var T,E,L;if(x){for(T=y,E=y+1,L=this._objects.length;E<L;++E)if(u.intersectsWithObject(this._objects[E])||u.isContainedWithinObject(this._objects[E])||this._objects[E].isContainedWithinObject(u)){T=E;break}}else T=y+1;return T},moveTo:function(u,y){return v(this._objects,u),this._objects.splice(y,0,u),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(S.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(u){u.dispose&&u.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),S.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),S.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),C(S.StaticCanvas.prototype,S.Observable),C(S.StaticCanvas.prototype,S.Collection),C(S.StaticCanvas.prototype,S.DataURLExporter),C(S.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(u){var y=f();if(!y||!y.getContext)return null;var x=y.getContext("2d");return x&&"setLineDash"===u?void 0!==x.setLineDash:null}}),S.StaticCanvas.prototype.toJSON=S.StaticCanvas.prototype.toObject,S.isLikelyNode&&(S.StaticCanvas.prototype.createPNGStream=function(){var u=c(this.lowerCanvasEl);return u&&u.createPNGStream()},S.StaticCanvas.prototype.createJPEGStream=function(u){var y=c(this.lowerCanvasEl);return y&&y.createJPEGStream(u)})}}(),S.BaseBrush=S.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(C){C.strokeStyle=this.color,C.lineWidth=this.width,C.lineCap=this.strokeLineCap,C.miterLimit=this.strokeMiterLimit,C.lineJoin=this.strokeLineJoin,C.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(C){var m=this.canvas.viewportTransform;C.save(),C.transform(m[0],m[1],m[2],m[3],m[4],m[5])},_setShadow:function(){if(this.shadow){var C=this.canvas,m=this.shadow,v=C.contextTop,g=C.getZoom();C&&C._isRetinaScaling()&&(g*=S.devicePixelRatio),v.shadowColor=m.color,v.shadowBlur=m.blur*g,v.shadowOffsetX=m.offsetX*g,v.shadowOffsetY=m.offsetY*g}},needsFullRender:function(){return new S.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var C=this.canvas.contextTop;C.shadowColor="",C.shadowBlur=C.shadowOffsetX=C.shadowOffsetY=0},_isOutSideCanvas:function(C){return C.x<0||C.x>this.canvas.getWidth()||C.y<0||C.y>this.canvas.getHeight()}}),S.PencilBrush=S.util.createClass(S.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(C){this.canvas=C,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(C,m,v){var g=m.midPointFrom(v);return C.quadraticCurveTo(m.x,m.y,g.x,g.y),g},onMouseDown:function(C,m){!this.canvas._isMainEvent(m.e)||(this.drawStraightLine=m.e[this.straightLineKey],this._prepareForDrawing(C),this._captureDrawingPath(C),this._render())},onMouseMove:function(C,m){if(this.canvas._isMainEvent(m.e)&&(this.drawStraightLine=m.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(C))&&this._captureDrawingPath(C)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var v=this._points,g=v.length,d=this.canvas.contextTop;this._saveAndTransform(d),this.oldEnd&&(d.beginPath(),d.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(d,v[g-2],v[g-1],!0),d.stroke(),d.restore()}},onMouseUp:function(C){return!this.canvas._isMainEvent(C.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(C){var m=new S.Point(C.x,C.y);this._reset(),this._addPoint(m),this.canvas.contextTop.moveTo(m.x,m.y)},_addPoint:function(C){return!(this._points.length>1&&C.eq(this._points[this._points.length-1])||(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(C),0))},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(C){var m=new S.Point(C.x,C.y);return this._addPoint(m)},_render:function(C){var m,v,g=this._points[0],d=this._points[1];if(this._saveAndTransform(C=C||this.canvas.contextTop),C.beginPath(),2===this._points.length&&g.x===d.x&&g.y===d.y){var h=this.width/1e3;g=new S.Point(g.x,g.y),d=new S.Point(d.x,d.y),g.x-=h,d.x+=h}for(C.moveTo(g.x,g.y),m=1,v=this._points.length;m<v;m++)this._drawSegment(C,g,d),g=this._points[m],d=this._points[m+1];C.lineTo(g.x,g.y),C.stroke(),C.restore()},convertPointsToSVGPath:function(C){return S.util.getSmoothPathFromPoints(C,this.width/1e3)},_isEmptySVGPath:function(C){return"M 0 0 Q 0 0 0 0 L 0 0"===S.util.joinPath(C)},createPath:function(C){var m=new S.Path(C,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,m.shadow=new S.Shadow(this.shadow)),m},decimatePoints:function(C,m){if(C.length<=2)return C;var d,v=this.canvas.getZoom(),g=Math.pow(m/v,2),h=C.length-1,c=C[0],f=[c];for(d=1;d<h-1;d++)Math.pow(c.x-C[d].x,2)+Math.pow(c.y-C[d].y,2)>=g&&f.push(c=C[d]);return f.push(C[h]),f},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var m=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(m))this.canvas.requestRenderAll();else{var v=this.createPath(m);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:v}),this.canvas.add(v),this.canvas.requestRenderAll(),v.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:v})}}}),S.CircleBrush=S.util.createClass(S.BaseBrush,{width:10,initialize:function(C){this.canvas=C,this.points=[]},drawDot:function(C){var m=this.addPoint(C),v=this.canvas.contextTop;this._saveAndTransform(v),this.dot(v,m),v.restore()},dot:function(C,m){C.fillStyle=m.fill,C.beginPath(),C.arc(m.x,m.y,m.radius,0,2*Math.PI,!1),C.closePath(),C.fill()},onMouseDown:function(C){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(C)},_render:function(){var m,v,C=this.canvas.contextTop,g=this.points;for(this._saveAndTransform(C),m=0,v=g.length;m<v;m++)this.dot(C,g[m]);C.restore()},onMouseMove:function(C){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(C)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(C),this._render()):this.drawDot(C))},onMouseUp:function(){var m,v,C=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var g=[];for(m=0,v=this.points.length;m<v;m++){var d=this.points[m],h=new S.Circle({radius:d.radius,left:d.x,top:d.y,originX:"center",originY:"center",fill:d.fill});this.shadow&&(h.shadow=new S.Shadow(this.shadow)),g.push(h)}var c=new S.Group(g);c.canvas=this.canvas,this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=C,this.canvas.requestRenderAll()},addPoint:function(C){var m=new S.Point(C.x,C.y),v=S.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,g=new S.Color(this.color).setAlpha(S.util.getRandomInt(0,100)/100).toRgba();return m.radius=v,m.fill=g,this.points.push(m),m}}),S.SprayBrush=S.util.createClass(S.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(C){this.canvas=C,this.sprayChunks=[]},onMouseDown:function(C){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(C),this.render(this.sprayChunkPoints)},onMouseMove:function(C){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(C)||(this.addSprayChunk(C),this.render(this.sprayChunkPoints))},onMouseUp:function(){var C=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var m=[],v=0,g=this.sprayChunks.length;v<g;v++)for(var d=this.sprayChunks[v],h=0,c=d.length;h<c;h++){var f=new S.Rect({width:d[h].width,height:d[h].width,left:d[h].x+1,top:d[h].y+1,originX:"center",originY:"center",fill:this.color});m.push(f)}this.optimizeOverlapping&&(m=this._getOptimizedRects(m));var _=new S.Group(m);this.shadow&&_.set("shadow",new S.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:_}),this.canvas.add(_),this.canvas.fire("path:created",{path:_}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=C,this.canvas.requestRenderAll()},_getOptimizedRects:function(C){var v,g,d,m={};for(g=0,d=C.length;g<d;g++)m[v=C[g].left+""+C[g].top]||(m[v]=C[g]);var h=[];for(v in m)h.push(m[v]);return h},render:function(C){var v,g,m=this.canvas.contextTop;for(m.fillStyle=this.color,this._saveAndTransform(m),v=0,g=C.length;v<g;v++){var d=C[v];void 0!==d.opacity&&(m.globalAlpha=d.opacity),m.fillRect(d.x,d.y,d.width,d.width)}m.restore()},_render:function(){var m,v,C=this.canvas.contextTop;for(C.fillStyle=this.color,this._saveAndTransform(C),m=0,v=this.sprayChunks.length;m<v;m++)this.render(this.sprayChunks[m]);C.restore()},addSprayChunk:function(C){this.sprayChunkPoints=[];var m,v,g,h,d=this.width/2;for(h=0;h<this.density;h++){m=S.util.getRandomInt(C.x-d,C.x+d),v=S.util.getRandomInt(C.y-d,C.y+d),g=this.dotWidthVariance?S.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var c=new S.Point(m,v);c.width=g,this.randomOpacity&&(c.opacity=S.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(c)}this.sprayChunks.push(this.sprayChunkPoints)}}),S.PatternBrush=S.util.createClass(S.PencilBrush,{getPatternSrc:function(){var v=S.util.createCanvasElement(),g=v.getContext("2d");return v.width=v.height=25,g.fillStyle=this.color,g.beginPath(),g.arc(10,10,10,0,2*Math.PI,!1),g.closePath(),g.fill(),v},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(C){return C.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(C){this.callSuper("_setBrushStyles",C),C.strokeStyle=this.getPattern(C)},createPath:function(C){var m=this.callSuper("createPath",C),v=m._getLeftTopCoords().scalarAdd(m.strokeWidth/2);return m.stroke=new S.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-v.x,offsetY:-v.y}),m}}),function(){var C=S.util.getPointer,m=S.util.degreesToRadians,v=S.util.isTouchEvent;for(var g in S.Canvas=S.util.createClass(S.StaticCanvas,{initialize:function(d,h){h||(h={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(d,h),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=S.PencilBrush&&new S.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var h,c,f,d=this.getActiveObjects();if(d.length>0&&!this.preserveObjectStacking){c=[],f=[];for(var _=0,u=this._objects.length;_<u;_++)-1===d.indexOf(h=this._objects[_])?c.push(h):f.push(h);d.length>1&&(this._activeObject._objects=f),c.push.apply(c,f)}else c=this._objects;return c},renderAll:function(){return this.contextTopDirty&&!this._groupSelector&&!this.isDrawingMode&&(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),this.renderCanvas(this.contextContainer,this._chooseObjectsToRender()),this},renderTopLayer:function(d){d.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(d),this.contextTopDirty=!0),d.restore()},renderTop:function(){var d=this.contextTop;return this.clearContext(d),this.renderTopLayer(d),this.fire("after:render"),this},_normalizePointer:function(d,h){var c=d.calcTransformMatrix(),f=S.util.invertTransform(c),_=this.restorePointerVpt(h);return S.util.transformPoint(_,f)},isTargetTransparent:function(d,h,c){if(d.shouldCache()&&d._cacheCanvas&&d!==this._activeObject){var f=this._normalizePointer(d,{x:h,y:c}),_=Math.max(d.cacheTranslationX+f.x*d.zoomX,0),u=Math.max(d.cacheTranslationY+f.y*d.zoomY,0);return S.util.isTransparent(d._cacheContext,Math.round(_),Math.round(u),this.targetFindTolerance)}var y=this.contextCache,x=d.selectionBackgroundColor,T=this.viewportTransform;return d.selectionBackgroundColor="",this.clearContext(y),y.save(),y.transform(T[0],T[1],T[2],T[3],T[4],T[5]),d.render(y),y.restore(),d.selectionBackgroundColor=x,S.util.isTransparent(y,h,c,this.targetFindTolerance)},_isSelectionKeyPressed:function(d){return Array.isArray(this.selectionKey)?!!this.selectionKey.find(function(c){return!0===d[c]}):d[this.selectionKey]},_shouldClearSelection:function(d,h){var c=this.getActiveObjects(),f=this._activeObject;return!h||h&&f&&c.length>1&&-1===c.indexOf(h)&&f!==h&&!this._isSelectionKeyPressed(d)||h&&!h.evented||h&&!h.selectable&&f&&f!==h},_shouldCenterTransform:function(d,h,c){var f;if(d)return"scale"===h||"scaleX"===h||"scaleY"===h||"resizing"===h?f=this.centeredScaling||d.centeredScaling:"rotate"===h&&(f=this.centeredRotation||d.centeredRotation),f?!c:c},_getOriginFromCorner:function(d,h){var c={x:d.originX,y:d.originY};return"ml"===h||"tl"===h||"bl"===h?c.x="right":("mr"===h||"tr"===h||"br"===h)&&(c.x="left"),"tl"===h||"mt"===h||"tr"===h?c.y="bottom":("bl"===h||"mb"===h||"br"===h)&&(c.y="top"),c},_getActionFromCorner:function(d,h,c,f){if(!h||!d)return"drag";var _=f.controls[h];return _.getActionName(c,_,f)},_setupCurrentTransform:function(d,h,c){if(h){var f=this.getPointer(d),_=h.__corner,u=h.controls[_],y=c&&_?u.getActionHandler(d,h,u):S.controlsUtils.dragHandler,x=this._getActionFromCorner(c,_,d,h),T=this._getOriginFromCorner(h,_),E=d[this.centeredKey],L={target:h,action:x,actionHandler:y,corner:_,scaleX:h.scaleX,scaleY:h.scaleY,skewX:h.skewX,skewY:h.skewY,offsetX:f.x-h.left,offsetY:f.y-h.top,originX:T.x,originY:T.y,ex:f.x,ey:f.y,lastX:f.x,lastY:f.y,theta:m(h.angle),width:h.width*h.scaleX,shiftKey:d.shiftKey,altKey:E,original:S.util.saveObjectTransform(h)};this._shouldCenterTransform(h,x,E)&&(L.originX="center",L.originY="center"),L.original.originX=T.x,L.original.originY=T.y,this._currentTransform=L,this._beforeTransform(d)}},setCursor:function(d){this.upperCanvasEl.style.cursor=d},_drawSelection:function(d){var h=this._groupSelector,c=new S.Point(h.ex,h.ey),f=S.util.transformPoint(c,this.viewportTransform),_=new S.Point(h.ex+h.left,h.ey+h.top),u=S.util.transformPoint(_,this.viewportTransform),y=Math.min(f.x,u.x),x=Math.min(f.y,u.y),T=Math.max(f.x,u.x),E=Math.max(f.y,u.y),L=this.selectionLineWidth/2;this.selectionColor&&(d.fillStyle=this.selectionColor,d.fillRect(y,x,T-y,E-x)),this.selectionLineWidth&&this.selectionBorderColor&&(d.lineWidth=this.selectionLineWidth,d.strokeStyle=this.selectionBorderColor,y+=L,x+=L,T-=L,E-=L,S.Object.prototype._setLineDash.call(this,d,this.selectionDashArray),d.strokeRect(y,x,T-y,E-x))},findTarget:function(d,h){if(!this.skipTargetFind){var y,x,f=this.getPointer(d,!0),_=this._activeObject,u=this.getActiveObjects(),T=v(d),E=u.length>1&&!h||1===u.length;if(this.targets=[],E&&_._findTargetCorner(f,T)||u.length>1&&!h&&_===this._searchPossibleTargets([_],f))return _;if(1===u.length&&_===this._searchPossibleTargets([_],f)){if(!this.preserveObjectStacking)return _;y=_,x=this.targets,this.targets=[]}var L=this._searchPossibleTargets(this._objects,f);return d[this.altSelectionKey]&&L&&y&&L!==y&&(L=y,this.targets=x),L}},_checkTarget:function(d,h,c){if(h&&h.visible&&h.evented&&h.containsPoint(d)){if(!this.perPixelTargetFind&&!h.perPixelTargetFind||h.isEditing)return!0;if(!this.isTargetTransparent(h,c.x,c.y))return!0}},_searchPossibleTargets:function(d,h){for(var c,_,f=d.length;f--;){var u=d[f],y=u.group?this._normalizePointer(u.group,h):h;if(this._checkTarget(y,u,h)){(c=d[f]).subTargetCheck&&c instanceof S.Group&&(_=this._searchPossibleTargets(c._objects,h))&&this.targets.push(_);break}}return c},restorePointerVpt:function(d){return S.util.transformPoint(d,S.util.invertTransform(this.viewportTransform))},getPointer:function(d,h){if(this._absolutePointer&&!h)return this._absolutePointer;if(this._pointer&&h)return this._pointer;var x,c=C(d),f=this.upperCanvasEl,_=f.getBoundingClientRect(),u=_.width||0,y=_.height||0;(!u||!y)&&("top"in _&&"bottom"in _&&(y=Math.abs(_.top-_.bottom)),"right"in _&&"left"in _&&(u=Math.abs(_.right-_.left))),this.calcOffset(),c.x=c.x-this._offset.left,c.y=c.y-this._offset.top,h||(c=this.restorePointerVpt(c));var T=this.getRetinaScaling();return 1!==T&&(c.x/=T,c.y/=T),{x:c.x*(x=0===u||0===y?{width:1,height:1}:{width:f.width/u,height:f.height/y}).width,y:c.y*x.height}},_createUpperCanvas:function(){var d=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),h=this.lowerCanvasEl,c=this.upperCanvasEl;c?c.className="":(c=this._createCanvasElement(),this.upperCanvasEl=c),S.util.addClass(c,"upper-canvas "+d),this.wrapperEl.appendChild(c),this._copyCanvasStyle(h,c),this._applyCanvasStyle(c),this.contextTop=c.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=S.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),S.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),S.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(d){var h=this.width||d.width,c=this.height||d.height;S.util.setStyle(d,{position:"absolute",width:h+"px",height:c+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),d.width=h,d.height=c,S.util.makeElementUnselectable(d)},_copyCanvasStyle:function(d,h){h.style.cssText=d.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var d=this._activeObject;return d?"activeSelection"===d.type&&d._objects?d._objects.slice(0):[d]:[]},_onObjectRemoved:function(d){d===this._activeObject&&(this.fire("before:selection:cleared",{target:d}),this._discardActiveObject(),this.fire("selection:cleared",{target:d}),d.fire("deselected")),d===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",d)},_fireSelectionEvents:function(d,h){var c=!1,f=this.getActiveObjects(),_=[],u=[];d.forEach(function(y){-1===f.indexOf(y)&&(c=!0,y.fire("deselected",{e:h,target:y}),u.push(y))}),f.forEach(function(y){-1===d.indexOf(y)&&(c=!0,y.fire("selected",{e:h,target:y}),_.push(y))}),d.length>0&&f.length>0?c&&this.fire("selection:updated",{e:h,selected:_,deselected:u}):f.length>0?this.fire("selection:created",{e:h,selected:_}):d.length>0&&this.fire("selection:cleared",{e:h,deselected:u})},setActiveObject:function(d,h){var c=this.getActiveObjects();return this._setActiveObject(d,h),this._fireSelectionEvents(c,h),this},_setActiveObject:function(d,h){return!(this._activeObject===d||!this._discardActiveObject(h,d)||d.onSelect({e:h})||(this._activeObject=d,0))},_discardActiveObject:function(d,h){var c=this._activeObject;if(c){if(c.onDeselect({e:d,object:h}))return!1;this._activeObject=null}return!0},discardActiveObject:function(d){var h=this.getActiveObjects(),c=this.getActiveObject();return h.length&&this.fire("before:selection:cleared",{target:c,e:d}),this._discardActiveObject(d),this._fireSelectionEvents(h,d),this},dispose:function(){var d=this.wrapperEl;return this.removeListeners(),d.removeChild(this.upperCanvasEl),d.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(h){S.util.cleanUpJsdomNode(this[h]),this[h]=void 0}.bind(this)),d.parentNode&&d.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,S.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(d){var h=this._activeObject;h&&h._renderControls(d)},_toObject:function(d,h,c){var f=this._realizeGroupTransformOnObject(d),_=this.callSuper("_toObject",d,h,c);return this._unwindGroupTransformOnObject(d,f),_},_realizeGroupTransformOnObject:function(d){if(d.group&&"activeSelection"===d.group.type&&this._activeObject===d.group){var c={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(f){c[f]=d[f]}),S.util.addTransformToObject(d,this._activeObject.calcOwnMatrix()),c}return null},_unwindGroupTransformOnObject:function(d,h){h&&d.set(h)},_setSVGObject:function(d,h,c){var f=this._realizeGroupTransformOnObject(h);this.callSuper("_setSVGObject",d,h,c),this._unwindGroupTransformOnObject(h,f)},setViewportTransform:function(d){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),S.StaticCanvas.prototype.setViewportTransform.call(this,d)}}),S.StaticCanvas)"prototype"!==g&&(S.Canvas[g]=S.StaticCanvas[g])}(),function(){var C=S.util.addListener,m=S.util.removeListener,h={passive:!1};function c(f,_){return f.button&&f.button===_-1}S.util.object.extend(S.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(C,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(f,_){var u=this.upperCanvasEl,y=this._getEventPrefix();f(S.window,"resize",this._onResize),f(u,y+"down",this._onMouseDown),f(u,y+"move",this._onMouseMove,h),f(u,y+"out",this._onMouseOut),f(u,y+"enter",this._onMouseEnter),f(u,"wheel",this._onMouseWheel),f(u,"contextmenu",this._onContextMenu),f(u,"dblclick",this._onDoubleClick),f(u,"dragover",this._onDragOver),f(u,"dragenter",this._onDragEnter),f(u,"dragleave",this._onDragLeave),f(u,"drop",this._onDrop),this.enablePointerEvents||f(u,"touchstart",this._onTouchStart,h),"undefined"!=typeof eventjs&&_ in eventjs&&(eventjs[_](u,"gesture",this._onGesture),eventjs[_](u,"drag",this._onDrag),eventjs[_](u,"orientation",this._onOrientationChange),eventjs[_](u,"shake",this._onShake),eventjs[_](u,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(m,"remove");var f=this._getEventPrefix();m(S.document,f+"up",this._onMouseUp),m(S.document,"touchend",this._onTouchEnd,h),m(S.document,f+"move",this._onMouseMove,h),m(S.document,"touchmove",this._onMouseMove,h)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(f,_){this.__onTransformGesture&&this.__onTransformGesture(f,_)},_onDrag:function(f,_){this.__onDrag&&this.__onDrag(f,_)},_onMouseWheel:function(f){this.__onMouseWheel(f)},_onMouseOut:function(f){var _=this._hoveredTarget;this.fire("mouse:out",{target:_,e:f}),this._hoveredTarget=null,_&&_.fire("mouseout",{e:f});var u=this;this._hoveredTargets.forEach(function(y){u.fire("mouse:out",{target:_,e:f}),y&&_.fire("mouseout",{e:f})}),this._hoveredTargets=[]},_onMouseEnter:function(f){!this._currentTransform&&!this.findTarget(f)&&(this.fire("mouse:over",{target:null,e:f}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(f,_){this.__onOrientationChange&&this.__onOrientationChange(f,_)},_onShake:function(f,_){this.__onShake&&this.__onShake(f,_)},_onLongPress:function(f,_){this.__onLongPress&&this.__onLongPress(f,_)},_onDragOver:function(f){f.preventDefault();var _=this._simpleEventHandler("dragover",f);this._fireEnterLeaveEvents(_,f)},_onDrop:function(f){return this._simpleEventHandler("drop:before",f),this._simpleEventHandler("drop",f)},_onContextMenu:function(f){return this.stopContextMenu&&(f.stopPropagation(),f.preventDefault()),!1},_onDoubleClick:function(f){this._cacheTransformEventData(f),this._handleEvent(f,"dblclick"),this._resetTransformEventData(f)},getPointerId:function(f){var _=f.changedTouches;return _?_[0]&&_[0].identifier:this.enablePointerEvents?f.pointerId:-1},_isMainEvent:function(f){return!0===f.isPrimary||!1!==f.isPrimary&&("touchend"===f.type&&0===f.touches.length||!f.changedTouches||f.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(f){f.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(f)),this.__onMouseDown(f),this._resetTransformEventData();var _=this.upperCanvasEl,u=this._getEventPrefix();C(S.document,"touchend",this._onTouchEnd,h),C(S.document,"touchmove",this._onMouseMove,h),m(_,u+"down",this._onMouseDown)},_onMouseDown:function(f){this.__onMouseDown(f),this._resetTransformEventData();var _=this.upperCanvasEl,u=this._getEventPrefix();m(_,u+"move",this._onMouseMove,h),C(S.document,u+"up",this._onMouseUp),C(S.document,u+"move",this._onMouseMove,h)},_onTouchEnd:function(f){if(!(f.touches.length>0)){this.__onMouseUp(f),this._resetTransformEventData(),this.mainTouchId=null;var _=this._getEventPrefix();m(S.document,"touchend",this._onTouchEnd,h),m(S.document,"touchmove",this._onMouseMove,h);var u=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){C(u.upperCanvasEl,_+"down",u._onMouseDown),u._willAddMouseDown=0},400)}},_onMouseUp:function(f){this.__onMouseUp(f),this._resetTransformEventData();var _=this.upperCanvasEl,u=this._getEventPrefix();this._isMainEvent(f)&&(m(S.document,u+"up",this._onMouseUp),m(S.document,u+"move",this._onMouseMove,h),C(_,u+"move",this._onMouseMove,h))},_onMouseMove:function(f){!this.allowTouchScrolling&&f.preventDefault&&f.preventDefault(),this.__onMouseMove(f)},_onResize:function(){this.calcOffset()},_shouldRender:function(f){var _=this._activeObject;return!!(!!_!=!!f||_&&f&&_!==f)},__onMouseUp:function(f){var _,u=this._currentTransform,y=this._groupSelector,x=!1,T=!y||0===y.left&&0===y.top;if(this._cacheTransformEventData(f),_=this._target,this._handleEvent(f,"up:before"),c(f,3))this.fireRightClick&&this._handleEvent(f,"up",3,T);else{if(c(f,2))return this.fireMiddleClick&&this._handleEvent(f,"up",2,T),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(f);else if(this._isMainEvent(f)){if(u&&(this._finalizeCurrentTransform(f),x=u.actionPerformed),!T){var E=_===this._activeObject;this._maybeGroupObjects(f),x||(x=this._shouldRender(_)||!E&&_===this._activeObject)}var L,H;if(_){if(L=_._findTargetCorner(this.getPointer(f,!0),S.util.isTouchEvent(f)),_.selectable&&_!==this._activeObject&&"up"===_.activeOn)this.setActiveObject(_,f),x=!0;else{var U=_.controls[L],Q=U&&U.getMouseUpHandler(f,_,U);Q&&Q(f,u,(H=this.getPointer(f)).x,H.y)}_.isMoving=!1}if(u&&(u.target!==_||u.corner!==L)){var de=u.target&&u.target.controls[u.corner],we=de&&de.getMouseUpHandler(f,_,U);H=H||this.getPointer(f),we&&we(f,u,H.x,H.y)}this._setCursorFromEvent(f,_),this._handleEvent(f,"up",1,T),this._groupSelector=null,this._currentTransform=null,_&&(_.__corner=0),x?this.requestRenderAll():T||this.renderTop()}}},_simpleEventHandler:function(f,_){var u=this.findTarget(_),y=this.targets,x={e:_,target:u,subTargets:y};if(this.fire(f,x),u&&u.fire(f,x),!y)return u;for(var T=0;T<y.length;T++)y[T].fire(f,x);return u},_handleEvent:function(f,_,u,y){var x=this._target,T=this.targets||[],E={e:f,target:x,subTargets:T,button:u||1,isClick:y||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===_&&(E.currentTarget=this.findTarget(f),E.currentSubTargets=this.targets),this.fire("mouse:"+_,E),x&&x.fire("mouse"+_,E);for(var L=0;L<T.length;L++)T[L].fire("mouse"+_,E)},_finalizeCurrentTransform:function(f){var _=this._currentTransform,u=_.target,y={e:f,target:u,transform:_,action:_.action};u._scaling&&(u._scaling=!1),u.setCoords(),(_.actionPerformed||this.stateful&&u.hasStateChanged())&&this._fire("modified",y)},_onMouseDownInDrawingMode:function(f){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(f).requestRenderAll();var _=this.getPointer(f);this.freeDrawingBrush.onMouseDown(_,{e:f,pointer:_}),this._handleEvent(f,"down")},_onMouseMoveInDrawingMode:function(f){if(this._isCurrentlyDrawing){var _=this.getPointer(f);this.freeDrawingBrush.onMouseMove(_,{e:f,pointer:_})}this.setCursor(this.freeDrawingCursor),this._handleEvent(f,"move")},_onMouseUpInDrawingMode:function(f){var _=this.getPointer(f);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:f,pointer:_}),this._handleEvent(f,"up")},__onMouseDown:function(f){this._cacheTransformEventData(f),this._handleEvent(f,"down:before");var _=this._target;if(c(f,3))this.fireRightClick&&this._handleEvent(f,"down",3);else if(c(f,2))this.fireMiddleClick&&this._handleEvent(f,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(f);else if(this._isMainEvent(f)&&!this._currentTransform){this._previousPointer=u=this._pointer;var y=this._shouldRender(_),x=this._shouldGroup(f,_);if(this._shouldClearSelection(f,_)?this.discardActiveObject(f):x&&(this._handleGrouping(f,_),_=this._activeObject),this.selection&&(!_||!_.selectable&&!_.isEditing&&_!==this._activeObject)&&(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),_){var T=_===this._activeObject;_.selectable&&"down"===_.activeOn&&this.setActiveObject(_,f);var E=_._findTargetCorner(this.getPointer(f,!0),S.util.isTouchEvent(f));if(_.__corner=E,_===this._activeObject&&(E||!x)){this._setupCurrentTransform(f,_,T);var L=_.controls[E],u=this.getPointer(f),H=L&&L.getMouseDownHandler(f,_,L);H&&H(f,this._currentTransform,u.x,u.y)}}this._handleEvent(f,"down"),(y||x)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(f){this._resetTransformEventData(),this._pointer=this.getPointer(f,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(f)||null},_beforeTransform:function(f){var _=this._currentTransform;this.stateful&&_.target.saveState(),this.fire("before:transform",{e:f,transform:_})},__onMouseMove:function(f){var _,u;if(this._handleEvent(f,"move:before"),this._cacheTransformEventData(f),this.isDrawingMode)this._onMouseMoveInDrawingMode(f);else if(this._isMainEvent(f)){var y=this._groupSelector;y?(y.left=(u=this._absolutePointer).x-y.ex,y.top=u.y-y.ey,this.renderTop()):this._currentTransform?this._transformObject(f):(_=this.findTarget(f)||null,this._setCursorFromEvent(f,_),this._fireOverOutEvents(_,f)),this._handleEvent(f,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(f,_){var u=this._hoveredTarget,y=this._hoveredTargets,x=this.targets,T=Math.max(y.length,x.length);this.fireSyntheticInOutEvents(f,_,{oldTarget:u,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var E=0;E<T;E++)this.fireSyntheticInOutEvents(x[E],_,{oldTarget:y[E],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=f,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(f,_){var u=this._draggedoverTarget,y=this._hoveredTargets,x=this.targets,T=Math.max(y.length,x.length);this.fireSyntheticInOutEvents(f,_,{oldTarget:u,evtOut:"dragleave",evtIn:"dragenter"});for(var E=0;E<T;E++)this.fireSyntheticInOutEvents(x[E],_,{oldTarget:y[E],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=f},fireSyntheticInOutEvents:function(f,_,u){var y,x,L,T=u.oldTarget,H=T!==f,U=u.canvasEvtIn,Q=u.canvasEvtOut;H&&(y={e:_,target:f,previousTarget:T},x={e:_,target:T,nextTarget:f}),L=f&&H,T&&H&&(Q&&this.fire(Q,x),T.fire(u.evtOut,x)),L&&(U&&this.fire(U,y),f.fire(u.evtIn,y))},__onMouseWheel:function(f){this._cacheTransformEventData(f),this._handleEvent(f,"wheel"),this._resetTransformEventData()},_transformObject:function(f){var _=this.getPointer(f),u=this._currentTransform;u.reset=!1,u.shiftKey=f.shiftKey,u.altKey=f[this.centeredKey],this._performTransformAction(f,u,_),u.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(f,_,u){var T=_.action,E=!1,L=_.actionHandler;L&&(E=L(f,_,u.x,u.y)),"drag"===T&&E&&(_.target.isMoving=!0,this.setCursor(_.target.moveCursor||this.moveCursor)),_.actionPerformed=_.actionPerformed||E},_fire:S.controlsUtils.fireEvent,_setCursorFromEvent:function(f,_){if(!_)return this.setCursor(this.defaultCursor),!1;var u=_.hoverCursor||this.hoverCursor,y=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,x=(!y||!y.contains(_))&&_._findTargetCorner(this.getPointer(f,!0));x?this.setCursor(this.getCornerCursor(x,_,f)):(_.subTargetCheck&&this.targets.concat().reverse().map(function(T){u=T.hoverCursor||u}),this.setCursor(u))},getCornerCursor:function(f,_,u){var y=_.controls[f];return y.cursorStyleHandler(u,y,_)}})}(),function(){var C=Math.min,m=Math.max;S.util.object.extend(S.Canvas.prototype,{_shouldGroup:function(v,g){var d=this._activeObject;return d&&this._isSelectionKeyPressed(v)&&g&&g.selectable&&this.selection&&(d!==g||"activeSelection"===d.type)&&!g.onSelect({e:v})},_handleGrouping:function(v,g){var d=this._activeObject;d.__corner||g===d&&(!(g=this.findTarget(v,!0))||!g.selectable)||(d&&"activeSelection"===d.type?this._updateActiveSelection(g,v):this._createActiveSelection(g,v))},_updateActiveSelection:function(v,g){var d=this._activeObject,h=d._objects.slice(0);d.contains(v)?(d.removeWithUpdate(v),this._hoveredTarget=v,this._hoveredTargets=this.targets.concat(),1===d.size()&&this._setActiveObject(d.item(0),g)):(d.addWithUpdate(v),this._hoveredTarget=d,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(h,g)},_createActiveSelection:function(v,g){var d=this.getActiveObjects(),h=this._createGroup(v);this._hoveredTarget=h,this._setActiveObject(h,g),this._fireSelectionEvents(d,g)},_createGroup:function(v){var g=this._objects,h=g.indexOf(this._activeObject)<g.indexOf(v)?[this._activeObject,v]:[v,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new S.ActiveSelection(h,{canvas:this})},_groupSelectedObjects:function(v){var d,g=this._collectObjects(v);1===g.length?this.setActiveObject(g[0],v):g.length>1&&(d=new S.ActiveSelection(g.reverse(),{canvas:this}),this.setActiveObject(d,v))},_collectObjects:function(v){for(var d,g=[],h=this._groupSelector.ex,c=this._groupSelector.ey,f=h+this._groupSelector.left,_=c+this._groupSelector.top,u=new S.Point(C(h,f),C(c,_)),y=new S.Point(m(h,f),m(c,_)),x=!this.selectionFullyContained,T=h===f&&c===_,E=this._objects.length;E--&&!((d=this._objects[E])&&d.selectable&&d.visible&&(x&&d.intersectsWithRect(u,y,!0)||d.isContainedWithinRect(u,y,!0)||x&&d.containsPoint(u,null,!0)||x&&d.containsPoint(y,null,!0))&&(g.push(d),T)););return g.length>1&&(g=g.filter(function(L){return!L.onSelect({e:v})})),g},_maybeGroupObjects:function(v){this.selection&&this._groupSelector&&this._groupSelectedObjects(v),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),S.util.object.extend(S.StaticCanvas.prototype,{toDataURL:function(C){C||(C={});var m=C.format||"png",v=C.quality||1,g=(C.multiplier||1)*(C.enableRetinaScaling?this.getRetinaScaling():1),d=this.toCanvasElement(g,C);return S.util.toDataURL(d,m,v)},toCanvasElement:function(C,m){var v=((m=m||{}).width||this.width)*(C=C||1),g=(m.height||this.height)*C,d=this.getZoom(),h=this.width,c=this.height,f=d*C,_=this.viewportTransform,x=this.interactive,T=[f,0,0,f,(_[4]-(m.left||0))*C,(_[5]-(m.top||0))*C],E=this.enableRetinaScaling,L=S.util.createCanvasElement(),H=this.contextTop;return L.width=v,L.height=g,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=T,this.width=v,this.height=g,this.calcViewportBoundaries(),this.renderCanvas(L.getContext("2d"),this._objects),this.viewportTransform=_,this.width=h,this.height=c,this.calcViewportBoundaries(),this.interactive=x,this.enableRetinaScaling=E,this.contextTop=H,L}}),S.util.object.extend(S.StaticCanvas.prototype,{loadFromJSON:function(C,m,v){if(C){var g="string"==typeof C?JSON.parse(C):S.util.object.clone(C),d=this,h=g.clipPath,c=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete g.clipPath,this._enlivenObjects(g.objects,function(f){d.clear(),d._setBgOverlay(g,function(){h?d._enlivenObjects([h],function(_){d.clipPath=_[0],d.__setupCanvas.call(d,g,f,c,m)}):d.__setupCanvas.call(d,g,f,c,m)})},v),this}},__setupCanvas:function(C,m,v,g){var d=this;m.forEach(function(h,c){d.insertAt(h,c)}),this.renderOnAddRemove=v,delete C.objects,delete C.backgroundImage,delete C.overlayImage,delete C.background,delete C.overlay,this._setOptions(C),this.renderAll(),g&&g()},_setBgOverlay:function(C,m){var v={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(C.backgroundImage||C.overlayImage||C.background||C.overlay){var g=function(){v.backgroundImage&&v.overlayImage&&v.backgroundColor&&v.overlayColor&&m&&m()};this.__setBgOverlay("backgroundImage",C.backgroundImage,v,g),this.__setBgOverlay("overlayImage",C.overlayImage,v,g),this.__setBgOverlay("backgroundColor",C.background,v,g),this.__setBgOverlay("overlayColor",C.overlay,v,g)}else m&&m()},__setBgOverlay:function(C,m,v,g){var d=this;if(!m)return v[C]=!0,void(g&&g());"backgroundImage"===C||"overlayImage"===C?S.util.enlivenObjects([m],function(h){d[C]=h[0],v[C]=!0,g&&g()}):this["set"+S.util.string.capitalize(C,!0)](m,function(){v[C]=!0,g&&g()})},_enlivenObjects:function(C,m,v){C&&0!==C.length?S.util.enlivenObjects(C,function(g){m&&m(g)},null,v):m&&m([])},_toDataURL:function(C,m){this.clone(function(v){m(v.toDataURL(C))})},_toDataURLWithMultiplier:function(C,m,v){this.clone(function(g){v(g.toDataURLWithMultiplier(C,m))})},clone:function(C,m){var v=JSON.stringify(this.toJSON(m));this.cloneWithoutData(function(g){g.loadFromJSON(v,function(){C&&C(g)})})},cloneWithoutData:function(C){var m=S.util.createCanvasElement();m.width=this.width,m.height=this.height;var v=new S.Canvas(m);this.backgroundImage?(v.setBackgroundImage(this.backgroundImage.src,function(){v.renderAll(),C&&C(v)}),v.backgroundImageOpacity=this.backgroundImageOpacity,v.backgroundImageStretch=this.backgroundImageStretch):C&&C(v)}}),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.object.extend,g=m.util.object.clone,d=m.util.toFixed,h=m.util.string.capitalize,c=m.util.degreesToRadians;m.Object||(m.Object=m.util.createClass(m.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!m.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(u){u&&this.setOptions(u)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=m.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(u){var y=m.perfLimitSizeTotal,x=u.width,T=u.height,E=m.maxCacheSideLimit,L=m.minCacheSideLimit;if(x<=E&&T<=E&&x*T<=y)return x<L&&(u.width=L),T<L&&(u.height=L),u;var U=m.util.limitDimsByArea(x/T,y),Q=m.util.capValue,de=Q(L,U.x,E),we=Q(L,U.y,E);return x>de&&(u.zoomX/=x/de,u.width=de,u.capped=!0),T>we&&(u.zoomY/=T/we,u.height=we,u.capped=!0),u},_getCacheCanvasDimensions:function(){var u=this.getTotalObjectScaling(),y=this._getTransformedDimensions(0,0),x=y.x*u.scaleX/this.scaleX,T=y.y*u.scaleY/this.scaleY;return{width:x+2,height:T+2,zoomX:u.scaleX,zoomY:u.scaleY,x,y:T}},_updateCacheCanvas:function(){var u=this.canvas;if(this.noScaleCache&&u&&u._currentTransform){var x=u._currentTransform.action;if(this===u._currentTransform.target&&x.slice&&"scale"===x.slice(0,5))return!1}var Q,de,T=this._cacheCanvas,E=this._limitCacheSize(this._getCacheCanvasDimensions()),L=m.minCacheSideLimit,H=E.width,U=E.height,we=E.zoomX,Ee=E.zoomY,Le=H!==this.cacheWidth||U!==this.cacheHeight,ke=Le||this.zoomX!==we||this.zoomY!==Ee,Re=0,Ge=0,Me=!1;if(Le){var qe=this._cacheCanvas.width,z=this._cacheCanvas.height,X=H>qe||U>z;Me=X||(H<.9*qe||U<.9*z)&&qe>L&&z>L,X&&!E.capped&&(H>L||U>L)&&(Re=.1*H,Ge=.1*U)}return this instanceof m.Text&&this.path&&(ke=!0,Me=!0,Re+=this.getHeightOfLine(0)*this.zoomX,Ge+=this.getHeightOfLine(0)*this.zoomY),!!ke&&(Me?(T.width=Math.ceil(H+Re),T.height=Math.ceil(U+Ge)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,T.width,T.height)),Q=E.x/2,de=E.y/2,this.cacheTranslationX=Math.round(T.width/2-Q)+Q,this.cacheTranslationY=Math.round(T.height/2-de)+de,this.cacheWidth=H,this.cacheHeight=U,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(we,Ee),this.zoomX=we,this.zoomY=Ee,!0)},setOptions:function(u){this._setOptions(u),this._initGradient(u.fill,"fill"),this._initGradient(u.stroke,"stroke"),this._initPattern(u.fill,"fill"),this._initPattern(u.stroke,"stroke")},transform:function(u){var x=this.calcTransformMatrix(!(this.group&&!this.group._transformDone||this.group&&this.canvas&&u===this.canvas.contextTop));u.transform(x[0],x[1],x[2],x[3],x[4],x[5])},toObject:function(u){var y=m.Object.NUM_FRACTION_DIGITS,x={type:this.type,version:m.version,originX:this.originX,originY:this.originY,left:d(this.left,y),top:d(this.top,y),width:d(this.width,y),height:d(this.height,y),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:d(this.strokeWidth,y),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:d(this.strokeMiterLimit,y),scaleX:d(this.scaleX,y),scaleY:d(this.scaleY,y),angle:d(this.angle,y),flipX:this.flipX,flipY:this.flipY,opacity:d(this.opacity,y),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:d(this.skewX,y),skewY:d(this.skewY,y)};return this.clipPath&&!this.clipPath.excludeFromExport&&(x.clipPath=this.clipPath.toObject(u),x.clipPath.inverted=this.clipPath.inverted,x.clipPath.absolutePositioned=this.clipPath.absolutePositioned),m.util.populateWithProperties(this,x,u),this.includeDefaultValues||(x=this._removeDefaultValues(x)),x},toDatalessObject:function(u){return this.toObject(u)},_removeDefaultValues:function(u){var y=m.util.getKlass(u.type).prototype;return y.stateProperties.forEach(function(T){"left"===T||"top"===T||(u[T]===y[T]&&delete u[T],Array.isArray(u[T])&&Array.isArray(y[T])&&0===u[T].length&&0===y[T].length&&delete u[T])}),u},toString:function(){return"#<fabric."+h(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var u=m.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(u.scaleX),scaleY:Math.abs(u.scaleY)}},getTotalObjectScaling:function(){var u=this.getObjectScaling(),y=u.scaleX,x=u.scaleY;if(this.canvas){var T=this.canvas.getZoom(),E=this.canvas.getRetinaScaling();y*=T*E,x*=T*E}return{scaleX:y,scaleY:x}},getObjectOpacity:function(){var u=this.opacity;return this.group&&(u*=this.group.getObjectOpacity()),u},_set:function(u,y){var T=this[u]!==y,E=!1;return("scaleX"===u||"scaleY"===u)&&(y=this._constrainScale(y)),"scaleX"===u&&y<0?(this.flipX=!this.flipX,y*=-1):"scaleY"===u&&y<0?(this.flipY=!this.flipY,y*=-1):"shadow"!==u||!y||y instanceof m.Shadow?"dirty"===u&&this.group&&this.group.set("dirty",y):y=new m.Shadow(y),this[u]=y,T&&(E=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(u)>-1?(this.dirty=!0,E&&this.group.set("dirty",!0)):E&&this.stateProperties.indexOf(u)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:m.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(u){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(u.save(),this._setupCompositeOperation(u),this.drawSelectionBackground(u),this.transform(u),this._setOpacity(u),this._setShadow(u,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(u)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(u),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),u.restore())},renderCache:function(u){u=u||{},(!this._cacheCanvas||!this._cacheContext)&&this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,u.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!!("stroke"===this.paintFirst&&this.hasFill()&&this.hasStroke()&&"object"==typeof this.shadow||this.clipPath)},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(u,y){if(u.save(),u.globalCompositeOperation=y.inverted?"destination-out":"destination-in",y.absolutePositioned){var x=m.util.invertTransform(this.calcTransformMatrix());u.transform(x[0],x[1],x[2],x[3],x[4],x[5])}y.transform(u),u.scale(1/y.zoomX,1/y.zoomY),u.drawImage(y._cacheCanvas,-y.cacheTranslationX,-y.cacheTranslationY),u.restore()},drawObject:function(u,y){var x=this.fill,T=this.stroke;y?(this.fill="black",this.stroke="",this._setClippingProperties(u)):this._renderBackground(u),this._render(u),this._drawClipPath(u,this.clipPath),this.fill=x,this.stroke=T},_drawClipPath:function(u,y){!y||(y.canvas=this.canvas,y.shouldCache(),y._transformDone=!0,y.renderCache({forClipping:!0}),this.drawClipPathOnCache(u,y))},drawCacheOnCanvas:function(u){u.scale(1/this.zoomX,1/this.zoomY),u.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(u){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!u&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!u){var y=this.cacheWidth/this.zoomX,x=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-y/2,-x/2,y,x)}return!0}return!1},_renderBackground:function(u){if(this.backgroundColor){var y=this._getNonTransformedDimensions();u.fillStyle=this.backgroundColor,u.fillRect(-y.x/2,-y.y/2,y.x,y.y),this._removeShadow(u)}},_setOpacity:function(u){this.group&&!this.group._transformDone?u.globalAlpha=this.getObjectOpacity():u.globalAlpha*=this.opacity},_setStrokeStyles:function(u,y){var x=y.stroke;x&&(u.lineWidth=y.strokeWidth,u.lineCap=y.strokeLineCap,u.lineDashOffset=y.strokeDashOffset,u.lineJoin=y.strokeLineJoin,u.miterLimit=y.strokeMiterLimit,x.toLive?"percentage"===x.gradientUnits||x.gradientTransform||x.patternTransform?this._applyPatternForTransformedGradient(u,x):(u.strokeStyle=x.toLive(u,this),this._applyPatternGradientTransform(u,x)):u.strokeStyle=y.stroke)},_setFillStyles:function(u,y){var x=y.fill;x&&(x.toLive?(u.fillStyle=x.toLive(u,this),this._applyPatternGradientTransform(u,y.fill)):u.fillStyle=x)},_setClippingProperties:function(u){u.globalAlpha=1,u.strokeStyle="transparent",u.fillStyle="#000000"},_setLineDash:function(u,y){!y||0===y.length||(1&y.length&&y.push.apply(y,y),u.setLineDash(y))},_renderControls:function(u,y){var E,L,H,x=this.getViewportTransform(),T=this.calcTransformMatrix();L=void 0!==(y=y||{}).hasBorders?y.hasBorders:this.hasBorders,H=void 0!==y.hasControls?y.hasControls:this.hasControls,T=m.util.multiplyTransformMatrices(x,T),E=m.util.qrDecompose(T),u.save(),u.translate(E.translateX,E.translateY),u.lineWidth=1*this.borderScaleFactor,this.group||(u.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(E.angle-=180),u.rotate(c(this.group?E.angle:this.angle)),y.forActiveSelection||this.group?L&&this.drawBordersInGroup(u,E,y):L&&this.drawBorders(u,y),H&&this.drawControls(u,y),u.restore()},_setShadow:function(u){if(this.shadow){var T,y=this.shadow,x=this.canvas,E=x&&x.viewportTransform[0]||1,L=x&&x.viewportTransform[3]||1;T=y.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),x&&x._isRetinaScaling()&&(E*=m.devicePixelRatio,L*=m.devicePixelRatio),u.shadowColor=y.color,u.shadowBlur=y.blur*m.browserShadowBlurConstant*(E+L)*(T.scaleX+T.scaleY)/4,u.shadowOffsetX=y.offsetX*E*T.scaleX,u.shadowOffsetY=y.offsetY*L*T.scaleY}},_removeShadow:function(u){!this.shadow||(u.shadowColor="",u.shadowBlur=u.shadowOffsetX=u.shadowOffsetY=0)},_applyPatternGradientTransform:function(u,y){if(!y||!y.toLive)return{offsetX:0,offsetY:0};var x=y.gradientTransform||y.patternTransform,T=-this.width/2+y.offsetX||0,E=-this.height/2+y.offsetY||0;return"percentage"===y.gradientUnits?u.transform(this.width,0,0,this.height,T,E):u.transform(1,0,0,1,T,E),x&&u.transform(x[0],x[1],x[2],x[3],x[4],x[5]),{offsetX:T,offsetY:E}},_renderPaintInOrder:function(u){"stroke"===this.paintFirst?(this._renderStroke(u),this._renderFill(u)):(this._renderFill(u),this._renderStroke(u))},_render:function(){},_renderFill:function(u){!this.fill||(u.save(),this._setFillStyles(u,this),"evenodd"===this.fillRule?u.fill("evenodd"):u.fill(),u.restore())},_renderStroke:function(u){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(u),u.save(),this.strokeUniform&&this.group){var y=this.getObjectScaling();u.scale(1/y.scaleX,1/y.scaleY)}else this.strokeUniform&&u.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(u,this.strokeDashArray),this._setStrokeStyles(u,this),u.stroke(),u.restore()}},_applyPatternForTransformedGradient:function(u,y){var E,x=this._limitCacheSize(this._getCacheCanvasDimensions()),T=m.util.createCanvasElement(),L=this.canvas.getRetinaScaling(),H=x.x/this.scaleX/L,U=x.y/this.scaleY/L;T.width=H,T.height=U,(E=T.getContext("2d")).beginPath(),E.moveTo(0,0),E.lineTo(H,0),E.lineTo(H,U),E.lineTo(0,U),E.closePath(),E.translate(H/2,U/2),E.scale(x.zoomX/this.scaleX/L,x.zoomY/this.scaleY/L),this._applyPatternGradientTransform(E,y),E.fillStyle=y.toLive(u),E.fill(),u.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),u.scale(L*this.scaleX/x.zoomX,L*this.scaleY/x.zoomY),u.strokeStyle=E.createPattern(T,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var u=m.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",u.scaleX),this.set("scaleY",u.scaleY),this.angle=u.angle,this.skewX=u.skewX,this.skewY=0}},_removeTransformMatrix:function(u){var y=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),y=m.util.transformPoint(y,this.transformMatrix)),this.transformMatrix=null,u&&(this.scaleX*=u.scaleX,this.scaleY*=u.scaleY,this.cropX=u.cropX,this.cropY=u.cropY,y.x+=u.offsetLeft,y.y+=u.offsetTop,this.width=u.width,this.height=u.height),this.setPositionByOrigin(y,"center","center")},clone:function(u,y){var x=this.toObject(y);this.constructor.fromObject?this.constructor.fromObject(x,u):m.Object._fromObject("Object",x,u)},cloneAsImage:function(u,y){var x=this.toCanvasElement(y);return u&&u(new m.Image(x)),this},toCanvasElement:function(u){u||(u={});var y=m.util,x=y.saveObjectTransform(this),T=this.group,E=this.shadow,L=Math.abs,H=(u.multiplier||1)*(u.enableRetinaScaling?m.devicePixelRatio:1);delete this.group,u.withoutTransform&&y.resetObjectTransform(this),u.withoutShadow&&(this.shadow=null);var we,Le,ke,U=m.util.createCanvasElement(),Q=this.getBoundingRect(!0,!0),de=this.shadow,Ee={x:0,y:0};de&&(Le=de.blur,we=de.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),Ee.x=2*Math.round(L(de.offsetX)+Le)*L(we.scaleX),Ee.y=2*Math.round(L(de.offsetY)+Le)*L(we.scaleY)),ke=Q.height+Ee.y,U.width=Math.ceil(Q.width+Ee.x),U.height=Math.ceil(ke);var Re=new m.StaticCanvas(U,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===u.format&&(Re.backgroundColor="#fff"),this.setPositionByOrigin(new m.Point(Re.width/2,Re.height/2),"center","center");var Ge=this.canvas;Re.add(this);var Me=Re.toCanvasElement(H||1,u);return this.shadow=E,this.set("canvas",Ge),T&&(this.group=T),this.set(x).setCoords(),Re._objects=[],Re.dispose(),Re=null,Me},toDataURL:function(u){return u||(u={}),m.util.toDataURL(this.toCanvasElement(u),u.format||"png",u.quality||1)},isType:function(u){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===u},complexity:function(){return 1},toJSON:function(u){return this.toObject(u)},rotate:function(u){var y=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return y&&this._setOriginToCenter(),this.set("angle",u),y&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(u,y){y=y||this.canvas.getPointer(u);var x=new m.Point(y.x,y.y),T=this._getLeftTopCoords();return this.angle&&(x=m.util.rotatePoint(x,T,c(-this.angle))),{x:x.x-T.x,y:x.y-T.y}},_setupCompositeOperation:function(u){this.globalCompositeOperation&&(u.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){m.runningAnimations&&m.runningAnimations.cancelByTarget(this)}}),m.util.createAccessors&&m.util.createAccessors(m.Object),v(m.Object.prototype,m.Observable),m.Object.NUM_FRACTION_DIGITS=2,m.Object.ENLIVEN_PROPS=["clipPath"],m.Object._fromObject=function(u,y,x,T){var E=m[u];y=g(y,!0),m.util.enlivenPatterns([y.fill,y.stroke],function(L){void 0!==L[0]&&(y.fill=L[0]),void 0!==L[1]&&(y.stroke=L[1]),m.util.enlivenObjectEnlivables(y,y,function(){var H=T?new E(y[T],y):new E(y);x&&x(H)})})},m.Object.__uid=0)}(ht),function(){var C=S.util.degreesToRadians,m={left:-.5,center:0,right:.5},v={top:-.5,center:0,bottom:.5};S.util.object.extend(S.Object.prototype,{translateToGivenOrigin:function(g,d,h,c,f){var y,x,T,_=g.x,u=g.y;return"string"==typeof d?d=m[d]:d-=.5,"string"==typeof c?c=m[c]:c-=.5,"string"==typeof h?h=v[h]:h-=.5,"string"==typeof f?f=v[f]:f-=.5,x=f-h,((y=c-d)||x)&&(T=this._getTransformedDimensions(),_=g.x+y*T.x,u=g.y+x*T.y),new S.Point(_,u)},translateToCenterPoint:function(g,d,h){var c=this.translateToGivenOrigin(g,d,h,"center","center");return this.angle?S.util.rotatePoint(c,g,C(this.angle)):c},translateToOriginPoint:function(g,d,h){var c=this.translateToGivenOrigin(g,"center","center",d,h);return this.angle?S.util.rotatePoint(c,g,C(this.angle)):c},getCenterPoint:function(){var g=new S.Point(this.left,this.top);return this.translateToCenterPoint(g,this.originX,this.originY)},getPointByOrigin:function(g,d){var h=this.getCenterPoint();return this.translateToOriginPoint(h,g,d)},toLocalPoint:function(g,d,h){var f,_,c=this.getCenterPoint();return f=void 0!==d&&void 0!==h?this.translateToGivenOrigin(c,"center","center",d,h):new S.Point(this.left,this.top),_=new S.Point(g.x,g.y),this.angle&&(_=S.util.rotatePoint(_,c,-C(this.angle))),_.subtractEquals(f)},setPositionByOrigin:function(g,d,h){var c=this.translateToCenterPoint(g,d,h),f=this.translateToOriginPoint(c,this.originX,this.originY);this.set("left",f.x),this.set("top",f.y)},adjustPosition:function(g){var _,u,d=C(this.angle),h=this.getScaledWidth(),c=S.util.cos(d)*h,f=S.util.sin(d)*h;this.left+=c*((u="string"==typeof g?m[g]:g-.5)-(_="string"==typeof this.originX?m[this.originX]:this.originX-.5)),this.top+=f*(u-_),this.setCoords(),this.originX=g},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var g=this.getCenterPoint();this.originX="center",this.originY="center",this.left=g.x,this.top=g.y},_resetOrigin:function(){var g=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=g.x,this.top=g.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var m=S.util,v=m.degreesToRadians,g=m.multiplyTransformMatrices,d=m.transformPoint;m.object.extend(S.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(h,c){return c?h?this.calcACoords():this.calcLineCoords():((!this.aCoords||!this.lineCoords)&&this.setCoords(!0),h?this.aCoords:this.lineCoords)},getCoords:function(h,c){return function C(h){return[new S.Point(h.tl.x,h.tl.y),new S.Point(h.tr.x,h.tr.y),new S.Point(h.br.x,h.br.y),new S.Point(h.bl.x,h.bl.y)]}(this._getCoords(h,c))},intersectsWithRect:function(h,c,f,_){var u=this.getCoords(f,_);return"Intersection"===S.Intersection.intersectPolygonRectangle(u,h,c).status},intersectsWithObject:function(h,c,f){return"Intersection"===S.Intersection.intersectPolygonPolygon(this.getCoords(c,f),h.getCoords(c,f)).status||h.isContainedWithinObject(this,c,f)||this.isContainedWithinObject(h,c,f)},isContainedWithinObject:function(h,c,f){for(var _=this.getCoords(c,f),y=0,x=h._getImageLines(c?h.aCoords:h.lineCoords);y<4;y++)if(!h.containsPoint(_[y],x))return!1;return!0},isContainedWithinRect:function(h,c,f,_){var u=this.getBoundingRect(f,_);return u.left>=h.x&&u.left+u.width<=c.x&&u.top>=h.y&&u.top+u.height<=c.y},containsPoint:function(h,y,f,_){var u=this._getCoords(f,_),x=(y=y||this._getImageLines(u),this._findCrossPoints(h,y));return 0!==x&&x%2==1},isOnScreen:function(h){if(!this.canvas)return!1;var c=this.canvas.vptCoords.tl,f=this.canvas.vptCoords.br;return!(!this.getCoords(!0,h).some(function(u){return u.x<=f.x&&u.x>=c.x&&u.y<=f.y&&u.y>=c.y})&&!this.intersectsWithRect(c,f,!0,h))||this._containsCenterOfCanvas(c,f,h)},_containsCenterOfCanvas:function(h,c,f){return!!this.containsPoint({x:(h.x+c.x)/2,y:(h.y+c.y)/2},null,!0,f)},isPartiallyOnScreen:function(h){if(!this.canvas)return!1;var c=this.canvas.vptCoords.tl,f=this.canvas.vptCoords.br;return!!this.intersectsWithRect(c,f,!0,h)||this.getCoords(!0,h).every(function(u){return(u.x>=f.x||u.x<=c.x)&&(u.y>=f.y||u.y<=c.y)})&&this._containsCenterOfCanvas(c,f,h)},_getImageLines:function(h){return{topline:{o:h.tl,d:h.tr},rightline:{o:h.tr,d:h.br},bottomline:{o:h.br,d:h.bl},leftline:{o:h.bl,d:h.tl}}},_findCrossPoints:function(h,c){var _,u,y,x,E,T=0;for(var L in c)if(!((E=c[L]).o.y<h.y&&E.d.y<h.y||E.o.y>=h.y&&E.d.y>=h.y||(E.o.x===E.d.x&&E.o.x>=h.x?x=E.o.x:(_=(E.d.y-E.o.y)/(E.d.x-E.o.x),u=h.y-0*h.x,y=E.o.y-_*E.o.x,x=-(u-y)/(0-_)),x>=h.x&&(T+=1),2!==T)))break;return T},getBoundingRect:function(h,c){var f=this.getCoords(h,c);return m.makeBoundingBoxFromPoints(f)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(h){return Math.abs(h)<this.minScaleLimit?h<0?-this.minScaleLimit:this.minScaleLimit:0===h?1e-4:h},scale:function(h){return this._set("scaleX",h),this._set("scaleY",h),this.setCoords()},scaleToWidth:function(h,c){var f=this.getBoundingRect(c).width/this.getScaledWidth();return this.scale(h/this.width/f)},scaleToHeight:function(h,c){var f=this.getBoundingRect(c).height/this.getScaledHeight();return this.scale(h/this.height/f)},calcLineCoords:function(){var h=this.getViewportTransform(),c=this.padding,f=v(this.angle),y=m.cos(f)*c,x=m.sin(f)*c,T=y+x,E=y-x,L=this.calcACoords(),H={tl:d(L.tl,h),tr:d(L.tr,h),bl:d(L.bl,h),br:d(L.br,h)};return c&&(H.tl.x-=E,H.tl.y-=T,H.tr.x+=T,H.tr.y-=E,H.bl.x-=T,H.bl.y+=E,H.br.x+=E,H.br.y+=T),H},calcOCoords:function(){var h=this._calcRotateMatrix(),c=this._calcTranslateMatrix(),f=this.getViewportTransform(),_=g(f,c),u=g(_,h),y=(u=g(u,[1/f[0],0,0,1/f[3],0,0]),this._calculateCurrentDimensions()),x={};return this.forEachControl(function(T,E,L){x[E]=T.positionHandler(y,u,L)}),x},calcACoords:function(){var h=this._calcRotateMatrix(),c=this._calcTranslateMatrix(),f=g(c,h),_=this._getTransformedDimensions(),u=_.x/2,y=_.y/2;return{tl:d({x:-u,y:-y},f),tr:d({x:u,y:-y},f),bl:d({x:-u,y},f),br:d({x:u,y},f)}},setCoords:function(h){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),h||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return m.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var h=this.getCenterPoint();return[1,0,0,1,h.x,h.y]},transformMatrixKey:function(h){var c="_",f="";return!h&&this.group&&(f=this.group.transformMatrixKey(h)+c),f+this.top+c+this.left+c+this.scaleX+c+this.scaleY+c+this.skewX+c+this.skewY+c+this.angle+c+this.originX+c+this.originY+c+this.width+c+this.height+c+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(h){var c=this.calcOwnMatrix();if(h||!this.group)return c;var f=this.transformMatrixKey(h),_=this.matrixCache||(this.matrixCache={});return _.key===f?_.value:(this.group&&(c=g(this.group.calcTransformMatrix(!1),c)),_.key=f,_.value=c,c)},calcOwnMatrix:function(){var h=this.transformMatrixKey(!0),c=this.ownMatrixCache||(this.ownMatrixCache={});if(c.key===h)return c.value;var f=this._calcTranslateMatrix(),_={angle:this.angle,translateX:f[4],translateY:f[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return c.key=h,c.value=m.composeMatrix(_),c.value},_getNonTransformedDimensions:function(){var h=this.strokeWidth;return{x:this.width+h,y:this.height+h}},_getTransformedDimensions:function(h,c){void 0===h&&(h=this.skewX),void 0===c&&(c=this.skewY);var f,_,u,y=0===h&&0===c;if(this.strokeUniform?(_=this.width,u=this.height):(_=(f=this._getNonTransformedDimensions()).x,u=f.y),y)return this._finalizeDimensions(_*this.scaleX,u*this.scaleY);var x=m.sizeAfterTransform(_,u,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:h,skewY:c});return this._finalizeDimensions(x.x,x.y)},_finalizeDimensions:function(h,c){return this.strokeUniform?{x:h+this.strokeWidth,y:c+this.strokeWidth}:{x:h,y:c}},_calculateCurrentDimensions:function(){var h=this.getViewportTransform(),c=this._getTransformedDimensions();return d(c,h,!0).scalarAdd(2*this.padding)}})}(),S.util.object.extend(S.Object.prototype,{sendToBack:function(){return this.group?S.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?S.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(C){return this.group?S.StaticCanvas.prototype.sendBackwards.call(this.group,this,C):this.canvas&&this.canvas.sendBackwards(this,C),this},bringForward:function(C){return this.group?S.StaticCanvas.prototype.bringForward.call(this.group,this,C):this.canvas&&this.canvas.bringForward(this,C),this},moveTo:function(C){return this.group&&"activeSelection"!==this.group.type?S.StaticCanvas.prototype.moveTo.call(this.group,this,C):this.canvas&&this.canvas.moveTo(this,C),this}}),function(){function C(v,g){if(g){if(g.toLive)return v+": url(#SVGID_"+g.id+"); ";var d=new S.Color(g),h=v+": "+d.toRgb()+"; ",c=d.getAlpha();return 1!==c&&(h+=v+"-opacity: "+c.toString()+"; "),h}return v+": none; "}var m=S.util.toFixed;S.util.object.extend(S.Object.prototype,{getSvgStyles:function(v){var g=this.fillRule?this.fillRule:"nonzero",d=this.strokeWidth?this.strokeWidth:"0",h=this.strokeDashArray?this.strokeDashArray.join(" "):"none",c=this.strokeDashOffset?this.strokeDashOffset:"0",f=this.strokeLineCap?this.strokeLineCap:"butt",_=this.strokeLineJoin?this.strokeLineJoin:"miter",u=this.strokeMiterLimit?this.strokeMiterLimit:"4",y=void 0!==this.opacity?this.opacity:"1",x=this.visible?"":" visibility: hidden;",T=v?"":this.getSvgFilter(),E=C("fill",this.fill);return[C("stroke",this.stroke),"stroke-width: ",d,"; ","stroke-dasharray: ",h,"; ","stroke-linecap: ",f,"; ","stroke-dashoffset: ",c,"; ","stroke-linejoin: ",_,"; ","stroke-miterlimit: ",u,"; ",E,"fill-rule: ",g,"; ","opacity: ",y,";",T,x].join("")},getSvgSpanStyles:function(v,g){var d="; ",c=v.fontFamily?"font-family: "+(-1===v.fontFamily.indexOf("'")&&-1===v.fontFamily.indexOf('"')?"'"+v.fontFamily+"'":v.fontFamily)+d:"",h=v.strokeWidth?"stroke-width: "+v.strokeWidth+d:"",f=v.fontSize?"font-size: "+v.fontSize+"px"+d:"",_=v.fontStyle?"font-style: "+v.fontStyle+d:"",u=v.fontWeight?"font-weight: "+v.fontWeight+d:"",y=v.fill?C("fill",v.fill):"",x=v.stroke?C("stroke",v.stroke):"",T=this.getSvgTextDecoration(v);return T&&(T="text-decoration: "+T+d),[x,h,c,f,_,u,T,y,v.deltaY?"baseline-shift: "+-v.deltaY+"; ":"",g?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(v){return["overline","underline","line-through"].filter(function(g){return v[g.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(v,g){var d=v?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+S.util.matrixToSVG(d)+(g||"")+'" '},_setSVGBg:function(v){if(this.backgroundColor){var g=S.Object.NUM_FRACTION_DIGITS;v.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',m(-this.width/2,g),'" y="',m(-this.height/2,g),'" width="',m(this.width,g),'" height="',m(this.height,g),'"></rect>\n')}},toSVG:function(v){return this._createBaseSVGMarkup(this._toSVG(v),{reviver:v})},toClipPathSVG:function(v){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(v),{reviver:v})},_createBaseClipPathSVGMarkup:function(v,g){var d=(g=g||{}).reviver,c=[this.getSvgTransform(!0,g.additionalTransform||""),this.getSvgCommons()].join(""),f=v.indexOf("COMMON_PARTS");return v[f]=c,d?d(v.join("")):v.join("")},_createBaseSVGMarkup:function(v,g){var L,U,d=(g=g||{}).noStyle,h=g.reviver,c=d?"":'style="'+this.getSvgStyles()+'" ',f=g.withShadow?'style="'+this.getSvgFilter()+'" ':"",_=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",y=_&&_.absolutePositioned,x=this.stroke,T=this.fill,E=this.shadow,H=[],Q=v.indexOf("COMMON_PARTS"),de=g.additionalTransform;return _&&(_.clipPathId="CLIPPATH_"+S.Object.__uid++,U='<clipPath id="'+_.clipPathId+'" >\n'+_.toClipPathSVG(h)+"</clipPath>\n"),y&&H.push("<g ",f,this.getSvgCommons()," >\n"),H.push("<g ",this.getSvgTransform(!1),y?"":f+this.getSvgCommons()," >\n"),L=[c,u,d?"":this.addPaintOrder()," ",de?'transform="'+de+'" ':""].join(""),v[Q]=L,T&&T.toLive&&H.push(T.toSVG(this)),x&&x.toLive&&H.push(x.toSVG(this)),E&&H.push(E.toSVG(this)),_&&H.push(U),H.push(v.join("")),H.push("</g>\n"),y&&H.push("</g>\n"),h?h(H.join("")):H.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var C=S.util.object.extend,m="stateProperties";function v(d,h,c){var f={};c.forEach(function(u){f[u]=d[u]}),C(d[h],f,!0)}function g(d,h,c){if(d===h)return!0;if(Array.isArray(d)){if(!Array.isArray(h)||d.length!==h.length)return!1;for(var f=0,_=d.length;f<_;f++)if(!g(d[f],h[f]))return!1;return!0}if(d&&"object"==typeof d){var y,u=Object.keys(d);if(!h||"object"!=typeof h||!c&&u.length!==Object.keys(h).length)return!1;for(f=0,_=u.length;f<_;f++)if("canvas"!==(y=u[f])&&"group"!==y&&!g(d[y],h[y]))return!1;return!0}}S.util.object.extend(S.Object.prototype,{hasStateChanged:function(d){var h="_"+(d=d||m);return Object.keys(this[h]).length<this[d].length||!g(this[h],this,!0)},saveState:function(d){var h=d&&d.propertySet||m,c="_"+h;return this[c]?(v(this,c,this[h]),d&&d.stateProperties&&v(this,c,d.stateProperties),this):this.setupState(d)},setupState:function(d){var h=(d=d||{}).propertySet||m;return d.propertySet=h,this["_"+h]={},this.saveState(d),this}})}(),function(){var C=S.util.degreesToRadians;S.util.object.extend(S.Object.prototype,{_findTargetCorner:function(m,v){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var h,c,u,g=m.x,d=m.y,f=Object.keys(this.oCoords),_=f.length-1;for(this.__corner=0;_>=0;_--)if(this.isControlVisible(u=f[_])&&(c=this._getImageLines(v?this.oCoords[u].touchCorner:this.oCoords[u].corner),0!==(h=this._findCrossPoints({x:g,y:d},c))&&h%2==1))return this.__corner=u,u;return!1},forEachControl:function(m){for(var v in this.controls)m(this.controls[v],v,this)},_setCornerCoords:function(){var m=this.oCoords;for(var v in m){var g=this.controls[v];m[v].corner=g.calcCornerCoords(this.angle,this.cornerSize,m[v].x,m[v].y,!1),m[v].touchCorner=g.calcCornerCoords(this.angle,this.touchCornerSize,m[v].x,m[v].y,!0)}},drawSelectionBackground:function(m){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;m.save();var v=this.getCenterPoint(),g=this._calculateCurrentDimensions(),d=this.canvas.viewportTransform;return m.translate(v.x,v.y),m.scale(1/d[0],1/d[3]),m.rotate(C(this.angle)),m.fillStyle=this.selectionBackgroundColor,m.fillRect(-g.x/2,-g.y/2,g.x,g.y),m.restore(),this},drawBorders:function(m,v){v=v||{};var g=this._calculateCurrentDimensions(),d=this.borderScaleFactor,h=g.x+d,c=g.y+d,f=void 0!==v.hasControls?v.hasControls:this.hasControls,_=!1;return m.save(),m.strokeStyle=v.borderColor||this.borderColor,this._setLineDash(m,v.borderDashArray||this.borderDashArray),m.strokeRect(-h/2,-c/2,h,c),f&&(m.beginPath(),this.forEachControl(function(u,y,x){u.withConnection&&u.getVisibility(x,y)&&(_=!0,m.moveTo(u.x*h,u.y*c),m.lineTo(u.x*h+u.offsetX,u.y*c+u.offsetY))}),_&&m.stroke()),m.restore(),this},drawBordersInGroup:function(m,v,g){g=g||{};var d=S.util.sizeAfterTransform(this.width,this.height,v),h=this.strokeWidth,c=this.strokeUniform,f=this.borderScaleFactor,_=d.x+h*(c?this.canvas.getZoom():v.scaleX)+f,u=d.y+h*(c?this.canvas.getZoom():v.scaleY)+f;return m.save(),this._setLineDash(m,g.borderDashArray||this.borderDashArray),m.strokeStyle=g.borderColor||this.borderColor,m.strokeRect(-_/2,-u/2,_,u),m.restore(),this},drawControls:function(m,v){v=v||{},m.save();var d,h,g=this.canvas.getRetinaScaling();return m.setTransform(g,0,0,g,0,0),m.strokeStyle=m.fillStyle=v.cornerColor||this.cornerColor,this.transparentCorners||(m.strokeStyle=v.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(m,v.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(d=this.group.calcTransformMatrix()),this.forEachControl(function(c,f,_){h=_.oCoords[f],c.getVisibility(_,f)&&(d&&(h=S.util.transformPoint(h,d)),c.render(m,h.x,h.y,v,_))}),m.restore(),this},isControlVisible:function(m){return this.controls[m]&&this.controls[m].getVisibility(this,m)},setControlVisible:function(m,v){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[m]=v,this},setControlsVisibility:function(m){for(var v in m||(m={}),m)this.setControlVisible(v,m[v]);return this},onDeselect:function(){},onSelect:function(){}})}(),S.util.object.extend(S.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(C,m){var v=function(){},g=(m=m||{}).onComplete||v,d=m.onChange||v,h=this;return S.util.animate({target:this,startValue:C.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(c){C.set("left",c),h.requestRenderAll(),d()},onComplete:function(){C.setCoords(),g()}})},fxCenterObjectV:function(C,m){var v=function(){},g=(m=m||{}).onComplete||v,d=m.onChange||v,h=this;return S.util.animate({target:this,startValue:C.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(c){C.set("top",c),h.requestRenderAll(),d()},onComplete:function(){C.setCoords(),g()}})},fxRemove:function(C,m){var v=function(){},g=(m=m||{}).onComplete||v,d=m.onChange||v,h=this;return S.util.animate({target:this,startValue:C.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(c){C.set("opacity",c),h.requestRenderAll(),d()},onComplete:function(){h.remove(C),g()}})}}),S.util.object.extend(S.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var m,C=[],g=[];for(m in arguments[0])C.push(m);for(var d=0,h=C.length;d<h;d++)g.push(this._animate(m=C[d],arguments[0][m],arguments[1],d!==h-1));return g}return this._animate.apply(this,arguments)},_animate:function(C,m,v,g){var h,d=this;m=m.toString(),v=v?S.util.object.clone(v):{},~C.indexOf(".")&&(h=C.split("."));var c=d.colorProperties.indexOf(C)>-1||h&&d.colorProperties.indexOf(h[1])>-1,f=h?this.get(h[0])[h[1]]:this.get(C);"from"in v||(v.from=f),c||(m=~m.indexOf("=")?f+parseFloat(m.replace("=","")):parseFloat(m));var _={target:this,startValue:v.from,endValue:m,byValue:v.by,easing:v.easing,duration:v.duration,abort:v.abort&&function(u,y,x){return v.abort.call(d,u,y,x)},onChange:function(u,y,x){h?d[h[0]][h[1]]=u:d.set(C,u),!g&&v.onChange&&v.onChange(u,y,x)},onComplete:function(u,y,x){g||(d.setCoords(),v.onComplete&&v.onComplete(u,y,x))}};return c?S.util.animateColor(_.startValue,_.endValue,_.duration,_):S.util.animate(_)}}),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.object.extend,g=m.util.object.clone,d={x1:1,x2:1,y1:1,y2:1};function h(c,f){var _=c.origin,u=c.axis1,y=c.axis2,x=c.dimension,T=f.nearest,E=f.center,L=f.farthest;return function(){switch(this.get(_)){case T:return Math.min(this.get(u),this.get(y));case E:return Math.min(this.get(u),this.get(y))+.5*this.get(x);case L:return Math.max(this.get(u),this.get(y))}}}m.Line?m.warn("fabric.Line is already defined"):(m.Line=m.util.createClass(m.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:m.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(c,f){c||(c=[0,0,0,0]),this.callSuper("initialize",f),this.set("x1",c[0]),this.set("y1",c[1]),this.set("x2",c[2]),this.set("y2",c[3]),this._setWidthHeight(f)},_setWidthHeight:function(c){c||(c={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in c?c.left:this._getLeftToOriginX(),this.top="top"in c?c.top:this._getTopToOriginY()},_set:function(c,f){return this.callSuper("_set",c,f),void 0!==d[c]&&this._setWidthHeight(),this},_getLeftToOriginX:h({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:h({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(c){c.beginPath();var f=this.calcLinePoints();c.moveTo(f.x1,f.y1),c.lineTo(f.x2,f.y2),c.lineWidth=this.strokeWidth;var _=c.strokeStyle;c.strokeStyle=this.stroke||c.fillStyle,this.stroke&&this._renderStroke(c),c.strokeStyle=_},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(c){return v(this.callSuper("toObject",c),this.calcLinePoints())},_getNonTransformedDimensions:function(){var c=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(c.y-=this.strokeWidth),0===this.height&&(c.x-=this.strokeWidth)),c},calcLinePoints:function(){var c=this.x1<=this.x2?-1:1,f=this.y1<=this.y2?-1:1;return{x1:c*this.width*.5,x2:c*this.width*-.5,y1:f*this.height*.5,y2:f*this.height*-.5}},_toSVG:function(){var c=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,'" />\n']}}),m.Line.ATTRIBUTE_NAMES=m.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),m.Line.fromElement=function(c,f,_){_=_||{};var u=m.parseAttributes(c,m.Line.ATTRIBUTE_NAMES);f(new m.Line([u.x1||0,u.y1||0,u.x2||0,u.y2||0],v(u,_)))},m.Line.fromObject=function(c,f){var u=g(c,!0);u.points=[c.x1,c.y1,c.x2,c.y2],m.Object._fromObject("Line",u,function _(y){delete y.points,f&&f(y)},"points")})}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.degreesToRadians;m.Circle?m.warn("fabric.Circle is already defined."):(m.Circle=m.util.createClass(m.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:m.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(d,h){return this.callSuper("_set",d,h),"radius"===d&&this.setRadius(h),this},toObject:function(d){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(d))},_toSVG:function(){var d,f=(this.endAngle-this.startAngle)%360;if(0===f)d=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var _=v(this.startAngle),u=v(this.endAngle),y=this.radius;d=['<path d="M '+m.util.cos(_)*y+" "+m.util.sin(_)*y," A "+y+" "+y," 0 ",+(f>180?"1":"0")+" 1"," "+m.util.cos(u)*y+" "+m.util.sin(u)*y,'" ',"COMMON_PARTS"," />\n"]}return d},_render:function(d){d.beginPath(),d.arc(0,0,this.radius,v(this.startAngle),v(this.endAngle),!1),this._renderPaintInOrder(d)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(d){return this.radius=d,this.set("width",2*d).set("height",2*d)}}),m.Circle.ATTRIBUTE_NAMES=m.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),m.Circle.fromElement=function(d,h){var c=m.parseAttributes(d,m.Circle.ATTRIBUTE_NAMES);if(!function g(d){return"radius"in d&&d.radius>=0}(c))throw new Error("value of `r` attribute is required and can not be negative");c.left=(c.left||0)-c.radius,c.top=(c.top||0)-c.radius,h(new m.Circle(c))},m.Circle.fromObject=function(d,h){m.Object._fromObject("Circle",d,h)})}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={});m.Triangle?m.warn("fabric.Triangle is already defined"):(m.Triangle=m.util.createClass(m.Object,{type:"triangle",width:100,height:100,_render:function(v){var g=this.width/2,d=this.height/2;v.beginPath(),v.moveTo(-g,d),v.lineTo(0,-d),v.lineTo(g,d),v.closePath(),this._renderPaintInOrder(v)},_toSVG:function(){var v=this.width/2,g=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-v+" "+g,"0 "+-g,v+" "+g].join(","),'" />']}}),m.Triangle.fromObject=function(v,g){return m.Object._fromObject("Triangle",v,g)})}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=2*Math.PI;m.Ellipse?m.warn("fabric.Ellipse is already defined."):(m.Ellipse=m.util.createClass(m.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:m.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(g){this.callSuper("initialize",g),this.set("rx",g&&g.rx||0),this.set("ry",g&&g.ry||0)},_set:function(g,d){switch(this.callSuper("_set",g,d),g){case"rx":this.rx=d,this.set("width",2*d);break;case"ry":this.ry=d,this.set("height",2*d)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(g){return this.callSuper("toObject",["rx","ry"].concat(g))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(g){g.beginPath(),g.save(),g.transform(1,0,0,this.ry/this.rx,0,0),g.arc(0,0,this.rx,0,v,!1),g.restore(),this._renderPaintInOrder(g)}}),m.Ellipse.ATTRIBUTE_NAMES=m.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),m.Ellipse.fromElement=function(g,d){var h=m.parseAttributes(g,m.Ellipse.ATTRIBUTE_NAMES);h.left=(h.left||0)-h.rx,h.top=(h.top||0)-h.ry,d(new m.Ellipse(h))},m.Ellipse.fromObject=function(g,d){m.Object._fromObject("Ellipse",g,d)})}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.object.extend;m.Rect?m.warn("fabric.Rect is already defined"):(m.Rect=m.util.createClass(m.Object,{stateProperties:m.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:m.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(g){this.callSuper("initialize",g),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(g){var d=this.rx?Math.min(this.rx,this.width/2):0,h=this.ry?Math.min(this.ry,this.height/2):0,c=this.width,f=this.height,_=-this.width/2,u=-this.height/2,y=0!==d||0!==h,x=.4477152502;g.beginPath(),g.moveTo(_+d,u),g.lineTo(_+c-d,u),y&&g.bezierCurveTo(_+c-x*d,u,_+c,u+x*h,_+c,u+h),g.lineTo(_+c,u+f-h),y&&g.bezierCurveTo(_+c,u+f-x*h,_+c-x*d,u+f,_+c-d,u+f),g.lineTo(_+d,u+f),y&&g.bezierCurveTo(_+x*d,u+f,_,u+f-x*h,_,u+f-h),g.lineTo(_,u+h),y&&g.bezierCurveTo(_,u+x*h,_+x*d,u,_+d,u),g.closePath(),this._renderPaintInOrder(g)},toObject:function(g){return this.callSuper("toObject",["rx","ry"].concat(g))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),m.Rect.ATTRIBUTE_NAMES=m.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),m.Rect.fromElement=function(g,d,h){if(!g)return d(null);h=h||{};var c=m.parseAttributes(g,m.Rect.ATTRIBUTE_NAMES);c.left=c.left||0,c.top=c.top||0,c.height=c.height||0,c.width=c.width||0;var f=new m.Rect(v(h?m.util.object.clone(h):{},c));f.visible=f.visible&&f.width>0&&f.height>0,d(f)},m.Rect.fromObject=function(g,d){return m.Object._fromObject("Rect",g,d)})}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.object.extend,g=m.util.array.min,d=m.util.array.max,h=m.util.toFixed,c=m.util.projectStrokeOnPoints;m.Polyline?m.warn("fabric.Polyline is already defined"):(m.Polyline=m.util.createClass(m.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:m.Object.prototype.cacheProperties.concat("points"),initialize:function(f,_){_=_||{},this.points=f||[],this.callSuper("initialize",_),this._setPositionDimensions(_)},_projectStrokeOnPoints:function(){return c(this.points,this,!0)},_setPositionDimensions:function(f){var u,_=this._calcDimensions(f),y=this.exactBoundingBox?this.strokeWidth:0;this.width=_.width-y,this.height=_.height-y,f.fromSVG||(u=this.translateToGivenOrigin({x:_.left-this.strokeWidth/2+y/2,y:_.top-this.strokeWidth/2+y/2},"left","top",this.originX,this.originY)),void 0===f.left&&(this.left=f.fromSVG?_.left:u.x),void 0===f.top&&(this.top=f.fromSVG?_.top:u.y),this.pathOffset={x:_.left+this.width/2+y/2,y:_.top+this.height/2+y/2}},_calcDimensions:function(){var f=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,_=g(f,"x")||0,u=g(f,"y")||0;return{left:_,top:u,width:(d(f,"x")||0)-_,height:(d(f,"y")||0)-u}},toObject:function(f){return v(this.callSuper("toObject",f),{points:this.points.concat()})},_toSVG:function(){for(var f=[],_=this.pathOffset.x,u=this.pathOffset.y,y=m.Object.NUM_FRACTION_DIGITS,x=0,T=this.points.length;x<T;x++)f.push(h(this.points[x].x-_,y),",",h(this.points[x].y-u,y)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',f.join(""),'" />\n']},commonRender:function(f){var _,u=this.points.length,y=this.pathOffset.x,x=this.pathOffset.y;if(!u||isNaN(this.points[u-1].y))return!1;f.beginPath(),f.moveTo(this.points[0].x-y,this.points[0].y-x);for(var T=0;T<u;T++)f.lineTo((_=this.points[T]).x-y,_.y-x);return!0},_render:function(f){!this.commonRender(f)||this._renderPaintInOrder(f)},complexity:function(){return this.get("points").length}}),m.Polyline.ATTRIBUTE_NAMES=m.SHARED_ATTRIBUTES.concat(),m.Polyline.fromElementGenerator=function(f){return function(_,u,y){if(!_)return u(null);y||(y={});var x=m.parsePointsAttribute(_.getAttribute("points")),T=m.parseAttributes(_,m[f].ATTRIBUTE_NAMES);T.fromSVG=!0,u(new m[f](x,v(T,y)))}},m.Polyline.fromElement=m.Polyline.fromElementGenerator("Polyline"),m.Polyline.fromObject=function(f,_){return m.Object._fromObject("Polyline",f,_,"points")})}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.projectStrokeOnPoints;m.Polygon?m.warn("fabric.Polygon is already defined"):(m.Polygon=m.util.createClass(m.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return v(this.points,this)},_render:function(g){!this.commonRender(g)||(g.closePath(),this._renderPaintInOrder(g))}}),m.Polygon.ATTRIBUTE_NAMES=m.SHARED_ATTRIBUTES.concat(),m.Polygon.fromElement=m.Polyline.fromElementGenerator("Polygon"),m.Polygon.fromObject=function(g,d){m.Object._fromObject("Polygon",g,d,"points")})}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.array.min,g=m.util.array.max,d=m.util.object.extend,h=m.util.object.clone,c=m.util.toFixed;m.Path?m.warn("fabric.Path is already defined"):(m.Path=m.util.createClass(m.Object,{type:"path",path:null,cacheProperties:m.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:m.Object.prototype.stateProperties.concat("path"),initialize:function(f,_){delete(_=h(_||{})).path,this.callSuper("initialize",_),this._setPath(f||[],_)},_setPath:function(f,_){this.path=m.util.makePathSimpler(Array.isArray(f)?f:m.util.parsePath(f)),m.Polyline.prototype._setPositionDimensions.call(this,_||{})},_renderPathCommands:function(f){var _,u=0,y=0,x=0,T=0,H=-this.pathOffset.x,U=-this.pathOffset.y;f.beginPath();for(var Q=0,de=this.path.length;Q<de;++Q)switch(_=this.path[Q],_[0]){case"L":f.lineTo((x=_[1])+H,(T=_[2])+U);break;case"M":u=x=_[1],y=T=_[2],f.moveTo(x+H,T+U);break;case"C":f.bezierCurveTo(_[1]+H,_[2]+U,_[3]+H,_[4]+U,(x=_[5])+H,(T=_[6])+U);break;case"Q":f.quadraticCurveTo(_[1]+H,_[2]+U,_[3]+H,_[4]+U),x=_[3],T=_[4];break;case"z":case"Z":x=u,T=y,f.closePath()}},_render:function(f){this._renderPathCommands(f),this._renderPaintInOrder(f)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(f){return d(this.callSuper("toObject",f),{path:this.path.map(function(_){return _.slice()})})},toDatalessObject:function(f){var _=this.toObject(["sourcePath"].concat(f));return _.sourcePath&&delete _.path,_},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',m.util.joinPath(this.path),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var f=m.Object.NUM_FRACTION_DIGITS;return" translate("+c(-this.pathOffset.x,f)+", "+c(-this.pathOffset.y,f)+")"},toClipPathSVG:function(f){var _=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:f,additionalTransform:_})},toSVG:function(f){var _=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:f,additionalTransform:_})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var u,L,f=[],_=[],y=0,x=0,T=0,E=0,H=0,U=this.path.length;H<U;++H){switch((u=this.path[H])[0]){case"L":T=u[1],E=u[2],L=[];break;case"M":y=T=u[1],x=E=u[2],L=[];break;case"C":L=m.util.getBoundsOfCurve(T,E,u[1],u[2],u[3],u[4],u[5],u[6]),T=u[5],E=u[6];break;case"Q":L=m.util.getBoundsOfCurve(T,E,u[1],u[2],u[1],u[2],u[3],u[4]),T=u[3],E=u[4];break;case"z":case"Z":T=y,E=x}L.forEach(function(ke){f.push(ke.x),_.push(ke.y)}),f.push(T),_.push(E)}var Q=v(f)||0,de=v(_)||0;return{left:Q,top:de,width:(g(f)||0)-Q,height:(g(_)||0)-de}}}),m.Path.fromObject=function(f,_){"string"==typeof f.sourcePath?m.loadSVGFromURL(f.sourcePath,function(y){var x=y[0];x.setOptions(f),f.clipPath?m.util.enlivenObjects([f.clipPath],function(T){x.clipPath=T[0],_&&_(x)}):_&&_(x)}):m.Object._fromObject("Path",f,_,"path")},m.Path.ATTRIBUTE_NAMES=m.SHARED_ATTRIBUTES.concat(["d"]),m.Path.fromElement=function(f,_,u){var y=m.parseAttributes(f,m.Path.ATTRIBUTE_NAMES);y.fromSVG=!0,_(new m.Path(y.d,d(y,u)))})}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.array.min,g=m.util.array.max;m.Group||(m.Group=m.util.createClass(m.Object,m.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(d,h,c){h=h||{},this._objects=[],c&&this.callSuper("initialize",h),this._objects=d||[];for(var f=this._objects.length;f--;)this._objects[f].group=this;if(c)this._updateObjectsACoords();else{var _=h&&h.centerPoint;void 0!==h.originX&&(this.originX=h.originX),void 0!==h.originY&&(this.originY=h.originY),_||this._calcBounds(),this._updateObjectsCoords(_),delete h.centerPoint,this.callSuper("initialize",h)}this.setCoords()},_updateObjectsACoords:function(){for(var h=this._objects.length;h--;)this._objects[h].setCoords(!0)},_updateObjectsCoords:function(h){h=h||this.getCenterPoint();for(var c=this._objects.length;c--;)this._updateObjectCoords(this._objects[c],h)},_updateObjectCoords:function(d,h){d.set({left:d.left-h.x,top:d.top-h.y}),d.group=this,d.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(d){var h=!!this.group;return this._restoreObjectsState(),m.util.resetObjectTransform(this),d&&(h&&m.util.removeTransformFromObject(d,this.group.calcTransformMatrix()),this._objects.push(d),d.group=this,d._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,h?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(d){return this._restoreObjectsState(),m.util.resetObjectTransform(this),this.remove(d),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(d){this.dirty=!0,d.group=this,d._set("canvas",this.canvas)},_onObjectRemoved:function(d){this.dirty=!0,delete d.group},_set:function(d,h){var c=this._objects.length;if(this.useSetOnGroup)for(;c--;)this._objects[c].setOnGroup(d,h);if("canvas"===d)for(;c--;)this._objects[c]._set(d,h);m.Object.prototype._set.call(this,d,h)},toObject:function(d){var h=this.includeDefaultValues,c=this._objects.filter(function(_){return!_.excludeFromExport}).map(function(_){var u=_.includeDefaultValues;_.includeDefaultValues=h;var y=_.toObject(d);return _.includeDefaultValues=u,y}),f=m.Object.prototype.toObject.call(this,d);return f.objects=c,f},toDatalessObject:function(d){var h,c=this.sourcePath;if(c)h=c;else{var f=this.includeDefaultValues;h=this._objects.map(function(u){var y=u.includeDefaultValues;u.includeDefaultValues=f;var x=u.toDatalessObject(d);return u.includeDefaultValues=y,x})}var _=m.Object.prototype.toDatalessObject.call(this,d);return _.objects=h,_},render:function(d){this._transformDone=!0,this.callSuper("render",d),this._transformDone=!1},shouldCache:function(){var d=m.Object.prototype.shouldCache.call(this);if(d)for(var h=0,c=this._objects.length;h<c;h++)if(this._objects[h].willDrawShadow())return this.ownCaching=!1,!1;return d},willDrawShadow:function(){if(m.Object.prototype.willDrawShadow.call(this))return!0;for(var d=0,h=this._objects.length;d<h;d++)if(this._objects[d].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(d){for(var h=0,c=this._objects.length;h<c;h++)this._objects[h].render(d);this._drawClipPath(d,this.clipPath)},isCacheDirty:function(d){if(this.callSuper("isCacheDirty",d))return!0;if(!this.statefullCache)return!1;for(var h=0,c=this._objects.length;h<c;h++)if(this._objects[h].isCacheDirty(!0)){if(this._cacheCanvas){var f=this.cacheWidth/this.zoomX,_=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-f/2,-_/2,f,_)}return!0}return!1},_restoreObjectsState:function(){var d=this.calcOwnMatrix();return this._objects.forEach(function(h){m.util.addTransformToObject(h,d),delete h.group,h.setCoords()}),this},destroy:function(){return this._objects.forEach(function(d){d.set("dirty",!0)}),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject(function(d){d.dispose&&d.dispose()}),this._objects=[]},toActiveSelection:function(){if(this.canvas){var d=this._objects,h=this.canvas;this._objects=[];var c=this.toObject();delete c.objects;var f=new m.ActiveSelection([]);return f.set(c),f.type="activeSelection",h.remove(this),d.forEach(function(_){_.group=f,_.dirty=!0,h.add(_)}),f.canvas=h,f._objects=d,h._activeObject=f,f.setCoords(),f}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(h){h.setCoords(!0)}),this},_calcBounds:function(d){for(var f,_,u,E,h=[],c=[],y=["tr","br","bl","tl"],x=0,T=this._objects.length,L=y.length;x<T;++x){for(u=(f=this._objects[x]).calcACoords(),E=0;E<L;E++)h.push(u[_=y[E]].x),c.push(u[_].y);f.aCoords=u}this._getBounds(h,c,d)},_getBounds:function(d,h,c){var f=new m.Point(v(d),v(h)),_=new m.Point(g(d),g(h)),u=f.y||0,y=f.x||0,T=_.y-f.y||0;this.width=_.x-f.x||0,this.height=T,c||this.setPositionByOrigin({x:y,y:u},"left","top")},_toSVG:function(d){for(var h=["<g ","COMMON_PARTS"," >\n"],c=0,f=this._objects.length;c<f;c++)h.push("\t\t",this._objects[c].toSVG(d));return h.push("</g>\n"),h},getSvgStyles:function(){var h=this.visible?"":" visibility: hidden;";return[void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",this.getSvgFilter(),h].join("")},toClipPathSVG:function(d){for(var h=[],c=0,f=this._objects.length;c<f;c++)h.push("\t",this._objects[c].toClipPathSVG(d));return this._createBaseClipPathSVGMarkup(h,{reviver:d})}}),m.Group.fromObject=function(d,h){var c=d.objects,f=m.util.object.clone(d,!0);delete f.objects,"string"!=typeof c?m.util.enlivenObjects(c,function(_){m.util.enlivenObjectEnlivables(d,f,function(){h&&h(new m.Group(_,f,!0))})}):m.loadSVGFromURL(c,function(_){var u=m.util.groupSVGElements(_,d,c),y=f.clipPath;delete f.clipPath,u.set(f),y?m.util.enlivenObjects([y],function(x){u.clipPath=x[0],h&&h(u)}):h&&h(u)})})}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={});m.ActiveSelection||(m.ActiveSelection=m.util.createClass(m.Group,{type:"activeSelection",initialize:function(v,g){g=g||{},this._objects=v||[];for(var d=this._objects.length;d--;)this._objects[d].group=this;g.originX&&(this.originX=g.originX),g.originY&&(this.originY=g.originY),this._calcBounds(),this._updateObjectsCoords(),m.Object.prototype.initialize.call(this,g),this.setCoords()},toGroup:function(){var v=this._objects.concat();this._objects=[];var g=m.Object.prototype.toObject.call(this),d=new m.Group([]);if(delete g.type,d.set(g),v.forEach(function(c){c.canvas.remove(c),c.group=d}),d._objects=v,!this.canvas)return d;var h=this.canvas;return h.add(d),h._activeObject=d,d.setCoords(),d},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(v,g,d){v.save(),v.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",v,g),void 0===(d=d||{}).hasControls&&(d.hasControls=!1),d.forActiveSelection=!0;for(var h=0,c=this._objects.length;h<c;h++)this._objects[h]._renderControls(v,d);v.restore()}}),m.ActiveSelection.fromObject=function(v,g){m.util.enlivenObjects(v.objects,function(d){delete v.objects,g&&g(new m.ActiveSelection(d,v,!0))})})}(ht),function(C){"use strict";var m=S.util.object.extend;C.fabric||(C.fabric={}),C.fabric.Image?S.warn("fabric.Image is already defined."):(S.Image=S.util.createClass(S.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:S.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:S.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(v,g){g||(g={}),this.filters=[],this.cacheKey="texture"+S.Object.__uid++,this.callSuper("initialize",g),this._initElement(v,g)},getElement:function(){return this._element||{}},setElement:function(v,g){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=v,this._originalElement=v,this._initConfig(g),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(v){var g=S.filterBackend;g&&g.evictCachesForKey&&g.evictCachesForKey(v)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(v){S.util.cleanUpJsdomNode(this[v]),this[v]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var v=this.getElement();return{width:v.naturalWidth||v.width,height:v.naturalHeight||v.height}},_stroke:function(v){if(this.stroke&&0!==this.strokeWidth){var g=this.width/2,d=this.height/2;v.beginPath(),v.moveTo(-g,-d),v.lineTo(g,-d),v.lineTo(g,d),v.lineTo(-g,d),v.lineTo(-g,-d),v.closePath()}},toObject:function(v){var g=[];this.filters.forEach(function(h){h&&g.push(h.toObject())});var d=m(this.callSuper("toObject",["cropX","cropY"].concat(v)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:g});return this.resizeFilter&&(d.resizeFilter=this.resizeFilter.toObject()),d},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var d,v=[],g=[],h=this._element,c=-this.width/2,f=-this.height/2,_="",u="";if(!h)return[];if(this.hasCrop()){var y=S.Object.__uid++;v.push('<clipPath id="imageCrop_'+y+'">\n','\t<rect x="'+c+'" y="'+f+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),_=' clip-path="url(#imageCrop_'+y+')" '}if(this.imageSmoothing||(u='" image-rendering="optimizeSpeed'),g.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',c-this.cropX,'" y="',f-this.cropY,'" width="',h.width||h.naturalWidth,'" height="',h.height||h.height,u,'"',_,"></image>\n"),this.stroke||this.strokeDashArray){var x=this.fill;this.fill=null,d=["\t<rect ",'x="',c,'" y="',f,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=x}return"fill"!==this.paintFirst?v.concat(d,g):v.concat(g,d)},getSrc:function(v){var g=v?this._element:this._originalElement;return g?g.toDataURL?g.toDataURL():this.srcFromAttribute?g.getAttribute("src"):g.src:this.src||""},setSrc:function(v,g,d){return S.util.loadImage(v,function(h,c){this.setElement(h,d),this._setWidthHeight(),g&&g(this,c)},this,d&&d.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var v=this.resizeFilter,g=this.minimumScaleTrigger,d=this.getTotalObjectScaling(),h=d.scaleX,c=d.scaleY,f=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!v||h>g&&c>g)return this._element=f,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=h,void(this._lastScaleY=c);S.filterBackend||(S.filterBackend=S.initFilterBackend());var _=S.util.createCanvasElement(),u=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,y=f.width,x=f.height;_.width=y,_.height=x,this._element=_,this._lastScaleX=v.scaleX=h,this._lastScaleY=v.scaleY=c,S.filterBackend.applyFilters([v],f,y,x,this._element,u),this._filterScalingX=_.width/this._originalElement.width,this._filterScalingY=_.height/this._originalElement.height},applyFilters:function(v){if(v=(v=v||this.filters||[]).filter(function(f){return f&&!f.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===v.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var g=this._originalElement,d=g.naturalWidth||g.width,h=g.naturalHeight||g.height;if(this._element===this._originalElement){var c=S.util.createCanvasElement();c.width=d,c.height=h,this._element=c,this._filteredEl=c}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,d,h),this._lastScaleX=1,this._lastScaleY=1;return S.filterBackend||(S.filterBackend=S.initFilterBackend()),S.filterBackend.applyFilters(v,this._originalElement,d,h,this._element,this.cacheKey),(this._originalElement.width!==this._element.width||this._originalElement.height!==this._element.height)&&(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(v){S.util.setImageSmoothing(v,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(v),this._renderPaintInOrder(v)},drawCacheOnCanvas:function(v){S.util.setImageSmoothing(v,this.imageSmoothing),S.Object.prototype.drawCacheOnCanvas.call(this,v)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(v){var g=this._element;if(g){var d=this._filterScalingX,h=this._filterScalingY,c=this.width,f=this.height,_=Math.min,u=Math.max,y=u(this.cropX,0),x=u(this.cropY,0),T=g.naturalWidth||g.width,E=g.naturalHeight||g.height,L=y*d,H=x*h,U=_(c*d,T-L),Q=_(f*h,E-H),de=-c/2,we=-f/2,Ee=_(c,T/d-y),Le=_(f,E/h-x);g&&v.drawImage(g,L,H,U,Q,de,we,Ee,Le)}},_needsResize:function(){var v=this.getTotalObjectScaling();return v.scaleX!==this._lastScaleX||v.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(v,g){this.setElement(S.util.getById(v),g),S.util.addClass(this.getElement(),S.Image.CSS_CANVAS)},_initConfig:function(v){v||(v={}),this.setOptions(v),this._setWidthHeight(v)},_initFilters:function(v,g){v&&v.length?S.util.enlivenObjects(v,function(d){g&&g(d)},"fabric.Image.filters"):g&&g()},_setWidthHeight:function(v){v||(v={});var g=this.getElement();this.width=v.width||g.naturalWidth||g.width||0,this.height=v.height||g.naturalHeight||g.height||0},parsePreserveAspectRatioAttribute:function(){var x,v=S.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),g=this._element.width,d=this._element.height,h=1,c=1,f=0,_=0,u=0,y=0,T=this.width,E=this.height,L={width:T,height:E};return!v||"none"===v.alignX&&"none"===v.alignY?(h=T/g,c=E/d):("meet"===v.meetOrSlice&&(x=(T-g*(h=c=S.util.findScaleToFit(this._element,L)))/2,"Min"===v.alignX&&(f=-x),"Max"===v.alignX&&(f=x),x=(E-d*c)/2,"Min"===v.alignY&&(_=-x),"Max"===v.alignY&&(_=x)),"slice"===v.meetOrSlice&&(x=g-T/(h=c=S.util.findScaleToCover(this._element,L)),"Mid"===v.alignX&&(u=x/2),"Max"===v.alignX&&(u=x),x=d-E/c,"Mid"===v.alignY&&(y=x/2),"Max"===v.alignY&&(y=x),g=T/h,d=E/c)),{width:g,height:d,scaleX:h,scaleY:c,offsetLeft:f,offsetTop:_,cropX:u,cropY:y}}}),S.Image.CSS_CANVAS="canvas-img",S.Image.prototype.getSvgSrc=S.Image.prototype.getSrc,S.Image.fromObject=function(v,g){var d=S.util.object.clone(v);S.util.loadImage(d.src,function(h,c){c?g&&g(null,!0):S.Image.prototype._initFilters.call(d,d.filters,function(f){d.filters=f||[],S.Image.prototype._initFilters.call(d,[d.resizeFilter],function(_){d.resizeFilter=_[0],S.util.enlivenObjectEnlivables(d,d,function(){var u=new S.Image(h,d);g(u,!1)})})})},null,d.crossOrigin)},S.Image.fromURL=function(v,g,d){S.util.loadImage(v,function(h,c){g&&g(new S.Image(h,d),c)},null,d&&d.crossOrigin)},S.Image.ATTRIBUTE_NAMES=S.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),S.Image.fromElement=function(v,g,d){var h=S.parseAttributes(v,S.Image.ATTRIBUTE_NAMES);S.Image.fromURL(h["xlink:href"],g,m(d?S.util.object.clone(d):{},h))})}(ht),S.util.object.extend(S.Object.prototype,{_getAngleValueForStraighten:function(){var C=this.angle%360;return C>0?90*Math.round((C-1)/90):90*Math.round(C/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(C){var m=function(){},v=(C=C||{}).onComplete||m,g=C.onChange||m,d=this;return S.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(h){d.rotate(h),g()},onComplete:function(){d.setCoords(),v()}})}}),S.util.object.extend(S.StaticCanvas.prototype,{straightenObject:function(C){return C.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(C){return C.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function C(v,g){var d="precision "+g+" float;\nvoid main(){}",h=v.createShader(v.FRAGMENT_SHADER);return v.shaderSource(h,d),v.compileShader(h),!!v.getShaderParameter(h,v.COMPILE_STATUS)}function m(v){v&&v.tileSize&&(this.tileSize=v.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}S.isWebglSupported=function(v){if(S.isLikelyNode)return!1;v=v||S.WebglFilterBackend.prototype.tileSize;var g=document.createElement("canvas"),d=g.getContext("webgl")||g.getContext("experimental-webgl"),h=!1;if(d){S.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE),h=S.maxTextureSize>=v;for(var c=["highp","mediump","lowp"],f=0;f<3;f++)if(C(d,c[f])){S.webGlPrecision=c[f];break}}return this.isSupported=h,h},S.WebglFilterBackend=m,m.prototype={tileSize:2048,resources:{},setupGLContext:function(v,g){this.dispose(),this.createWebGLCanvas(v,g),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(v,g)},chooseFastestCopyGLTo2DMethod:function(v,g){var h,d=void 0!==window.performance;try{new ImageData(1,1),h=!0}catch(L){h=!1}var c="undefined"!=typeof ArrayBuffer,f="undefined"!=typeof Uint8ClampedArray;if(d&&h&&c&&f){var _=S.util.createCanvasElement(),u=new ArrayBuffer(v*g*4);if(S.forceGLPutImageData)return this.imageBuffer=u,void(this.copyGLTo2D=pr);var x,T,y={imageBuffer:u,destinationWidth:v,destinationHeight:g,targetCanvas:_};_.width=v,_.height=g,x=window.performance.now(),mt.call(y,this.gl,y),T=window.performance.now()-x,x=window.performance.now(),pr.call(y,this.gl,y),T>window.performance.now()-x?(this.imageBuffer=u,this.copyGLTo2D=pr):this.copyGLTo2D=mt}},createWebGLCanvas:function(v,g){var d=S.util.createCanvasElement();d.width=v,d.height=g;var h={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},c=d.getContext("webgl",h);c||(c=d.getContext("experimental-webgl",h)),c&&(c.clearColor(0,0,0,0),this.canvas=d,this.gl=c)},applyFilters:function(v,g,d,h,c,f){var u,_=this.gl;f&&(u=this.getCachedTexture(f,g));var y={originalWidth:g.width||g.originalWidth,originalHeight:g.height||g.originalHeight,sourceWidth:d,sourceHeight:h,destinationWidth:d,destinationHeight:h,context:_,sourceTexture:this.createTexture(_,d,h,!u&&g),targetTexture:this.createTexture(_,d,h),originalTexture:u||this.createTexture(_,d,h,!u&&g),passes:v.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:c},x=_.createFramebuffer();return _.bindFramebuffer(_.FRAMEBUFFER,x),v.forEach(function(T){T&&T.applyTo(y)}),function Ki(C){var m=C.targetCanvas,d=C.destinationWidth,h=C.destinationHeight;(m.width!==d||m.height!==h)&&(m.width=d,m.height=h)}(y),this.copyGLTo2D(_,y),_.bindTexture(_.TEXTURE_2D,null),_.deleteTexture(y.sourceTexture),_.deleteTexture(y.targetTexture),_.deleteFramebuffer(x),c.getContext("2d").setTransform(1,0,0,1,0,0),y},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(v,g,d,h){var c=v.createTexture();return v.bindTexture(v.TEXTURE_2D,c),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),h?v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,h):v.texImage2D(v.TEXTURE_2D,0,v.RGBA,g,d,0,v.RGBA,v.UNSIGNED_BYTE,null),c},getCachedTexture:function(v,g){if(this.textureCache[v])return this.textureCache[v];var d=this.createTexture(this.gl,g.width,g.height,g);return this.textureCache[v]=d,d},evictCachesForKey:function(v){this.textureCache[v]&&(this.gl.deleteTexture(this.textureCache[v]),delete this.textureCache[v])},copyGLTo2D:mt,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var v=this.gl,g={renderer:"",vendor:""};if(!v)return g;var d=v.getExtension("WEBGL_debug_renderer_info");if(d){var h=v.getParameter(d.UNMASKED_RENDERER_WEBGL),c=v.getParameter(d.UNMASKED_VENDOR_WEBGL);h&&(g.renderer=h.toLowerCase()),c&&(g.vendor=c.toLowerCase())}return this.gpuInfo=g,g}}}(),function(){"use strict";var C=function(){};function m(){}S.Canvas2dFilterBackend=m,m.prototype={evictCachesForKey:C,dispose:C,clearWebGLCaches:C,resources:{},applyFilters:function(v,g,d,h,c){var f=c.getContext("2d");f.drawImage(g,0,0,d,h);var y={sourceWidth:d,sourceHeight:h,imageData:f.getImageData(0,0,d,h),originalEl:g,originalImageData:f.getImageData(0,0,d,h),canvasEl:c,ctx:f,filterBackend:this};return v.forEach(function(x){x.applyTo(y)}),(y.imageData.width!==d||y.imageData.height!==h)&&(c.width=y.imageData.width,c.height=y.imageData.height),f.putImageData(y.imageData,0,0),y}}}(),S.Image=S.Image||{},S.Image.filters=S.Image.filters||{},S.Image.filters.BaseFilter=S.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(C){C&&this.setOptions(C)},setOptions:function(C){for(var m in C)this[m]=C[m]},createProgram:function(C,m,v){m=m||this.fragmentSource,v=v||this.vertexSource,"highp"!==S.webGlPrecision&&(m=m.replace(/precision highp float/g,"precision "+S.webGlPrecision+" float"));var g=C.createShader(C.VERTEX_SHADER);if(C.shaderSource(g,v),C.compileShader(g),!C.getShaderParameter(g,C.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+C.getShaderInfoLog(g));var d=C.createShader(C.FRAGMENT_SHADER);if(C.shaderSource(d,m),C.compileShader(d),!C.getShaderParameter(d,C.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+C.getShaderInfoLog(d));var h=C.createProgram();if(C.attachShader(h,g),C.attachShader(h,d),C.linkProgram(h),!C.getProgramParameter(h,C.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+C.getProgramInfoLog(h));var c=this.getAttributeLocations(C,h),f=this.getUniformLocations(C,h)||{};return f.uStepW=C.getUniformLocation(h,"uStepW"),f.uStepH=C.getUniformLocation(h,"uStepH"),{program:h,attributeLocations:c,uniformLocations:f}},getAttributeLocations:function(C,m){return{aPosition:C.getAttribLocation(m,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(C,m,v){var g=m.aPosition,d=C.createBuffer();C.bindBuffer(C.ARRAY_BUFFER,d),C.enableVertexAttribArray(g),C.vertexAttribPointer(g,2,C.FLOAT,!1,0,0),C.bufferData(C.ARRAY_BUFFER,v,C.STATIC_DRAW)},_setupFrameBuffer:function(C){var v,g,m=C.context;C.passes>1?(g=C.destinationHeight,(C.sourceWidth!==(v=C.destinationWidth)||C.sourceHeight!==g)&&(m.deleteTexture(C.targetTexture),C.targetTexture=C.filterBackend.createTexture(m,v,g)),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,C.targetTexture,0)):(m.bindFramebuffer(m.FRAMEBUFFER,null),m.finish())},_swapTextures:function(C){C.passes--,C.pass++;var m=C.targetTexture;C.targetTexture=C.sourceTexture,C.sourceTexture=m},isNeutralState:function(){var C=this.mainParameter,m=S.Image.filters[this.type].prototype;if(C){if(Array.isArray(m[C])){for(var v=m[C].length;v--;)if(this[C][v]!==m[C][v])return!1;return!0}return m[C]===this[C]}return!1},applyTo:function(C){C.webgl?(this._setupFrameBuffer(C),this.applyToWebGL(C),this._swapTextures(C)):this.applyTo2d(C)},retrieveShader:function(C){return C.programCache.hasOwnProperty(this.type)||(C.programCache[this.type]=this.createProgram(C.context)),C.programCache[this.type]},applyToWebGL:function(C){var m=C.context,v=this.retrieveShader(C);m.bindTexture(m.TEXTURE_2D,0===C.pass&&C.originalTexture?C.originalTexture:C.sourceTexture),m.useProgram(v.program),this.sendAttributeData(m,v.attributeLocations,C.aPosition),m.uniform1f(v.uniformLocations.uStepW,1/C.sourceWidth),m.uniform1f(v.uniformLocations.uStepH,1/C.sourceHeight),this.sendUniformData(m,v.uniformLocations),m.viewport(0,0,C.destinationWidth,C.destinationHeight),m.drawArrays(m.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(C,m,v){C.activeTexture(v),C.bindTexture(C.TEXTURE_2D,m),C.activeTexture(C.TEXTURE0)},unbindAdditionalTexture:function(C,m){C.activeTexture(m),C.bindTexture(C.TEXTURE_2D,null),C.activeTexture(C.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(C){this[this.mainParameter]=C},sendUniformData:function(){},createHelpLayer:function(C){if(!C.helpLayer){var m=document.createElement("canvas");m.width=C.sourceWidth,m.height=C.sourceHeight,C.helpLayer=m}},toObject:function(){var C={type:this.type},m=this.mainParameter;return m&&(C[m]=this[m]),C},toJSON:function(){return this.toObject()}}),S.Image.filters.BaseFilter.fromObject=function(C,m){var v=new S.Image.filters[C.type](C);return m&&m(v),v},function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.Image.filters;v.ColorMatrix=(0,m.util.createClass)(v.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(d){this.callSuper("initialize",d),this.matrix=this.matrix.slice(0)},applyTo2d:function(d){var u,y,x,T,E,c=d.imageData.data,f=c.length,_=this.matrix,L=this.colorsOnly;for(E=0;E<f;E+=4)u=c[E],y=c[E+1],x=c[E+2],L?(c[E]=u*_[0]+y*_[1]+x*_[2]+255*_[4],c[E+1]=u*_[5]+y*_[6]+x*_[7]+255*_[9],c[E+2]=u*_[10]+y*_[11]+x*_[12]+255*_[14]):(c[E]=u*_[0]+y*_[1]+x*_[2]+(T=c[E+3])*_[3]+255*_[4],c[E+1]=u*_[5]+y*_[6]+x*_[7]+T*_[8]+255*_[9],c[E+2]=u*_[10]+y*_[11]+x*_[12]+T*_[13]+255*_[14],c[E+3]=u*_[15]+y*_[16]+x*_[17]+T*_[18]+255*_[19])},getUniformLocations:function(d,h){return{uColorMatrix:d.getUniformLocation(h,"uColorMatrix"),uConstants:d.getUniformLocation(h,"uConstants")}},sendUniformData:function(d,h){var c=this.matrix,_=[c[4],c[9],c[14],c[19]];d.uniformMatrix4fv(h.uColorMatrix,!1,[c[0],c[1],c[2],c[3],c[5],c[6],c[7],c[8],c[10],c[11],c[12],c[13],c[15],c[16],c[17],c[18]]),d.uniform4fv(h.uConstants,_)}}),m.Image.filters.ColorMatrix.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.Image.filters;v.Brightness=(0,m.util.createClass)(v.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(d){if(0!==this.brightness){var f,c=d.imageData.data,_=c.length,u=Math.round(255*this.brightness);for(f=0;f<_;f+=4)c[f]=c[f]+u,c[f+1]=c[f+1]+u,c[f+2]=c[f+2]+u}},getUniformLocations:function(d,h){return{uBrightness:d.getUniformLocation(h,"uBrightness")}},sendUniformData:function(d,h){d.uniform1f(h.uBrightness,this.brightness)}}),m.Image.filters.Brightness.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.object.extend,g=m.Image.filters;g.Convolute=(0,m.util.createClass)(g.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(h){var c=Math.sqrt(this.matrix.length),f=this.type+"_"+c+"_"+(this.opaque?1:0),_=this.fragmentSource[f];return h.programCache.hasOwnProperty(f)||(h.programCache[f]=this.createProgram(h.context,_)),h.programCache[f]},applyTo2d:function(h){var U,Q,de,we,Ee,Le,He,ke,Re,Ge,Me,qe,z,c=h.imageData,f=c.data,_=this.matrix,u=Math.round(Math.sqrt(_.length)),y=Math.floor(u/2),x=c.width,T=c.height,E=h.ctx.createImageData(x,T),L=E.data,H=this.opaque?1:0;for(Me=0;Me<T;Me++)for(Ge=0;Ge<x;Ge++){for(Ee=4*(Me*x+Ge),U=0,Q=0,de=0,we=0,z=0;z<u;z++)for(qe=0;qe<u;qe++)Le=Ge+qe-y,!((He=Me+z-y)<0||He>=T||Le<0||Le>=x)&&(U+=f[ke=4*(He*x+Le)]*(Re=_[z*u+qe]),Q+=f[ke+1]*Re,de+=f[ke+2]*Re,H||(we+=f[ke+3]*Re));L[Ee]=U,L[Ee+1]=Q,L[Ee+2]=de,L[Ee+3]=H?f[Ee+3]:we}h.imageData=E},getUniformLocations:function(h,c){return{uMatrix:h.getUniformLocation(c,"uMatrix"),uOpaque:h.getUniformLocation(c,"uOpaque"),uHalfSize:h.getUniformLocation(c,"uHalfSize"),uSize:h.getUniformLocation(c,"uSize")}},sendUniformData:function(h,c){h.uniform1fv(c.uMatrix,this.matrix)},toObject:function(){return v(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),m.Image.filters.Convolute.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.Image.filters;v.Grayscale=(0,m.util.createClass)(v.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(d){var f,u,c=d.imageData.data,_=c.length,y=this.mode;for(f=0;f<_;f+=4)"average"===y?u=(c[f]+c[f+1]+c[f+2])/3:"lightness"===y?u=(Math.min(c[f],c[f+1],c[f+2])+Math.max(c[f],c[f+1],c[f+2]))/2:"luminosity"===y&&(u=.21*c[f]+.72*c[f+1]+.07*c[f+2]),c[f]=u,c[f+1]=u,c[f+2]=u},retrieveShader:function(d){var h=this.type+"_"+this.mode;return d.programCache.hasOwnProperty(h)||(d.programCache[h]=this.createProgram(d.context,this.fragmentSource[this.mode])),d.programCache[h]},getUniformLocations:function(d,h){return{uMode:d.getUniformLocation(h,"uMode")}},sendUniformData:function(d,h){d.uniform1i(h.uMode,1)},isNeutralState:function(){return!1}}),m.Image.filters.Grayscale.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.Image.filters;v.Invert=(0,m.util.createClass)(v.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(d){var f,c=d.imageData.data,_=c.length;for(f=0;f<_;f+=4)c[f]=255-c[f],c[f+1]=255-c[f+1],c[f+2]=255-c[f+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(d,h){return{uInvert:d.getUniformLocation(h,"uInvert")}},sendUniformData:function(d,h){d.uniform1i(h.uInvert,this.invert)}}),m.Image.filters.Invert.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.object.extend,g=m.Image.filters;g.Noise=(0,m.util.createClass)(g.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(h){if(0!==this.noise){var _,u,x,f=h.imageData.data,y=this.noise;for(_=0,u=f.length;_<u;_+=4)x=(.5-Math.random())*y,f[_]+=x,f[_+1]+=x,f[_+2]+=x}},getUniformLocations:function(h,c){return{uNoise:h.getUniformLocation(c,"uNoise"),uSeed:h.getUniformLocation(c,"uSeed")}},sendUniformData:function(h,c){h.uniform1f(c.uNoise,this.noise/255),h.uniform1f(c.uSeed,Math.random())},toObject:function(){return v(this.callSuper("toObject"),{noise:this.noise})}}),m.Image.filters.Noise.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.Image.filters;v.Pixelate=(0,m.util.createClass)(v.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(d){var u,y,x,T,E,L,H,U,Q,de,we,h=d.imageData,c=h.data,f=h.height,_=h.width;for(y=0;y<f;y+=this.blocksize)for(x=0;x<_;x+=this.blocksize)for(T=c[u=4*y*_+4*x],E=c[u+1],L=c[u+2],H=c[u+3],de=Math.min(y+this.blocksize,f),we=Math.min(x+this.blocksize,_),U=y;U<de;U++)for(Q=x;Q<we;Q++)c[u=4*U*_+4*Q]=T,c[u+1]=E,c[u+2]=L,c[u+3]=H},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(d,h){return{uBlocksize:d.getUniformLocation(h,"uBlocksize"),uStepW:d.getUniformLocation(h,"uStepW"),uStepH:d.getUniformLocation(h,"uStepH")}},sendUniformData:function(d,h){d.uniform1f(h.uBlocksize,this.blocksize)}}),m.Image.filters.Pixelate.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.object.extend,g=m.Image.filters;g.RemoveColor=(0,m.util.createClass)(g.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(h){var _,y,x,T,f=h.imageData.data,u=255*this.distance,E=new m.Color(this.color).getSource(),L=[E[0]-u,E[1]-u,E[2]-u],H=[E[0]+u,E[1]+u,E[2]+u];for(_=0;_<f.length;_+=4)x=f[_+1],T=f[_+2],(y=f[_])>L[0]&&x>L[1]&&T>L[2]&&y<H[0]&&x<H[1]&&T<H[2]&&(f[_+3]=0)},getUniformLocations:function(h,c){return{uLow:h.getUniformLocation(c,"uLow"),uHigh:h.getUniformLocation(c,"uHigh")}},sendUniformData:function(h,c){var f=new m.Color(this.color).getSource(),_=parseFloat(this.distance),y=[f[0]/255+_,f[1]/255+_,f[2]/255+_,1];h.uniform4fv(c.uLow,[0+f[0]/255-_,0+f[1]/255-_,0+f[2]/255-_,1]),h.uniform4fv(c.uHigh,y)},toObject:function(){return v(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),m.Image.filters.RemoveColor.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.Image.filters,g=m.util.createClass,d={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var h in d)v[h]=g(v.ColorMatrix,{type:h,matrix:d[h],mainParameter:!1,colorsOnly:!0}),m.Image.filters[h].fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric,v=m.Image.filters;v.BlendColor=(0,m.util.createClass)(v.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(d){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[d]+"}\n}"},retrieveShader:function(d){var c,h=this.type+"_"+this.mode;return d.programCache.hasOwnProperty(h)||(c=this.buildSource(this.mode),d.programCache[h]=this.createProgram(d.context,c)),d.programCache[h]},applyTo2d:function(d){var _,u,y,x,T,E,L,c=d.imageData.data,f=c.length,H=1-this.alpha;_=(L=new m.Color(this.color).getSource())[0]*this.alpha,u=L[1]*this.alpha,y=L[2]*this.alpha;for(var U=0;U<f;U+=4)switch(x=c[U],T=c[U+1],E=c[U+2],this.mode){case"multiply":c[U]=x*_/255,c[U+1]=T*u/255,c[U+2]=E*y/255;break;case"screen":c[U]=255-(255-x)*(255-_)/255,c[U+1]=255-(255-T)*(255-u)/255,c[U+2]=255-(255-E)*(255-y)/255;break;case"add":c[U]=x+_,c[U+1]=T+u,c[U+2]=E+y;break;case"diff":case"difference":c[U]=Math.abs(x-_),c[U+1]=Math.abs(T-u),c[U+2]=Math.abs(E-y);break;case"subtract":c[U]=x-_,c[U+1]=T-u,c[U+2]=E-y;break;case"darken":c[U]=Math.min(x,_),c[U+1]=Math.min(T,u),c[U+2]=Math.min(E,y);break;case"lighten":c[U]=Math.max(x,_),c[U+1]=Math.max(T,u),c[U+2]=Math.max(E,y);break;case"overlay":c[U]=_<128?2*x*_/255:255-2*(255-x)*(255-_)/255,c[U+1]=u<128?2*T*u/255:255-2*(255-T)*(255-u)/255,c[U+2]=y<128?2*E*y/255:255-2*(255-E)*(255-y)/255;break;case"exclusion":c[U]=_+x-2*_*x/255,c[U+1]=u+T-2*u*T/255,c[U+2]=y+E-2*y*E/255;break;case"tint":c[U]=_+x*H,c[U+1]=u+T*H,c[U+2]=y+E*H}},getUniformLocations:function(d,h){return{uColor:d.getUniformLocation(h,"uColor")}},sendUniformData:function(d,h){var c=new m.Color(this.color).getSource();c[0]=this.alpha*c[0]/255,c[1]=this.alpha*c[1]/255,c[2]=this.alpha*c[2]/255,c[3]=this.alpha,d.uniform4fv(h.uColor,c)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),m.Image.filters.BlendColor.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric,v=m.Image.filters;v.BlendImage=(0,m.util.createClass)(v.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(d){var h=this.type+"_"+this.mode,c=this.fragmentSource[this.mode];return d.programCache.hasOwnProperty(h)||(d.programCache[h]=this.createProgram(d.context,c)),d.programCache[h]},applyToWebGL:function(d){var h=d.context,c=this.createTexture(d.filterBackend,this.image);this.bindAdditionalTexture(h,c,h.TEXTURE1),this.callSuper("applyToWebGL",d),this.unbindAdditionalTexture(h,h.TEXTURE1)},createTexture:function(d,h){return d.getCachedTexture(h.cacheKey,h._element)},calculateMatrix:function(){var d=this.image;return[1/d.scaleX,0,0,0,1/d.scaleY,0,-d.left/d._element.width,-d.top/d._element.height,1]},applyTo2d:function(d){var x,T,E,L,H,U,Q,de,we,Ee,He,h=d.imageData,c=d.filterBackend.resources,f=h.data,_=f.length,u=h.width,y=h.height,Le=this.image;c.blendImage||(c.blendImage=m.util.createCanvasElement()),Ee=(we=c.blendImage).getContext("2d"),we.width!==u||we.height!==y?(we.width=u,we.height=y):Ee.clearRect(0,0,u,y),Ee.setTransform(Le.scaleX,0,0,Le.scaleY,Le.left,Le.top),Ee.drawImage(Le._element,0,0,u,y),He=Ee.getImageData(0,0,u,y).data;for(var ke=0;ke<_;ke+=4)switch(H=f[ke],U=f[ke+1],Q=f[ke+2],de=f[ke+3],x=He[ke],T=He[ke+1],E=He[ke+2],L=He[ke+3],this.mode){case"multiply":f[ke]=H*x/255,f[ke+1]=U*T/255,f[ke+2]=Q*E/255,f[ke+3]=de*L/255;break;case"mask":f[ke+3]=L}},getUniformLocations:function(d,h){return{uTransformMatrix:d.getUniformLocation(h,"uTransformMatrix"),uImage:d.getUniformLocation(h,"uImage")}},sendUniformData:function(d,h){var c=this.calculateMatrix();d.uniform1i(h.uImage,1),d.uniformMatrix3fv(h.uTransformMatrix,!1,c)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),m.Image.filters.BlendImage.fromObject=function(d,h){m.Image.fromObject(d.image,function(c){var f=m.util.object.clone(d);f.image=c,h(new m.Image.filters.BlendImage(f))})}}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=Math.pow,g=Math.floor,d=Math.sqrt,h=Math.abs,c=Math.round,f=Math.sin,_=Math.ceil,u=m.Image.filters;u.Resize=(0,m.util.createClass)(u.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(x,T){return{uDelta:x.getUniformLocation(T,"uDelta"),uTaps:x.getUniformLocation(T,"uTaps")}},sendUniformData:function(x,T){x.uniform2fv(T.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),x.uniform1fv(T.uTaps,this.taps)},retrieveShader:function(x){var T=this.getFilterWindow(),E=this.type+"_"+T;if(!x.programCache.hasOwnProperty(E)){var L=this.generateShader(T);x.programCache[E]=this.createProgram(x.context,L)}return x.programCache[E]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var x=this.lanczosCreate(this.lanczosLobes),T=this.tempScale,E=this.getFilterWindow(),L=new Array(E),H=1;H<=E;H++)L[H-1]=x(H*T);return L},generateShader:function(L){for(var T=new Array(L),E=this.fragmentSourceTOP,H=1;H<=L;H++)T[H-1]=H+".0 * uDelta";return E+="uniform float uTaps["+L+"];\n",E+="void main() {\n",E+="  vec4 color = texture2D(uTexture, vTexCoord);\n",E+="  float sum = 1.0;\n",T.forEach(function(U,Q){E+="  color += texture2D(uTexture, vTexCoord + "+U+") * uTaps["+Q+"];\n",E+="  color += texture2D(uTexture, vTexCoord - "+U+") * uTaps["+Q+"];\n",E+="  sum += 2.0 * uTaps["+Q+"];\n"}),E+="  gl_FragColor = color / sum;\n",E+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(x){x.webgl?(x.passes++,this.width=x.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=x.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),x.destinationWidth=this.dW,this._setupFrameBuffer(x),this.applyToWebGL(x),this._swapTextures(x),x.sourceWidth=x.destinationWidth,this.height=x.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),x.destinationHeight=this.dH,this._setupFrameBuffer(x),this.applyToWebGL(x),this._swapTextures(x),x.sourceHeight=x.destinationHeight):this.applyTo2d(x)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(x){return function(T){if(T>=x||T<=-x)return 0;if(T<1.1920929e-7&&T>-1.1920929e-7)return 1;var E=(T*=Math.PI)/x;return f(T)/T*f(E)/E}},applyTo2d:function(x){var T=x.imageData,E=this.scaleX,L=this.scaleY;this.rcpScaleX=1/E,this.rcpScaleY=1/L;var we,H=T.width,U=T.height,Q=c(H*E),de=c(U*L);"sliceHack"===this.resizeType?we=this.sliceByTwo(x,H,U,Q,de):"hermite"===this.resizeType?we=this.hermiteFastResize(x,H,U,Q,de):"bilinear"===this.resizeType?we=this.bilinearFiltering(x,H,U,Q,de):"lanczos"===this.resizeType&&(we=this.lanczosResize(x,H,U,Q,de)),x.imageData=we},sliceByTwo:function(x,T,E,L,H){var ke,Re,U=x.imageData,Q=.5,de=!1,we=!1,Ee=T*Q,Le=E*Q,He=m.filterBackend.resources,Ge=0,Me=0,qe=T,z=0;for(He.sliceByTwo||(He.sliceByTwo=document.createElement("canvas")),((ke=He.sliceByTwo).width<1.5*T||ke.height<E)&&(ke.width=1.5*T,ke.height=E),(Re=ke.getContext("2d")).clearRect(0,0,1.5*T,E),Re.putImageData(U,0,0),L=g(L),H=g(H);!de||!we;)T=Ee,E=Le,L<g(Ee*Q)?Ee=g(Ee*Q):(Ee=L,de=!0),H<g(Le*Q)?Le=g(Le*Q):(Le=H,we=!0),Re.drawImage(ke,Ge,Me,T,E,qe,z,Ee,Le),Ge=qe,Me=z,z+=Le;return Re.getImageData(Ge,Me,L,H)},lanczosResize:function(x,T,E,L,H){var Q=x.imageData.data,de=x.ctx.createImageData(L,H),we=de.data,Ee=this.lanczosCreate(this.lanczosLobes),Le=this.rcpScaleX,He=this.rcpScaleY,ke=2/this.rcpScaleX,Re=2/this.rcpScaleY,Ge=_(Le*this.lanczosLobes/2),Me=_(He*this.lanczosLobes/2),qe={},z={},X={};return function U($){var W,le,Y,j,K,ie,ae,ce,Ce,Se,Fe;for(z.x=($+.5)*Le,X.x=g(z.x),W=0;W<H;W++){for(z.y=(W+.5)*He,X.y=g(z.y),K=0,ie=0,ae=0,ce=0,Ce=0,le=X.x-Ge;le<=X.x+Ge;le++)if(!(le<0||le>=T)){Se=g(1e3*h(le-z.x)),qe[Se]||(qe[Se]={});for(var ue=X.y-Me;ue<=X.y+Me;ue++)ue<0||ue>=E||(Fe=g(1e3*h(ue-z.y)),qe[Se][Fe]||(qe[Se][Fe]=Ee(d(v(Se*ke,2)+v(Fe*Re,2))/1e3)),(Y=qe[Se][Fe])>0&&(K+=Y,ie+=Y*Q[j=4*(ue*T+le)],ae+=Y*Q[j+1],ce+=Y*Q[j+2],Ce+=Y*Q[j+3]))}we[j=4*(W*L+$)]=ie/K,we[j+1]=ae/K,we[j+2]=ce/K,we[j+3]=Ce/K}return++$<L?U($):de}(0)},bilinearFiltering:function(x,T,E,L,H){var Ee,Le,He,ke,Re,Ge,Me,X,z=0,$=this.rcpScaleX,W=this.rcpScaleY,le=4*(T-1),j=x.imageData.data,K=x.ctx.createImageData(L,H),ie=K.data;for(He=0;He<H;He++)for(ke=0;ke<L;ke++)for(Re=$*ke-(Ee=g($*ke)),Ge=W*He-(Le=g(W*He)),X=4*(Le*T+Ee),Me=0;Me<4;Me++)ie[z++]=j[X+Me]*(1-Re)*(1-Ge)+j[X+4+Me]*Re*(1-Ge)+j[X+le+Me]*Ge*(1-Re)+j[X+le+4+Me]*Re*Ge;return K},hermiteFastResize:function(x,T,E,L,H){for(var U=this.rcpScaleX,Q=this.rcpScaleY,de=_(U/2),we=_(Q/2),Le=x.imageData.data,He=x.ctx.createImageData(L,H),ke=He.data,Re=0;Re<H;Re++)for(var Ge=0;Ge<L;Ge++){for(var Me=4*(Ge+Re*L),qe=0,z=0,X=0,$=0,W=0,le=0,Y=0,j=(Re+.5)*Q,K=g(Re*Q);K<(Re+1)*Q;K++)for(var ie=h(j-(K+.5))/we,ae=(Ge+.5)*U,ce=ie*ie,Ce=g(Ge*U);Ce<(Ge+1)*U;Ce++){var Se=h(ae-(Ce+.5))/de,Fe=d(ce+Se*Se);Fe>1&&Fe<-1||(qe=2*Fe*Fe*Fe-3*Fe*Fe+1)>0&&(Y+=qe*Le[3+(Se=4*(Ce+K*T))],X+=qe,Le[Se+3]<255&&(qe=qe*Le[Se+3]/250),$+=qe*Le[Se],W+=qe*Le[Se+1],le+=qe*Le[Se+2],z+=qe)}ke[Me]=$/z,ke[Me+1]=W/z,ke[Me+2]=le/z,ke[Me+3]=Y/X}return He},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),m.Image.filters.Resize.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.Image.filters;v.Contrast=(0,m.util.createClass)(v.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(d){if(0!==this.contrast){var c,f=d.imageData.data,_=f.length,u=Math.floor(255*this.contrast),y=259*(u+255)/(255*(259-u));for(c=0;c<_;c+=4)f[c]=y*(f[c]-128)+128,f[c+1]=y*(f[c+1]-128)+128,f[c+2]=y*(f[c+2]-128)+128}},getUniformLocations:function(d,h){return{uContrast:d.getUniformLocation(h,"uContrast")}},sendUniformData:function(d,h){d.uniform1f(h.uContrast,this.contrast)}}),m.Image.filters.Contrast.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.Image.filters;v.Saturation=(0,m.util.createClass)(v.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(d){if(0!==this.saturation){var u,y,c=d.imageData.data,f=c.length,_=-this.saturation;for(u=0;u<f;u+=4)y=Math.max(c[u],c[u+1],c[u+2]),c[u]+=y!==c[u]?(y-c[u])*_:0,c[u+1]+=y!==c[u+1]?(y-c[u+1])*_:0,c[u+2]+=y!==c[u+2]?(y-c[u+2])*_:0}},getUniformLocations:function(d,h){return{uSaturation:d.getUniformLocation(h,"uSaturation")}},sendUniformData:function(d,h){d.uniform1f(h.uSaturation,-this.saturation)}}),m.Image.filters.Saturation.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.Image.filters;v.Vibrance=(0,m.util.createClass)(v.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(d){if(0!==this.vibrance){var u,y,T,c=d.imageData.data,f=c.length,_=-this.vibrance;for(u=0;u<f;u+=4)y=Math.max(c[u],c[u+1],c[u+2]),T=2*Math.abs(y-(c[u]+c[u+1]+c[u+2])/3)/255*_,c[u]+=y!==c[u]?(y-c[u])*T:0,c[u+1]+=y!==c[u+1]?(y-c[u+1])*T:0,c[u+2]+=y!==c[u+2]?(y-c[u+2])*T:0}},getUniformLocations:function(d,h){return{uVibrance:d.getUniformLocation(h,"uVibrance")}},sendUniformData:function(d,h){d.uniform1f(h.uVibrance,-this.vibrance)}}),m.Image.filters.Vibrance.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.Image.filters;v.Blur=(0,m.util.createClass)(v.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(d){d.webgl?(this.aspectRatio=d.sourceWidth/d.sourceHeight,d.passes++,this._setupFrameBuffer(d),this.horizontal=!0,this.applyToWebGL(d),this._swapTextures(d),this._setupFrameBuffer(d),this.horizontal=!1,this.applyToWebGL(d),this._swapTextures(d)):this.applyTo2d(d)},applyTo2d:function(d){d.imageData=this.simpleBlur(d)},simpleBlur:function(d){var c,f,h=d.filterBackend.resources,_=d.imageData.width,u=d.imageData.height;h.blurLayer1||(h.blurLayer1=m.util.createCanvasElement(),h.blurLayer2=m.util.createCanvasElement()),f=h.blurLayer2,((c=h.blurLayer1).width!==_||c.height!==u)&&(f.width=c.width=_,f.height=c.height=u);var E,L,H,U,y=c.getContext("2d"),x=f.getContext("2d"),T=15,Q=.06*this.blur*.5;for(y.putImageData(d.imageData,0,0),x.clearRect(0,0,_,u),U=-T;U<=T;U++)H=Q*(L=U/T)*_+(E=(Math.random()-.5)/4),x.globalAlpha=1-Math.abs(L),x.drawImage(c,H,E),y.drawImage(f,0,0),x.globalAlpha=1,x.clearRect(0,0,f.width,f.height);for(U=-T;U<=T;U++)H=Q*(L=U/T)*u+(E=(Math.random()-.5)/4),x.globalAlpha=1-Math.abs(L),x.drawImage(c,E,H),y.drawImage(f,0,0),x.globalAlpha=1,x.clearRect(0,0,f.width,f.height);d.ctx.drawImage(c,0,0);var de=d.ctx.getImageData(0,0,c.width,c.height);return y.globalAlpha=1,y.clearRect(0,0,c.width,c.height),de},getUniformLocations:function(d,h){return{delta:d.getUniformLocation(h,"uDelta")}},sendUniformData:function(d,h){var c=this.chooseRightDelta();d.uniform2fv(h.delta,c)},chooseRightDelta:function(){var c,d=1,h=[0,0];return this.horizontal?this.aspectRatio>1&&(d=1/this.aspectRatio):this.aspectRatio<1&&(d=this.aspectRatio),c=d*this.blur*.12,this.horizontal?h[0]=c:h[1]=c,h}}),v.Blur.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.Image.filters;v.Gamma=(0,m.util.createClass)(v.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(d){this.gamma=[1,1,1],v.BaseFilter.prototype.initialize.call(this,d)},applyTo2d:function(d){var T,c=d.imageData.data,f=this.gamma,_=c.length,u=1/f[0],y=1/f[1],x=1/f[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),T=0,_=256;T<_;T++)this.rVals[T]=255*Math.pow(T/255,u),this.gVals[T]=255*Math.pow(T/255,y),this.bVals[T]=255*Math.pow(T/255,x);for(T=0,_=c.length;T<_;T+=4)c[T]=this.rVals[c[T]],c[T+1]=this.gVals[c[T+1]],c[T+2]=this.bVals[c[T+2]]},getUniformLocations:function(d,h){return{uGamma:d.getUniformLocation(h,"uGamma")}},sendUniformData:function(d,h){d.uniform3fv(h.uGamma,this.gamma)}}),m.Image.filters.Gamma.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.Image.filters;v.Composed=(0,m.util.createClass)(v.BaseFilter,{type:"Composed",subFilters:[],initialize:function(d){this.callSuper("initialize",d),this.subFilters=this.subFilters.slice(0)},applyTo:function(d){d.passes+=this.subFilters.length-1,this.subFilters.forEach(function(h){h.applyTo(d)})},toObject:function(){return m.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(d){return d.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(d){return!d.isNeutralState()})}}),m.Image.filters.Composed.fromObject=function(d,h){var f=(d.subFilters||[]).map(function(u){return new m.Image.filters[u.type](u)}),_=new m.Image.filters.Composed({subFilters:f});return h&&h(_),_}}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.Image.filters;v.HueRotation=(0,m.util.createClass)(v.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var d=this.rotation*Math.PI,h=m.util.cos(d),c=m.util.sin(d),f=1/3,_=Math.sqrt(f)*c,u=1-h;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=h+u/3,this.matrix[1]=f*u-_,this.matrix[2]=f*u+_,this.matrix[5]=f*u+_,this.matrix[6]=h+f*u,this.matrix[7]=f*u-_,this.matrix[10]=f*u-_,this.matrix[11]=f*u+_,this.matrix[12]=h+f*u},isNeutralState:function(d){return this.calculateMatrix(),v.BaseFilter.prototype.isNeutralState.call(this,d)},applyTo:function(d){this.calculateMatrix(),v.BaseFilter.prototype.applyTo.call(this,d)}}),m.Image.filters.HueRotation.fromObject=m.Image.filters.BaseFilter.fromObject}(ht),function(C){"use strict";var m=C.fabric||(C.fabric={}),v=m.util.object.clone;if(m.Text)m.warn("fabric.Text is already defined");else{var g="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");m.Text=m.util.createClass(m.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:m.Object.prototype.stateProperties.concat(g),cacheProperties:m.Object.prototype.cacheProperties.concat(g),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(d,h){this.styles=h&&h.styles||{},this.text=d,this.__skipDimension=!0,this.callSuper("initialize",h),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var d=this.path;d&&(d.segmentsInfo=m.util.getPathSegmentsInfo(d.path))},getMeasuringContext:function(){return m._measuringContext||(m._measuringContext=this.canvas&&this.canvas.contextCache||m.util.createCanvasElement().getContext("2d")),m._measuringContext},_splitText:function(){var d=this._splitTextIntoLines(this.text);return this.textLines=d.lines,this._textLines=d.graphemeLines,this._unwrappedTextLines=d._unwrappedLines,this._text=d.graphemeText,d},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var d,h,f,_,u,y,x=0,T=this._textLines.length;x<T;x++)if(("justify"===this.textAlign||x!==T-1&&!this.isEndOfWrapping(x))&&(f=0,_=this._textLines[x],(h=this.getLineWidth(x))<this.width&&(y=this.textLines[x].match(this._reSpacesAndTabs)))){d=(this.width-h)/y.length;for(var E=0,L=_.length;E<=L;E++)u=this.__charBounds[x][E],this._reSpaceAndTab.test(_[E])?(u.width+=d,u.kernedWidth+=d,u.left+=f,f+=d):u.left+=f}},isEndOfWrapping:function(d){return d===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var d=this.callSuper("_getCacheCanvasDimensions"),h=this.fontSize;return d.width+=h*d.zoomX,d.height+=h*d.zoomY,d},_render:function(d){var h=this.path;h&&!h.isNotVisible()&&h._render(d),this._setTextStyles(d),this._renderTextLinesBackground(d),this._renderTextDecoration(d,"underline"),this._renderText(d),this._renderTextDecoration(d,"overline"),this._renderTextDecoration(d,"linethrough")},_renderText:function(d){"stroke"===this.paintFirst?(this._renderTextStroke(d),this._renderTextFill(d)):(this._renderTextFill(d),this._renderTextStroke(d))},_setTextStyles:function(d,h,c){if(d.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":d.textBaseline="middle";break;case"ascender":d.textBaseline="top";break;case"descender":d.textBaseline="bottom"}d.font=this._getFontDeclaration(h,c)},calcTextWidth:function(){for(var d=this.getLineWidth(0),h=1,c=this._textLines.length;h<c;h++){var f=this.getLineWidth(h);f>d&&(d=f)}return d},_renderTextLine:function(d,h,c,f,_,u){this._renderChars(d,h,c,f,_,u)},_renderTextLinesBackground:function(d){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var h,c,_,u,L,H,Q,f=d.fillStyle,y=this._getLeftOffset(),x=this._getTopOffset(),T=0,E=0,U=this.path,de=0,we=this._textLines.length;de<we;de++)if(h=this.getHeightOfLine(de),this.textBackgroundColor||this.styleHas("textBackgroundColor",de)){_=this._textLines[de],c=this._getLineLeftOffset(de),E=0,T=0,u=this.getValueOfPropertyAt(de,0,"textBackgroundColor");for(var Ee=0,Le=_.length;Ee<Le;Ee++)L=this.__charBounds[de][Ee],H=this.getValueOfPropertyAt(de,Ee,"textBackgroundColor"),U?(d.save(),d.translate(L.renderLeft,L.renderTop),d.rotate(L.angle),d.fillStyle=H,H&&d.fillRect(-L.width/2,-h/this.lineHeight*(1-this._fontSizeFraction),L.width,h/this.lineHeight),d.restore()):H!==u?(Q=y+c+T,"rtl"===this.direction&&(Q=this.width-Q-E),d.fillStyle=u,u&&d.fillRect(Q,x,E,h/this.lineHeight),T=L.left,E=L.width,u=H):E+=L.kernedWidth;H&&!U&&(Q=y+c+T,"rtl"===this.direction&&(Q=this.width-Q-E),d.fillStyle=H,d.fillRect(Q,x,E,h/this.lineHeight)),x+=h}else x+=h;d.fillStyle=f,this._removeShadow(d)}},getFontCache:function(d){var h=d.fontFamily.toLowerCase();m.charWidthsCache[h]||(m.charWidthsCache[h]={});var c=m.charWidthsCache[h],f=d.fontStyle.toLowerCase()+"_"+(d.fontWeight+"").toLowerCase();return c[f]||(c[f]={}),c[f]},_measureChar:function(d,h,c,f){var E,L,H,Q,_=this.getFontCache(h),x=c+d,T=this._getFontDeclaration(h)===this._getFontDeclaration(f),U=h.fontSize/this.CACHE_FONT_SIZE;if(c&&void 0!==_[c]&&(H=_[c]),void 0!==_[d]&&(Q=E=_[d]),T&&void 0!==_[x]&&(Q=(L=_[x])-H),void 0===E||void 0===H||void 0===L){var de=this.getMeasuringContext();this._setTextStyles(de,h,!0)}return void 0===E&&(Q=E=de.measureText(d).width,_[d]=E),void 0===H&&T&&c&&(H=de.measureText(c).width,_[c]=H),T&&void 0===L&&(L=de.measureText(x).width,_[x]=L,Q=L-H),{width:E*U,kernedWidth:Q*U}},getHeightOfChar:function(d,h){return this.getValueOfPropertyAt(d,h,"fontSize")},measureLine:function(d){var h=this._measureLine(d);return 0!==this.charSpacing&&(h.width-=this._getWidthOfCharSpacing()),h.width<0&&(h.width=0),h},_measureLine:function(d){var c,f,u,y,L,H,h=0,_=this._textLines[d],T=new Array(_.length),E=0,U=this.path,Q="right"===this.pathSide;for(this.__charBounds[d]=T,c=0;c<_.length;c++)y=this._getGraphemeBox(f=_[c],d,c,u),T[c]=y,h+=y.kernedWidth,u=f;if(T[c]={left:y?y.left+y.width:0,width:0,kernedWidth:0,height:this.fontSize},U){switch(H=U.segmentsInfo[U.segmentsInfo.length-1].length,(L=m.util.getPointOnPath(U.path,0,U.segmentsInfo)).x+=U.pathOffset.x,L.y+=U.pathOffset.y,this.textAlign){case"left":E=Q?H-h:0;break;case"center":E=(H-h)/2;break;case"right":E=Q?0:H-h}for(E+=this.pathStartOffset*(Q?-1:1),c=Q?_.length-1:0;Q?c>=0:c<_.length;Q?c--:c++)E>H?E%=H:E<0&&(E+=H),this._setGraphemeOnPath(E,y=T[c],L),E+=y.kernedWidth}return{width:h,numOfSpaces:0}},_setGraphemeOnPath:function(d,h,c){var _=this.path,u=m.util.getPointOnPath(_.path,d+h.kernedWidth/2,_.segmentsInfo);h.renderLeft=u.x-c.x,h.renderTop=u.y-c.y,h.angle=u.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(d,h,c,f,_){var L,u=this.getCompleteStyleDeclaration(h,c),y=f?this.getCompleteStyleDeclaration(h,c-1):{},x=this._measureChar(d,u,f,y),T=x.kernedWidth,E=x.width;0!==this.charSpacing&&(E+=L=this._getWidthOfCharSpacing(),T+=L);var H={width:E,left:0,height:u.fontSize,kernedWidth:T,deltaY:u.deltaY};if(c>0&&!_){var U=this.__charBounds[h][c-1];H.left=U.left+U.width+x.kernedWidth-x.width}return H},getHeightOfLine:function(d){if(this.__lineHeights[d])return this.__lineHeights[d];for(var h=this._textLines[d],c=this.getHeightOfChar(d,0),f=1,_=h.length;f<_;f++)c=Math.max(this.getHeightOfChar(d,f),c);return this.__lineHeights[d]=c*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var d,h=0,c=0,f=this._textLines.length;c<f;c++)d=this.getHeightOfLine(c),h+=c===f-1?d/this.lineHeight:d;return h},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(d,h){d.save();for(var c=0,f=this._getLeftOffset(),_=this._getTopOffset(),u=0,y=this._textLines.length;u<y;u++){var x=this.getHeightOfLine(u),T=x/this.lineHeight,E=this._getLineLeftOffset(u);this._renderTextLine(h,d,this._textLines[u],f+E,_+c+T,u),c+=x}d.restore()},_renderTextFill:function(d){!this.fill&&!this.styleHas("fill")||this._renderTextCommon(d,"fillText")},_renderTextStroke:function(d){(!this.stroke||0===this.strokeWidth)&&this.isEmptyStyles()||(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(d),d.save(),this._setLineDash(d,this.strokeDashArray),d.beginPath(),this._renderTextCommon(d,"strokeText"),d.closePath(),d.restore())},_renderChars:function(d,h,c,f,_,u){var T,E,H,Q,y=this.getHeightOfLine(u),x=-1!==this.textAlign.indexOf("justify"),L="",U=0,de=this.path,we=!x&&0===this.charSpacing&&this.isEmptyStyles(u)&&!de,Ee="ltr"===this.direction,Le="ltr"===this.direction?1:-1,ke=h.canvas.getAttribute("dir");if(h.save(),ke!==this.direction&&(h.canvas.setAttribute("dir",Ee?"ltr":"rtl"),h.direction=Ee?"ltr":"rtl",h.textAlign=Ee?"left":"right"),_-=y*this._fontSizeFraction/this.lineHeight,we)return this._renderChar(d,h,u,0,c.join(""),f,_,y),void h.restore();for(var Re=0,Ge=c.length-1;Re<=Ge;Re++)Q=Re===Ge||this.charSpacing||de,L+=c[Re],H=this.__charBounds[u][Re],0===U?(f+=Le*(H.kernedWidth-H.width),U+=H.width):U+=H.kernedWidth,x&&!Q&&this._reSpaceAndTab.test(c[Re])&&(Q=!0),Q||(T=T||this.getCompleteStyleDeclaration(u,Re),E=this.getCompleteStyleDeclaration(u,Re+1),Q=m.util.hasStyleChanged(T,E,!1)),Q&&(de?(h.save(),h.translate(H.renderLeft,H.renderTop),h.rotate(H.angle),this._renderChar(d,h,u,Re,L,-U/2,0,y),h.restore()):this._renderChar(d,h,u,Re,L,f,_,y),L="",T=E,f+=Le*U,U=0);h.restore()},_applyPatternGradientTransformText:function(d){var c,h=m.util.createCanvasElement(),f=this.width+this.strokeWidth,_=this.height+this.strokeWidth;return h.width=f,h.height=_,(c=h.getContext("2d")).beginPath(),c.moveTo(0,0),c.lineTo(f,0),c.lineTo(f,_),c.lineTo(0,_),c.closePath(),c.translate(f/2,_/2),c.fillStyle=d.toLive(c),this._applyPatternGradientTransform(c,d),c.fill(),c.createPattern(h,"no-repeat")},handleFiller:function(d,h,c){var f,_;return c.toLive?"percentage"===c.gradientUnits||c.gradientTransform||c.patternTransform?(d.translate(f=-this.width/2,_=-this.height/2),d[h]=this._applyPatternGradientTransformText(c),{offsetX:f,offsetY:_}):(d[h]=c.toLive(d,this),this._applyPatternGradientTransform(d,c)):(d[h]=c,{offsetX:0,offsetY:0})},_setStrokeStyles:function(d,h){return d.lineWidth=h.strokeWidth,d.lineCap=this.strokeLineCap,d.lineDashOffset=this.strokeDashOffset,d.lineJoin=this.strokeLineJoin,d.miterLimit=this.strokeMiterLimit,this.handleFiller(d,"strokeStyle",h.stroke)},_setFillStyles:function(d,h){return this.handleFiller(d,"fillStyle",h.fill)},_renderChar:function(d,h,c,f,_,u,y){var H,U,x=this._getStyleDeclaration(c,f),T=this.getCompleteStyleDeclaration(c,f),E="fillText"===d&&T.fill,L="strokeText"===d&&T.stroke&&T.strokeWidth;!L&&!E||(h.save(),E&&(H=this._setFillStyles(h,T)),L&&(U=this._setStrokeStyles(h,T)),h.font=this._getFontDeclaration(T),x&&x.textBackgroundColor&&this._removeShadow(h),x&&x.deltaY&&(y+=x.deltaY),E&&h.fillText(_,u-H.offsetX,y-H.offsetY),L&&h.strokeText(_,u-U.offsetX,y-U.offsetY),h.restore())},setSuperscript:function(d,h){return this._setScript(d,h,this.superscript)},setSubscript:function(d,h){return this._setScript(d,h,this.subscript)},_setScript:function(d,h,c){var f=this.get2DCursorLocation(d,!0),_=this.getValueOfPropertyAt(f.lineIndex,f.charIndex,"fontSize"),u=this.getValueOfPropertyAt(f.lineIndex,f.charIndex,"deltaY");return this.setSelectionStyles({fontSize:_*c.size,deltaY:u+_*c.baseline},d,h),this},_getLineLeftOffset:function(d){var h=this.getLineWidth(d),c=this.width-h,f=this.textAlign,_=this.direction,u=0,y=this.isEndOfWrapping(d);return"justify"===f||"justify-center"===f&&!y||"justify-right"===f&&!y||"justify-left"===f&&!y?0:("center"===f&&(u=c/2),"right"===f&&(u=c),"justify-center"===f&&(u=c/2),"justify-right"===f&&(u=c),"rtl"===_&&(u-=c),u)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var d=this._forceClearCache;return d||(d=this.hasStateChanged("_dimensionAffectingProps")),d&&(this.dirty=!0,this._forceClearCache=!1),d},getLineWidth:function(d){if(void 0!==this.__lineWidths[d])return this.__lineWidths[d];var c=this.measureLine(d).width;return this.__lineWidths[d]=c,c},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(d,h,c){var f=this._getStyleDeclaration(d,h);return f&&void 0!==f[c]?f[c]:this[c]},_renderTextDecoration:function(d,h){if(this[h]||this.styleHas(h)){for(var c,f,_,u,y,x,T,E,U,Q,de,we,Ee,Le,He,ke,L=this._getLeftOffset(),H=this._getTopOffset(),Re=this.path,Ge=this._getWidthOfCharSpacing(),Me=this.offsets[h],qe=0,z=this._textLines.length;qe<z;qe++)if(c=this.getHeightOfLine(qe),this[h]||this.styleHas(h,qe)){T=this._textLines[qe],Le=c/this.lineHeight,u=this._getLineLeftOffset(qe),Q=0,de=0,E=this.getValueOfPropertyAt(qe,0,h),ke=this.getValueOfPropertyAt(qe,0,"fill"),U=H+Le*(1-this._fontSizeFraction),f=this.getHeightOfChar(qe,0),y=this.getValueOfPropertyAt(qe,0,"deltaY");for(var X=0,$=T.length;X<$;X++)if(we=this.__charBounds[qe][X],Ee=this.getValueOfPropertyAt(qe,X,h),He=this.getValueOfPropertyAt(qe,X,"fill"),_=this.getHeightOfChar(qe,X),x=this.getValueOfPropertyAt(qe,X,"deltaY"),Re&&Ee&&He)d.save(),d.fillStyle=ke,d.translate(we.renderLeft,we.renderTop),d.rotate(we.angle),d.fillRect(-we.kernedWidth/2,Me*_+x,we.kernedWidth,this.fontSize/15),d.restore();else if((Ee!==E||He!==ke||_!==f||x!==y)&&de>0){var W=L+u+Q;"rtl"===this.direction&&(W=this.width-W-de),E&&ke&&(d.fillStyle=ke,d.fillRect(W,U+Me*f+y,de,this.fontSize/15)),Q=we.left,de=we.width,E=Ee,ke=He,f=_,y=x}else de+=we.kernedWidth;W=L+u+Q,"rtl"===this.direction&&(W=this.width-W-de),d.fillStyle=He,Ee&&He&&d.fillRect(W,U+Me*f+y,de-Ge,this.fontSize/15),H+=c}else H+=c;this._removeShadow(d)}},_getFontDeclaration:function(d,h){var c=d||this,f=this.fontFamily,_=m.Text.genericFonts.indexOf(f.toLowerCase())>-1,u=void 0===f||f.indexOf("'")>-1||f.indexOf(",")>-1||f.indexOf('"')>-1||_?c.fontFamily:'"'+c.fontFamily+'"';return[m.isLikelyNode?c.fontWeight:c.fontStyle,m.isLikelyNode?c.fontStyle:c.fontWeight,h?this.CACHE_FONT_SIZE+"px":c.fontSize+"px",u].join(" ")},render:function(d){!this.visible||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",d))},_splitTextIntoLines:function(d){for(var h=d.split(this._reNewline),c=new Array(h.length),f=["\n"],_=[],u=0;u<h.length;u++)c[u]=m.util.string.graphemeSplit(h[u]),_=_.concat(c[u],f);return _.pop(),{_unwrappedLines:c,lines:h,graphemeText:_,graphemeLines:c}},toObject:function(d){var h=g.concat(d),c=this.callSuper("toObject",h);return c.styles=m.util.stylesToArray(this.styles,this.text),c.path&&(c.path=this.path.toObject()),c},set:function(d,h){this.callSuper("set",d,h);var c=!1,f=!1;if("object"==typeof d)for(var _ in d)"path"===_&&this.setPathInfo(),c=c||-1!==this._dimensionAffectingProps.indexOf(_),f=f||"path"===_;else c=-1!==this._dimensionAffectingProps.indexOf(d),f="path"===d;return f&&this.setPathInfo(),c&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),m.Text.ATTRIBUTE_NAMES=m.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),m.Text.DEFAULT_SVG_FONT_SIZE=16,m.Text.fromElement=function(d,h,c){if(!d)return h(null);var f=m.parseAttributes(d,m.Text.ATTRIBUTE_NAMES),_=f.textAnchor||"left";if((c=m.util.object.extend(c?v(c):{},f)).top=c.top||0,c.left=c.left||0,f.textDecoration){var u=f.textDecoration;-1!==u.indexOf("underline")&&(c.underline=!0),-1!==u.indexOf("overline")&&(c.overline=!0),-1!==u.indexOf("line-through")&&(c.linethrough=!0),delete c.textDecoration}"dx"in f&&(c.left+=f.dx),"dy"in f&&(c.top+=f.dy),"fontSize"in c||(c.fontSize=m.Text.DEFAULT_SVG_FONT_SIZE);var y="";"textContent"in d?y=d.textContent:"firstChild"in d&&null!==d.firstChild&&"data"in d.firstChild&&null!==d.firstChild.data&&(y=d.firstChild.data),y=y.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var x=c.strokeWidth;c.strokeWidth=0;var T=new m.Text(y,c),E=T.getScaledHeight()/T.height,H=((T.height+T.strokeWidth)*T.lineHeight-T.height)*E,U=T.getScaledHeight()+H,Q=0;"center"===_&&(Q=T.getScaledWidth()/2),"right"===_&&(Q=T.getScaledWidth()),T.set({left:T.left-Q,top:T.top-(U-T.fontSize*(.07+T._fontSizeFraction))/T.lineHeight,strokeWidth:void 0!==x?x:1}),h(T)},m.Text.fromObject=function(d,h){var c=v(d),f=d.path;return delete c.path,m.Object._fromObject("Text",c,function(_){_.styles=m.util.stylesFromArray(d.styles,d.text),f?m.Object._fromObject("Path",f,function(u){_.set("path",u),h(_)},"path"):h(_)},"text")},m.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],m.util.createAccessors&&m.util.createAccessors(m.Text)}}(ht),S.util.object.extend(S.Text.prototype,{isEmptyStyles:function(C){if(!this.styles||void 0!==C&&!this.styles[C])return!0;var m=void 0===C?this.styles:{line:this.styles[C]};for(var v in m)for(var g in m[v])for(var d in m[v][g])return!1;return!0},styleHas:function(C,m){if(!this.styles||!C||""===C||void 0!==m&&!this.styles[m])return!1;var v=void 0===m?this.styles:{0:this.styles[m]};for(var g in v)for(var d in v[g])if(void 0!==v[g][d][C])return!0;return!1},cleanStyle:function(C){if(!this.styles||!C||""===C)return!1;var g,d,m=this.styles,v=0,h=!0,c=0;for(var _ in m){for(var u in g=0,m[_]){var f;v++,(f=m[_][u]).hasOwnProperty(C)?(d?f[C]!==d&&(h=!1):d=f[C],f[C]===this[C]&&delete f[C]):h=!1,0!==Object.keys(f).length?g++:delete m[_][u]}0===g&&delete m[_]}for(var x=0;x<this._textLines.length;x++)c+=this._textLines[x].length;h&&v===c&&(this[C]=d,this.removeStyle(C))},removeStyle:function(C){if(this.styles&&C&&""!==C){var v,g,d,m=this.styles;for(g in m){for(d in v=m[g])delete v[d][C],0===Object.keys(v[d]).length&&delete v[d];0===Object.keys(v).length&&delete m[g]}}},_extendStyles:function(C,m){var v=this.get2DCursorLocation(C);this._getLineStyle(v.lineIndex)||this._setLineStyle(v.lineIndex),this._getStyleDeclaration(v.lineIndex,v.charIndex)||this._setStyleDeclaration(v.lineIndex,v.charIndex,{}),S.util.object.extend(this._getStyleDeclaration(v.lineIndex,v.charIndex),m)},get2DCursorLocation:function(C,m){void 0===C&&(C=this.selectionStart);for(var v=m?this._unwrappedTextLines:this._textLines,g=v.length,d=0;d<g;d++){if(C<=v[d].length)return{lineIndex:d,charIndex:C};C-=v[d].length+this.missingNewlineOffset(d)}return{lineIndex:d-1,charIndex:v[d-1].length<C?v[d-1].length:C}},getSelectionStyles:function(C,m,v){void 0===C&&(C=this.selectionStart||0),void 0===m&&(m=this.selectionEnd||C);for(var g=[],d=C;d<m;d++)g.push(this.getStyleAtPosition(d,v));return g},getStyleAtPosition:function(C,m){var v=this.get2DCursorLocation(C);return(m?this.getCompleteStyleDeclaration(v.lineIndex,v.charIndex):this._getStyleDeclaration(v.lineIndex,v.charIndex))||{}},setSelectionStyles:function(C,m,v){void 0===m&&(m=this.selectionStart||0),void 0===v&&(v=this.selectionEnd||m);for(var g=m;g<v;g++)this._extendStyles(g,C);return this._forceClearCache=!0,this},_getStyleDeclaration:function(C,m){var v=this.styles&&this.styles[C];return v?v[m]:null},getCompleteStyleDeclaration:function(C,m){for(var d,v=this._getStyleDeclaration(C,m)||{},g={},h=0;h<this._styleProperties.length;h++)g[d=this._styleProperties[h]]=void 0===v[d]?this[d]:v[d];return g},_setStyleDeclaration:function(C,m,v){this.styles[C][m]=v},_deleteStyleDeclaration:function(C,m){delete this.styles[C][m]},_getLineStyle:function(C){return!!this.styles[C]},_setLineStyle:function(C){this.styles[C]={}},_deleteLineStyle:function(C){delete this.styles[C]}}),function(){function C(m){m.textDecoration&&(m.textDecoration.indexOf("underline")>-1&&(m.underline=!0),m.textDecoration.indexOf("line-through")>-1&&(m.linethrough=!0),m.textDecoration.indexOf("overline")>-1&&(m.overline=!0),delete m.textDecoration)}S.IText=S.util.createClass(S.Text,S.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(m,v){this.callSuper("initialize",m,v),this.initBehavior()},setSelectionStart:function(m){m=Math.max(m,0),this._updateAndFire("selectionStart",m)},setSelectionEnd:function(m){m=Math.min(m,this.text.length),this._updateAndFire("selectionEnd",m)},_updateAndFire:function(m,v){this[m]!==v&&(this._fireSelectionChanged(),this[m]=v),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(m){this.clearContextTop(),this.callSuper("render",m),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(m){this.callSuper("_render",m)},clearContextTop:function(m){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var v=this.canvas.contextTop,g=this.canvas.viewportTransform;v.save(),v.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this.transform(v),this._clearTextArea(v),m||v.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var m=this._getCursorBoundaries(),v=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(m,v):this.renderSelection(m,v),v.restore()}},_clearTextArea:function(m){var v=this.width+4,g=this.height+4;m.clearRect(-v/2,-g/2,v,g)},_getCursorBoundaries:function(m){void 0===m&&(m=this.selectionStart);var v=this._getLeftOffset(),g=this._getTopOffset(),d=this._getCursorBoundariesOffsets(m);return{left:v,top:g,leftOffset:d.left,topOffset:d.top}},_getCursorBoundariesOffsets:function(m){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var v,g,d,f,h=0,c=0,_=this.get2DCursorLocation(m);d=_.charIndex,g=_.lineIndex;for(var u=0;u<g;u++)h+=this.getHeightOfLine(u);v=this._getLineLeftOffset(g);var y=this.__charBounds[g][d];return y&&(c=y.left),0!==this.charSpacing&&d===this._textLines[g].length&&(c-=this._getWidthOfCharSpacing()),f={top:h,left:v+(c>0?c:0)},"rtl"===this.direction&&(f.left*=-1),this.cursorOffsetCache=f,this.cursorOffsetCache},renderCursor:function(m,v){var g=this.get2DCursorLocation(),d=g.lineIndex,h=g.charIndex>0?g.charIndex-1:0,c=this.getValueOfPropertyAt(d,h,"fontSize"),f=this.scaleX*this.canvas.getZoom(),_=this.cursorWidth/f,u=m.topOffset,y=this.getValueOfPropertyAt(d,h,"deltaY");u+=(1-this._fontSizeFraction)*this.getHeightOfLine(d)/this.lineHeight-c*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(m,v),v.fillStyle=this.cursorColor||this.getValueOfPropertyAt(d,h,"fill"),v.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,v.fillRect(m.left+m.leftOffset-_/2,u+m.top+y,_,c)},renderSelection:function(m,v){for(var g=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,d=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,h=-1!==this.textAlign.indexOf("justify"),c=this.get2DCursorLocation(g),f=this.get2DCursorLocation(d),_=c.lineIndex,u=f.lineIndex,y=c.charIndex<0?0:c.charIndex,x=f.charIndex<0?0:f.charIndex,T=_;T<=u;T++){var H,E=this._getLineLeftOffset(T)||0,L=this.getHeightOfLine(T),U=0,Q=0;if(T===_&&(U=this.__charBounds[_][y].left),T>=_&&T<u)Q=h&&!this.isEndOfWrapping(T)?this.width:this.getLineWidth(T)||5;else if(T===u)if(0===x)Q=this.__charBounds[u][x].left;else{var de=this._getWidthOfCharSpacing();Q=this.__charBounds[u][x-1].left+this.__charBounds[u][x-1].width-de}H=L,(this.lineHeight<1||T===u&&this.lineHeight>1)&&(L/=this.lineHeight);var we=m.left+E+U,Ee=Q-U,Le=L,He=0;this.inCompositionMode?(v.fillStyle=this.compositionColor||"black",Le=1,He=L):v.fillStyle=this.selectionColor,"rtl"===this.direction&&(we=this.width-we-Ee),v.fillRect(we,m.top+m.topOffset+He,Ee,Le),m.topOffset+=H}},getCurrentCharFontSize:function(){var m=this._getCurrentCharIndex();return this.getValueOfPropertyAt(m.l,m.c,"fontSize")},getCurrentCharColor:function(){var m=this._getCurrentCharIndex();return this.getValueOfPropertyAt(m.l,m.c,"fill")},_getCurrentCharIndex:function(){var m=this.get2DCursorLocation(this.selectionStart,!0);return{l:m.lineIndex,c:m.charIndex>0?m.charIndex-1:0}}}),S.IText.fromObject=function(m,v){var g=S.util.stylesFromArray(m.styles,m.text),d=Object.assign({},m,{styles:g});if(C(d),d.styles)for(var h in d.styles)for(var c in d.styles[h])C(d.styles[h][c]);S.Object._fromObject("IText",d,v,"text")}}(),function(){var C=S.util.object.clone;S.util.object.extend(S.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var m=this;this.on("added",function(){var v=m.canvas;v&&(v._hasITextHandlers||(v._hasITextHandlers=!0,m._initCanvasHandlers(v)),v._iTextInstances=v._iTextInstances||[],v._iTextInstances.push(m))})},initRemovedHandler:function(){var m=this;this.on("removed",function(){var v=m.canvas;v&&(v._iTextInstances=v._iTextInstances||[],S.util.removeFromArray(v._iTextInstances,m),0===v._iTextInstances.length&&(v._hasITextHandlers=!1,m._removeCanvasHandlers(v)))})},_initCanvasHandlers:function(m){m._mouseUpITextHandler=function(){m._iTextInstances&&m._iTextInstances.forEach(function(v){v.__isMousedown=!1})},m.on("mouse:up",m._mouseUpITextHandler)},_removeCanvasHandlers:function(m){m.off("mouse:up",m._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(m,v,g,d){var h;return h={isAborted:!1,abort:function(){this.isAborted=!0}},m.animate("_currentCursorOpacity",v,{duration:g,onComplete:function(){h.isAborted||m[d]()},onChange:function(){m.canvas&&m.selectionStart===m.selectionEnd&&m.renderCursorOrSelection()},abort:function(){return h.isAborted}}),h},_onTickComplete:function(){var m=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){m._currentTickCompleteState=m._animateCursor(m,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(m){var v=this,g=m?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){v._tick()},g)},abortCursorAnimation:function(){var m=this._currentTickState||this._currentTickCompleteState,v=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,m&&v&&v.clearContext(v.contextTop||v.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(m){var v=0,g=m-1;if(this._reSpace.test(this._text[g]))for(;this._reSpace.test(this._text[g]);)v++,g--;for(;/\S/.test(this._text[g])&&g>-1;)v++,g--;return m-v},findWordBoundaryRight:function(m){var v=0,g=m;if(this._reSpace.test(this._text[g]))for(;this._reSpace.test(this._text[g]);)v++,g++;for(;/\S/.test(this._text[g])&&g<this._text.length;)v++,g++;return m+v},findLineBoundaryLeft:function(m){for(var v=0,g=m-1;!/\n/.test(this._text[g])&&g>-1;)v++,g--;return m-v},findLineBoundaryRight:function(m){for(var v=0,g=m;!/\n/.test(this._text[g])&&g<this._text.length;)v++,g++;return m+v},searchWordBoundary:function(m,v){for(var g=this._text,d=this._reSpace.test(g[m])?m-1:m,h=g[d],c=S.reNonWord;!c.test(h)&&d>0&&d<g.length;)h=g[d+=v];return c.test(h)&&(d+=1===v?0:1),d},selectWord:function(m){var v=this.searchWordBoundary(m=m||this.selectionStart,-1),g=this.searchWordBoundary(m,1);this.selectionStart=v,this.selectionEnd=g,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(m){var v=this.findLineBoundaryLeft(m=m||this.selectionStart),g=this.findLineBoundaryRight(m);return this.selectionStart=v,this.selectionEnd=g,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(m){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(m),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(m){m._iTextInstances&&m._iTextInstances.forEach(function(v){v.selected=!1,v.isEditing&&v.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(m){if(this.__isMousedown&&this.isEditing){document.activeElement!==this.hiddenTextarea&&this.hiddenTextarea.focus();var v=this.getSelectionStartFromPointer(m.e),g=this.selectionStart,d=this.selectionEnd;(v!==this.__selectionStartOnMouseDown||g===d)&&(g===v||d===v)||(v>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=v):(this.selectionStart=v,this.selectionEnd=this.__selectionStartOnMouseDown),(this.selectionStart!==g||this.selectionEnd!==d)&&(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(m,v,g){var d=g.slice(0,m),h=S.util.string.graphemeSplit(d).length;if(m===v)return{selectionStart:h,selectionEnd:h};var c=g.slice(m,v);return{selectionStart:h,selectionEnd:h+S.util.string.graphemeSplit(c).length}},fromGraphemeToStringSelection:function(m,v,g){var h=g.slice(0,m).join("").length;return m===v?{selectionStart:h,selectionEnd:h}:{selectionStart:h,selectionEnd:h+g.slice(m,v).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var m=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=m.selectionStart,this.hiddenTextarea.selectionEnd=m.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var m=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=m.selectionEnd,this.inCompositionMode||(this.selectionStart=m.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var m=this._calcTextareaPosition();this.hiddenTextarea.style.left=m.left,this.hiddenTextarea.style.top=m.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var m=this.inCompositionMode?this.compositionStart:this.selectionStart,v=this._getCursorBoundaries(m),g=this.get2DCursorLocation(m),c=this.getValueOfPropertyAt(g.lineIndex,g.charIndex,"fontSize")*this.lineHeight,f=v.leftOffset,_=this.calcTransformMatrix(),u={x:v.left+f,y:v.top+v.topOffset+c},y=this.canvas.getRetinaScaling(),x=this.canvas.upperCanvasEl,T=x.width/y,E=x.height/y,L=T-c,H=E-c,U=x.clientWidth/T,Q=x.clientHeight/E;return u=S.util.transformPoint(u,_),(u=S.util.transformPoint(u,this.canvas.viewportTransform)).x*=U,u.y*=Q,u.x<0&&(u.x=0),u.x>L&&(u.x=L),u.y<0&&(u.y=0),u.y>H&&(u.y=H),u.x+=this.canvas._offset.left,u.y+=this.canvas._offset.top,{left:u.x+"px",top:u.y+"px",fontSize:c+"px",charHeight:c}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){!this._savedProps||(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var m=this._textBeforeEdit!==this.text,v=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,v&&(v.blur&&v.blur(),v.parentNode&&v.parentNode.removeChild(v)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),m&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),m&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var m in this.styles)this._textLines[m]||delete this.styles[m]},removeStyleFromTo:function(m,v){var u,y,g=this.get2DCursorLocation(m,!0),d=this.get2DCursorLocation(v,!0),h=g.lineIndex,c=g.charIndex,f=d.lineIndex,_=d.charIndex;if(h!==f){if(this.styles[h])for(u=c;u<this._unwrappedTextLines[h].length;u++)delete this.styles[h][u];if(this.styles[f])for(u=_;u<this._unwrappedTextLines[f].length;u++)(y=this.styles[f][u])&&(this.styles[h]||(this.styles[h]={}),this.styles[h][c+u-_]=y);for(u=h+1;u<=f;u++)delete this.styles[u];this.shiftLineStyles(f,h-f)}else if(this.styles[h]){y=this.styles[h];var T,E,x=_-c;for(u=c;u<_;u++)delete y[u];for(E in this.styles[h])(T=parseInt(E,10))>=_&&(y[T-x]=y[E],delete y[E])}},shiftLineStyles:function(m,v){var g=C(this.styles);for(var d in this.styles){var h=parseInt(d,10);h>m&&(this.styles[h+v]=g[h],g[h-v]||delete this.styles[h])}},restartCursorIfNeeded:function(){(!this._currentTickState||this._currentTickState.isAborted||!this._currentTickCompleteState||this._currentTickCompleteState.isAborted)&&this.initDelayedCursor()},insertNewlineStyleObject:function(m,v,g,d){var h,c={},f=!1,_=this._unwrappedTextLines[m].length===v;for(var u in g||(g=1),this.shiftLineStyles(m,g),this.styles[m]&&(h=this.styles[m][0===v?v:v-1]),this.styles[m]){var y=parseInt(u,10);y>=v&&(f=!0,c[y-v]=this.styles[m][u],_&&0===v||delete this.styles[m][u])}var x=!1;for(f&&!_&&(this.styles[m+g]=c,x=!0),x&&g--;g>0;)d&&d[g-1]?this.styles[m+g]={0:C(d[g-1])}:h?this.styles[m+g]={0:C(h)}:delete this.styles[m+g],g--;this._forceClearCache=!0},insertCharStyleObject:function(m,v,g,d){this.styles||(this.styles={});var h=this.styles[m],c=h?C(h):{};for(var f in g||(g=1),c){var _=parseInt(f,10);_>=v&&(h[_+g]=c[_],c[_-g]||delete h[_])}if(this._forceClearCache=!0,d)for(;g--;)!Object.keys(d[g]).length||(this.styles[m]||(this.styles[m]={}),this.styles[m][v+g]=C(d[g]));else if(h)for(var u=h[v?v-1:1];u&&g--;)this.styles[m][v+g]=C(u)},insertNewStyleBlock:function(m,v,g){for(var d=this.get2DCursorLocation(v,!0),h=[0],c=0,f=0;f<m.length;f++)"\n"===m[f]?h[++c]=0:h[c]++;for(h[0]>0&&(this.insertCharStyleObject(d.lineIndex,d.charIndex,h[0],g),g=g&&g.slice(h[0]+1)),c&&this.insertNewlineStyleObject(d.lineIndex,d.charIndex+h[0],c),f=1;f<c;f++)h[f]>0?this.insertCharStyleObject(d.lineIndex+f,0,h[f],g):g&&this.styles[d.lineIndex+f]&&g[0]&&(this.styles[d.lineIndex+f][0]=g[0]),g=g&&g.slice(h[f]+1);h[f]>0&&this.insertCharStyleObject(d.lineIndex+f,0,h[f],g)},setSelectionStartEndWithShift:function(m,v,g){g<=m?(v===m?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=m),this.selectionStart=g):g>m&&g<v?"right"===this._selectionDirection?this.selectionEnd=g:this.selectionStart=g:(v===m?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=v),this.selectionEnd=g)},setSelectionInBoundaries:function(){var m=this.text.length;this.selectionStart>m?this.selectionStart=m:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>m?this.selectionEnd=m:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),S.util.object.extend(S.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(C){if(this.canvas){this.__newClickTime=+new Date;var m=C.pointer;this.isTripleClick(m)&&(this.fire("tripleclick",C),this._stopEvent(C.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=m,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(C){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===C.x&&this.__lastPointer.y===C.y},_stopEvent:function(C){C.preventDefault&&C.preventDefault(),C.stopPropagation&&C.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(C){!this.isEditing||this.selectWord(this.getSelectionStartFromPointer(C.e))},tripleClickHandler:function(C){!this.isEditing||this.selectLine(this.getSelectionStartFromPointer(C.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(C){!this.canvas||!this.editable||C.e.button&&1!==C.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(C.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(C){!this.canvas||!this.editable||C.e.button&&1!==C.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(C){if(this.__isMousedown=!1,!(!this.editable||this.group||C.transform&&C.transform.actionPerformed||C.e.button&&1!==C.e.button)){if(this.canvas){var m=this.canvas._activeObject;if(m&&m!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(C.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(C){var m=this.getSelectionStartFromPointer(C);C.shiftKey?this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,m):(this.selectionStart=m,this.selectionEnd=m),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(C){for(var _,m=this.getLocalPointer(C),v=0,g=0,d=0,h=0,c=0,u=0,y=this._textLines.length;u<y&&d<=m.y;u++)d+=this.getHeightOfLine(u)*this.scaleY,c=u,u>0&&(h+=this._textLines[u-1].length+this.missingNewlineOffset(u-1));g=this._getLineLeftOffset(c)*this.scaleX,_=this._textLines[c],"rtl"===this.direction&&(m.x=this.width*this.scaleX-m.x+g);for(var x=0,T=_.length;x<T&&(v=g,(g+=this.__charBounds[c][x].kernedWidth*this.scaleX)<=m.x);x++)h++;return this._getNewSelectionStartFromOffset(m,v,g,h,T)},_getNewSelectionStartFromOffset:function(C,m,v,g,d){var c=v-C.x,_=g+(c>C.x-m||c<0?0:1);return this.flipX&&(_=d-_),_>this._text.length&&(_=this._text.length),_}}),S.util.object.extend(S.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=S.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var C=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+C.top+"; left: "+C.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uff70top: "+C.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):S.document.body.appendChild(this.hiddenTextarea),S.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),S.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),S.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),S.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),S.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),S.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),S.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),S.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),S.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(S.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(C){if(this.isEditing){var m="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(C.keyCode in m)this[m[C.keyCode]](C);else{if(!(C.keyCode in this.ctrlKeysMapDown)||!C.ctrlKey&&!C.metaKey)return;this[this.ctrlKeysMapDown[C.keyCode]](C)}C.stopImmediatePropagation(),C.preventDefault(),C.keyCode>=33&&C.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(C){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:C.keyCode in this.ctrlKeysMapUp&&(C.ctrlKey||C.metaKey)&&(this[this.ctrlKeysMapUp[C.keyCode]](C),C.stopImmediatePropagation(),C.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(C){var m=this.fromPaste;if(this.fromPaste=!1,C&&C.stopPropagation(),this.isEditing){var h,c,x,T,E,v=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,g=this._text.length,d=v.length,f=d-g,_=this.selectionStart,u=this.selectionEnd,y=_!==u;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var L=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),H=_>L.selectionStart;y?(h=this._text.slice(_,u),f+=u-_):d<g&&(h=H?this._text.slice(u+f,u):this._text.slice(_,_-f)),c=v.slice(L.selectionEnd-f,L.selectionEnd),h&&h.length&&(c.length&&(x=this.getSelectionStyles(_,_+1,!1),x=c.map(function(){return x[0]})),y?(T=_,E=u):H?(T=u-h.length,E=u):(T=u,E=u+h.length),this.removeStyleFromTo(T,E)),c.length&&(m&&c.join("")===S.copiedText&&!S.disableStyleCopyPaste&&(x=S.copiedTextStyle),this.insertNewStyleBlock(c,_,x)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(C){this.compositionStart=C.target.selectionStart,this.compositionEnd=C.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(S.copiedText=this.getSelectedText(),S.copiedTextStyle=S.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(C){return C&&C.clipboardData||S.window.clipboardData},_getWidthBeforeCursor:function(C,m){var g,v=this._getLineLeftOffset(C);return m>0&&(v+=(g=this.__charBounds[C][m-1]).left+g.width),v},getDownCursorOffset:function(C,m){var v=this._getSelectionForOffset(C,m),g=this.get2DCursorLocation(v),d=g.lineIndex;if(d===this._textLines.length-1||C.metaKey||34===C.keyCode)return this._text.length-v;var h=g.charIndex,c=this._getWidthBeforeCursor(d,h),f=this._getIndexOnLine(d+1,c);return this._textLines[d].slice(h).length+f+1+this.missingNewlineOffset(d)},_getSelectionForOffset:function(C,m){return C.shiftKey&&this.selectionStart!==this.selectionEnd&&m?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(C,m){var v=this._getSelectionForOffset(C,m),g=this.get2DCursorLocation(v),d=g.lineIndex;if(0===d||C.metaKey||33===C.keyCode)return-v;var h=g.charIndex,c=this._getWidthBeforeCursor(d,h),f=this._getIndexOnLine(d-1,c),_=this._textLines[d].slice(0,h),u=this.missingNewlineOffset(d-1);return-this._textLines[d-1].length+f-_.length+(1-u)},_getIndexOnLine:function(C,m){for(var c,f,v=this._textLines[C],d=this._getLineLeftOffset(C),h=0,_=0,u=v.length;_<u;_++)if((d+=c=this.__charBounds[C][_].width)>m){f=!0;var x=d,T=Math.abs(d-c-m);h=Math.abs(x-m)<T?_:_-1;break}return f||(h=v.length-1),h},moveCursorDown:function(C){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",C)},moveCursorUp:function(C){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",C)},_moveCursorUpOrDown:function(C,m){var g=this["get"+C+"CursorOffset"](m,"right"===this._selectionDirection);m.shiftKey?this.moveCursorWithShift(g):this.moveCursorWithoutShift(g),0!==g&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(C){return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,"left"===this._selectionDirection?this.selectionStart+C:this.selectionEnd+C),0!==C},moveCursorWithoutShift:function(C){return C<0?(this.selectionStart+=C,this.selectionEnd=this.selectionStart):(this.selectionEnd+=C,this.selectionStart=this.selectionEnd),0!==C},moveCursorLeft:function(C){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",C)},_move:function(C,m,v){var g;if(C.altKey)g=this["findWordBoundary"+v](this[m]);else{if(!C.metaKey&&35!==C.keyCode&&36!==C.keyCode)return this[m]+="Left"===v?-1:1,!0;g=this["findLineBoundary"+v](this[m])}if(void 0!==g&&this[m]!==g)return this[m]=g,!0},_moveLeft:function(C,m){return this._move(C,m,"Left")},_moveRight:function(C,m){return this._move(C,m,"Right")},moveCursorLeftWithoutShift:function(C){var m=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(m=this._moveLeft(C,"selectionStart")),this.selectionEnd=this.selectionStart,m},moveCursorLeftWithShift:function(C){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(C,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(C,"selectionStart")):void 0},moveCursorRight:function(C){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",C)},_moveCursorLeftOrRight:function(C,m){var v="moveCursor"+C+"With";this._currentCursorOpacity=1,this[v+=m.shiftKey?"Shift":"outShift"](m)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(C){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(C,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(C,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(C){var m=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(m=this._moveRight(C,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,m},removeChars:function(C,m){void 0===m&&(m=C+1),this.removeStyleFromTo(C,m),this._text.splice(C,m-C),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(C,m,v,g){void 0===g&&(g=v),g>v&&this.removeStyleFromTo(v,g);var d=S.util.string.graphemeSplit(C);this.insertNewStyleBlock(d,v,m),this._text=[].concat(this._text.slice(0,v),d,this._text.slice(g)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var C=S.util.toFixed,m=/  +/g;S.util.object.extend(S.Text.prototype,{_toSVG:function(){var v=this._getSVGLeftTopOffsets(),g=this._getSVGTextAndBg(v.textTop,v.textLeft);return this._wrapSVGTextAndBg(g)},toSVG:function(v){return this._createBaseSVGMarkup(this._toSVG(),{reviver:v,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(v){var d=this.getSvgTextDecoration(this);return[v.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",d?'text-decoration="'+d+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",v.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(v,g){var f,d=[],h=[],c=v;this._setSVGBg(h);for(var _=0,u=this._textLines.length;_<u;_++)f=this._getLineLeftOffset(_),(this.textBackgroundColor||this.styleHas("textBackgroundColor",_))&&this._setSVGTextLineBg(h,_,g+f,c),this._setSVGTextLineText(d,_,g+f,c),c+=this.getHeightOfLine(_);return{textSpans:d,textBgRects:h}},_createTextCharSpan:function(v,g,d,h){var c=v!==v.trim()||v.match(m),f=this.getSvgSpanStyles(g,c),_=f?'style="'+f+'"':"",u=g.deltaY,y="",x=S.Object.NUM_FRACTION_DIGITS;return u&&(y=' dy="'+C(u,x)+'" '),['<tspan x="',C(d,x),'" y="',C(h,x),'" ',y,_,">",S.util.string.escapeXml(v),"</tspan>"].join("")},_setSVGTextLineText:function(v,g,d,h){var _,u,x,T,H,c=this.getHeightOfLine(g),f=-1!==this.textAlign.indexOf("justify"),y="",E=0,L=this._textLines[g];h+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var U=0,Q=L.length-1;U<=Q;U++)H=U===Q||this.charSpacing,y+=L[U],x=this.__charBounds[g][U],0===E?(d+=x.kernedWidth-x.width,E+=x.width):E+=x.kernedWidth,f&&!H&&this._reSpaceAndTab.test(L[U])&&(H=!0),H||(_=_||this.getCompleteStyleDeclaration(g,U),u=this.getCompleteStyleDeclaration(g,U+1),H=S.util.hasStyleChanged(_,u,!0)),H&&(T=this._getStyleDeclaration(g,U)||{},v.push(this._createTextCharSpan(y,T,d,h)),y="",_=u,d+=E,E=0)},_pushTextBgRect:function(v,g,d,h,c,f){var _=S.Object.NUM_FRACTION_DIGITS;v.push("\t\t<rect ",this._getFillAttributes(g),' x="',C(d,_),'" y="',C(h,_),'" width="',C(c,_),'" height="',C(f,_),'"></rect>\n')},_setSVGTextLineBg:function(v,g,d,h){for(var y,x,c=this._textLines[g],f=this.getHeightOfLine(g)/this.lineHeight,_=0,u=0,T=this.getValueOfPropertyAt(g,0,"textBackgroundColor"),E=0,L=c.length;E<L;E++)y=this.__charBounds[g][E],(x=this.getValueOfPropertyAt(g,E,"textBackgroundColor"))!==T?(T&&this._pushTextBgRect(v,T,d+u,h,_,f),u=y.left,_=y.width,T=x):_+=y.kernedWidth;x&&this._pushTextBgRect(v,x,d+u,h,_,f)},_getFillAttributes:function(v){var g=v&&"string"==typeof v?new S.Color(v):"";return g&&g.getSource()&&1!==g.getAlpha()?'opacity="'+g.getAlpha()+'" fill="'+g.setAlpha(1).toRgb()+'"':'fill="'+v+'"'},_getSVGLineTopOffset:function(v){for(var d,g=0,h=0;h<v;h++)g+=this.getHeightOfLine(h);return d=this.getHeightOfLine(h),{lineTop:g,offset:(this._fontSizeMult-this._fontSizeFraction)*d/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(v){return S.Object.prototype.getSvgStyles.call(this,v)+" white-space: pre;"}})}(),function(C){"use strict";var m=C.fabric||(C.fabric={});m.Textbox=m.util.createClass(m.IText,m.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:m.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(v){for(var g=0,d=0,h=0,c={},f=0;f<v.graphemeLines.length;f++)"\n"===v.graphemeText[h]&&f>0?(d=0,h++,g++):!this.splitByGrapheme&&this._reSpaceAndTab.test(v.graphemeText[h])&&f>0&&(d++,h++),c[f]={line:g,offset:d},h+=v.graphemeLines[f].length,d+=v.graphemeLines[f].length;return c},styleHas:function(v,g){if(this._styleMap&&!this.isWrapping){var d=this._styleMap[g];d&&(g=d.line)}return m.Text.prototype.styleHas.call(this,v,g)},isEmptyStyles:function(v){if(!this.styles)return!0;var h,c,g=0,f=!1,_=this._styleMap[v],u=this._styleMap[v+1];for(var y in _&&(v=_.line,g=_.offset),u&&(f=u.line===v,h=u.offset),c=void 0===v?this.styles:{line:this.styles[v]})for(var x in c[y])if(x>=g&&(!f||x<h))for(var T in c[y][x])return!1;return!0},_getStyleDeclaration:function(v,g){if(this._styleMap&&!this.isWrapping){var d=this._styleMap[v];if(!d)return null;v=d.line,g=d.offset+g}return this.callSuper("_getStyleDeclaration",v,g)},_setStyleDeclaration:function(v,g,d){var h=this._styleMap[v];this.styles[v=h.line][g=h.offset+g]=d},_deleteStyleDeclaration:function(v,g){var d=this._styleMap[v];delete this.styles[v=d.line][g=d.offset+g]},_getLineStyle:function(v){return!!this.styles[this._styleMap[v].line]},_setLineStyle:function(v){this.styles[this._styleMap[v].line]={}},_wrapText:function(v,g){var h,d=[];for(this.isWrapping=!0,h=0;h<v.length;h++)d=d.concat(this._wrapLine(v[h],h,g));return this.isWrapping=!1,d},_measureWord:function(v,g,d){var c,h=0;d=d||0;for(var _=0,u=v.length;_<u;_++)h+=this._getGraphemeBox(v[_],g,_+d,c,!0).kernedWidth,c=v[_];return h},_wrapLine:function(v,g,d,we){var c=0,f=this.splitByGrapheme,_=[],u=[],y=f?m.util.string.graphemeSplit(v):v.split(this._wordJoiners),x="",T=0,E=f?"":" ",L=0,H=0,U=0,Q=!0,de=this._getWidthOfCharSpacing();we=we||0,0===y.length&&y.push([]),d-=we;for(var Ee=0;Ee<y.length;Ee++)x=f?y[Ee]:m.util.string.graphemeSplit(y[Ee]),L=this._measureWord(x,g,T),T+=x.length,(c+=H+L-de)>d&&!Q?(_.push(u),u=[],c=L,Q=!0):c+=de,!Q&&!f&&u.push(E),u=u.concat(x),H=f?0:this._measureWord([E],g,T),T++,Q=!1,L>U&&(U=L);return Ee&&_.push(u),U+we>this.dynamicMinWidth&&(this.dynamicMinWidth=U-de+we),_},isEndOfWrapping:function(v){return!this._styleMap[v+1]||this._styleMap[v+1].line!==this._styleMap[v].line},missingNewlineOffset:function(v){return this.splitByGrapheme?this.isEndOfWrapping(v)?1:0:1},_splitTextIntoLines:function(v){for(var g=m.Text.prototype._splitTextIntoLines.call(this,v),d=this._wrapText(g.lines,this.width),h=new Array(d.length),c=0;c<d.length;c++)h[c]=d[c].join("");return g.lines=h,g.graphemeLines=d,g},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var v={};for(var g in this._styleMap)this._textLines[g]&&(v[this._styleMap[g].line]=1);for(var g in this.styles)v[g]||delete this.styles[g]},toObject:function(v){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(v))}}),m.Textbox.fromObject=function(v,g){var d=m.util.stylesFromArray(v.styles,v.text),h=Object.assign({},v,{styles:d});return m.Object._fromObject("Textbox",h,g,"text")}}(ht),function(){var C=S.controlsUtils,m=C.scaleSkewCursorStyleHandler,v=C.scaleCursorStyleHandler,g=C.scalingEqually,d=C.scalingYOrSkewingX,h=C.scalingXOrSkewingY,c=C.scaleOrSkewActionName,f=S.Object.prototype.controls;if(f.ml=new S.Control({x:-.5,y:0,cursorStyleHandler:m,actionHandler:h,getActionName:c}),f.mr=new S.Control({x:.5,y:0,cursorStyleHandler:m,actionHandler:h,getActionName:c}),f.mb=new S.Control({x:0,y:.5,cursorStyleHandler:m,actionHandler:d,getActionName:c}),f.mt=new S.Control({x:0,y:-.5,cursorStyleHandler:m,actionHandler:d,getActionName:c}),f.tl=new S.Control({x:-.5,y:-.5,cursorStyleHandler:v,actionHandler:g}),f.tr=new S.Control({x:.5,y:-.5,cursorStyleHandler:v,actionHandler:g}),f.bl=new S.Control({x:-.5,y:.5,cursorStyleHandler:v,actionHandler:g}),f.br=new S.Control({x:.5,y:.5,cursorStyleHandler:v,actionHandler:g}),f.mtr=new S.Control({x:0,y:-.5,actionHandler:C.rotationWithSnapping,cursorStyleHandler:C.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),S.Textbox){var _=S.Textbox.prototype.controls={};_.mtr=f.mtr,_.tr=f.tr,_.br=f.br,_.tl=f.tl,_.bl=f.bl,_.mt=f.mt,_.mb=f.mb,_.mr=new S.Control({x:.5,y:0,actionHandler:C.changeWidth,cursorStyleHandler:m,actionName:"resizing"}),_.ml=new S.Control({x:-.5,y:0,actionHandler:C.changeWidth,cursorStyleHandler:m,actionName:"resizing"})}}()},327:function(cs,ht){var oo;void 0!==(oo=function(){"use strict";function Ki(g,d,h){var c=new XMLHttpRequest;c.open("GET",g),c.responseType="blob",c.onload=function(){v(c.response,d,h)},c.onerror=function(){console.error("could not download file")},c.send()}function mt(g){var d=new XMLHttpRequest;d.open("HEAD",g,!1);try{d.send()}catch(h){}return 200<=d.status&&299>=d.status}function pr(g){try{g.dispatchEvent(new MouseEvent("click"))}catch(h){var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(d)}}var C="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,m=C.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=C.saveAs||("object"!=typeof window||window!==C?function(){}:"download"in HTMLAnchorElement.prototype&&!m?function(g,d,h){var c=C.URL||C.webkitURL,f=document.createElement("a");f.download=d=d||g.name||"download",f.rel="noopener","string"==typeof g?(f.href=g,f.origin===location.origin?pr(f):mt(f.href)?Ki(g,d,h):pr(f,f.target="_blank")):(f.href=c.createObjectURL(g),setTimeout(function(){c.revokeObjectURL(f.href)},4e4),setTimeout(function(){pr(f)},0))}:"msSaveOrOpenBlob"in navigator?function(g,d,h){if(d=d||g.name||"download","string"!=typeof g)navigator.msSaveOrOpenBlob(function so(g,d){return void 0===d?d={autoBom:!1}:"object"!=typeof d&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\ufeff",g],{type:g.type}):g}(g,h),d);else if(mt(g))Ki(g,d,h);else{var c=document.createElement("a");c.href=g,c.target="_blank",setTimeout(function(){pr(c)})}}:function(g,d,h,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof g)return Ki(g,d,h);var f="application/octet-stream"===g.type,_=/constructor/i.test(C.HTMLElement)||C.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||f&&_||m)&&"undefined"!=typeof FileReader){var y=new FileReader;y.onloadend=function(){var E=y.result;E=u?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=E:location=E,c=null},y.readAsDataURL(g)}else{var x=C.URL||C.webkitURL,T=x.createObjectURL(g);c?c.location=T:location.href=T,c=null,setTimeout(function(){x.revokeObjectURL(T)},4e4)}});C.saveAs=v.saveAs=v,cs.exports=v}.apply(ht,[]))&&(cs.exports=oo)},960:()=>{},759:()=>{},272:()=>{}},cs=>{cs(cs.s=435)}]);